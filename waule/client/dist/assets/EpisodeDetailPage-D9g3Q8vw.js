import{g as Ye,f as ae,e as qe,d as Ve,u as Qe,r as nt,j as e}from"./react-vendor-BvY2dB7B.js";import{b as Tt,c as mt,d as oe}from"./index-mu4tELD_.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";function se(At){throw new Error('Could not dynamically require "'+At+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ce={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(At,St){(function(v){At.exports=v()})(function(){return function v(Z,N,d){function c(k,w){if(!N[k]){if(!Z[k]){var m=typeof se=="function"&&se;if(!w&&m)return m(k,!0);if(n)return n(k,!0);var b=new Error("Cannot find module '"+k+"'");throw b.code="MODULE_NOT_FOUND",b}var s=N[k]={exports:{}};Z[k][0].call(s.exports,function(p){var i=Z[k][1][p];return c(i||p)},s,s.exports,v,Z,N,d)}return N[k].exports}for(var n=typeof se=="function"&&se,u=0;u<d.length;u++)c(d[u]);return c}({1:[function(v,Z,N){var d=v("./utils"),c=v("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";N.encode=function(u){for(var k,w,m,b,s,p,i,h=[],o=0,x=u.length,_=x,S=d.getTypeOf(u)!=="string";o<u.length;)_=x-o,m=S?(k=u[o++],w=o<x?u[o++]:0,o<x?u[o++]:0):(k=u.charCodeAt(o++),w=o<x?u.charCodeAt(o++):0,o<x?u.charCodeAt(o++):0),b=k>>2,s=(3&k)<<4|w>>4,p=1<_?(15&w)<<2|m>>6:64,i=2<_?63&m:64,h.push(n.charAt(b)+n.charAt(s)+n.charAt(p)+n.charAt(i));return h.join("")},N.decode=function(u){var k,w,m,b,s,p,i=0,h=0,o="data:";if(u.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var x,_=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===n.charAt(64)&&_--,u.charAt(u.length-2)===n.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=c.uint8array?new Uint8Array(0|_):new Array(0|_);i<u.length;)k=n.indexOf(u.charAt(i++))<<2|(b=n.indexOf(u.charAt(i++)))>>4,w=(15&b)<<4|(s=n.indexOf(u.charAt(i++)))>>2,m=(3&s)<<6|(p=n.indexOf(u.charAt(i++))),x[h++]=k,s!==64&&(x[h++]=w),p!==64&&(x[h++]=m);return x}},{"./support":30,"./utils":32}],2:[function(v,Z,N){var d=v("./external"),c=v("./stream/DataWorker"),n=v("./stream/Crc32Probe"),u=v("./stream/DataLengthProbe");function k(w,m,b,s,p){this.compressedSize=w,this.uncompressedSize=m,this.crc32=b,this.compression=s,this.compressedContent=p}k.prototype={getContentWorker:function(){var w=new c(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return w.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new c(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},k.createWorkerFrom=function(w,m,b){return w.pipe(new n).pipe(new u("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},Z.exports=k},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(v,Z,N){var d=v("./stream/GenericWorker");N.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},N.DEFLATE=v("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(v,Z,N){var d=v("./utils"),c=function(){for(var n,u=[],k=0;k<256;k++){n=k;for(var w=0;w<8;w++)n=1&n?3988292384^n>>>1:n>>>1;u[k]=n}return u}();Z.exports=function(n,u){return n!==void 0&&n.length?d.getTypeOf(n)!=="string"?function(k,w,m,b){var s=c,p=b+m;k^=-1;for(var i=b;i<p;i++)k=k>>>8^s[255&(k^w[i])];return-1^k}(0|u,n,n.length,0):function(k,w,m,b){var s=c,p=b+m;k^=-1;for(var i=b;i<p;i++)k=k>>>8^s[255&(k^w.charCodeAt(i))];return-1^k}(0|u,n,n.length,0):0}},{"./utils":32}],5:[function(v,Z,N){N.base64=!1,N.binary=!1,N.dir=!1,N.createFolders=!0,N.date=null,N.compression=null,N.compressionOptions=null,N.comment=null,N.unixPermissions=null,N.dosPermissions=null},{}],6:[function(v,Z,N){var d=null;d=typeof Promise<"u"?Promise:v("lie"),Z.exports={Promise:d}},{lie:37}],7:[function(v,Z,N){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=v("pako"),n=v("./utils"),u=v("./stream/GenericWorker"),k=d?"uint8array":"array";function w(m,b){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}N.magic="\b\0",n.inherits(w,u),w.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(k,m.data),!1)},w.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},N.compressWorker=function(m){return new w("Deflate",m)},N.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(v,Z,N){function d(s,p){var i,h="";for(i=0;i<p;i++)h+=String.fromCharCode(255&s),s>>>=8;return h}function c(s,p,i,h,o,x){var _,S,C=s.file,U=s.compression,O=x!==k.utf8encode,P=n.transformTo("string",x(C.name)),R=n.transformTo("string",k.utf8encode(C.name)),L=C.comment,st=n.transformTo("string",x(L)),y=n.transformTo("string",k.utf8encode(L)),B=R.length!==C.name.length,r=y.length!==L.length,D="",ot="",$="",ct=C.dir,G=C.date,it={crc32:0,compressedSize:0,uncompressedSize:0};p&&!i||(it.crc32=s.crc32,it.compressedSize=s.compressedSize,it.uncompressedSize=s.uncompressedSize);var E=0;p&&(E|=8),O||!B&&!r||(E|=2048);var A=0,rt=0;ct&&(A|=16),o==="UNIX"?(rt=798,A|=function(Y,_t){var wt=Y;return Y||(wt=_t?16893:33204),(65535&wt)<<16}(C.unixPermissions,ct)):(rt=20,A|=function(Y){return 63&(Y||0)}(C.dosPermissions)),_=G.getUTCHours(),_<<=6,_|=G.getUTCMinutes(),_<<=5,_|=G.getUTCSeconds()/2,S=G.getUTCFullYear()-1980,S<<=4,S|=G.getUTCMonth()+1,S<<=5,S|=G.getUTCDate(),B&&(ot=d(1,1)+d(w(P),4)+R,D+="up"+d(ot.length,2)+ot),r&&($=d(1,1)+d(w(st),4)+y,D+="uc"+d($.length,2)+$);var Q="";return Q+=`
\0`,Q+=d(E,2),Q+=U.magic,Q+=d(_,2),Q+=d(S,2),Q+=d(it.crc32,4),Q+=d(it.compressedSize,4),Q+=d(it.uncompressedSize,4),Q+=d(P.length,2),Q+=d(D.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Q+P+D,dirRecord:m.CENTRAL_FILE_HEADER+d(rt,2)+Q+d(st.length,2)+"\0\0\0\0"+d(A,4)+d(h,4)+P+D+st}}var n=v("../utils"),u=v("../stream/GenericWorker"),k=v("../utf8"),w=v("../crc32"),m=v("../signature");function b(s,p,i,h){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=i,this.encodeFileName=h,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(b,u),b.prototype.push=function(s){var p=s.meta.percent||0,i=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,u.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:i?(p+100*(i-h-1))/i:100}}))},b.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var p=this.streamFiles&&!s.file.dir;if(p){var i=c(s,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(s){this.accumulate=!1;var p=this.streamFiles&&!s.file.dir,i=c(s,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),p)this.push({data:function(h){return m.DATA_DESCRIPTOR+d(h.crc32,4)+d(h.compressedSize,4)+d(h.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var s=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var i=this.bytesWritten-s,h=function(o,x,_,S,C){var U=n.transformTo("string",C(S));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(o,2)+d(o,2)+d(x,4)+d(_,4)+d(U.length,2)+U}(this.dirRecords.length,i,s,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(s){this._sources.push(s);var p=this;return s.on("data",function(i){p.processChunk(i)}),s.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),s.on("error",function(i){p.error(i)}),this},b.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(s){var p=this._sources;if(!u.prototype.error.call(this,s))return!1;for(var i=0;i<p.length;i++)try{p[i].error(s)}catch{}return!0},b.prototype.lock=function(){u.prototype.lock.call(this);for(var s=this._sources,p=0;p<s.length;p++)s[p].lock()},Z.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(v,Z,N){var d=v("../compressions"),c=v("./ZipFileWorker");N.generateWorker=function(n,u,k){var w=new c(u.streamFiles,k,u.platform,u.encodeFileName),m=0;try{n.forEach(function(b,s){m++;var p=function(x,_){var S=x||_,C=d[S];if(!C)throw new Error(S+" is not a valid compression method !");return C}(s.options.compression,u.compression),i=s.options.compressionOptions||u.compressionOptions||{},h=s.dir,o=s.date;s._compressWorker(p,i).withStreamInfo("file",{name:b,dir:h,date:o,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(w)}),w.entriesCount=m}catch(b){w.error(b)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(v,Z,N){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new d;for(var n in this)typeof this[n]!="function"&&(c[n]=this[n]);return c}}(d.prototype=v("./object")).loadAsync=v("./load"),d.support=v("./support"),d.defaults=v("./defaults"),d.version="3.10.1",d.loadAsync=function(c,n){return new d().loadAsync(c,n)},d.external=v("./external"),Z.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(v,Z,N){var d=v("./utils"),c=v("./external"),n=v("./utf8"),u=v("./zipEntries"),k=v("./stream/Crc32Probe"),w=v("./nodejsUtils");function m(b){return new c.Promise(function(s,p){var i=b.decompressed.getContentWorker().pipe(new k);i.on("error",function(h){p(h)}).on("end",function(){i.streamInfo.crc32!==b.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}Z.exports=function(b,s){var p=this;return s=d.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),w.isNode&&w.isStream(b)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",b,!0,s.optimizedBinaryString,s.base64).then(function(i){var h=new u(s);return h.load(i),h}).then(function(i){var h=[c.Promise.resolve(i)],o=i.files;if(s.checkCRC32)for(var x=0;x<o.length;x++)h.push(m(o[x]));return c.Promise.all(h)}).then(function(i){for(var h=i.shift(),o=h.files,x=0;x<o.length;x++){var _=o[x],S=_.fileNameStr,C=d.resolve(_.fileNameStr);p.file(C,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:s.createFolders}),_.dir||(p.file(C).unsafeOriginalName=S)}return h.zipComment.length&&(p.comment=h.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(v,Z,N){var d=v("../utils"),c=v("../stream/GenericWorker");function n(u,k){c.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(k)}d.inherits(n,c),n.prototype._bindStream=function(u){var k=this;(this._stream=u).pause(),u.on("data",function(w){k.push({data:w,meta:{percent:0}})}).on("error",function(w){k.isPaused?this.generatedError=w:k.error(w)}).on("end",function(){k.isPaused?k._upstreamEnded=!0:k.end()})},n.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Z.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(v,Z,N){var d=v("readable-stream").Readable;function c(n,u,k){d.call(this,u),this._helper=n;var w=this;n.on("data",function(m,b){w.push(m)||w._helper.pause(),k&&k(b)}).on("error",function(m){w.emit("error",m)}).on("end",function(){w.push(null)})}v("../utils").inherits(c,d),c.prototype._read=function(){this._helper.resume()},Z.exports=c},{"../utils":32,"readable-stream":16}],14:[function(v,Z,N){Z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,c);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,c)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var c=new Buffer(d);return c.fill(0),c},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(v,Z,N){function d(C,U,O){var P,R=n.getTypeOf(U),L=n.extend(O||{},w);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(C=o(C)),L.createFolders&&(P=h(C))&&x.call(this,P,!0);var st=R==="string"&&L.binary===!1&&L.base64===!1;O&&O.binary!==void 0||(L.binary=!st),(U instanceof m&&U.uncompressedSize===0||L.dir||!U||U.length===0)&&(L.base64=!1,L.binary=!0,U="",L.compression="STORE",R="string");var y=null;y=U instanceof m||U instanceof u?U:p.isNode&&p.isStream(U)?new i(C,U):n.prepareContent(C,U,L.binary,L.optimizedBinaryString,L.base64);var B=new b(C,y,L);this.files[C]=B}var c=v("./utf8"),n=v("./utils"),u=v("./stream/GenericWorker"),k=v("./stream/StreamHelper"),w=v("./defaults"),m=v("./compressedObject"),b=v("./zipObject"),s=v("./generate"),p=v("./nodejsUtils"),i=v("./nodejs/NodejsStreamInputAdapter"),h=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var U=C.lastIndexOf("/");return 0<U?C.substring(0,U):""},o=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},x=function(C,U){return U=U!==void 0?U:w.createFolders,C=o(C),this.files[C]||d.call(this,C,null,{dir:!0,createFolders:U}),this.files[C]};function _(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var U,O,P;for(U in this.files)P=this.files[U],(O=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&C(O,P)},filter:function(C){var U=[];return this.forEach(function(O,P){C(O,P)&&U.push(P)}),U},file:function(C,U,O){if(arguments.length!==1)return C=this.root+C,d.call(this,C,U,O),this;if(_(C)){var P=C;return this.filter(function(L,st){return!st.dir&&P.test(L)})}var R=this.files[this.root+C];return R&&!R.dir?R:null},folder:function(C){if(!C)return this;if(_(C))return this.filter(function(R,L){return L.dir&&C.test(R)});var U=this.root+C,O=x.call(this,U),P=this.clone();return P.root=O.name,P},remove:function(C){C=this.root+C;var U=this.files[C];if(U||(C.slice(-1)!=="/"&&(C+="/"),U=this.files[C]),U&&!U.dir)delete this.files[C];else for(var O=this.filter(function(R,L){return L.name.slice(0,C.length)===C}),P=0;P<O.length;P++)delete this.files[O[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var U,O={};try{if((O=n.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");n.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var P=O.comment||this.comment||"";U=s.generateWorker(this,O,P)}catch(R){(U=new u("error")).error(R)}return new k(U,O.type||"string",O.mimeType)},generateAsync:function(C,U){return this.generateInternalStream(C).accumulate(U)},generateNodeStream:function(C,U){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(U)}};Z.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(v,Z,N){Z.exports=v("stream")},{stream:void 0}],17:[function(v,Z,N){var d=v("./DataReader");function c(n){d.call(this,n);for(var u=0;u<this.data.length;u++)n[u]=255&n[u]}v("../utils").inherits(c,d),c.prototype.byteAt=function(n){return this.data[this.zero+n]},c.prototype.lastIndexOfSignature=function(n){for(var u=n.charCodeAt(0),k=n.charCodeAt(1),w=n.charCodeAt(2),m=n.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===u&&this.data[b+1]===k&&this.data[b+2]===w&&this.data[b+3]===m)return b-this.zero;return-1},c.prototype.readAndCheckSignature=function(n){var u=n.charCodeAt(0),k=n.charCodeAt(1),w=n.charCodeAt(2),m=n.charCodeAt(3),b=this.readData(4);return u===b[0]&&k===b[1]&&w===b[2]&&m===b[3]},c.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},Z.exports=c},{"../utils":32,"./DataReader":18}],18:[function(v,Z,N){var d=v("../utils");function c(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var u,k=0;for(this.checkOffset(n),u=this.index+n-1;u>=this.index;u--)k=(k<<8)+this.byteAt(u);return this.index+=n,k},readString:function(n){return d.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},Z.exports=c},{"../utils":32}],19:[function(v,Z,N){var d=v("./Uint8ArrayReader");function c(n){d.call(this,n)}v("../utils").inherits(c,d),c.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},Z.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(v,Z,N){var d=v("./DataReader");function c(n){d.call(this,n)}v("../utils").inherits(c,d),c.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},c.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},c.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},c.prototype.readData=function(n){this.checkOffset(n);var u=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},Z.exports=c},{"../utils":32,"./DataReader":18}],21:[function(v,Z,N){var d=v("./ArrayReader");function c(n){d.call(this,n)}v("../utils").inherits(c,d),c.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,u},Z.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(v,Z,N){var d=v("../utils"),c=v("../support"),n=v("./ArrayReader"),u=v("./StringReader"),k=v("./NodeBufferReader"),w=v("./Uint8ArrayReader");Z.exports=function(m){var b=d.getTypeOf(m);return d.checkSupport(b),b!=="string"||c.uint8array?b==="nodebuffer"?new k(m):c.uint8array?new w(d.transformTo("uint8array",m)):new n(d.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(v,Z,N){N.LOCAL_FILE_HEADER="PK",N.CENTRAL_FILE_HEADER="PK",N.CENTRAL_DIRECTORY_END="PK",N.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",N.ZIP64_CENTRAL_DIRECTORY_END="PK",N.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(v,Z,N){var d=v("./GenericWorker"),c=v("../utils");function n(u){d.call(this,"ConvertWorker to "+u),this.destType=u}c.inherits(n,d),n.prototype.processChunk=function(u){this.push({data:c.transformTo(this.destType,u.data),meta:u.meta})},Z.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(v,Z,N){var d=v("./GenericWorker"),c=v("../crc32");function n(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}v("../utils").inherits(n,d),n.prototype.processChunk=function(u){this.streamInfo.crc32=c(u.data,this.streamInfo.crc32||0),this.push(u)},Z.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(v,Z,N){var d=v("../utils"),c=v("./GenericWorker");function n(u){c.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}d.inherits(n,c),n.prototype.processChunk=function(u){if(u){var k=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=k+u.data.length}c.prototype.processChunk.call(this,u)},Z.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(v,Z,N){var d=v("../utils"),c=v("./GenericWorker");function n(u){c.call(this,"DataWorker");var k=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(w){k.dataIsReady=!0,k.data=w,k.max=w&&w.length||0,k.type=d.getTypeOf(w),k.isPaused||k._tickAndRepeat()},function(w){k.error(w)})}d.inherits(n,c),n.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,k=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,k);break;case"uint8array":u=this.data.subarray(this.index,k);break;case"array":case"nodebuffer":u=this.data.slice(this.index,k)}return this.index=k,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},Z.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(v,Z,N){function d(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,n){return this._listeners[c].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,n){if(this._listeners[c])for(var u=0;u<this._listeners[c].length;u++)this._listeners[c][u].call(this,n)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var n=this;return c.on("data",function(u){n.processChunk(u)}),c.on("end",function(){n.end()}),c.on("error",function(u){n.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,n){return this.extraStreamInfo[c]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},Z.exports=d},{}],29:[function(v,Z,N){var d=v("../utils"),c=v("./ConvertWorker"),n=v("./GenericWorker"),u=v("../base64"),k=v("../support"),w=v("../external"),m=null;if(k.nodestream)try{m=v("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(p,i){return new w.Promise(function(h,o){var x=[],_=p._internalType,S=p._outputType,C=p._mimeType;p.on("data",function(U,O){x.push(U),i&&i(O)}).on("error",function(U){x=[],o(U)}).on("end",function(){try{var U=function(O,P,R){switch(O){case"blob":return d.newBlob(d.transformTo("arraybuffer",P),R);case"base64":return u.encode(P);default:return d.transformTo(O,P)}}(S,function(O,P){var R,L=0,st=null,y=0;for(R=0;R<P.length;R++)y+=P[R].length;switch(O){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(st=new Uint8Array(y),R=0;R<P.length;R++)st.set(P[R],L),L+=P[R].length;return st;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+O+"'")}}(_,x),C);h(U)}catch(O){o(O)}x=[]}).resume()})}function s(p,i,h){var o=i;switch(i){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=i,this._mimeType=h,d.checkSupport(o),this._worker=p.pipe(new c(o)),p.lock()}catch(x){this._worker=new n("error"),this._worker.error(x)}}s.prototype={accumulate:function(p){return b(this,p)},on:function(p,i){var h=this;return p==="data"?this._worker.on(p,function(o){i.call(h,o.data,o.meta)}):this._worker.on(p,function(){d.delay(i,arguments,h)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},p)}},Z.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(v,Z,N){if(N.base64=!0,N.array=!0,N.string=!0,N.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",N.nodebuffer=typeof Buffer<"u",N.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")N.blob=!1;else{var d=new ArrayBuffer(0);try{N.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(d),N.blob=c.getBlob("application/zip").size===0}catch{N.blob=!1}}}try{N.nodestream=!!v("readable-stream").Readable}catch{N.nodestream=!1}},{"readable-stream":16}],31:[function(v,Z,N){for(var d=v("./utils"),c=v("./support"),n=v("./nodejsUtils"),u=v("./stream/GenericWorker"),k=new Array(256),w=0;w<256;w++)k[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;k[254]=k[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function b(){u.call(this,"utf-8 encode")}N.utf8encode=function(s){return c.nodebuffer?n.newBufferFrom(s,"utf-8"):function(p){var i,h,o,x,_,S=p.length,C=0;for(x=0;x<S;x++)(64512&(h=p.charCodeAt(x)))==55296&&x+1<S&&(64512&(o=p.charCodeAt(x+1)))==56320&&(h=65536+(h-55296<<10)+(o-56320),x++),C+=h<128?1:h<2048?2:h<65536?3:4;for(i=c.uint8array?new Uint8Array(C):new Array(C),x=_=0;_<C;x++)(64512&(h=p.charCodeAt(x)))==55296&&x+1<S&&(64512&(o=p.charCodeAt(x+1)))==56320&&(h=65536+(h-55296<<10)+(o-56320),x++),h<128?i[_++]=h:(h<2048?i[_++]=192|h>>>6:(h<65536?i[_++]=224|h>>>12:(i[_++]=240|h>>>18,i[_++]=128|h>>>12&63),i[_++]=128|h>>>6&63),i[_++]=128|63&h);return i}(s)},N.utf8decode=function(s){return c.nodebuffer?d.transformTo("nodebuffer",s).toString("utf-8"):function(p){var i,h,o,x,_=p.length,S=new Array(2*_);for(i=h=0;i<_;)if((o=p[i++])<128)S[h++]=o;else if(4<(x=k[o]))S[h++]=65533,i+=x-1;else{for(o&=x===2?31:x===3?15:7;1<x&&i<_;)o=o<<6|63&p[i++],x--;1<x?S[h++]=65533:o<65536?S[h++]=o:(o-=65536,S[h++]=55296|o>>10&1023,S[h++]=56320|1023&o)}return S.length!==h&&(S.subarray?S=S.subarray(0,h):S.length=h),d.applyFromCharCode(S)}(s=d.transformTo(c.uint8array?"uint8array":"array",s))},d.inherits(m,u),m.prototype.processChunk=function(s){var p=d.transformTo(c.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var i=p;(p=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),p.set(i,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var h=function(x,_){var S;for((_=_||x.length)>x.length&&(_=x.length),S=_-1;0<=S&&(192&x[S])==128;)S--;return S<0||S===0?_:S+k[x[S]]>_?S:_}(p),o=p;h!==p.length&&(c.uint8array?(o=p.subarray(0,h),this.leftOver=p.subarray(h,p.length)):(o=p.slice(0,h),this.leftOver=p.slice(h,p.length))),this.push({data:N.utf8decode(o),meta:s.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:N.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},N.Utf8DecodeWorker=m,d.inherits(b,u),b.prototype.processChunk=function(s){this.push({data:N.utf8encode(s.data),meta:s.meta})},N.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(v,Z,N){var d=v("./support"),c=v("./base64"),n=v("./nodejsUtils"),u=v("./external");function k(i){return i}function w(i,h){for(var o=0;o<i.length;++o)h[o]=255&i.charCodeAt(o);return h}v("setimmediate"),N.newBlob=function(i,h){N.checkSupport("blob");try{return new Blob([i],{type:h})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(i),o.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(i,h,o){var x=[],_=0,S=i.length;if(S<=o)return String.fromCharCode.apply(null,i);for(;_<S;)h==="array"||h==="nodebuffer"?x.push(String.fromCharCode.apply(null,i.slice(_,Math.min(_+o,S)))):x.push(String.fromCharCode.apply(null,i.subarray(_,Math.min(_+o,S)))),_+=o;return x.join("")},stringifyByChar:function(i){for(var h="",o=0;o<i.length;o++)h+=String.fromCharCode(i[o]);return h},applyCanBeUsed:{uint8array:function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function b(i){var h=65536,o=N.getTypeOf(i),x=!0;if(o==="uint8array"?x=m.applyCanBeUsed.uint8array:o==="nodebuffer"&&(x=m.applyCanBeUsed.nodebuffer),x)for(;1<h;)try{return m.stringifyByChunk(i,o,h)}catch{h=Math.floor(h/2)}return m.stringifyByChar(i)}function s(i,h){for(var o=0;o<i.length;o++)h[o]=i[o];return h}N.applyFromCharCode=b;var p={};p.string={string:k,array:function(i){return w(i,new Array(i.length))},arraybuffer:function(i){return p.string.uint8array(i).buffer},uint8array:function(i){return w(i,new Uint8Array(i.length))},nodebuffer:function(i){return w(i,n.allocBuffer(i.length))}},p.array={string:b,array:k,arraybuffer:function(i){return new Uint8Array(i).buffer},uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(i)}},p.arraybuffer={string:function(i){return b(new Uint8Array(i))},array:function(i){return s(new Uint8Array(i),new Array(i.byteLength))},arraybuffer:k,uint8array:function(i){return new Uint8Array(i)},nodebuffer:function(i){return n.newBufferFrom(new Uint8Array(i))}},p.uint8array={string:b,array:function(i){return s(i,new Array(i.length))},arraybuffer:function(i){return i.buffer},uint8array:k,nodebuffer:function(i){return n.newBufferFrom(i)}},p.nodebuffer={string:b,array:function(i){return s(i,new Array(i.length))},arraybuffer:function(i){return p.nodebuffer.uint8array(i).buffer},uint8array:function(i){return s(i,new Uint8Array(i.length))},nodebuffer:k},N.transformTo=function(i,h){if(h=h||"",!i)return h;N.checkSupport(i);var o=N.getTypeOf(h);return p[o][i](h)},N.resolve=function(i){for(var h=i.split("/"),o=[],x=0;x<h.length;x++){var _=h[x];_==="."||_===""&&x!==0&&x!==h.length-1||(_===".."?o.pop():o.push(_))}return o.join("/")},N.getTypeOf=function(i){return typeof i=="string"?"string":Object.prototype.toString.call(i)==="[object Array]"?"array":d.nodebuffer&&n.isBuffer(i)?"nodebuffer":d.uint8array&&i instanceof Uint8Array?"uint8array":d.arraybuffer&&i instanceof ArrayBuffer?"arraybuffer":void 0},N.checkSupport=function(i){if(!d[i.toLowerCase()])throw new Error(i+" is not supported by this platform")},N.MAX_VALUE_16BITS=65535,N.MAX_VALUE_32BITS=-1,N.pretty=function(i){var h,o,x="";for(o=0;o<(i||"").length;o++)x+="\\x"+((h=i.charCodeAt(o))<16?"0":"")+h.toString(16).toUpperCase();return x},N.delay=function(i,h,o){setImmediate(function(){i.apply(o||null,h||[])})},N.inherits=function(i,h){function o(){}o.prototype=h.prototype,i.prototype=new o},N.extend=function(){var i,h,o={};for(i=0;i<arguments.length;i++)for(h in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],h)&&o[h]===void 0&&(o[h]=arguments[i][h]);return o},N.prepareContent=function(i,h,o,x,_){return u.Promise.resolve(h).then(function(S){return d.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new u.Promise(function(C,U){var O=new FileReader;O.onload=function(P){C(P.target.result)},O.onerror=function(P){U(P.target.error)},O.readAsArrayBuffer(S)}):S}).then(function(S){var C=N.getTypeOf(S);return C?(C==="arraybuffer"?S=N.transformTo("uint8array",S):C==="string"&&(_?S=c.decode(S):o&&x!==!0&&(S=function(U){return w(U,d.uint8array?new Uint8Array(U.length):new Array(U.length))}(S))),S):u.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(v,Z,N){var d=v("./reader/readerFor"),c=v("./utils"),n=v("./signature"),u=v("./zipEntry"),k=v("./support");function w(m){this.files=[],this.loadOptions=m}w.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(b)+", expected "+c.pretty(m)+")")}},isSignature:function(m,b){var s=this.reader.index;this.reader.setIndex(m);var p=this.reader.readString(4)===b;return this.reader.setIndex(s),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=k.uint8array?"uint8array":"array",s=c.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,s,p=this.zip64EndOfCentralSize-44;0<p;)m=this.reader.readInt(2),b=this.reader.readInt(4),s=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var p=b-s;if(0<p)this.isSignature(b,n.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(m){this.reader=d(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Z.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(v,Z,N){var d=v("./reader/readerFor"),c=v("./utils"),n=v("./compressedObject"),u=v("./crc32"),k=v("./utf8"),w=v("./compressions"),m=v("./support");function b(s,p){this.options=s,this.loadOptions=p}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var p,i;if(s.skip(22),this.fileNameLength=s.readInt(2),i=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(i),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(h){for(var o in w)if(Object.prototype.hasOwnProperty.call(w,o)&&w[o].magic===h)return w[o];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,p,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var p=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(p),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=d(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var p,i,h,o=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<o;)p=s.readInt(2),i=s.readInt(2),h=s.readData(i),this.extraFields[p]={id:p,length:i,value:h};s.setIndex(o)},handleUTF8:function(){var s=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=k.utf8decode(this.fileName),this.fileCommentStr=k.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var i=c.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var o=c.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var p=d(s.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:k.utf8decode(p.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var p=d(s.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:k.utf8decode(p.readData(s.length-5))}return null}},Z.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(v,Z,N){function d(p,i,h){this.name=p,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=i,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var c=v("./stream/StreamHelper"),n=v("./stream/DataWorker"),u=v("./utf8"),k=v("./compressedObject"),w=v("./stream/GenericWorker");d.prototype={internalStream:function(p){var i=null,h="string";try{if(!p)throw new Error("No output type specified.");var o=(h=p.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),i=this._decompressWorker();var x=!this._dataBinary;x&&!o&&(i=i.pipe(new u.Utf8EncodeWorker)),!x&&o&&(i=i.pipe(new u.Utf8DecodeWorker))}catch(_){(i=new w("error")).error(_)}return new c(i,h,"")},async:function(p,i){return this.internalStream(p).accumulate(i)},nodeStream:function(p,i){return this.internalStream(p||"nodebuffer").toNodejsStream(i)},_compressWorker:function(p,i){if(this._data instanceof k&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new u.Utf8EncodeWorker)),k.createWorkerFrom(h,p,i)},_decompressWorker:function(){return this._data instanceof k?this._data.getContentWorker():this._data instanceof w?this._data:new n(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<m.length;s++)d.prototype[m[s]]=b;Z.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(v,Z,N){(function(d){var c,n,u=d.MutationObserver||d.WebKitMutationObserver;if(u){var k=0,w=new u(p),m=d.document.createTextNode("");w.observe(m,{characterData:!0}),c=function(){m.data=k=++k%2}}else if(d.setImmediate||d.MessageChannel===void 0)c="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var i=d.document.createElement("script");i.onreadystatechange=function(){p(),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},d.document.documentElement.appendChild(i)}:function(){setTimeout(p,0)};else{var b=new d.MessageChannel;b.port1.onmessage=p,c=function(){b.port2.postMessage(0)}}var s=[];function p(){var i,h;n=!0;for(var o=s.length;o;){for(h=s,s=[],i=-1;++i<o;)h[i]();o=s.length}n=!1}Z.exports=function(i){s.push(i)!==1||n||c()}}).call(this,typeof ae<"u"?ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(v,Z,N){var d=v("immediate");function c(){}var n={},u=["REJECTED"],k=["FULFILLED"],w=["PENDING"];function m(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,o!==c&&i(this,o)}function b(o,x,_){this.promise=o,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function s(o,x,_){d(function(){var S;try{S=x(_)}catch(C){return n.reject(o,C)}S===o?n.reject(o,new TypeError("Cannot resolve promise with itself")):n.resolve(o,S)})}function p(o){var x=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof x=="function")return function(){x.apply(o,arguments)}}function i(o,x){var _=!1;function S(O){_||(_=!0,n.reject(o,O))}function C(O){_||(_=!0,n.resolve(o,O))}var U=h(function(){x(C,S)});U.status==="error"&&S(U.value)}function h(o,x){var _={};try{_.value=o(x),_.status="success"}catch(S){_.status="error",_.value=S}return _}(Z.exports=m).prototype.finally=function(o){if(typeof o!="function")return this;var x=this.constructor;return this.then(function(_){return x.resolve(o()).then(function(){return _})},function(_){return x.resolve(o()).then(function(){throw _})})},m.prototype.catch=function(o){return this.then(null,o)},m.prototype.then=function(o,x){if(typeof o!="function"&&this.state===k||typeof x!="function"&&this.state===u)return this;var _=new this.constructor(c);return this.state!==w?s(_,this.state===k?o:x,this.outcome):this.queue.push(new b(_,o,x)),_},b.prototype.callFulfilled=function(o){n.resolve(this.promise,o)},b.prototype.otherCallFulfilled=function(o){s(this.promise,this.onFulfilled,o)},b.prototype.callRejected=function(o){n.reject(this.promise,o)},b.prototype.otherCallRejected=function(o){s(this.promise,this.onRejected,o)},n.resolve=function(o,x){var _=h(p,x);if(_.status==="error")return n.reject(o,_.value);var S=_.value;if(S)i(o,S);else{o.state=k,o.outcome=x;for(var C=-1,U=o.queue.length;++C<U;)o.queue[C].callFulfilled(x)}return o},n.reject=function(o,x){o.state=u,o.outcome=x;for(var _=-1,S=o.queue.length;++_<S;)o.queue[_].callRejected(x);return o},m.resolve=function(o){return o instanceof this?o:n.resolve(new this(c),o)},m.reject=function(o){var x=new this(c);return n.reject(x,o)},m.all=function(o){var x=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=o.length,S=!1;if(!_)return this.resolve([]);for(var C=new Array(_),U=0,O=-1,P=new this(c);++O<_;)R(o[O],O);return P;function R(L,st){x.resolve(L).then(function(y){C[st]=y,++U!==_||S||(S=!0,n.resolve(P,C))},function(y){S||(S=!0,n.reject(P,y))})}},m.race=function(o){var x=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=o.length,S=!1;if(!_)return this.resolve([]);for(var C=-1,U=new this(c);++C<_;)O=o[C],x.resolve(O).then(function(P){S||(S=!0,n.resolve(U,P))},function(P){S||(S=!0,n.reject(U,P))});var O;return U}},{immediate:36}],38:[function(v,Z,N){var d={};(0,v("./lib/utils/common").assign)(d,v("./lib/deflate"),v("./lib/inflate"),v("./lib/zlib/constants")),Z.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(v,Z,N){var d=v("./zlib/deflate"),c=v("./utils/common"),n=v("./utils/strings"),u=v("./zlib/messages"),k=v("./zlib/zstream"),w=Object.prototype.toString,m=0,b=-1,s=0,p=8;function i(o){if(!(this instanceof i))return new i(o);this.options=c.assign({level:b,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},o||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var _=d.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(_!==m)throw new Error(u[_]);if(x.header&&d.deflateSetHeader(this.strm,x.header),x.dictionary){var S;if(S=typeof x.dictionary=="string"?n.string2buf(x.dictionary):w.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(_=d.deflateSetDictionary(this.strm,S))!==m)throw new Error(u[_]);this._dict_set=!0}}function h(o,x){var _=new i(x);if(_.push(o,!0),_.err)throw _.msg||u[_.err];return _.result}i.prototype.push=function(o,x){var _,S,C=this.strm,U=this.options.chunkSize;if(this.ended)return!1;S=x===~~x?x:x===!0?4:0,typeof o=="string"?C.input=n.string2buf(o):w.call(o)==="[object ArrayBuffer]"?C.input=new Uint8Array(o):C.input=o,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new c.Buf8(U),C.next_out=0,C.avail_out=U),(_=d.deflate(C,S))!==1&&_!==m)return this.onEnd(_),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(c.shrinkBuf(C.output,C.next_out))):this.onData(c.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&_!==1);return S===4?(_=d.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===m):S!==2||(this.onEnd(m),!(C.avail_out=0))},i.prototype.onData=function(o){this.chunks.push(o)},i.prototype.onEnd=function(o){o===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},N.Deflate=i,N.deflate=h,N.deflateRaw=function(o,x){return(x=x||{}).raw=!0,h(o,x)},N.gzip=function(o,x){return(x=x||{}).gzip=!0,h(o,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(v,Z,N){var d=v("./zlib/inflate"),c=v("./utils/common"),n=v("./utils/strings"),u=v("./zlib/constants"),k=v("./zlib/messages"),w=v("./zlib/zstream"),m=v("./zlib/gzheader"),b=Object.prototype.toString;function s(i){if(!(this instanceof s))return new s(i);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},i||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||i&&i.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var o=d.inflateInit2(this.strm,h.windowBits);if(o!==u.Z_OK)throw new Error(k[o]);this.header=new m,d.inflateGetHeader(this.strm,this.header)}function p(i,h){var o=new s(h);if(o.push(i,!0),o.err)throw o.msg||k[o.err];return o.result}s.prototype.push=function(i,h){var o,x,_,S,C,U,O=this.strm,P=this.options.chunkSize,R=this.options.dictionary,L=!1;if(this.ended)return!1;x=h===~~h?h:h===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof i=="string"?O.input=n.binstring2buf(i):b.call(i)==="[object ArrayBuffer]"?O.input=new Uint8Array(i):O.input=i,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new c.Buf8(P),O.next_out=0,O.avail_out=P),(o=d.inflate(O,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&R&&(U=typeof R=="string"?n.string2buf(R):b.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,o=d.inflateSetDictionary(this.strm,U)),o===u.Z_BUF_ERROR&&L===!0&&(o=u.Z_OK,L=!1),o!==u.Z_STREAM_END&&o!==u.Z_OK)return this.onEnd(o),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&o!==u.Z_STREAM_END&&(O.avail_in!==0||x!==u.Z_FINISH&&x!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=n.utf8border(O.output,O.next_out),S=O.next_out-_,C=n.buf2string(O.output,_),O.next_out=S,O.avail_out=P-S,S&&c.arraySet(O.output,O.output,_,S,0),this.onData(C)):this.onData(c.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(L=!0)}while((0<O.avail_in||O.avail_out===0)&&o!==u.Z_STREAM_END);return o===u.Z_STREAM_END&&(x=u.Z_FINISH),x===u.Z_FINISH?(o=d.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===u.Z_OK):x!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(O.avail_out=0))},s.prototype.onData=function(i){this.chunks.push(i)},s.prototype.onEnd=function(i){i===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},N.Inflate=s,N.inflate=p,N.inflateRaw=function(i,h){return(h=h||{}).raw=!0,p(i,h)},N.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(v,Z,N){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";N.assign=function(u){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var w=k.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var m in w)w.hasOwnProperty(m)&&(u[m]=w[m])}}return u},N.shrinkBuf=function(u,k){return u.length===k?u:u.subarray?u.subarray(0,k):(u.length=k,u)};var c={arraySet:function(u,k,w,m,b){if(k.subarray&&u.subarray)u.set(k.subarray(w,w+m),b);else for(var s=0;s<m;s++)u[b+s]=k[w+s]},flattenChunks:function(u){var k,w,m,b,s,p;for(k=m=0,w=u.length;k<w;k++)m+=u[k].length;for(p=new Uint8Array(m),k=b=0,w=u.length;k<w;k++)s=u[k],p.set(s,b),b+=s.length;return p}},n={arraySet:function(u,k,w,m,b){for(var s=0;s<m;s++)u[b+s]=k[w+s]},flattenChunks:function(u){return[].concat.apply([],u)}};N.setTyped=function(u){u?(N.Buf8=Uint8Array,N.Buf16=Uint16Array,N.Buf32=Int32Array,N.assign(N,c)):(N.Buf8=Array,N.Buf16=Array,N.Buf32=Array,N.assign(N,n))},N.setTyped(d)},{}],42:[function(v,Z,N){var d=v("./common"),c=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var u=new d.Buf8(256),k=0;k<256;k++)u[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;function w(m,b){if(b<65537&&(m.subarray&&n||!m.subarray&&c))return String.fromCharCode.apply(null,d.shrinkBuf(m,b));for(var s="",p=0;p<b;p++)s+=String.fromCharCode(m[p]);return s}u[254]=u[254]=1,N.string2buf=function(m){var b,s,p,i,h,o=m.length,x=0;for(i=0;i<o;i++)(64512&(s=m.charCodeAt(i)))==55296&&i+1<o&&(64512&(p=m.charCodeAt(i+1)))==56320&&(s=65536+(s-55296<<10)+(p-56320),i++),x+=s<128?1:s<2048?2:s<65536?3:4;for(b=new d.Buf8(x),i=h=0;h<x;i++)(64512&(s=m.charCodeAt(i)))==55296&&i+1<o&&(64512&(p=m.charCodeAt(i+1)))==56320&&(s=65536+(s-55296<<10)+(p-56320),i++),s<128?b[h++]=s:(s<2048?b[h++]=192|s>>>6:(s<65536?b[h++]=224|s>>>12:(b[h++]=240|s>>>18,b[h++]=128|s>>>12&63),b[h++]=128|s>>>6&63),b[h++]=128|63&s);return b},N.buf2binstring=function(m){return w(m,m.length)},N.binstring2buf=function(m){for(var b=new d.Buf8(m.length),s=0,p=b.length;s<p;s++)b[s]=m.charCodeAt(s);return b},N.buf2string=function(m,b){var s,p,i,h,o=b||m.length,x=new Array(2*o);for(s=p=0;s<o;)if((i=m[s++])<128)x[p++]=i;else if(4<(h=u[i]))x[p++]=65533,s+=h-1;else{for(i&=h===2?31:h===3?15:7;1<h&&s<o;)i=i<<6|63&m[s++],h--;1<h?x[p++]=65533:i<65536?x[p++]=i:(i-=65536,x[p++]=55296|i>>10&1023,x[p++]=56320|1023&i)}return w(x,p)},N.utf8border=function(m,b){var s;for((b=b||m.length)>m.length&&(b=m.length),s=b-1;0<=s&&(192&m[s])==128;)s--;return s<0||s===0?b:s+u[m[s]]>b?s:b}},{"./common":41}],43:[function(v,Z,N){Z.exports=function(d,c,n,u){for(var k=65535&d|0,w=d>>>16&65535|0,m=0;n!==0;){for(n-=m=2e3<n?2e3:n;w=w+(k=k+c[u++]|0)|0,--m;);k%=65521,w%=65521}return k|w<<16|0}},{}],44:[function(v,Z,N){Z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(v,Z,N){var d=function(){for(var c,n=[],u=0;u<256;u++){c=u;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;n[u]=c}return n}();Z.exports=function(c,n,u,k){var w=d,m=k+u;c^=-1;for(var b=k;b<m;b++)c=c>>>8^w[255&(c^n[b])];return-1^c}},{}],46:[function(v,Z,N){var d,c=v("../utils/common"),n=v("./trees"),u=v("./adler32"),k=v("./crc32"),w=v("./messages"),m=0,b=4,s=0,p=-2,i=-1,h=4,o=2,x=8,_=9,S=286,C=30,U=19,O=2*S+1,P=15,R=3,L=258,st=L+R+1,y=42,B=113,r=1,D=2,ot=3,$=4;function ct(t,T){return t.msg=w[T],T}function G(t){return(t<<1)-(4<t?9:0)}function it(t){for(var T=t.length;0<=--T;)t[T]=0}function E(t){var T=t.state,I=T.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(c.arraySet(t.output,T.pending_buf,T.pending_out,I,t.next_out),t.next_out+=I,T.pending_out+=I,t.total_out+=I,t.avail_out-=I,T.pending-=I,T.pending===0&&(T.pending_out=0))}function A(t,T){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,T),t.block_start=t.strstart,E(t.strm)}function rt(t,T){t.pending_buf[t.pending++]=T}function Q(t,T){t.pending_buf[t.pending++]=T>>>8&255,t.pending_buf[t.pending++]=255&T}function Y(t,T){var I,f,l=t.max_chain_length,j=t.strstart,F=t.prev_length,W=t.nice_match,z=t.strstart>t.w_size-st?t.strstart-(t.w_size-st):0,J=t.window,tt=t.w_mask,K=t.prev,at=t.strstart+L,xt=J[j+F-1],ht=J[j+F];t.prev_length>=t.good_match&&(l>>=2),W>t.lookahead&&(W=t.lookahead);do if(J[(I=T)+F]===ht&&J[I+F-1]===xt&&J[I]===J[j]&&J[++I]===J[j+1]){j+=2,I++;do;while(J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&J[++j]===J[++I]&&j<at);if(f=L-(at-j),j=at-L,F<f){if(t.match_start=T,W<=(F=f))break;xt=J[j+F-1],ht=J[j+F]}}while((T=K[T&tt])>z&&--l!=0);return F<=t.lookahead?F:t.lookahead}function _t(t){var T,I,f,l,j,F,W,z,J,tt,K=t.w_size;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=K+(K-st)){for(c.arraySet(t.window,t.window,K,K,0),t.match_start-=K,t.strstart-=K,t.block_start-=K,T=I=t.hash_size;f=t.head[--T],t.head[T]=K<=f?f-K:0,--I;);for(T=I=K;f=t.prev[--T],t.prev[T]=K<=f?f-K:0,--I;);l+=K}if(t.strm.avail_in===0)break;if(F=t.strm,W=t.window,z=t.strstart+t.lookahead,J=l,tt=void 0,tt=F.avail_in,J<tt&&(tt=J),I=tt===0?0:(F.avail_in-=tt,c.arraySet(W,F.input,F.next_in,tt,z),F.state.wrap===1?F.adler=u(F.adler,W,tt,z):F.state.wrap===2&&(F.adler=k(F.adler,W,tt,z)),F.next_in+=tt,F.total_in+=tt,tt),t.lookahead+=I,t.lookahead+t.insert>=R)for(j=t.strstart-t.insert,t.ins_h=t.window[j],t.ins_h=(t.ins_h<<t.hash_shift^t.window[j+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[j+R-1])&t.hash_mask,t.prev[j&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=j,j++,t.insert--,!(t.lookahead+t.insert<R)););}while(t.lookahead<st&&t.strm.avail_in!==0)}function wt(t,T){for(var I,f;;){if(t.lookahead<st){if(_t(t),t.lookahead<st&&T===m)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-st&&(t.match_length=Y(t,I)),t.match_length>=R)if(f=n._tr_tally(t,t.strstart-t.match_start,t.match_length-R),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=R){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else f=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(f&&(A(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<R-1?t.strstart:R-1,T===b?(A(t,!0),t.strm.avail_out===0?ot:$):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?r:D}function ft(t,T){for(var I,f,l;;){if(t.lookahead<st){if(_t(t),t.lookahead<st&&T===m)return r;if(t.lookahead===0)break}if(I=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=R-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-st&&(t.match_length=Y(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===R&&4096<t.strstart-t.match_start)&&(t.match_length=R-1)),t.prev_length>=R&&t.match_length<=t.prev_length){for(l=t.strstart+t.lookahead-R,f=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-R),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=l&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=R-1,t.strstart++,f&&(A(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((f=n._tr_tally(t,0,t.window[t.strstart-1]))&&A(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(f=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<R-1?t.strstart:R-1,T===b?(A(t,!0),t.strm.avail_out===0?ot:$):t.last_lit&&(A(t,!1),t.strm.avail_out===0)?r:D}function pt(t,T,I,f,l){this.good_length=t,this.max_lazy=T,this.nice_length=I,this.max_chain=f,this.func=l}function jt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*O),this.dyn_dtree=new c.Buf16(2*(2*C+1)),this.bl_tree=new c.Buf16(2*(2*U+1)),it(this.dyn_ltree),it(this.dyn_dtree),it(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(P+1),this.heap=new c.Buf16(2*S+1),it(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*S+1),it(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yt(t){var T;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(T=t.state).pending=0,T.pending_out=0,T.wrap<0&&(T.wrap=-T.wrap),T.status=T.wrap?y:B,t.adler=T.wrap===2?0:1,T.last_flush=m,n._tr_init(T),s):ct(t,p)}function It(t){var T=yt(t);return T===s&&function(I){I.window_size=2*I.w_size,it(I.head),I.max_lazy_match=d[I.level].max_lazy,I.good_match=d[I.level].good_length,I.nice_match=d[I.level].nice_length,I.max_chain_length=d[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=R-1,I.match_available=0,I.ins_h=0}(t.state),T}function Ot(t,T,I,f,l,j){if(!t)return p;var F=1;if(T===i&&(T=6),f<0?(F=0,f=-f):15<f&&(F=2,f-=16),l<1||_<l||I!==x||f<8||15<f||T<0||9<T||j<0||h<j)return ct(t,p);f===8&&(f=9);var W=new jt;return(t.state=W).strm=t,W.wrap=F,W.gzhead=null,W.w_bits=f,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=l+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+R-1)/R),W.window=new c.Buf8(2*W.w_size),W.head=new c.Buf16(W.hash_size),W.prev=new c.Buf16(W.w_size),W.lit_bufsize=1<<l+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new c.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=T,W.strategy=j,W.method=I,It(t)}d=[new pt(0,0,0,0,function(t,T){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_t(t),t.lookahead===0&&T===m)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var f=t.block_start+I;if((t.strstart===0||t.strstart>=f)&&(t.lookahead=t.strstart-f,t.strstart=f,A(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-st&&(A(t,!1),t.strm.avail_out===0))return r}return t.insert=0,T===b?(A(t,!0),t.strm.avail_out===0?ot:$):(t.strstart>t.block_start&&(A(t,!1),t.strm.avail_out),r)}),new pt(4,4,8,4,wt),new pt(4,5,16,8,wt),new pt(4,6,32,32,wt),new pt(4,4,16,16,ft),new pt(8,16,32,32,ft),new pt(8,16,128,128,ft),new pt(8,32,128,256,ft),new pt(32,128,258,1024,ft),new pt(32,258,258,4096,ft)],N.deflateInit=function(t,T){return Ot(t,T,x,15,8,0)},N.deflateInit2=Ot,N.deflateReset=It,N.deflateResetKeep=yt,N.deflateSetHeader=function(t,T){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=T,s):p},N.deflate=function(t,T){var I,f,l,j;if(!t||!t.state||5<T||T<0)return t?ct(t,p):p;if(f=t.state,!t.output||!t.input&&t.avail_in!==0||f.status===666&&T!==b)return ct(t,t.avail_out===0?-5:p);if(f.strm=t,I=f.last_flush,f.last_flush=T,f.status===y)if(f.wrap===2)t.adler=0,rt(f,31),rt(f,139),rt(f,8),f.gzhead?(rt(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),rt(f,255&f.gzhead.time),rt(f,f.gzhead.time>>8&255),rt(f,f.gzhead.time>>16&255),rt(f,f.gzhead.time>>24&255),rt(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),rt(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(rt(f,255&f.gzhead.extra.length),rt(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(t.adler=k(t.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=69):(rt(f,0),rt(f,0),rt(f,0),rt(f,0),rt(f,0),rt(f,f.level===9?2:2<=f.strategy||f.level<2?4:0),rt(f,3),f.status=B);else{var F=x+(f.w_bits-8<<4)<<8;F|=(2<=f.strategy||f.level<2?0:f.level<6?1:f.level===6?2:3)<<6,f.strstart!==0&&(F|=32),F+=31-F%31,f.status=B,Q(f,F),f.strstart!==0&&(Q(f,t.adler>>>16),Q(f,65535&t.adler)),t.adler=1}if(f.status===69)if(f.gzhead.extra){for(l=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),E(t),l=f.pending,f.pending!==f.pending_buf_size));)rt(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=73)}else f.status=73;if(f.status===73)if(f.gzhead.name){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),E(t),l=f.pending,f.pending===f.pending_buf_size)){j=1;break}j=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,rt(f,j)}while(j!==0);f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),j===0&&(f.gzindex=0,f.status=91)}else f.status=91;if(f.status===91)if(f.gzhead.comment){l=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),E(t),l=f.pending,f.pending===f.pending_buf_size)){j=1;break}j=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,rt(f,j)}while(j!==0);f.gzhead.hcrc&&f.pending>l&&(t.adler=k(t.adler,f.pending_buf,f.pending-l,l)),j===0&&(f.status=103)}else f.status=103;if(f.status===103&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&E(t),f.pending+2<=f.pending_buf_size&&(rt(f,255&t.adler),rt(f,t.adler>>8&255),t.adler=0,f.status=B)):f.status=B),f.pending!==0){if(E(t),t.avail_out===0)return f.last_flush=-1,s}else if(t.avail_in===0&&G(T)<=G(I)&&T!==b)return ct(t,-5);if(f.status===666&&t.avail_in!==0)return ct(t,-5);if(t.avail_in!==0||f.lookahead!==0||T!==m&&f.status!==666){var W=f.strategy===2?function(z,J){for(var tt;;){if(z.lookahead===0&&(_t(z),z.lookahead===0)){if(J===m)return r;break}if(z.match_length=0,tt=n._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,tt&&(A(z,!1),z.strm.avail_out===0))return r}return z.insert=0,J===b?(A(z,!0),z.strm.avail_out===0?ot:$):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?r:D}(f,T):f.strategy===3?function(z,J){for(var tt,K,at,xt,ht=z.window;;){if(z.lookahead<=L){if(_t(z),z.lookahead<=L&&J===m)return r;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=R&&0<z.strstart&&(K=ht[at=z.strstart-1])===ht[++at]&&K===ht[++at]&&K===ht[++at]){xt=z.strstart+L;do;while(K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&K===ht[++at]&&at<xt);z.match_length=L-(xt-at),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=R?(tt=n._tr_tally(z,1,z.match_length-R),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(tt=n._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),tt&&(A(z,!1),z.strm.avail_out===0))return r}return z.insert=0,J===b?(A(z,!0),z.strm.avail_out===0?ot:$):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?r:D}(f,T):d[f.level].func(f,T);if(W!==ot&&W!==$||(f.status=666),W===r||W===ot)return t.avail_out===0&&(f.last_flush=-1),s;if(W===D&&(T===1?n._tr_align(f):T!==5&&(n._tr_stored_block(f,0,0,!1),T===3&&(it(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),E(t),t.avail_out===0))return f.last_flush=-1,s}return T!==b?s:f.wrap<=0?1:(f.wrap===2?(rt(f,255&t.adler),rt(f,t.adler>>8&255),rt(f,t.adler>>16&255),rt(f,t.adler>>24&255),rt(f,255&t.total_in),rt(f,t.total_in>>8&255),rt(f,t.total_in>>16&255),rt(f,t.total_in>>24&255)):(Q(f,t.adler>>>16),Q(f,65535&t.adler)),E(t),0<f.wrap&&(f.wrap=-f.wrap),f.pending!==0?s:1)},N.deflateEnd=function(t){var T;return t&&t.state?(T=t.state.status)!==y&&T!==69&&T!==73&&T!==91&&T!==103&&T!==B&&T!==666?ct(t,p):(t.state=null,T===B?ct(t,-3):s):p},N.deflateSetDictionary=function(t,T){var I,f,l,j,F,W,z,J,tt=T.length;if(!t||!t.state||(j=(I=t.state).wrap)===2||j===1&&I.status!==y||I.lookahead)return p;for(j===1&&(t.adler=u(t.adler,T,tt,0)),I.wrap=0,tt>=I.w_size&&(j===0&&(it(I.head),I.strstart=0,I.block_start=0,I.insert=0),J=new c.Buf8(I.w_size),c.arraySet(J,T,tt-I.w_size,I.w_size,0),T=J,tt=I.w_size),F=t.avail_in,W=t.next_in,z=t.input,t.avail_in=tt,t.next_in=0,t.input=T,_t(I);I.lookahead>=R;){for(f=I.strstart,l=I.lookahead-(R-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[f+R-1])&I.hash_mask,I.prev[f&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=f,f++,--l;);I.strstart=f,I.lookahead=R-1,_t(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=R-1,I.match_available=0,t.next_in=W,t.input=z,t.avail_in=F,I.wrap=j,s},N.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(v,Z,N){Z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(v,Z,N){Z.exports=function(d,c){var n,u,k,w,m,b,s,p,i,h,o,x,_,S,C,U,O,P,R,L,st,y,B,r,D;n=d.state,u=d.next_in,r=d.input,k=u+(d.avail_in-5),w=d.next_out,D=d.output,m=w-(c-d.avail_out),b=w+(d.avail_out-257),s=n.dmax,p=n.wsize,i=n.whave,h=n.wnext,o=n.window,x=n.hold,_=n.bits,S=n.lencode,C=n.distcode,U=(1<<n.lenbits)-1,O=(1<<n.distbits)-1;t:do{_<15&&(x+=r[u++]<<_,_+=8,x+=r[u++]<<_,_+=8),P=S[x&U];e:for(;;){if(x>>>=R=P>>>24,_-=R,(R=P>>>16&255)===0)D[w++]=65535&P;else{if(!(16&R)){if(!(64&R)){P=S[(65535&P)+(x&(1<<R)-1)];continue e}if(32&R){n.mode=12;break t}d.msg="invalid literal/length code",n.mode=30;break t}L=65535&P,(R&=15)&&(_<R&&(x+=r[u++]<<_,_+=8),L+=x&(1<<R)-1,x>>>=R,_-=R),_<15&&(x+=r[u++]<<_,_+=8,x+=r[u++]<<_,_+=8),P=C[x&O];r:for(;;){if(x>>>=R=P>>>24,_-=R,!(16&(R=P>>>16&255))){if(!(64&R)){P=C[(65535&P)+(x&(1<<R)-1)];continue r}d.msg="invalid distance code",n.mode=30;break t}if(st=65535&P,_<(R&=15)&&(x+=r[u++]<<_,(_+=8)<R&&(x+=r[u++]<<_,_+=8)),s<(st+=x&(1<<R)-1)){d.msg="invalid distance too far back",n.mode=30;break t}if(x>>>=R,_-=R,(R=w-m)<st){if(i<(R=st-R)&&n.sane){d.msg="invalid distance too far back",n.mode=30;break t}if(B=o,(y=0)===h){if(y+=p-R,R<L){for(L-=R;D[w++]=o[y++],--R;);y=w-st,B=D}}else if(h<R){if(y+=p+h-R,(R-=h)<L){for(L-=R;D[w++]=o[y++],--R;);if(y=0,h<L){for(L-=R=h;D[w++]=o[y++],--R;);y=w-st,B=D}}}else if(y+=h-R,R<L){for(L-=R;D[w++]=o[y++],--R;);y=w-st,B=D}for(;2<L;)D[w++]=B[y++],D[w++]=B[y++],D[w++]=B[y++],L-=3;L&&(D[w++]=B[y++],1<L&&(D[w++]=B[y++]))}else{for(y=w-st;D[w++]=D[y++],D[w++]=D[y++],D[w++]=D[y++],2<(L-=3););L&&(D[w++]=D[y++],1<L&&(D[w++]=D[y++]))}break}}break}}while(u<k&&w<b);u-=L=_>>3,x&=(1<<(_-=L<<3))-1,d.next_in=u,d.next_out=w,d.avail_in=u<k?k-u+5:5-(u-k),d.avail_out=w<b?b-w+257:257-(w-b),n.hold=x,n.bits=_}},{}],49:[function(v,Z,N){var d=v("../utils/common"),c=v("./adler32"),n=v("./crc32"),u=v("./inffast"),k=v("./inftrees"),w=1,m=2,b=0,s=-2,p=1,i=852,h=592;function o(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(y){var B;return y&&y.state?(B=y.state,y.total_in=y.total_out=B.total=0,y.msg="",B.wrap&&(y.adler=1&B.wrap),B.mode=p,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new d.Buf32(i),B.distcode=B.distdyn=new d.Buf32(h),B.sane=1,B.back=-1,b):s}function S(y){var B;return y&&y.state?((B=y.state).wsize=0,B.whave=0,B.wnext=0,_(y)):s}function C(y,B){var r,D;return y&&y.state?(D=y.state,B<0?(r=0,B=-B):(r=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?s:(D.window!==null&&D.wbits!==B&&(D.window=null),D.wrap=r,D.wbits=B,S(y))):s}function U(y,B){var r,D;return y?(D=new x,(y.state=D).window=null,(r=C(y,B))!==b&&(y.state=null),r):s}var O,P,R=!0;function L(y){if(R){var B;for(O=new d.Buf32(512),P=new d.Buf32(32),B=0;B<144;)y.lens[B++]=8;for(;B<256;)y.lens[B++]=9;for(;B<280;)y.lens[B++]=7;for(;B<288;)y.lens[B++]=8;for(k(w,y.lens,0,288,O,0,y.work,{bits:9}),B=0;B<32;)y.lens[B++]=5;k(m,y.lens,0,32,P,0,y.work,{bits:5}),R=!1}y.lencode=O,y.lenbits=9,y.distcode=P,y.distbits=5}function st(y,B,r,D){var ot,$=y.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new d.Buf8($.wsize)),D>=$.wsize?(d.arraySet($.window,B,r-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(D<(ot=$.wsize-$.wnext)&&(ot=D),d.arraySet($.window,B,r-D,ot,$.wnext),(D-=ot)?(d.arraySet($.window,B,r-D,D,0),$.wnext=D,$.whave=$.wsize):($.wnext+=ot,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=ot))),0}N.inflateReset=S,N.inflateReset2=C,N.inflateResetKeep=_,N.inflateInit=function(y){return U(y,15)},N.inflateInit2=U,N.inflate=function(y,B){var r,D,ot,$,ct,G,it,E,A,rt,Q,Y,_t,wt,ft,pt,jt,yt,It,Ot,t,T,I,f,l=0,j=new d.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return s;(r=y.state).mode===12&&(r.mode=13),ct=y.next_out,ot=y.output,it=y.avail_out,$=y.next_in,D=y.input,G=y.avail_in,E=r.hold,A=r.bits,rt=G,Q=it,T=b;t:for(;;)switch(r.mode){case p:if(r.wrap===0){r.mode=13;break}for(;A<16;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(2&r.wrap&&E===35615){j[r.check=0]=255&E,j[1]=E>>>8&255,r.check=n(r.check,j,2,0),A=E=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&E)<<8)+(E>>8))%31){y.msg="incorrect header check",r.mode=30;break}if((15&E)!=8){y.msg="unknown compression method",r.mode=30;break}if(A-=4,t=8+(15&(E>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){y.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,y.adler=r.check=1,r.mode=512&E?10:12,A=E=0;break;case 2:for(;A<16;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(r.flags=E,(255&r.flags)!=8){y.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){y.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=E>>8&1),512&r.flags&&(j[0]=255&E,j[1]=E>>>8&255,r.check=n(r.check,j,2,0)),A=E=0,r.mode=3;case 3:for(;A<32;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.head&&(r.head.time=E),512&r.flags&&(j[0]=255&E,j[1]=E>>>8&255,j[2]=E>>>16&255,j[3]=E>>>24&255,r.check=n(r.check,j,4,0)),A=E=0,r.mode=4;case 4:for(;A<16;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.head&&(r.head.xflags=255&E,r.head.os=E>>8),512&r.flags&&(j[0]=255&E,j[1]=E>>>8&255,r.check=n(r.check,j,2,0)),A=E=0,r.mode=5;case 5:if(1024&r.flags){for(;A<16;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.length=E,r.head&&(r.head.extra_len=E),512&r.flags&&(j[0]=255&E,j[1]=E>>>8&255,r.check=n(r.check,j,2,0)),A=E=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(G<(Y=r.length)&&(Y=G),Y&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,D,$,Y,t)),512&r.flags&&(r.check=n(r.check,D,Y,$)),G-=Y,$+=Y,r.length-=Y),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(G===0)break t;for(Y=0;t=D[$+Y++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&Y<G;);if(512&r.flags&&(r.check=n(r.check,D,Y,$)),G-=Y,$+=Y,t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(G===0)break t;for(Y=0;t=D[$+Y++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&Y<G;);if(512&r.flags&&(r.check=n(r.check,D,Y,$)),G-=Y,$+=Y,t)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;A<16;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(E!==(65535&r.check)){y.msg="header crc mismatch",r.mode=30;break}A=E=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),y.adler=r.check=0,r.mode=12;break;case 10:for(;A<32;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}y.adler=r.check=o(E),A=E=0,r.mode=11;case 11:if(r.havedict===0)return y.next_out=ct,y.avail_out=it,y.next_in=$,y.avail_in=G,r.hold=E,r.bits=A,2;y.adler=r.check=1,r.mode=12;case 12:if(B===5||B===6)break t;case 13:if(r.last){E>>>=7&A,A-=7&A,r.mode=27;break}for(;A<3;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}switch(r.last=1&E,A-=1,3&(E>>>=1)){case 0:r.mode=14;break;case 1:if(L(r),r.mode=20,B!==6)break;E>>>=2,A-=2;break t;case 2:r.mode=17;break;case 3:y.msg="invalid block type",r.mode=30}E>>>=2,A-=2;break;case 14:for(E>>>=7&A,A-=7&A;A<32;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if((65535&E)!=(E>>>16^65535)){y.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&E,A=E=0,r.mode=15,B===6)break t;case 15:r.mode=16;case 16:if(Y=r.length){if(G<Y&&(Y=G),it<Y&&(Y=it),Y===0)break t;d.arraySet(ot,D,$,Y,ct),G-=Y,$+=Y,it-=Y,ct+=Y,r.length-=Y;break}r.mode=12;break;case 17:for(;A<14;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(r.nlen=257+(31&E),E>>>=5,A-=5,r.ndist=1+(31&E),E>>>=5,A-=5,r.ncode=4+(15&E),E>>>=4,A-=4,286<r.nlen||30<r.ndist){y.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;A<3;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.lens[F[r.have++]]=7&E,E>>>=3,A-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},T=k(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,T){y.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;pt=(l=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,jt=65535&l,!((ft=l>>>24)<=A);){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(jt<16)E>>>=ft,A-=ft,r.lens[r.have++]=jt;else{if(jt===16){for(f=ft+2;A<f;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(E>>>=ft,A-=ft,r.have===0){y.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],Y=3+(3&E),E>>>=2,A-=2}else if(jt===17){for(f=ft+3;A<f;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}A-=ft,t=0,Y=3+(7&(E>>>=ft)),E>>>=3,A-=3}else{for(f=ft+7;A<f;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}A-=ft,t=0,Y=11+(127&(E>>>=ft)),E>>>=7,A-=7}if(r.have+Y>r.nlen+r.ndist){y.msg="invalid bit length repeat",r.mode=30;break}for(;Y--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){y.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,I={bits:r.lenbits},T=k(w,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,T){y.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},T=k(m,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,T){y.msg="invalid distances set",r.mode=30;break}if(r.mode=20,B===6)break t;case 20:r.mode=21;case 21:if(6<=G&&258<=it){y.next_out=ct,y.avail_out=it,y.next_in=$,y.avail_in=G,r.hold=E,r.bits=A,u(y,Q),ct=y.next_out,ot=y.output,it=y.avail_out,$=y.next_in,D=y.input,G=y.avail_in,E=r.hold,A=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;pt=(l=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,jt=65535&l,!((ft=l>>>24)<=A);){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(pt&&!(240&pt)){for(yt=ft,It=pt,Ot=jt;pt=(l=r.lencode[Ot+((E&(1<<yt+It)-1)>>yt)])>>>16&255,jt=65535&l,!(yt+(ft=l>>>24)<=A);){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}E>>>=yt,A-=yt,r.back+=yt}if(E>>>=ft,A-=ft,r.back+=ft,r.length=jt,pt===0){r.mode=26;break}if(32&pt){r.back=-1,r.mode=12;break}if(64&pt){y.msg="invalid literal/length code",r.mode=30;break}r.extra=15&pt,r.mode=22;case 22:if(r.extra){for(f=r.extra;A<f;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.length+=E&(1<<r.extra)-1,E>>>=r.extra,A-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;pt=(l=r.distcode[E&(1<<r.distbits)-1])>>>16&255,jt=65535&l,!((ft=l>>>24)<=A);){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(!(240&pt)){for(yt=ft,It=pt,Ot=jt;pt=(l=r.distcode[Ot+((E&(1<<yt+It)-1)>>yt)])>>>16&255,jt=65535&l,!(yt+(ft=l>>>24)<=A);){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}E>>>=yt,A-=yt,r.back+=yt}if(E>>>=ft,A-=ft,r.back+=ft,64&pt){y.msg="invalid distance code",r.mode=30;break}r.offset=jt,r.extra=15&pt,r.mode=24;case 24:if(r.extra){for(f=r.extra;A<f;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}r.offset+=E&(1<<r.extra)-1,E>>>=r.extra,A-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){y.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(it===0)break t;if(Y=Q-it,r.offset>Y){if((Y=r.offset-Y)>r.whave&&r.sane){y.msg="invalid distance too far back",r.mode=30;break}_t=Y>r.wnext?(Y-=r.wnext,r.wsize-Y):r.wnext-Y,Y>r.length&&(Y=r.length),wt=r.window}else wt=ot,_t=ct-r.offset,Y=r.length;for(it<Y&&(Y=it),it-=Y,r.length-=Y;ot[ct++]=wt[_t++],--Y;);r.length===0&&(r.mode=21);break;case 26:if(it===0)break t;ot[ct++]=r.length,it--,r.mode=21;break;case 27:if(r.wrap){for(;A<32;){if(G===0)break t;G--,E|=D[$++]<<A,A+=8}if(Q-=it,y.total_out+=Q,r.total+=Q,Q&&(y.adler=r.check=r.flags?n(r.check,ot,Q,ct-Q):c(r.check,ot,Q,ct-Q)),Q=it,(r.flags?E:o(E))!==r.check){y.msg="incorrect data check",r.mode=30;break}A=E=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;A<32;){if(G===0)break t;G--,E+=D[$++]<<A,A+=8}if(E!==(4294967295&r.total)){y.msg="incorrect length check",r.mode=30;break}A=E=0}r.mode=29;case 29:T=1;break t;case 30:T=-3;break t;case 31:return-4;case 32:default:return s}return y.next_out=ct,y.avail_out=it,y.next_in=$,y.avail_in=G,r.hold=E,r.bits=A,(r.wsize||Q!==y.avail_out&&r.mode<30&&(r.mode<27||B!==4))&&st(y,y.output,y.next_out,Q-y.avail_out)?(r.mode=31,-4):(rt-=y.avail_in,Q-=y.avail_out,y.total_in+=rt,y.total_out+=Q,r.total+=Q,r.wrap&&Q&&(y.adler=r.check=r.flags?n(r.check,ot,Q,y.next_out-Q):c(r.check,ot,Q,y.next_out-Q)),y.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(rt==0&&Q===0||B===4)&&T===b&&(T=-5),T)},N.inflateEnd=function(y){if(!y||!y.state)return s;var B=y.state;return B.window&&(B.window=null),y.state=null,b},N.inflateGetHeader=function(y,B){var r;return y&&y.state&&2&(r=y.state).wrap?((r.head=B).done=!1,b):s},N.inflateSetDictionary=function(y,B){var r,D=B.length;return y&&y.state?(r=y.state).wrap!==0&&r.mode!==11?s:r.mode===11&&c(1,B,D,0)!==r.check?-3:st(y,B,D,D)?(r.mode=31,-4):(r.havedict=1,b):s},N.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(v,Z,N){var d=v("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Z.exports=function(w,m,b,s,p,i,h,o){var x,_,S,C,U,O,P,R,L,st=o.bits,y=0,B=0,r=0,D=0,ot=0,$=0,ct=0,G=0,it=0,E=0,A=null,rt=0,Q=new d.Buf16(16),Y=new d.Buf16(16),_t=null,wt=0;for(y=0;y<=15;y++)Q[y]=0;for(B=0;B<s;B++)Q[m[b+B]]++;for(ot=st,D=15;1<=D&&Q[D]===0;D--);if(D<ot&&(ot=D),D===0)return p[i++]=20971520,p[i++]=20971520,o.bits=1,0;for(r=1;r<D&&Q[r]===0;r++);for(ot<r&&(ot=r),y=G=1;y<=15;y++)if(G<<=1,(G-=Q[y])<0)return-1;if(0<G&&(w===0||D!==1))return-1;for(Y[1]=0,y=1;y<15;y++)Y[y+1]=Y[y]+Q[y];for(B=0;B<s;B++)m[b+B]!==0&&(h[Y[m[b+B]]++]=B);if(O=w===0?(A=_t=h,19):w===1?(A=c,rt-=257,_t=n,wt-=257,256):(A=u,_t=k,-1),y=r,U=i,ct=B=E=0,S=-1,C=(it=1<<($=ot))-1,w===1&&852<it||w===2&&592<it)return 1;for(;;){for(P=y-ct,L=h[B]<O?(R=0,h[B]):h[B]>O?(R=_t[wt+h[B]],A[rt+h[B]]):(R=96,0),x=1<<y-ct,r=_=1<<$;p[U+(E>>ct)+(_-=x)]=P<<24|R<<16|L|0,_!==0;);for(x=1<<y-1;E&x;)x>>=1;if(x!==0?(E&=x-1,E+=x):E=0,B++,--Q[y]==0){if(y===D)break;y=m[b+h[B]]}if(ot<y&&(E&C)!==S){for(ct===0&&(ct=ot),U+=r,G=1<<($=y-ct);$+ct<D&&!((G-=Q[$+ct])<=0);)$++,G<<=1;if(it+=1<<$,w===1&&852<it||w===2&&592<it)return 1;p[S=E&C]=ot<<24|$<<16|U-i|0}}return E!==0&&(p[U+E]=y-ct<<24|64<<16|0),o.bits=ot,0}},{"../utils/common":41}],51:[function(v,Z,N){Z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(v,Z,N){var d=v("../utils/common"),c=0,n=1;function u(l){for(var j=l.length;0<=--j;)l[j]=0}var k=0,w=29,m=256,b=m+1+w,s=30,p=19,i=2*b+1,h=15,o=16,x=7,_=256,S=16,C=17,U=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(2*(b+2));u(st);var y=new Array(2*s);u(y);var B=new Array(512);u(B);var r=new Array(256);u(r);var D=new Array(w);u(D);var ot,$,ct,G=new Array(s);function it(l,j,F,W,z){this.static_tree=l,this.extra_bits=j,this.extra_base=F,this.elems=W,this.max_length=z,this.has_stree=l&&l.length}function E(l,j){this.dyn_tree=l,this.max_code=0,this.stat_desc=j}function A(l){return l<256?B[l]:B[256+(l>>>7)]}function rt(l,j){l.pending_buf[l.pending++]=255&j,l.pending_buf[l.pending++]=j>>>8&255}function Q(l,j,F){l.bi_valid>o-F?(l.bi_buf|=j<<l.bi_valid&65535,rt(l,l.bi_buf),l.bi_buf=j>>o-l.bi_valid,l.bi_valid+=F-o):(l.bi_buf|=j<<l.bi_valid&65535,l.bi_valid+=F)}function Y(l,j,F){Q(l,F[2*j],F[2*j+1])}function _t(l,j){for(var F=0;F|=1&l,l>>>=1,F<<=1,0<--j;);return F>>>1}function wt(l,j,F){var W,z,J=new Array(h+1),tt=0;for(W=1;W<=h;W++)J[W]=tt=tt+F[W-1]<<1;for(z=0;z<=j;z++){var K=l[2*z+1];K!==0&&(l[2*z]=_t(J[K]++,K))}}function ft(l){var j;for(j=0;j<b;j++)l.dyn_ltree[2*j]=0;for(j=0;j<s;j++)l.dyn_dtree[2*j]=0;for(j=0;j<p;j++)l.bl_tree[2*j]=0;l.dyn_ltree[2*_]=1,l.opt_len=l.static_len=0,l.last_lit=l.matches=0}function pt(l){8<l.bi_valid?rt(l,l.bi_buf):0<l.bi_valid&&(l.pending_buf[l.pending++]=l.bi_buf),l.bi_buf=0,l.bi_valid=0}function jt(l,j,F,W){var z=2*j,J=2*F;return l[z]<l[J]||l[z]===l[J]&&W[j]<=W[F]}function yt(l,j,F){for(var W=l.heap[F],z=F<<1;z<=l.heap_len&&(z<l.heap_len&&jt(j,l.heap[z+1],l.heap[z],l.depth)&&z++,!jt(j,W,l.heap[z],l.depth));)l.heap[F]=l.heap[z],F=z,z<<=1;l.heap[F]=W}function It(l,j,F){var W,z,J,tt,K=0;if(l.last_lit!==0)for(;W=l.pending_buf[l.d_buf+2*K]<<8|l.pending_buf[l.d_buf+2*K+1],z=l.pending_buf[l.l_buf+K],K++,W===0?Y(l,z,j):(Y(l,(J=r[z])+m+1,j),(tt=O[J])!==0&&Q(l,z-=D[J],tt),Y(l,J=A(--W),F),(tt=P[J])!==0&&Q(l,W-=G[J],tt)),K<l.last_lit;);Y(l,_,j)}function Ot(l,j){var F,W,z,J=j.dyn_tree,tt=j.stat_desc.static_tree,K=j.stat_desc.has_stree,at=j.stat_desc.elems,xt=-1;for(l.heap_len=0,l.heap_max=i,F=0;F<at;F++)J[2*F]!==0?(l.heap[++l.heap_len]=xt=F,l.depth[F]=0):J[2*F+1]=0;for(;l.heap_len<2;)J[2*(z=l.heap[++l.heap_len]=xt<2?++xt:0)]=1,l.depth[z]=0,l.opt_len--,K&&(l.static_len-=tt[2*z+1]);for(j.max_code=xt,F=l.heap_len>>1;1<=F;F--)yt(l,J,F);for(z=at;F=l.heap[1],l.heap[1]=l.heap[l.heap_len--],yt(l,J,1),W=l.heap[1],l.heap[--l.heap_max]=F,l.heap[--l.heap_max]=W,J[2*z]=J[2*F]+J[2*W],l.depth[z]=(l.depth[F]>=l.depth[W]?l.depth[F]:l.depth[W])+1,J[2*F+1]=J[2*W+1]=z,l.heap[1]=z++,yt(l,J,1),2<=l.heap_len;);l.heap[--l.heap_max]=l.heap[1],function(ht,zt){var Ft,Rt,Bt,kt,Gt,Dt,Ct=zt.dyn_tree,Zt=zt.max_code,Vt=zt.stat_desc.static_tree,Jt=zt.stat_desc.has_stree,Lt=zt.stat_desc.extra_bits,Xt=zt.stat_desc.extra_base,q=zt.stat_desc.max_length,Nt=0;for(kt=0;kt<=h;kt++)ht.bl_count[kt]=0;for(Ct[2*ht.heap[ht.heap_max]+1]=0,Ft=ht.heap_max+1;Ft<i;Ft++)q<(kt=Ct[2*Ct[2*(Rt=ht.heap[Ft])+1]+1]+1)&&(kt=q,Nt++),Ct[2*Rt+1]=kt,Zt<Rt||(ht.bl_count[kt]++,Gt=0,Xt<=Rt&&(Gt=Lt[Rt-Xt]),Dt=Ct[2*Rt],ht.opt_len+=Dt*(kt+Gt),Jt&&(ht.static_len+=Dt*(Vt[2*Rt+1]+Gt)));if(Nt!==0){do{for(kt=q-1;ht.bl_count[kt]===0;)kt--;ht.bl_count[kt]--,ht.bl_count[kt+1]+=2,ht.bl_count[q]--,Nt-=2}while(0<Nt);for(kt=q;kt!==0;kt--)for(Rt=ht.bl_count[kt];Rt!==0;)Zt<(Bt=ht.heap[--Ft])||(Ct[2*Bt+1]!==kt&&(ht.opt_len+=(kt-Ct[2*Bt+1])*Ct[2*Bt],Ct[2*Bt+1]=kt),Rt--)}}(l,j),wt(J,xt,l.bl_count)}function t(l,j,F){var W,z,J=-1,tt=j[1],K=0,at=7,xt=4;for(tt===0&&(at=138,xt=3),j[2*(F+1)+1]=65535,W=0;W<=F;W++)z=tt,tt=j[2*(W+1)+1],++K<at&&z===tt||(K<xt?l.bl_tree[2*z]+=K:z!==0?(z!==J&&l.bl_tree[2*z]++,l.bl_tree[2*S]++):K<=10?l.bl_tree[2*C]++:l.bl_tree[2*U]++,J=z,xt=(K=0)===tt?(at=138,3):z===tt?(at=6,3):(at=7,4))}function T(l,j,F){var W,z,J=-1,tt=j[1],K=0,at=7,xt=4;for(tt===0&&(at=138,xt=3),W=0;W<=F;W++)if(z=tt,tt=j[2*(W+1)+1],!(++K<at&&z===tt)){if(K<xt)for(;Y(l,z,l.bl_tree),--K!=0;);else z!==0?(z!==J&&(Y(l,z,l.bl_tree),K--),Y(l,S,l.bl_tree),Q(l,K-3,2)):K<=10?(Y(l,C,l.bl_tree),Q(l,K-3,3)):(Y(l,U,l.bl_tree),Q(l,K-11,7));J=z,xt=(K=0)===tt?(at=138,3):z===tt?(at=6,3):(at=7,4)}}u(G);var I=!1;function f(l,j,F,W){Q(l,(k<<1)+(W?1:0),3),function(z,J,tt,K){pt(z),rt(z,tt),rt(z,~tt),d.arraySet(z.pending_buf,z.window,J,tt,z.pending),z.pending+=tt}(l,j,F)}N._tr_init=function(l){I||(function(){var j,F,W,z,J,tt=new Array(h+1);for(z=W=0;z<w-1;z++)for(D[z]=W,j=0;j<1<<O[z];j++)r[W++]=z;for(r[W-1]=z,z=J=0;z<16;z++)for(G[z]=J,j=0;j<1<<P[z];j++)B[J++]=z;for(J>>=7;z<s;z++)for(G[z]=J<<7,j=0;j<1<<P[z]-7;j++)B[256+J++]=z;for(F=0;F<=h;F++)tt[F]=0;for(j=0;j<=143;)st[2*j+1]=8,j++,tt[8]++;for(;j<=255;)st[2*j+1]=9,j++,tt[9]++;for(;j<=279;)st[2*j+1]=7,j++,tt[7]++;for(;j<=287;)st[2*j+1]=8,j++,tt[8]++;for(wt(st,b+1,tt),j=0;j<s;j++)y[2*j+1]=5,y[2*j]=_t(j,5);ot=new it(st,O,m+1,b,h),$=new it(y,P,0,s,h),ct=new it(new Array(0),R,0,p,x)}(),I=!0),l.l_desc=new E(l.dyn_ltree,ot),l.d_desc=new E(l.dyn_dtree,$),l.bl_desc=new E(l.bl_tree,ct),l.bi_buf=0,l.bi_valid=0,ft(l)},N._tr_stored_block=f,N._tr_flush_block=function(l,j,F,W){var z,J,tt=0;0<l.level?(l.strm.data_type===2&&(l.strm.data_type=function(K){var at,xt=4093624447;for(at=0;at<=31;at++,xt>>>=1)if(1&xt&&K.dyn_ltree[2*at]!==0)return c;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return n;for(at=32;at<m;at++)if(K.dyn_ltree[2*at]!==0)return n;return c}(l)),Ot(l,l.l_desc),Ot(l,l.d_desc),tt=function(K){var at;for(t(K,K.dyn_ltree,K.l_desc.max_code),t(K,K.dyn_dtree,K.d_desc.max_code),Ot(K,K.bl_desc),at=p-1;3<=at&&K.bl_tree[2*L[at]+1]===0;at--);return K.opt_len+=3*(at+1)+5+5+4,at}(l),z=l.opt_len+3+7>>>3,(J=l.static_len+3+7>>>3)<=z&&(z=J)):z=J=F+5,F+4<=z&&j!==-1?f(l,j,F,W):l.strategy===4||J===z?(Q(l,2+(W?1:0),3),It(l,st,y)):(Q(l,4+(W?1:0),3),function(K,at,xt,ht){var zt;for(Q(K,at-257,5),Q(K,xt-1,5),Q(K,ht-4,4),zt=0;zt<ht;zt++)Q(K,K.bl_tree[2*L[zt]+1],3);T(K,K.dyn_ltree,at-1),T(K,K.dyn_dtree,xt-1)}(l,l.l_desc.max_code+1,l.d_desc.max_code+1,tt+1),It(l,l.dyn_ltree,l.dyn_dtree)),ft(l),W&&pt(l)},N._tr_tally=function(l,j,F){return l.pending_buf[l.d_buf+2*l.last_lit]=j>>>8&255,l.pending_buf[l.d_buf+2*l.last_lit+1]=255&j,l.pending_buf[l.l_buf+l.last_lit]=255&F,l.last_lit++,j===0?l.dyn_ltree[2*F]++:(l.matches++,j--,l.dyn_ltree[2*(r[F]+m+1)]++,l.dyn_dtree[2*A(j)]++),l.last_lit===l.lit_bufsize-1},N._tr_align=function(l){Q(l,2,3),Y(l,_,st),function(j){j.bi_valid===16?(rt(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(l)}},{"../utils/common":41}],53:[function(v,Z,N){Z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(v,Z,N){(function(d){(function(c,n){if(!c.setImmediate){var u,k,w,m,b=1,s={},p=!1,i=c.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(c);h=h&&h.setTimeout?h:c,u={}.toString.call(c.process)==="[object process]"?function(S){process.nextTick(function(){x(S)})}:function(){if(c.postMessage&&!c.importScripts){var S=!0,C=c.onmessage;return c.onmessage=function(){S=!1},c.postMessage("","*"),c.onmessage=C,S}}()?(m="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",_,!1):c.attachEvent("onmessage",_),function(S){c.postMessage(m+S,"*")}):c.MessageChannel?((w=new MessageChannel).port1.onmessage=function(S){x(S.data)},function(S){w.port2.postMessage(S)}):i&&"onreadystatechange"in i.createElement("script")?(k=i.documentElement,function(S){var C=i.createElement("script");C.onreadystatechange=function(){x(S),C.onreadystatechange=null,k.removeChild(C),C=null},k.appendChild(C)}):function(S){setTimeout(x,0,S)},h.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var C=new Array(arguments.length-1),U=0;U<C.length;U++)C[U]=arguments[U+1];var O={callback:S,args:C};return s[b]=O,u(b),b++},h.clearImmediate=o}function o(S){delete s[S]}function x(S){if(p)setTimeout(x,0,S);else{var C=s[S];if(C){p=!0;try{(function(U){var O=U.callback,P=U.args;switch(P.length){case 0:O();break;case 1:O(P[0]);break;case 2:O(P[0],P[1]);break;case 3:O(P[0],P[1],P[2]);break;default:O.apply(n,P)}})(C)}finally{o(S),p=!1}}}}function _(S){S.source===c&&typeof S.data=="string"&&S.data.indexOf(m)===0&&x(+S.data.slice(m.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof ae<"u"?ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ce);var tr=Ce.exports;const Se=Ye(tr);function ir(){var he,ue,fe,me,pe,xe,ge,be,ye,ke,ve,_e,we,je;const{projectId:At,episodeId:St}=qe(),v=Ve(),Z=Qe(),N=nt.useMemo(()=>{const a=new URLSearchParams(Z.search),g=Number(a.get("shot"));return Number.isFinite(g)&&g>0?g:null},[Z.search]),[d,c]=nt.useState(null),[n,u]=nt.useState(null),[k,w]=nt.useState(!0),[m,b]=nt.useState([]),[s,p]=nt.useState(1),[i,h]=nt.useState(!1),[o,x]=nt.useState(0),_=140,S=nt.useRef(null),C=nt.useRef(""),[U,O]=nt.useState(!1),[P,R]=nt.useState([]),[L,st]=nt.useState([]),[y,B]=nt.useState([]),[r,D]=nt.useState([]),[ot,$]=nt.useState([]),[ct,G]=nt.useState([]),[it,E]=nt.useState([]),[A,rt]=nt.useState(null),[Q,Y]=nt.useState(!1),[_t,wt]=nt.useState(!1),[ft,pt]=nt.useState([]),[jt,yt]=nt.useState(!1),[It,Ot]=nt.useState([]),[t,T]=nt.useState([]),[I,f]=nt.useState(""),[l,j]=nt.useState(""),[F,W]=nt.useState(null),[z,J]=nt.useState(""),[tt,K]=nt.useState(""),[at,xt]=nt.useState(""),[ht,zt]=nt.useState(""),[Ft,Rt]=nt.useState(!1),[Bt,kt]=nt.useState(null),[Gt,Dt]=nt.useState(null),[Ct,Zt]=nt.useState(0),[Vt,Jt]=nt.useState({}),[Lt,Xt]=nt.useState(()=>{if(St)try{const a=localStorage.getItem(`episode_${St}_globalAssets`);if(a)return JSON.parse(a)}catch{}return{roles:[],scenes:[],props:[],audios:[]}});nt.useEffect(()=>{St&&localStorage.setItem(`episode_${St}_globalAssets`,JSON.stringify(Lt))},[St,Lt]);const q=nt.useMemo(()=>m.find(a=>a.shotIndex===s)||null,[m,s]);nt.useEffect(()=>{const a=m.find(g=>g.shotIndex===s);if(a!=null&&a.mediaList&&a.mediaList.length>0){const g=a.mediaList.findIndex(M=>M==null?void 0:M.isPrimary);Zt(g>=0?g:0)}else Zt(0)},[s,m]),nt.useEffect(()=>{m.forEach(a=>{var M,V;const g=((M=a.mediaList)==null?void 0:M.find(H=>H==null?void 0:H.isPrimary))||((V=a.mediaList)==null?void 0:V[0])||a.media;if(g!=null&&g.url){if(g.duration&&g.duration>0){Jt(H=>({...H,[a.shotIndex]:g.duration}));return}if(g.type==="image"){Jt(H=>({...H,[a.shotIndex]:5}));return}if(g.type==="video"||!g.type){const H=document.createElement("video");H.src=g.url,H.preload="metadata",H.onloadedmetadata=()=>{H.duration&&isFinite(H.duration)&&Jt(et=>({...et,[a.shotIndex]:H.duration}))}}else if(g.type==="audio"){const H=document.createElement("audio");H.src=g.url,H.preload="metadata",H.onloadedmetadata=()=>{H.duration&&isFinite(H.duration)&&Jt(et=>({...et,[a.shotIndex]:H.duration}))}}}})},[m]);const Nt=(d==null?void 0:d.canEdit)??!0;nt.useEffect(()=>{(async()=>{var g;try{const M=await Tt.episodes.getById(At,St),V=(M==null?void 0:M.data)??M;c(V);const H=(g=V==null?void 0:V.scriptJson)==null?void 0:g.acts;if(Array.isArray(H)&&H.length>0){const et=[];let lt=1;if(H.forEach(X=>{Array.isArray(X.shots)&&X.shots.forEach(dt=>{et.push({...dt,shotIndex:lt++})})}),b(et),C.current=JSON.stringify(et),et.length>0){const X=N&&N<=et.length?N:1;p(X)}}}finally{w(!1)}})()},[At,St]),nt.useEffect(()=>{At&&(async()=>{try{const g=await Tt.projects.getById(At);u(g.data)}catch{}})()},[At]),nt.useEffect(()=>{(async()=>{try{const g=await Tt.assetLibraries.getAll({includeShared:"true"});R(g.data||[])}catch{}})()},[]),nt.useEffect(()=>{if(St){const a=localStorage.getItem(`episode_${St}_libraries`);if(a)try{st(JSON.parse(a))}catch{}}},[St]),nt.useEffect(()=>{const a=async()=>{if(L.length===0){B([]),D([]),$([]),G([]);return}const g=P.filter(ut=>ut.category==="ROLE"&&L.includes(ut.id)),M=P.filter(ut=>ut.category==="SCENE"&&L.includes(ut.id)),V=P.filter(ut=>ut.category==="PROP"&&L.includes(ut.id)),H=P.filter(ut=>ut.category==="AUDIO"&&L.includes(ut.id)),et=P.filter(ut=>ut.category==="OTHER"&&L.includes(ut.id)),lt=[];for(const ut of g)try{const vt=await Tt.assetLibraries.roles.list(ut.id);vt.data&&lt.push(...vt.data)}catch{}B(lt);const X=[];for(const ut of M)try{const vt=await Tt.assetLibraries.getAssets(ut.id);vt.data&&X.push(...vt.data)}catch{}D(X);const dt=[];for(const ut of V)try{const vt=await Tt.assetLibraries.getAssets(ut.id);vt.data&&dt.push(...vt.data)}catch{}$(dt);const bt=[];for(const ut of H)try{const vt=await Tt.assetLibraries.getAssets(ut.id);vt.data&&bt.push(...vt.data)}catch{}G(bt);const gt=[];for(const ut of et)try{const vt=await Tt.assetLibraries.getAssets(ut.id);vt.data&&gt.push(...vt.data)}catch{}E(gt)};P.length>0&&a()},[L,P]);const Ut=(a,g)=>{if(!q){mt.error("");return}b(M=>M.map(V=>{if(V.shotIndex!==s)return V;const H=a==="role"?"selectedRoles":a==="scene"?"selectedScenes":a==="prop"?"selectedProps":"selectedAudios",et=V[H]||[],lt=et.some(X=>X.id===g.id);return{...V,[H]:lt?et.filter(X=>X.id!==g.id):[...et,{id:g.id,name:g.name,thumbnail:g.thumbnail,url:g.url,metadata:g.metadata}]}}))},Kt=(a,g)=>q?(q[a==="role"?"selectedRoles":a==="scene"?"selectedScenes":a==="prop"?"selectedProps":"selectedAudios"]||[]).some(V=>V.id===g):!1,Mt=(a,g)=>Lt[a==="role"?"roles":a==="scene"?"scenes":a==="prop"?"props":"audios"].includes(g),Qt=(a,g)=>{const M=a==="role"?"roles":a==="scene"?"scenes":a==="prop"?"props":"audios",V=a==="role"?"selectedRoles":a==="scene"?"selectedScenes":a==="prop"?"selectedProps":"selectedAudios";Lt[M].includes(g.id)?Xt(et=>({...et,[M]:et[M].filter(lt=>lt!==g.id)})):(Xt(et=>({...et,[M]:[...et[M],g.id]})),b(et=>et.map(lt=>{const X=lt[V]||[];return X.some(bt=>bt.id===g.id)?lt:{...lt,[V]:[...X,{id:g.id,name:g.name,thumbnail:g.thumbnail,url:g.url,metadata:g.metadata}]}})))},ze=a=>{st(a),St&&localStorage.setItem(`episode_${St}_libraries`,JSON.stringify(a)),O(!1),mt.success("")},Yt=a=>{st(g=>g.includes(a)?g.filter(M=>M!==a):[...g,a])},Ae=a=>{if(!q)return;const g=m.map(M=>{if(M.shotIndex===s){const V=[...M.mediaList||[]];return V.forEach(H=>{H&&(H.isPrimary=!1)}),V[a]&&(V[a].isPrimary=!0),{...M,mediaList:V}}return M});b(g)},Ee=()=>{if(!q)return;const a=m.map(g=>{if(g.shotIndex===s){const M=[...g.mediaList||[]];return M.forEach(V=>{V&&(V.isPrimary=!1)}),{...g,mediaList:M}}return g});b(a)},Pt=nt.useCallback(async a=>{try{h(!0);const g=[{actIndex:1,shots:a}];await Tt.episodes.update(At,St,{scriptJson:{acts:g}}),C.current=JSON.stringify(a)}catch(g){mt.error((g==null?void 0:g.message)||"")}finally{h(!1)}},[At,St]),le=nt.useCallback(a=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{JSON.stringify(a)!==C.current&&Pt(a)},1e3)},[Pt]);nt.useEffect(()=>(m.length>0&&!k&&le(m),()=>{S.current&&clearTimeout(S.current)}),[m,k,le]),nt.useEffect(()=>{const a=()=>{var M;if(S.current&&clearTimeout(S.current),JSON.stringify(m)!==C.current&&m.length>0){const V=[{actIndex:1,shots:m}];(M=navigator.sendBeacon)==null||M.call(navigator,`https://api.waule.ai/api/tenant/projects/${At}/episodes/${St}`,JSON.stringify({scriptJson:{acts:V}}))}};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[m,At,St]);const ne=(a,g,M)=>{b(V=>V.map(H=>H.shotIndex===a?{...H,[g]:M}:H))},Ie=async()=>{const a=m.length>0?Math.max(...m.map(X=>X.shotIndex))+1:1,g=y.filter(X=>Lt.roles.includes(X.id)).map(X=>({id:X.id,name:X.name,thumbnail:X.thumbnail,metadata:X.metadata})),M=r.filter(X=>Lt.scenes.includes(X.id)).map(X=>({id:X.id,name:X.name,thumbnail:X.thumbnail,url:X.url,metadata:X.metadata})),V=ot.filter(X=>Lt.props.includes(X.id)).map(X=>({id:X.id,name:X.name,thumbnail:X.thumbnail,url:X.url,metadata:X.metadata})),H=ct.filter(X=>Lt.audios.includes(X.id)).map(X=>({id:X.id,name:X.name,thumbnail:X.thumbnail,url:X.url,metadata:X.metadata})),et={shotIndex:a,:"","/":"","/":"","/":"",:"",:"",selectedRoles:g,selectedScenes:M,selectedProps:V,selectedAudios:H},lt=[...m,et];b(lt),p(a),await Pt(lt)},Oe=async a=>{if(!window.confirm(""))return;const g=m.filter(M=>M.shotIndex!==a).map((M,V)=>({...M,shotIndex:V+1}));b(g),s===a?p(g.length>0?g[0].shotIndex:0):s>a&&p(s-1),await Pt(g)},Re=(a,g)=>{Nt&&(kt(g),a.dataTransfer.effectAllowed="move")},Be=(a,g)=>{var V;if(a.preventDefault(),Bt===null||Bt===g)return;Dt(g);const M=(V=a.currentTarget.parentElement)==null?void 0:V.parentElement;if(M){const H=M.getBoundingClientRect(),et=a.clientX,lt=80;et<H.left+lt?x(X=>Math.max(0,X-1)):et>H.right-lt&&x(X=>Math.min(Math.max(0,m.length-5),X+1))}},Te=()=>{Dt(null)},Le=async(a,g)=>{if(a.preventDefault(),Bt===null||Bt===g){kt(null),Dt(null);return}const M=[...m],V=M.findIndex(X=>X.shotIndex===Bt),H=M.findIndex(X=>X.shotIndex===g);if(V===-1||H===-1)return;const[et]=M.splice(V,1);M.splice(H,0,et);const lt=M.map((X,dt)=>({...X,shotIndex:dt+1}));b(lt),s===Bt&&p(g),kt(null),Dt(null),await Pt(lt)},De=()=>{kt(null),Dt(null)},Pe=async(a,g,M,V)=>{try{const H=(n==null?void 0:n.name)||"",et=(d==null?void 0:d.episodeNumber)||1,lt=V==="image"?"png":V==="audio"?"mp3":"mp4",X=`${H}_S${et}_Shot${g}_${String(M+1).padStart(2,"0")}.${lt}`,bt=(await oe.get("/assets/proxy-download-with-name",{params:{url:a,filename:X},responseType:"blob"})).data,gt=document.createElement("a");gt.href=URL.createObjectURL(bt),gt.download=X,gt.click(),URL.revokeObjectURL(gt.href)}catch(H){mt.error(": "+(H.message||""))}},Fe=async()=>{const a=(n==null?void 0:n.name)||"",g=(d==null?void 0:d.episodeNumber)||1,M=`${a}_S${g}`,V=`${a}_S${g}_.zip`,H=[];for(const lt of m)lt.mediaList&&Array.isArray(lt.mediaList)&&lt.mediaList.forEach((X,dt)=>{X!=null&&X.url&&H.push({url:X.url,shotIndex:lt.shotIndex,mediaIndex:dt,type:X.type||"video"})});if(H.length===0){mt.info("");return}const et=mt.loading(` ${H.length} ...`);try{const lt=new Se,X=lt.folder(M);let dt=0;for(const ut of H)try{const vt=await oe.get("/assets/proxy-download",{params:{url:ut.url},responseType:"blob"}),Wt=ut.type==="image"?"png":ut.type==="audio"?"mp3":"mp4",$t=`${a}_S${g}_Shot${ut.shotIndex}_${String(ut.mediaIndex+1).padStart(2,"0")}.${Wt}`,te=`shot${String(ut.shotIndex).padStart(2,"0")}`,qt=X==null?void 0:X.folder(te);qt==null||qt.file($t,vt.data),dt++,mt.loading(` ${dt}/${H.length}...`,{id:et})}catch{}mt.loading("...",{id:et});const bt=await lt.generateAsync({type:"blob"}),gt=document.createElement("a");gt.href=URL.createObjectURL(bt),gt.download=V,gt.click(),URL.revokeObjectURL(gt.href),mt.success(` ${dt} `,{id:et})}catch(lt){mt.error(": "+(lt.message||""),{id:et})}},Ue=()=>{var g;const a=[];for(const M of m)((g=M.mediaList)==null?void 0:g.some(H=>(H==null?void 0:H.isPrimary)&&(H==null?void 0:H.url)))||a.push(M.shotIndex);a.length>0?(pt(a),wt(!0)):de()},de=async()=>{var lt;const a=(n==null?void 0:n.name)||"",g=(d==null?void 0:d.episodeNumber)||1,M=`${a}_S${g}`,V=`${M}_.zip`,H=[];for(const X of m.sort((dt,bt)=>dt.shotIndex-bt.shotIndex)){const dt=(lt=X.mediaList)==null?void 0:lt.find(bt=>(bt==null?void 0:bt.isPrimary)&&(bt==null?void 0:bt.url));dt&&dt.url&&H.push({url:dt.url,shotIndex:X.shotIndex,type:dt.type||"video",duration:dt.duration||5})}if(H.length===0){mt.info("");return}wt(!1);const et=mt.loading("...");try{const X=new Se,dt=X.folder(M),bt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Et=>{const Ht=Math.random()*16|0;return(Et==="x"?Ht:Ht&3|8).toString(16).toUpperCase()}),gt=[],ut=[];let vt=0,Wt=0,$t=0;for(const Et of H)try{mt.loading(` ${vt+1}/${H.length}...`,{id:et});const Ht=await oe.get("/assets/proxy-download",{params:{url:Et.url},responseType:"blob"}),Xe=Et.type==="image"?"png":Et.type==="audio"?"mp3":"mp4",ie=`${String(vt+1).padStart(3,"0")}_Shot${String(Et.shotIndex).padStart(2,"0")}.${Xe}`;dt==null||dt.file(ie,Ht.data);const re=Math.round((Et.duration||5)*1e6),Ne=bt();gt.push({id:Ne,type:Et.type==="audio"?"audio":"video",duration:re,path:ie,material_name:ie}),ut.push({id:bt(),material_id:Ne,source_timerange:{duration:re,start:0},target_timerange:{duration:re,start:$t}}),$t+=re,Wt+=Et.duration||5,vt++}catch{}mt.loading("...",{id:et});const te={id:bt(),name:M,duration:$t,materials:{videos:gt},tracks:[{id:bt(),type:"video",segments:ut}]};dt==null||dt.file("draft_content.json",JSON.stringify(te,null,2));const qt={draft_id:te.id,draft_name:M,draft_root_path:"",tm_draft_create:Date.now(),tm_draft_modified:Date.now()};dt==null||dt.file("draft_meta_info.json",JSON.stringify(qt,null,2));const Je=["# "+M+" - ","","## ","","1. ","2. ","3. ","","001_Shot01, 002_Shot02...","","## ",...H.map((Et,Ht)=>"- "+String(Ht+1).padStart(3,"0")+"_Shot"+String(Et.shotIndex).padStart(2,"0")+": "+(Et.type==="image"?"":Et.type==="audio"?"":"")+" ("+(Et.duration||5)+")"),""," "+vt+"  "+Math.round(Wt)+" "].join(`\r
`);dt==null||dt.file(".txt",Je);const Ke=await X.generateAsync({type:"blob"}),ee=document.createElement("a");ee.href=URL.createObjectURL(Ke),ee.download=V,ee.click(),URL.revokeObjectURL(ee.href),mt.success(`${vt} `,{id:et})}catch(X){mt.error(": "+(X.message||""),{id:et})}},Me=async()=>{S.current&&clearTimeout(S.current),m.length>0&&await Pt(m);const a=[];q!=null&&q.selectedRoles&&q.selectedRoles.forEach(M=>a.push({type:"role",...M})),q!=null&&q.selectedScenes&&q.selectedScenes.forEach(M=>a.push({type:"scene",...M})),q!=null&&q.selectedProps&&q.selectedProps.forEach(M=>a.push({type:"prop",...M}));const g=a.length>0?`&assets=${encodeURIComponent(JSON.stringify(a))}`:"";v(`/projects/${At}/episodes/${St}/workflow?scene=1&shot=${s}${g}`)},We=(n==null?void 0:n.name)||"",ce=d!=null&&d.episodeNumber&&d.episodeNumber>0?d.episodeNumber:void 0,Ze=async()=>{yt(!0),f(""),j(""),W(null),J(""),K(""),xt(""),zt(""),T([]);try{const a=await Tt.agents.getAll(),M=((a==null?void 0:a.data)||a||[]).filter(V=>V.isActive&&V.usageScene==="episode");Ot(M)}catch{mt.error("")}},$e=async a=>{if(f(a),j(""),T([]),!!a)try{const g=await Tt.agents.roles.listByAgent(a),V=((g==null?void 0:g.data)||g||[]).filter(H=>H.isActive);T(V)}catch{mt.error("")}},He=async a=>{var M,V;const g=(M=a.target.files)==null?void 0:M[0];if(g)if(W(g),J(""),K(""),g.type==="text/plain"||g.name.endsWith(".txt")){const H=await g.text();xt(H)}else{xt("");const H=mt.loading("...");try{const et=await Tt.assets.upload(g),lt=((V=et==null?void 0:et.data)==null?void 0:V.url)||(et==null?void 0:et.url);lt?(J(lt),K(g.type),mt.success("AI",{id:H})):mt.error("",{id:H})}catch{mt.error("",{id:H})}}},Ge=async()=>{if(!l){mt.error("");return}if(!at&&!z){mt.error("/");return}Rt(!0);const a=mt.loading("...");try{const g=at||"JSON";let M="";ht&&(M+=`

${ht}`),M+=`


JSON
{
  "shots": [
    {
      "": "",
      "/": "///",
      "/": "",
      "/": "",
      "": "5s",
      "": "AI"
    }
  ]
}`;const V=z?[{filePath:z,mimeType:tt}]:void 0,H=await Tt.agents.roles.execute(l,{prompt:g,systemPrompt:M,maxTokens:16384,documentFiles:V}),et=(H==null?void 0:H.data)||H;let lt=(et==null?void 0:et.text)||(et==null?void 0:et.content)||"";try{const X=lt.match(/\{[\s\S]*\}/);if(X){const bt=(JSON.parse(X[0]).shots||[]).map((gt,ut)=>({shotIndex:ut+1,:gt.||gt.scene||"","/":gt["/"]||gt.shotType||"","/":gt["/"]||gt.action||"","/":gt["/"]||gt.dialogue||"",:gt.||gt.duration||"5s",:gt.||gt.prompt||""}));if(bt.length>0){if(m.length===0||window.confirm(` ${m.length} 
""""`))b(bt),p(1);else{const ut=m.length>0?Math.max(...m.map(Wt=>Wt.shotIndex))+1:1,vt=bt.map((Wt,$t)=>({...Wt,shotIndex:ut+$t}));b([...m,...vt])}mt.success(` ${bt.length} `,{id:a}),yt(!1)}else mt.error("",{id:a})}else mt.error("",{id:a})}catch{mt.error("",{id:a})}}catch(g){mt.error((g==null?void 0:g.message)||"",{id:a})}finally{Rt(!1)}};return k?e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background-light dark:bg-background-dark",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):e.jsxs("div",{className:"h-screen w-full overflow-hidden flex flex-col bg-background-light dark:bg-background-dark p-2 gap-2",children:[e.jsxs("header",{className:"h-14 flex items-center justify-between px-4 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl shrink-0 overflow-visible relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>v(-1),className:"text-text-light-secondary dark:text-text-dark-secondary hover:text-text-light-primary dark:hover:text-text-dark-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsx("div",{className:"h-5 w-px bg-border-light dark:bg-border-dark"}),e.jsxs("h2",{className:"text-text-light-primary dark:text-text-dark-primary font-bold",children:[We,ce&&e.jsxs("span",{className:"font-normal text-text-light-secondary dark:text-text-dark-secondary text-sm ml-2",children:["",ce,""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx("span",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:"..."}),e.jsxs("div",{className:"group relative",children:[e.jsxs("button",{onClick:()=>O(!0),className:"relative w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"settings"}),L.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-slate-500 text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center shadow",children:L.length})]}),e.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]}),e.jsx("div",{className:"h-5 w-px bg-slate-300 dark:bg-white/20"}),e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:Ze,className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit_note"})}),e.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]}),e.jsx("div",{className:"h-5 w-px bg-slate-300 dark:bg-white/20"}),e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:Ue,className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"content_cut"})}),e.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]}),e.jsx("div",{className:"h-5 w-px bg-slate-300 dark:bg-white/20"}),e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:Fe,className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"ios_share"})}),e.jsx("span",{className:"absolute top-full right-0 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-[320px_1fr_420px] min-h-0 overflow-hidden gap-2",children:[e.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl min-h-0 overflow-hidden",children:[e.jsx("div",{className:"h-10 shrink-0 flex items-center px-4",children:e.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary font-bold text-sm",children:""})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-3 min-h-0 scrollbar-thin",style:{scrollbarWidth:"thin"},children:q&&e.jsx(e.Fragment,{children:Array.isArray(q.mediaList)&&q.mediaList.length>0?(()=>{const a=q.mediaList.some(g=>g==null?void 0:g.isPrimary);return q.mediaList.map((g,M)=>e.jsxs("div",{onClick:()=>Zt(M),className:`group relative flex gap-3 p-2 rounded-lg cursor-pointer transition-colors ${Ct===M?"bg-neutral-100 dark:bg-neutral-800":"hover:bg-slate-100 dark:hover:bg-card-dark-hover"}`,style:Ct===M?{border:"2px solid #71717a"}:{},children:[e.jsxs("div",{className:"w-24 aspect-video bg-slate-200 dark:bg-border-dark rounded overflow-hidden relative",children:[(g==null?void 0:g.type)==="video"&&(g!=null&&g.url)?e.jsx("video",{src:g.url,className:"w-full h-full object-cover"}):(g==null?void 0:g.type)==="image"&&(g!=null&&g.url)?e.jsx("img",{src:g.url,alt:"",className:"w-full h-full object-cover"}):(g==null?void 0:g.type)==="audio"&&(g!=null&&g.url)?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-neutral-500",children:"music_note"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"movie"})}),(g==null?void 0:g.isPrimary)&&e.jsx("div",{className:"absolute top-1 left-1 bg-neutral-800 dark:bg-white text-white dark:text-black text-[10px] px-1.5 py-0.5 rounded font-bold",children:""})]}),e.jsxs("div",{className:"flex flex-col justify-center min-w-0 flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:[(g==null?void 0:g.type)==="video"?"":(g==null?void 0:g.type)==="image"?"":(g==null?void 0:g.type)==="audio"?"":""," ",M+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] text-text-light-secondary dark:text-text-dark-secondary",children:(g==null?void 0:g.type)==="video"?"videocam":(g==null?void 0:g.type)==="image"?"image":(g==null?void 0:g.type)==="audio"?"music_note":"attachment"}),e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-xs",children:g.aspectRatio||((g==null?void 0:g.type)==="audio"?"":"16:9")})]})]}),g!=null&&g.isPrimary?e.jsx("button",{onClick:V=>{V.stopPropagation(),Ee()},className:"shrink-0 self-center w-7 h-7 flex items-center justify-center bg-neutral-800 dark:bg-white text-white dark:text-black rounded-lg hover:bg-neutral-700 dark:hover:bg-neutral-200 transition-all opacity-0 group-hover:opacity-100",title:"",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"star"})}):!a&&e.jsx("button",{onClick:V=>{V.stopPropagation(),Ae(M)},className:"shrink-0 self-center w-7 h-7 flex items-center justify-center bg-slate-200 dark:bg-border-dark text-text-light-secondary dark:text-text-dark-secondary rounded-lg hover:bg-neutral-800 dark:hover:bg-white hover:text-white dark:hover:text-black transition-all opacity-0 group-hover:opacity-100",title:"",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"star_outline"})}),(g==null?void 0:g.url)&&e.jsx("button",{onClick:V=>{V.stopPropagation(),Pe(g.url,s,M,g.type)},className:"shrink-0 self-center w-7 h-7 flex items-center justify-center bg-slate-200 dark:bg-border-dark text-text-light-secondary dark:text-text-dark-secondary rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-all opacity-0 group-hover:opacity-100",title:"",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"download"})}),!(g!=null&&g.isPrimary)&&e.jsx("button",{onClick:V=>{V.stopPropagation(),b(H=>H.map(et=>{var lt;return et.shotIndex===s?{...et,mediaList:(lt=et.mediaList)==null?void 0:lt.filter((X,dt)=>dt!==M)}:et})),Ct>=M&&Ct>0&&Zt(Ct-1)},className:"shrink-0 self-center w-7 h-7 flex items-center justify-center bg-slate-200 dark:bg-border-dark text-text-light-secondary dark:text-text-dark-secondary rounded-lg hover:bg-red-500 hover:text-white transition-all opacity-0 group-hover:opacity-100",title:"",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"delete"})})]},M))})():(he=q.media)!=null&&he.url?e.jsxs("div",{className:"group relative flex gap-3 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-card-dark-hover cursor-pointer transition-colors border border-transparent hover:border-border-light dark:hover:border-border-dark",children:[e.jsx("div",{className:"w-24 aspect-video bg-slate-200 dark:bg-border-dark rounded overflow-hidden relative",children:e.jsx("video",{src:q.media.url,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] text-text-light-secondary dark:text-text-dark-secondary",children:"videocam"}),e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-xs",children:q.media.aspectRatio||"16:9"})]})]})]}):e.jsxs("div",{className:"text-center text-text-light-secondary dark:text-text-dark-secondary text-sm py-8",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"movie"}),""]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl flex flex-col relative overflow-hidden h-full",children:[e.jsxs("div",{className:"h-10 shrink-0 flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-text-light-secondary dark:text-text-dark-secondary text-sm",children:[e.jsxs("span",{className:"font-bold text-text-light-primary dark:text-text-dark-primary",children:[" ",s.toString().padStart(2,"0")]}),e.jsx("span",{children:"/"}),e.jsxs("span",{children:[" ",m.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>{L.length===0?(mt.info(""),O(!0)):Y(!0)},className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"library_add"})}),e.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]}),e.jsxs("div",{className:"group relative ml-2",children:[e.jsx("button",{onClick:Me,className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-white/10 text-slate-600 dark:text-white/70 border border-slate-400 dark:border-white/30 hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:scale-105 transition-all flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"auto_awesome"})}),e.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 text-xs text-white bg-slate-800 dark:bg-slate-700 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-[9999]",children:""})]})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 min-h-0 min-w-0 overflow-hidden",children:q&&((fe=(ue=q.mediaList)==null?void 0:ue[Ct])!=null&&fe.url||(pe=(me=q.mediaList)==null?void 0:me[0])!=null&&pe.url||(xe=q.media)!=null&&xe.url)?(()=>{var V,H;const a=((V=q.mediaList)==null?void 0:V[Ct])||((H=q.mediaList)==null?void 0:H[0])||q.media,g=(a==null?void 0:a.type)||"video",M=a==null?void 0:a.url;return g==="video"?e.jsx("video",{src:M,controls:!0,className:"max-w-full max-h-full rounded-lg object-contain"}):g==="image"?e.jsx("img",{src:M,alt:"",className:"max-w-full max-h-full rounded-lg object-contain"}):g==="audio"?e.jsxs("div",{className:"w-80 p-8 rounded-lg bg-neutral-200 dark:bg-neutral-800 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-neutral-500 mb-4",children:"music_note"}),e.jsx("audio",{src:M,controls:!0,className:"w-full"})]}):e.jsx("video",{src:M,controls:!0,className:"max-w-full max-h-full rounded-lg object-contain"})})():e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-400 dark:text-slate-500 mb-2",children:"movie"}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm",children:""})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl flex flex-col",children:[e.jsxs("div",{className:"h-10 flex items-center justify-between px-4",children:[e.jsx("span",{className:"text-text-light-primary dark:text-text-dark-primary font-bold text-sm",children:""}),Nt&&!1]}),e.jsx("div",{className:"flex-1 p-4 flex flex-col min-h-0",children:q?e.jsxs("div",{className:"flex flex-col gap-3 h-full",children:[e.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[e.jsx("label",{className:"block text-xs font-bold text-text-light-secondary dark:text-text-dark-secondary mb-1 uppercase shrink-0",children:""}),e.jsx("textarea",{value:q.,onChange:Nt?a=>ne(s,"",a.target.value):void 0,onBlur:Nt?()=>Pt(m):void 0,readOnly:!Nt,className:"flex-1 w-full bg-white/30 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary rounded-lg p-3 text-sm resize-none border border-slate-400 dark:border-white/20 focus:border-neutral-500 focus:outline-none backdrop-blur-sm",placeholder:"..."})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[e.jsx("label",{className:"block text-xs font-bold text-text-light-secondary dark:text-text-dark-secondary mb-1 uppercase shrink-0",children:""}),e.jsx("textarea",{value:q["/"],onChange:Nt?a=>ne(s,"/",a.target.value):void 0,onBlur:Nt?()=>Pt(m):void 0,readOnly:!Nt,className:"flex-1 w-full bg-white/30 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary rounded-lg p-3 text-sm resize-none border border-slate-400 dark:border-white/20 focus:border-neutral-500 focus:outline-none backdrop-blur-sm",placeholder:"..."})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[e.jsx("label",{className:"block text-xs font-bold text-text-light-secondary dark:text-text-dark-secondary mb-1 uppercase shrink-0",children:"/"}),e.jsx("textarea",{value:q["/"],onChange:Nt?a=>ne(s,"/",a.target.value):void 0,onBlur:Nt?()=>Pt(m):void 0,readOnly:!Nt,className:"flex-1 w-full bg-white/30 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary rounded-lg p-3 text-sm resize-none border border-slate-400 dark:border-white/20 focus:border-neutral-500 focus:outline-none backdrop-blur-sm",placeholder:"..."})]})]}):e.jsx("div",{className:"text-center text-text-light-secondary dark:text-text-dark-secondary py-8",children:""})})]})]}),e.jsxs("div",{className:"h-80 shrink-0 flex flex-col gap-2",children:[e.jsxs("div",{className:"h-32 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl flex items-center justify-center px-4 gap-3",children:[e.jsx("button",{onClick:()=>x(Math.max(0,o-1)),disabled:o<=0,className:"shrink-0 w-8 h-8 rounded-full bg-slate-200 dark:bg-border-dark flex items-center justify-center text-text-light-secondary dark:text-text-dark-secondary hover:bg-slate-300 dark:hover:bg-border-dark-hover hover:text-text-light-primary dark:hover:text-text-dark-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_left"})}),e.jsx("div",{className:"flex-1 overflow-x-hidden overflow-y-visible py-2 px-4",children:e.jsxs("div",{className:"flex gap-3 transition-transform duration-300",style:{transform:`translateX(-${o*(_+12)}px)`},children:[m.map(a=>e.jsxs("div",{draggable:Nt,onDragStart:g=>Re(g,a.shotIndex),onDragOver:g=>Be(g,a.shotIndex),onDragLeave:Te,onDrop:g=>Le(g,a.shotIndex),onDragEnd:De,onClick:()=>p(a.shotIndex),className:`flex flex-col gap-1 shrink-0 cursor-pointer transition-all ${a.shotIndex===s?"opacity-100":"opacity-60 hover:opacity-100"} ${Bt===a.shotIndex?"opacity-50 scale-95":""} ${Gt===a.shotIndex?"ring-2 ring-neutral-500 ring-offset-2":""}`,children:[e.jsx("div",{className:`w-32 h-24 rounded-lg overflow-hidden relative ${a.shotIndex===s?"ring-2 ring-neutral-800 dark:ring-white shadow-lg":"bg-slate-200 dark:bg-border-dark ring-1 ring-slate-200 dark:ring-white/10 hover:ring-neutral-400 dark:hover:ring-neutral-500"}`,children:e.jsxs("div",{className:`w-full h-full rounded-md overflow-hidden ${a.shotIndex===s?"bg-slate-200 dark:bg-border-dark":""}`,children:[(()=>{var M,V;const g=((M=a.mediaList)==null?void 0:M.find(H=>H==null?void 0:H.isPrimary))||((V=a.mediaList)==null?void 0:V[0])||a.media;return g!=null&&g.url?g.type==="image"?e.jsx("img",{src:g.url,alt:"",className:"w-full h-full object-cover"}):g.type==="audio"?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-neutral-500",children:"music_note"})}):e.jsx("video",{src:g.url,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-text-light-secondary dark:text-text-dark-secondary",children:"movie"})})})(),a.shotIndex===s&&e.jsx("div",{className:"absolute top-1 right-1 size-2 bg-neutral-500 rounded-full animate-pulse"})]})}),e.jsxs("span",{className:`text-[10px] text-center ${a.shotIndex===s?"text-neutral-600 dark:text-neutral-400 font-bold":"text-text-light-secondary dark:text-text-dark-secondary"}`,children:["Shot ",a.shotIndex.toString().padStart(2,"0")," - ",Vt[a.shotIndex]?`${Math.round(Vt[a.shotIndex])}s`:a.||"0s"]})]},a.shotIndex)),Nt&&e.jsx("div",{onClick:Ie,className:"w-12 h-24 rounded-lg border border-dashed border-border-light dark:border-border-dark flex items-center justify-center text-text-light-secondary dark:text-text-dark-secondary hover:text-text-light-primary dark:hover:text-text-dark-primary hover:border-neutral-500 hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer transition-all shrink-0",children:e.jsx("span",{className:"material-symbols-outlined",children:"add"})})]})}),e.jsx("button",{onClick:()=>x(Math.min(Math.max(0,m.length-5),o+1)),disabled:o>=Math.max(0,m.length-5),className:"shrink-0 w-8 h-8 rounded-full bg-slate-200 dark:bg-border-dark flex items-center justify-center text-text-light-secondary dark:text-text-dark-secondary hover:bg-slate-300 dark:hover:bg-border-dark-hover hover:text-text-light-primary dark:hover:text-text-dark-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_right"})}),Nt&&q&&m.length>0&&e.jsx("button",{onClick:()=>Oe(s),className:"shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",title:"",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h4",{className:"text-xs font-bold uppercase text-text-light-secondary dark:text-text-dark-secondary tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"face"}),"  ",(((ge=q==null?void 0:q.selectedRoles)==null?void 0:ge.length)||0)>0&&e.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400",children:["(",(be=q==null?void 0:q.selectedRoles)==null?void 0:be.length,")"]})]})}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2",children:[((q==null?void 0:q.selectedRoles)||[]).map(a=>e.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer hover:opacity-80 transition-opacity group relative mt-2",children:[e.jsx("div",{className:"size-12 rounded overflow-hidden bg-neutral-100 dark:bg-neutral-800",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover object-top"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"person"})})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary truncate max-w-[50px]",children:a.name}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Qt("role",a)},className:`text-[8px] px-1.5 py-0.5 rounded-full transition-all ${Mt("role",a.id)?"bg-neutral-800 dark:bg-white text-white dark:text-black":"bg-neutral-200 dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400"}`,title:Mt("role",a.id)?"":"",children:""}),e.jsx("button",{onClick:()=>Ut("role",a),className:"absolute -top-1 -right-1 size-4 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"close"})})]},a.id)),e.jsxs("div",{onClick:()=>{L.length===0?(mt.info(""),O(!0)):rt("role")},className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer opacity-50 hover:opacity-100 transition-opacity mt-2",children:[e.jsx("div",{className:"size-12 rounded border-2 border-dashed border-border-light dark:border-border-dark flex items-center justify-center hover:border-neutral-500",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"add"})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary",children:""})]})]})]}),e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h4",{className:"text-xs font-bold uppercase text-text-light-secondary dark:text-text-dark-secondary tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"landscape"}),"  ",(((ye=q==null?void 0:q.selectedScenes)==null?void 0:ye.length)||0)>0&&e.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400",children:["(",(ke=q==null?void 0:q.selectedScenes)==null?void 0:ke.length,")"]})]})}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[((q==null?void 0:q.selectedScenes)||[]).map(a=>e.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-1 mt-2",children:[e.jsxs("div",{className:"relative w-24 h-14 rounded overflow-hidden cursor-pointer transition-colors group bg-neutral-100 dark:bg-neutral-800",children:[a.url?e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"landscape"})}),e.jsx("button",{onClick:()=>Ut("scene",a),className:"absolute top-0.5 right-0.5 size-4 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"close"})})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Qt("scene",a)},className:`text-[8px] px-1.5 py-0.5 rounded-full transition-all ${Mt("scene",a.id)?"bg-neutral-800 dark:bg-white text-white dark:text-black":"bg-neutral-200 dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400"}`,title:Mt("scene",a.id)?"":"",children:""})]},a.id)),e.jsxs("div",{onClick:()=>{L.length===0?(mt.info(""),O(!0)):rt("scene")},className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer opacity-50 hover:opacity-100 transition-opacity mt-2",children:[e.jsx("div",{className:"size-12 rounded border-2 border-dashed border-border-light dark:border-border-dark flex items-center justify-center hover:border-neutral-500",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"add"})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary",children:""})]})]})]}),e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h4",{className:"text-xs font-bold uppercase text-text-light-secondary dark:text-text-dark-secondary tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"backpack"}),"  ",(((ve=q==null?void 0:q.selectedProps)==null?void 0:ve.length)||0)>0&&e.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400",children:["(",(_e=q==null?void 0:q.selectedProps)==null?void 0:_e.length,")"]})]})}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[((q==null?void 0:q.selectedProps)||[]).map(a=>e.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-1 mt-2",children:[e.jsxs("div",{className:"size-14 rounded overflow-hidden cursor-pointer transition-colors relative group bg-neutral-100 dark:bg-neutral-800",children:[a.url?e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"backpack"})}),e.jsx("button",{onClick:()=>Ut("prop",a),className:"absolute top-0.5 right-0.5 size-4 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"close"})})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Qt("prop",a)},className:`text-[8px] px-1.5 py-0.5 rounded-full transition-all ${Mt("prop",a.id)?"bg-neutral-800 dark:bg-white text-white dark:text-black":"bg-neutral-200 dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400"}`,title:Mt("prop",a.id)?"":"",children:""})]},a.id)),e.jsxs("div",{onClick:()=>{L.length===0?(mt.info(""),O(!0)):rt("prop")},className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer opacity-50 hover:opacity-100 transition-opacity mt-2",children:[e.jsx("div",{className:"size-12 rounded border-2 border-dashed border-border-light dark:border-border-dark flex items-center justify-center hover:border-neutral-500",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"add"})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary",children:""})]})]})]}),e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2 bg-white dark:bg-[#18181b] border border-black/10 dark:border-neutral-700 shadow-lg shadow-black/10 dark:shadow-black/30 rounded-xl",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h4",{className:"text-xs font-bold uppercase text-text-light-secondary dark:text-text-dark-secondary tracking-wider flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"music_note"}),"  ",(((we=q==null?void 0:q.selectedAudios)==null?void 0:we.length)||0)>0&&e.jsxs("span",{className:"text-neutral-600 dark:text-neutral-400",children:["(",(je=q==null?void 0:q.selectedAudios)==null?void 0:je.length,")"]})]})}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[((q==null?void 0:q.selectedAudios)||[]).map(a=>e.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer hover:opacity-80 transition-opacity group relative mt-2",children:[e.jsx("div",{className:"size-12 rounded overflow-hidden flex items-center justify-center bg-neutral-100 dark:bg-neutral-800",children:e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400",children:"music_note"})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary truncate max-w-[50px]",children:a.name}),e.jsx("button",{onClick:g=>{g.stopPropagation(),Qt("audio",a)},className:`text-[8px] px-1.5 py-0.5 rounded-full transition-all ${Mt("audio",a.id)?"bg-neutral-800 dark:bg-white text-white dark:text-black":"bg-neutral-200 dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400"}`,title:Mt("audio",a.id)?"":"",children:""}),e.jsx("button",{onClick:()=>Ut("audio",a),className:"absolute -top-1 -right-1 size-4 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined text-xs",children:"close"})})]},a.id)),e.jsxs("div",{onClick:()=>{L.length===0?(mt.info(""),O(!0)):rt("audio")},className:"shrink-0 flex flex-col items-center gap-1 cursor-pointer opacity-50 hover:opacity-100 transition-opacity mt-2",children:[e.jsx("div",{className:"size-12 rounded border-2 border-dashed border-border-light dark:border-border-dark flex items-center justify-center hover:border-neutral-500",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"add"})}),e.jsx("span",{className:"text-[10px] text-text-light-secondary dark:text-text-dark-secondary",children:""})]})]})]})]})]}),A&&L.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>rt(null),children:e.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-border-light dark:border-border-dark flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:["",A==="role"?"":A==="scene"?"":A==="prop"?"":""]}),e.jsxs("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:[" (Shot ",s,") "]})]}),e.jsx("button",{onClick:()=>rt(null),className:"text-text-light-secondary dark:text-text-dark-secondary hover:text-text-light-primary dark:hover:text-text-dark-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[A==="role"&&(y.length===0?e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"face"}),e.jsx("p",{children:""})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:y.map(a=>e.jsxs("div",{onClick:()=>Ut("role",a),className:`flex flex-col items-center gap-2 p-3 rounded-xl cursor-pointer transition-all ${Kt("role",a.id)?"bg-neutral-100 dark:bg-neutral-700 ring-2 ring-neutral-500":"hover:bg-slate-100 dark:hover:bg-border-dark"}`,children:[e.jsx("div",{className:"size-16 rounded-lg overflow-hidden bg-slate-100 dark:bg-border-dark",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover object-top"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-text-light-secondary dark:text-text-dark-secondary",children:"person"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate max-w-full",children:a.name}),Kt("role",a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 text-sm",children:"check_circle"})]},a.id))})),A==="scene"&&(r.length===0?e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"landscape"}),e.jsx("p",{children:""})]}):e.jsx("div",{className:"grid grid-cols-3 gap-4",children:r.map(a=>e.jsxs("div",{onClick:()=>Ut("scene",a),className:`flex flex-col gap-2 p-3 rounded-xl cursor-pointer transition-all ${Kt("scene",a.id)?"bg-neutral-100 dark:bg-neutral-700 ring-2 ring-neutral-500":"hover:bg-slate-100 dark:hover:bg-border-dark"}`,children:[e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-slate-100 dark:bg-border-dark",children:a.url?e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-text-light-secondary dark:text-text-dark-secondary",children:"landscape"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name})]},a.id))})),A==="prop"&&(ot.length===0?e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"backpack"}),e.jsx("p",{children:""})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:ot.map(a=>e.jsxs("div",{onClick:()=>Ut("prop",a),className:`flex flex-col gap-2 p-3 rounded-xl cursor-pointer transition-all ${Kt("prop",a.id)?"bg-neutral-100 dark:bg-neutral-700 ring-2 ring-neutral-500":"hover:bg-slate-100 dark:hover:bg-border-dark"}`,children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-slate-100 dark:bg-border-dark",children:a.url?e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-text-light-secondary dark:text-text-dark-secondary",children:"backpack"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name})]},a.id))})),A==="audio"&&(ct.length===0?e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"music_note"}),e.jsx("p",{children:""})]}):e.jsx("div",{className:"grid grid-cols-4 gap-4",children:ct.map(a=>e.jsxs("div",{onClick:()=>Ut("audio",a),className:`flex flex-col items-center gap-2 p-3 rounded-xl cursor-pointer transition-all ${Kt("audio",a.id)?"bg-neutral-100 dark:bg-neutral-700 ring-2 ring-neutral-500":"hover:bg-slate-100 dark:hover:bg-border-dark"}`,children:[e.jsx("div",{className:"size-16 rounded-lg overflow-hidden bg-slate-100 dark:bg-border-dark flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-neutral-600 dark:text-neutral-400",children:"music_note"})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate max-w-full",children:a.name}),Kt("audio",a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 text-sm",children:"check_circle"})]},a.id))}))]}),e.jsx("div",{className:"p-6 border-t border-border-light dark:border-border-dark flex justify-end",children:e.jsx("button",{onClick:()=>rt(null),className:"px-4 py-2 rounded-lg bg-neutral-800 dark:bg-white text-white dark:text-black text-sm font-medium hover:bg-neutral-700 dark:hover:bg-neutral-200 transition-colors",children:""})})]})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>O(!1),children:e.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-border-light dark:border-border-dark flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:""}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:""})]}),e.jsx("button",{onClick:()=>O(!1),className:"text-text-light-secondary dark:text-text-dark-secondary hover:text-text-light-primary dark:hover:text-text-dark-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[50vh]",children:P.length===0?e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"inventory_2"}),e.jsx("p",{children:""}),e.jsx("p",{className:"text-sm mt-1",children:""})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-text-light-primary dark:text-text-dark-primary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"face"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.filter(a=>a.category==="ROLE").map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${L.includes(a.id)?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"checkbox",checked:L.includes(a.id),onChange:()=>Yt(a.id),className:"sr-only"}),e.jsx("div",{className:"size-10 rounded-lg bg-slate-100 dark:bg-border-dark overflow-hidden shrink-0",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"folder"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name}),L.includes(a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 ml-auto",children:"check_circle"})]},a.id)),P.filter(a=>a.category==="ROLE").length===0&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary col-span-2",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-text-light-primary dark:text-text-dark-primary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"landscape"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.filter(a=>a.category==="SCENE").map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${L.includes(a.id)?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"checkbox",checked:L.includes(a.id),onChange:()=>Yt(a.id),className:"sr-only"}),e.jsx("div",{className:"size-10 rounded-lg bg-slate-100 dark:bg-border-dark overflow-hidden shrink-0",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"folder"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name}),L.includes(a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 ml-auto",children:"check_circle"})]},a.id)),P.filter(a=>a.category==="SCENE").length===0&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary col-span-2",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-text-light-primary dark:text-text-dark-primary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"backpack"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.filter(a=>a.category==="PROP").map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${L.includes(a.id)?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"checkbox",checked:L.includes(a.id),onChange:()=>Yt(a.id),className:"sr-only"}),e.jsx("div",{className:"size-10 rounded-lg bg-slate-100 dark:bg-border-dark overflow-hidden shrink-0",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"folder"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name}),L.includes(a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 ml-auto",children:"check_circle"})]},a.id)),P.filter(a=>a.category==="PROP").length===0&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary col-span-2",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-text-light-primary dark:text-text-dark-primary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"music_note"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.filter(a=>a.category==="AUDIO").map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${L.includes(a.id)?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"checkbox",checked:L.includes(a.id),onChange:()=>Yt(a.id),className:"sr-only"}),e.jsx("div",{className:"size-10 rounded-lg bg-slate-100 dark:bg-border-dark overflow-hidden shrink-0",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"music_note"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name}),L.includes(a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 ml-auto",children:"check_circle"})]},a.id)),P.filter(a=>a.category==="AUDIO").length===0&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary col-span-2",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-text-light-primary dark:text-text-dark-primary mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"folder"})," "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[P.filter(a=>a.category==="OTHER").map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${L.includes(a.id)?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"checkbox",checked:L.includes(a.id),onChange:()=>Yt(a.id),className:"sr-only"}),e.jsx("div",{className:"size-10 rounded-lg bg-slate-100 dark:bg-border-dark overflow-hidden shrink-0",children:a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-text-light-secondary dark:text-text-dark-secondary",children:"folder"})})}),e.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary truncate",children:a.name}),L.includes(a.id)&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400 ml-auto",children:"check_circle"})]},a.id)),P.filter(a=>a.category==="OTHER").length===0&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary col-span-2",children:""})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-border-light dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 rounded-lg bg-slate-100 dark:bg-border-dark text-text-light-primary dark:text-text-dark-primary text-sm font-medium hover:bg-slate-200 dark:hover:bg-border-dark-hover transition-colors",children:""}),e.jsx("button",{onClick:()=>ze(L),className:"px-4 py-2 rounded-lg bg-neutral-800 dark:bg-white text-white dark:text-black text-sm font-medium hover:bg-neutral-700 dark:hover:bg-neutral-200 transition-colors",children:""})]})]})}),Q&&L.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>Y(!1),children:e.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-border-light dark:border-border-dark flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:""}),e.jsxs("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:["// (Shot ",s,")"]})]}),e.jsx("button",{onClick:()=>Y(!1),className:"text-text-light-secondary dark:text-text-dark-secondary hover:text-text-light-primary dark:hover:text-text-dark-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:it.length>0?e.jsx("div",{className:"grid grid-cols-4 gap-3",children:it.filter(a=>a.url).map(a=>{var H,et;const g=(H=a.url)==null?void 0:H.match(/\.(mp4|webm|mov|avi)$/i),M=(et=a.url)==null?void 0:et.match(/\.(mp3|wav|ogg|m4a)$/i),V=g?"video":M?"audio":"image";return e.jsxs("div",{onClick:()=>{const lt={type:V,url:a.url,nodeId:`imported-${a.id}`};b(X=>X.map(dt=>dt.shotIndex===s?{...dt,mediaList:[...dt.mediaList||[],lt]}:dt)),mt.success("")},className:"relative aspect-video rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-neutral-500 transition-all group",children:[g?e.jsx("video",{src:a.url,className:"w-full h-full object-cover"}):M?e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-neutral-800/20 to-neutral-800/20 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-neutral-800",children:"music_note"})}):e.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"add_circle"})}),e.jsx("span",{className:"absolute bottom-1 left-1 right-1 text-[10px] text-white bg-black/50 px-1 py-0.5 rounded truncate",children:a.name})]},a.id)})}):e.jsxs("div",{className:"text-center py-8 text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 block",children:"inventory_2"}),e.jsx("p",{children:""}),e.jsx("p",{className:"text-sm mt-1",children:'""'})]})}),e.jsx("div",{className:"p-6 border-t border-border-light dark:border-border-dark flex justify-end",children:e.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 rounded-lg bg-neutral-800 dark:bg-white text-white dark:text-black text-sm font-medium hover:bg-neutral-700 dark:hover:bg-neutral-200 transition-colors",children:""})})]})}),jt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:"AI "}),e.jsx("button",{onClick:()=>yt(!1),className:"text-text-light-tertiary dark:text-text-dark-tertiary hover:text-text-light-primary dark:hover:text-text-dark-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:I,onChange:a=>$e(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-border-light dark:border-border-dark bg-white dark:bg-black text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-neutral-500",children:[e.jsx("option",{value:"",children:""}),It.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),It.length===0&&e.jsx("p",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-400",children:""})]}),I&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:[" ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map(a=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${l===a.id?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark hover:border-neutral-400"}`,children:[e.jsx("input",{type:"radio",name:"scriptRole",value:a.id,checked:l===a.id,onChange:g=>j(g.target.value),className:"sr-only"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:a.name}),a.description&&e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary mt-1 line-clamp-2",children:a.description})]}),l===a.id&&e.jsx("span",{className:"material-symbols-outlined text-neutral-600 dark:text-neutral-400",children:"check_circle"})]},a.id))}),t.length===0&&e.jsx("p",{className:"text-sm text-text-light-tertiary dark:text-text-dark-tertiary",children:""})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["/ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-xl p-4 text-center ${z?"border-neutral-500 bg-neutral-100 dark:bg-neutral-800":"border-border-light dark:border-border-dark"}`,children:[e.jsx("input",{type:"file",accept:".txt,.pdf,.doc,.docx",onChange:He,className:"hidden",id:"script-file-input"}),e.jsxs("label",{htmlFor:"script-file-input",className:"cursor-pointer",children:[e.jsx("span",{className:`material-symbols-outlined text-4xl ${z?"text-neutral-600 dark:text-neutral-400":"text-text-light-tertiary dark:text-text-dark-tertiary"}`,children:z?"check_circle":"upload_file"}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-2",children:F?F.name:" TXTPDFWord"}),z&&e.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 mt-1",children:" AI"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:""}),e.jsx("textarea",{value:ht,onChange:a=>zt(a.target.value),placeholder:"20...",rows:3,className:"w-full px-4 py-3 rounded-xl border border-border-light dark:border-border-dark bg-white dark:bg-black text-text-light-primary dark:text-text-dark-primary placeholder:text-text-light-tertiary dark:placeholder:text-text-dark-tertiary focus:outline-none focus:ring-2 focus:ring-neutral-500 resize-none"})]})]}),e.jsxs("div",{className:"p-6 border-t border-border-light dark:border-border-dark flex gap-3 justify-end shrink-0",children:[e.jsx("button",{onClick:()=>yt(!1),className:"px-4 py-2 rounded-lg bg-slate-100 dark:bg-white/10 text-text-light-primary dark:text-text-dark-primary text-sm font-medium hover:bg-slate-200 dark:hover:bg-white/20 transition-colors",children:""}),e.jsx("button",{onClick:Ge,disabled:Ft||!l||!F,className:"px-6 py-2 rounded-lg bg-neutral-800 dark:bg-white text-white dark:text-black text-sm font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ft?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined animate-spin text-lg",children:"progress_activity"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"auto_awesome"}),""]})})]})]})}),_t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-[#18181b] rounded-2xl w-full max-w-md shadow-2xl",children:[e.jsx("div",{className:"p-6 border-b border-border-light dark:border-border-dark",children:e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:""})}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary mb-4",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ft.map(a=>e.jsxs("span",{className:"px-3 py-1 rounded-full bg-neutral-200 dark:bg-neutral-700 text-neutral-700 dark:text-neutral-300 text-sm font-medium",children:["Shot ",String(a).padStart(2,"0")]},a))}),e.jsx("p",{className:"text-sm text-text-light-tertiary dark:text-text-dark-tertiary",children:""})]}),e.jsxs("div",{className:"p-6 border-t border-border-light dark:border-border-dark flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>wt(!1),className:"px-4 py-2 rounded-lg bg-slate-100 dark:bg-white/10 text-text-light-primary dark:text-text-dark-primary text-sm font-medium hover:bg-slate-200 dark:hover:bg-white/20 transition-colors",children:""}),e.jsx("button",{onClick:()=>de(),className:"px-4 py-2 rounded-lg bg-neutral-800 dark:bg-white text-white dark:text-black text-sm font-medium hover:shadow-lg transition-all",children:""})]})]})})]})}export{ir as default};
