import{r as a,j as e,u as o0,L as n0,a as c0,b as Le}from"./react-vendor-BvY2dB7B.js";import{b,c as i}from"./index-CiJ2Nd2F.js";import{c as me}from"./createLucideIcon-CK1cQnin.js";import{C as ux,V as bx,I as px,S as er,L as Ys,T as x0}from"./video-CPXLMxBS.js";import{S as m0}from"./shield-Cyh8LQDI.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=me("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=me("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=me("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=me("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=me("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=me("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),P0=[{id:"text2video",name:"文生视频",desc:"纯文字描述生成视频"},{id:"image2video_first",name:"图生视频（首帧）",desc:"使用1张图片作为视频首帧"},{id:"image2video_frames",name:"图生视频（首尾帧）",desc:"使用2张图片作为首尾帧"},{id:"image2video_reference",name:"参考图生视频",desc:"使用1-3张参考图生成视频"}],Jl=[{id:"veo3.1",name:"Veo 3.1",desc:"文生视频、图生视频（1张首帧）",maxImages:1,fixedDuration:8,defaultCapabilities:["text2video","image2video_first"]},{id:"veo3.1-pro",name:"Veo 3.1 Pro",desc:"高质量文生视频、图生视频（首尾帧）",maxImages:2,fixedDuration:8,defaultCapabilities:["text2video","image2video_first","image2video_frames"]},{id:"veo3.1-components",name:"Veo 3.1 Components",desc:"参考图生视频（1-3张参考图）",maxImages:3,fixedDuration:8,defaultCapabilities:["text2video","image2video_reference"]}],Hl="http://localhost:9000",M0=({selectedModel:s,existingModels:A,onRefresh:n})=>{const _=Jl.find(r=>r.id===s);if(!_)return null;const m=A.find(r=>r.modelId===_.id),[T,p]=a.useState(null),[f,j]=a.useState(_.name),[$,G]=a.useState(Hl),[F,V]=a.useState(!0),[R,x]=a.useState(""),[E,v]=a.useState({supportedRatios:["16:9","9:16"],capabilities:_.defaultCapabilities,supportedDurations:[8],maxReferenceImages:_.maxImages}),P={文生视频:"text2video",首帧:"image2video_first",首尾帧:"image2video_frames",参考图:"image2video_reference"};a.useEffect(()=>{var r,h,D,U,W;if(m){p(m.id),j(m.name),G(m.apiUrl||Hl),V(m.isActive),x(m.pricePerUse||"");let y=(r=m.config)==null?void 0:r.capabilities;!y&&((h=m.config)!=null&&h.supportedGenerationTypes)&&(y=m.config.supportedGenerationTypes.map(u=>P[u]).filter(Boolean)),v({supportedRatios:((D=m.config)==null?void 0:D.supportedRatios)||["16:9","9:16"],capabilities:y||_.defaultCapabilities,supportedDurations:((U=m.config)==null?void 0:U.supportedDurations)||[8],maxReferenceImages:((W=m.config)==null?void 0:W.maxReferenceImages)??_.maxImages})}else p(null),j(_.name),G(Hl),V(!0),x(""),v({supportedRatios:["16:9","9:16"],capabilities:_.defaultCapabilities,supportedDurations:[8],maxReferenceImages:_.maxImages})},[s,m]);const M=async()=>{try{const r={text2video:"文生视频",image2video_first:"首帧",image2video_frames:"首尾帧",image2video_reference:"参考图"},h=E.capabilities.map(U=>r[U]).filter(Boolean),D={name:f,provider:"google",modelId:_.id,type:"VIDEO_GENERATION",apiUrl:$||void 0,isActive:F,pricePerUse:R||void 0,config:{...E,supportedGenerationTypes:h,acceptedInputs:["TEXT","IMAGE"]}};T?await b.admin.updateAIModel(T,D):await b.admin.createAIModel(D),i.success("保存成功"),n()}catch(r){i.error(r.message||"保存失败")}},B=r=>{v(h=>({...h,supportedRatios:h.supportedRatios.includes(r)?h.supportedRatios.filter(D=>D!==r):[...h.supportedRatios,r]}))},N=r=>{v(h=>({...h,capabilities:h.capabilities.includes(r)?h.capabilities.filter(D=>D!==r):[...h.capabilities,r]}))};return e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:"VIDEO_GENERATION"})]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-6",children:_.desc}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-1",children:"显示名称"}),e.jsx("input",{type:"text",value:f,onChange:r=>j(r.target.value),className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-input-dark text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-1",children:"单次价格"}),e.jsx("input",{type:"text",value:R,onChange:r=>x(r.target.value),placeholder:"如: 0.5",className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-input-dark text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-1",children:"waule-api 服务地址"}),e.jsx("input",{type:"text",value:$,onChange:r=>G(r.target.value),placeholder:"http://localhost:9000",className:"w-full px-3 py-2 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-input-dark text-slate-900 dark:text-white font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-500 mt-1",children:"配置使用哪台 waule-api 服务器处理 Veo 视频生成请求"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:`active-${_.id}`,checked:F,onChange:r=>V(r.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:`active-${_.id}`,className:"text-sm text-slate-700 dark:text-gray-300",children:"启用此模型"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-2",children:"能力配置"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-500 mb-3",children:"选中的能力将使该模型出现在对应的工作流节点中"}),e.jsx("div",{className:"space-y-2",children:P0.map(r=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border border-slate-200 dark:border-border-dark hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.capabilities.includes(r.id),onChange:()=>N(r.id),className:"w-4 h-4 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:r.name}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:r.desc})]})]},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-2",children:"支持的画面比例"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["16:9","9:16"].map(r=>e.jsx("button",{type:"button",onClick:()=>B(r),className:`px-3 py-1 rounded-lg text-sm ${E.supportedRatios.includes(r)?"bg-primary text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-gray-300"}`,children:r},r))})]}),E.capabilities.includes("image2video_reference")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-1",children:"最大参考图数量"}),e.jsx("input",{type:"number",value:E.maxReferenceImages,onChange:r=>v(h=>({...h,maxReferenceImages:parseInt(r.target.value)||1})),min:1,max:_.maxImages,className:"w-24 px-3 py-2 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-input-dark text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-600 dark:text-gray-400 mb-2",children:"视频时长"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-lg bg-primary/10 text-primary font-medium",children:"8秒"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-500",children:"（Veo 3.1 系列固定时长）"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:M,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})})]})]})},ge=[{value:"21:9",label:"21:9"},{value:"16:9",label:"16:9"},{value:"4:3",label:"4:3"},{value:"3:2",label:"3:2"},{value:"5:4",label:"5:4"},{value:"1:1",label:"1:1"},{value:"4:5",label:"4:5"},{value:"2:3",label:"2:3"},{value:"3:4",label:"3:4"},{value:"9:16",label:"9:16"}],kt="gemini-2.5-pro",yt="gemini-2.5-flash",ft="gemini-2.5-flash-image",jt="gemini-3-pro-preview",Mt="gemini-3-flash-preview",vt="gemini-3-pro-image-preview",wa="doubao-seedance-1-0-pro-250528",Ia="doubao-seedance-1-0-pro-fast-251015",Aa="doubao-seedream-4-0-250828",ys="doubao-seedream-4-5-251128",_t="qwen-image-edit-plus",Dt="wan2.2-animate-move",Gt="wan2.2-animate-mix",Ut="video-style-transform",Ot="videoretalk",ea="MiniMax-Hailuo-2.3",ta="MiniMax-Hailuo-2.3-Fast",aa="MiniMax-Hailuo-02",Ct="speech-2.6-hd",sa="sora-image",ra="sora-video",da="viduq2-pro",la="viduq2-pro-fast",ia="viduq2-turbo",oa="viduq2",Ge=s=>`https://generativelanguage.googleapis.com/v1beta/models/${s}:generateContent`,it="https://ark.cn-beijing.volces.com/api/v3",Ta="https://dashscope.aliyuncs.com",ot=`${Ta}/api/v1/services/aigc/image2video/video-synthesis`,Zs=`${Ta}/api/v1/services/aigc/video-generation/video-synthesis`,Ca="http://localhost:8000",nt="https://api.vidu.cn/ent/v2",_0=()=>{const[s,A]=a.useState(!1),[n,_]=a.useState([]),[m,T]=a.useState("google_pro"),[p,f]=a.useState(!0),[j,$]=a.useState(!1),[G,F]=a.useState(null),[V,R]=a.useState("Gemini 2.5 Pro"),[x,E]=a.useState(!0),[v,P]=a.useState(""),[M,B]=a.useState(""),[N,r]=a.useState(""),[h,D]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[U,W]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[y,u]=a.useState(null),[w,k]=a.useState("Gemini 2.5 Flash (视频分析)"),[q,Y]=a.useState(!0),[J,se]=a.useState(""),[Se,oe]=a.useState(""),[ye,Ue]=a.useState(""),[Nt,wt]=a.useState(["TEXT","IMAGE","VIDEO"]),[Oe,C]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40}),[ee,ae]=a.useState(null),[le,Z]=a.useState("Gemini 2.5 Flash Image"),[ne,he]=a.useState(!0),[ct,Ea]=a.useState(""),[ei,tr]=a.useState(""),[ti,ar]=a.useState(""),[sr,rr]=a.useState(["TEXT","IMAGE"]),[xt,Ra]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:2}),[yx,Pa]=a.useState(null),[ai,dr]=a.useState("Gemini 3.0 Pro"),[si,lr]=a.useState(!0),[ir,or]=a.useState(""),[ri,nr]=a.useState(""),[di,cr]=a.useState(""),[xr,mr]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[Qe,St]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[Ma,fs]=a.useState({enableThinkingMode:!0,thinkingLevel:"medium"}),[Vt,_a]=a.useState({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}),[fx,Da]=a.useState(null),[li,ur]=a.useState("Gemini 3 Pro Image"),[ii,br]=a.useState(!0),[pr,gr]=a.useState(""),[oi,hr]=a.useState(""),[ni,kr]=a.useState(""),[yr,fr]=a.useState(["TEXT","IMAGE"]),[De,Ft]=a.useState({supportedRatios:ge.map(t=>t.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}),[jx,Ga]=a.useState(null),[ci,jr]=a.useState("Gemini 3 Flash"),[xi,vr]=a.useState(!0),[Nr,wr]=a.useState(""),[mi,Ir]=a.useState(""),[ui,Ar]=a.useState(""),[js,vs]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[Xe,Tt]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[Ua,Ns]=a.useState({enableThinkingMode:!0,thinkingLevel:"medium"}),[Lt,Oa]=a.useState({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}),[Cr,ws]=a.useState(null),[bi,Sr]=a.useState("Doubao SeeDance 1.0 Pro"),[pi,Tr]=a.useState(!0),[Er,Rr]=a.useState(""),[gi,Pr]=a.useState(""),[hi,Mr]=a.useState(""),[_r,Dr]=a.useState(["TEXT","IMAGE"]),[fe,na]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}),[Gr,Is]=a.useState(null),[ki,Ur]=a.useState("Doubao SeeDance 1.0 Pro Fast"),[yi,Or]=a.useState(!0),[Vr,Fr]=a.useState(""),[fi,Lr]=a.useState(""),[ji,$r]=a.useState(""),[Kr,Qr]=a.useState(["TEXT","IMAGE"]),[je,ca]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}),[Xr,As]=a.useState(null),[vi,Hr]=a.useState("Doubao SeeDream 4.0"),[Ni,qr]=a.useState(!0),[Br,zr]=a.useState(""),[wi,Wr]=a.useState(""),[Ii,Yr]=a.useState(""),[Zr,Jr]=a.useState(["TEXT","IMAGE"]),[mt,Va]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[ed,Cs]=a.useState(null),[Ai,td]=a.useState("Doubao SeeDream 4.5"),[Ci,ad]=a.useState(!0),[sd,rd]=a.useState(""),[Si,dd]=a.useState(""),[Ti,ld]=a.useState(""),[id,od]=a.useState(["TEXT","IMAGE"]),[et,xa]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}),[vx,Fa]=a.useState(null),[Ei,Ss]=a.useState("Qwen Image Edit Plus"),[Ri,Ts]=a.useState(!0),[nd,Es]=a.useState(""),[La,$t]=a.useState(""),[$a,Kt]=a.useState(""),[cd,Rs]=a.useState(["TEXT","IMAGE"]),[ut,ma]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[Nx,Ka]=a.useState(null),[Pi,Ps]=a.useState("Aliyun Wan Animate Move"),[Mi,Ms]=a.useState(!0),[xd,_s]=a.useState(""),[Qa,Qt]=a.useState(""),[Xa,Xt]=a.useState(""),[wx]=a.useState(["IMAGE","VIDEO"]),[Ha,Ds]=a.useState(["wan-std","wan-pro"]),[Ix,qa]=a.useState(null),[_i,Gs]=a.useState("Aliyun Wan Animate Mix"),[Di,Us]=a.useState(!0),[md,Os]=a.useState(""),[Ba,Ht]=a.useState(""),[za,qt]=a.useState(""),[Ax]=a.useState(["IMAGE","VIDEO"]),[Wa,Vs]=a.useState(["wan-std","wan-pro"]),[Cx,Ya]=a.useState(null),[Gi,Fs]=a.useState("Aliyun Video Style Transform"),[Ui,Ls]=a.useState(!0),[ud,$s]=a.useState(""),[Za,Bt]=a.useState(""),[Ja,zt]=a.useState(""),[Sx]=a.useState(["VIDEO"]),[Oi,Ks]=a.useState(15),[es,Qs]=a.useState([0,1,2,3,4,5,6,7]),[Tx,ts]=a.useState(null),[Vi,Xs]=a.useState("Aliyun VideoRetalk"),[Fi,Hs]=a.useState(!0),[bd,qs]=a.useState(""),[as,Wt]=a.useState(""),[ss,Yt]=a.useState(""),[pd,Bs]=a.useState(["VIDEO","AUDIO","IMAGE"]),[gd,zs]=a.useState({video_extension:!1}),[Ex,rs]=a.useState(null),[Li,hd]=a.useState("MiniMax Hailuo 2.3"),[$i,kd]=a.useState(!0),[yd,fd]=a.useState(""),[Ki,jd]=a.useState(""),[Qi,vd]=a.useState(""),[Nd,wd]=a.useState(["TEXT","IMAGE"]),[ve,ua]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}),[Rx,ds]=a.useState(null),[Xi,Id]=a.useState("MiniMax Hailuo 2.3 Fast"),[Hi,Ad]=a.useState(!0),[Cd,Sd]=a.useState(""),[qi,Td]=a.useState(""),[Bi,Ed]=a.useState(""),[Rd,Pd]=a.useState(["TEXT","IMAGE"]),[Ne,ba]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}),[Px,ls]=a.useState(null),[zi,Md]=a.useState("MiniMax Hailuo 02"),[Wi,_d]=a.useState(!0),[Dd,Gd]=a.useState(""),[Yi,Ud]=a.useState(""),[Zi,Od]=a.useState(""),[Vd,Fd]=a.useState(["TEXT","IMAGE"]),[we,pa]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}),[Ws,is]=a.useState(null),[Ji,Ld]=a.useState("MiniMax Speech 2.6 HD"),[eo,$d]=a.useState(!0),[Kd,Qd]=a.useState(""),[to,Xd]=a.useState(""),[ao,Hd]=a.useState(""),[qd,Bd]=a.useState(["TEXT","AUDIO"]),[bt,os]=a.useState({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),[tt,ns]=a.useState({synth:!0,clone:!0,design:!0}),[Mx,cs]=a.useState(null),[so,zd]=a.useState("Sora2 Image"),[ro,Wd]=a.useState(!0),[Yd,Zd]=a.useState(""),[lo,Jd]=a.useState(""),[io,el]=a.useState(""),[tl,al]=a.useState(["TEXT","IMAGE"]),[pt,xs]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:5}),[_x,ms]=a.useState(null),[oo,sl]=a.useState("Sora2 Video"),[no,rl]=a.useState(!0),[dl,ll]=a.useState(""),[co,il]=a.useState(""),[xo,ol]=a.useState(""),[nl,cl]=a.useState(["TEXT","IMAGE","VIDEO"]),[Te,Zt]=a.useState({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}),[Dx,us]=a.useState(null),[mo,xl]=a.useState("Vidu Q2 Pro"),[uo,ml]=a.useState(!0),[ul,bl]=a.useState(""),[bo,pl]=a.useState(""),[po,gl]=a.useState(""),[hl,kl]=a.useState(["TEXT","IMAGE"]),[ue,Et]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[Gx,bs]=a.useState(null),[go,yl]=a.useState("Vidu Q2 Pro Fast"),[ho,fl]=a.useState(!0),[jl,vl]=a.useState(""),[ko,Nl]=a.useState(""),[yo,wl]=a.useState(""),[Il,Al]=a.useState(["TEXT","IMAGE"]),[be,Rt]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[Ux,ps]=a.useState(null),[fo,Cl]=a.useState("Vidu Q2 Turbo"),[jo,Sl]=a.useState(!0),[Tl,El]=a.useState(""),[vo,Rl]=a.useState(""),[No,Pl]=a.useState(""),[Ml,_l]=a.useState(["TEXT","IMAGE"]),[pe,Pt]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[Ox,gs]=a.useState(null),[wo,Dl]=a.useState("Vidu Q2"),[Io,Gl]=a.useState(!0),[Ul,Ol]=a.useState(""),[Ao,Vl]=a.useState(""),[Co,Fl]=a.useState(""),[Ll,$l]=a.useState(["IMAGE"]),[Ie,ga]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0});a.useEffect(()=>{(async()=>{var c;try{const o=await b.get("/admin/settings/midjourney");f(((c=o.settings)==null?void 0:c.fastEnabled)??!0)}catch{}})()},[]);const Vx=async t=>{try{$(!0),await b.put("/admin/settings/midjourney",{fastEnabled:t}),f(t),i.success(t?"Fast 模式已启用":"Fast 模式已禁用")}catch{i.error("更新设置失败")}finally{$(!1)}};a.useEffect(()=>{(async()=>{var c,o,I,S,d,l,g,L,z,re,de,Q,O,K,H,te,He,at,To,Eo,Ro,Po,Mo,_o,Do,Go,Uo,Oo,Vo,Fo,Lo,$o,Ko,Qo,Xo,Ho,qo,Bo,zo,Wo,Yo,Zo,Jo,en,tn,an,sn,rn,dn,ln,on,nn,cn,xn,mn,un,bn,pn,gn,hn,kn,yn,fn,jn,vn,Nn,wn,In,An,Cn,Sn,Tn,En,Rn,Pn,Mn,_n,Dn,Gn,Un,On,Vn,Fn,Ln,$n,Kn,Qn,Xn,Hn,qn,Bn,zn,Wn,Yn,Zn,Jn,ec,tc,ac,sc,rc,dc,lc,ic,oc,nc,cc,xc,mc,uc,bc,pc,gc,hc,kc,yc,fc,jc,vc,Nc,wc,Ic,Ac,Cc,Sc,Tc,Ec,Rc,Pc,Mc,_c,Dc,Gc,Uc,Oc,Vc,Fc,Lc,$c,Kc,Qc,Xc,Hc,qc,Bc,zc,Wc,Yc,Zc,Jc,ex,tx,ax,sx;try{A(!0);const ha=await b.admin.getAIModels({provider:"google"}),ka=await b.admin.getAIModels({provider:"bytedance"}),ya=await b.admin.getAIModels({provider:"doubao"}),fa=await b.admin.getAIModels({provider:"aliyun"}),ja=await b.admin.getAIModels({provider:"minimaxi"}),va=await b.admin.getAIModels({provider:"sora"}),Na=await b.admin.getAIModels({provider:"vidu"}),t0=Array.isArray(ha==null?void 0:ha.data)?ha.data:Array.isArray(ha)?ha:[],a0=Array.isArray(ka==null?void 0:ka.data)?ka.data:Array.isArray(ka)?ka:[],s0=Array.isArray(ya==null?void 0:ya.data)?ya.data:Array.isArray(ya)?ya:[],r0=Array.isArray(fa==null?void 0:fa.data)?fa.data:Array.isArray(fa)?fa:[],d0=Array.isArray(ja==null?void 0:ja.data)?ja.data:Array.isArray(ja)?ja:[],l0=Array.isArray(va==null?void 0:va.data)?va.data:Array.isArray(va)?va:[],i0=Array.isArray(Na==null?void 0:Na.data)?Na.data:Array.isArray(Na)?Na:[],xe=[...t0,...a0,...s0,...r0,...d0,...l0,...i0];if(_(xe),!So.current){const X={"doubao-seedream-4-0":Aa,"doubao-seedance-1-0-pro-fast":Ia,"doubao-seedance-1-0-pro":wa},hs=xe.filter(Jt=>X[Jt.modelId]);if(hs.length){for(const Jt of hs)try{await b.admin.updateAIModel(Jt.id,{modelId:X[Jt.modelId]})}catch{}await ce()}So.current=!0}const Ve=xe.find(X=>X.modelId===kt);Ve?(F(Ve.id),R(Ve.name),E(Ve.isActive),P(Ve.pricePerUse||""),B(Ve.apiKey||""),r(Ve.apiUrl||Ge(kt)),D(Array.isArray((c=Ve.config)==null?void 0:c.acceptedInputs)?Ve.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:((o=Ve.config)==null?void 0:o.maxTokens)??8192,temperature:((I=Ve.config)==null?void 0:I.temperature)??.7,topP:((S=Ve.config)==null?void 0:S.topP)??.95,topK:((d=Ve.config)==null?void 0:d.topK)??40,frequencyPenalty:((l=Ve.config)==null?void 0:l.frequencyPenalty)??0,presencePenalty:((g=Ve.config)==null?void 0:g.presencePenalty)??0})):(F(null),R("Gemini 2.5 Pro"),E(!0),P(""),B(""),r(Ge(kt)),D(["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}));const qe=xe.find(X=>X.modelId===yt);qe?(u(qe.id),k(qe.name),Y(qe.isActive),se(qe.pricePerUse||""),oe(qe.apiKey||""),Ue(qe.apiUrl||Ge(yt)),wt(Array.isArray((L=qe.config)==null?void 0:L.acceptedInputs)?qe.config.acceptedInputs:["TEXT","IMAGE","VIDEO"]),C({maxTokens:((z=qe.config)==null?void 0:z.maxTokens)??8192,temperature:((re=qe.config)==null?void 0:re.temperature)??.7,topP:((de=qe.config)==null?void 0:de.topP)??.95,topK:((Q=qe.config)==null?void 0:Q.topK)??40})):(u(null),k("Gemini 2.5 Flash (视频分析)"),Y(!0),se(""),oe(""),Ue(Ge(yt)),wt(["TEXT","IMAGE","VIDEO"]),C({maxTokens:8192,temperature:.7,topP:.95,topK:40}));const st=xe.find(X=>X.modelId===ft);st?(ae(st.id),Z(st.name),he(st.isActive),Ea(st.pricePerUse||""),tr(st.apiKey||""),ar(st.apiUrl||Ge(ft)),rr(Array.isArray((O=st.config)==null?void 0:O.acceptedInputs)?st.config.acceptedInputs:["TEXT","IMAGE"]),Ra({supportedRatios:((K=st.config)==null?void 0:K.supportedRatios)||ge.map(X=>X.value),supportsImageToImage:((H=st.config)==null?void 0:H.supportsImageToImage)!==!1,maxReferenceImages:((te=st.config)==null?void 0:te.maxReferenceImages)??2})):(ae(null),Z("Gemini 2.5 Flash Image"),he(!0),Ea(""),tr(""),ar(Ge(ft)),rr(["TEXT","IMAGE"]),Ra({supportedRatios:ge.map(X=>X.value),supportsImageToImage:!0,maxReferenceImages:2}));const Ee=xe.find(X=>X.modelId===jt);Ee?(Pa(Ee.id),dr(Ee.name),lr(Ee.isActive),or(Ee.pricePerUse||""),nr(Ee.apiKey||""),cr(Ee.apiUrl||Ge(jt)),mr(Array.isArray((He=Ee.config)==null?void 0:He.acceptedInputs)?Ee.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),St({maxTokens:((at=Ee.config)==null?void 0:at.maxTokens)??8192,temperature:((To=Ee.config)==null?void 0:To.temperature)??.7,topP:((Eo=Ee.config)==null?void 0:Eo.topP)??.95,topK:((Ro=Ee.config)==null?void 0:Ro.topK)??40,frequencyPenalty:((Po=Ee.config)==null?void 0:Po.frequencyPenalty)??0,presencePenalty:((Mo=Ee.config)==null?void 0:Mo.presencePenalty)??0}),fs({enableThinkingMode:((_o=Ee.config)==null?void 0:_o.enableThinkingMode)??!0,thinkingLevel:((Do=Ee.config)==null?void 0:Do.thinkingLevel)||"medium"}),_a({imageResolution:((Go=Ee.config)==null?void 0:Go.imageResolution)||"media_resolution_high",pdfResolution:((Uo=Ee.config)==null?void 0:Uo.pdfResolution)||"media_resolution_medium",videoResolution:((Oo=Ee.config)==null?void 0:Oo.videoResolution)||"media_resolution_low"})):(Pa(null),dr("Gemini 3.0 Pro"),lr(!0),or(""),nr(""),cr(Ge(jt)),mr(["TEXT","IMAGE","VIDEO","DOCUMENT"]),St({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),fs({enableThinkingMode:!0,thinkingLevel:"medium"}),_a({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}));const Fe=xe.find(X=>X.modelId===vt);Fe?(Da(Fe.id),ur(Fe.name),br(Fe.isActive),gr(Fe.pricePerUse||""),hr(Fe.apiKey||""),kr(Fe.apiUrl||Ge(vt)),fr(Array.isArray((Vo=Fe.config)==null?void 0:Vo.acceptedInputs)?Fe.config.acceptedInputs:["TEXT","IMAGE"]),Ft({supportedRatios:((Fo=Fe.config)==null?void 0:Fo.supportedRatios)||ge.map(X=>X.value),supportedResolutions:((Lo=Fe.config)==null?void 0:Lo.supportedResolutions)||["2K","4K"],supportsImageToImage:(($o=Fe.config)==null?void 0:$o.supportsImageToImage)!==!1,supportsImageEditing:((Ko=Fe.config)==null?void 0:Ko.supportsImageEditing)===!0,maxReferenceImages:((Qo=Fe.config)==null?void 0:Qo.maxReferenceImages)??1,capabilities:((Xo=Fe.config)==null?void 0:Xo.capabilities)||["google_search","reasoning","text_rendering"]})):(Da(null),ur("Gemini 3 Pro Image"),br(!0),gr(""),hr(""),kr(Ge(vt)),fr(["TEXT","IMAGE"]),Ft({supportedRatios:ge.map(X=>X.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}));const Re=xe.find(X=>X.modelId===Mt);Re?(Ga(Re.id),jr(Re.name),vr(Re.isActive),wr(Re.pricePerUse||""),Ir(Re.apiKey||""),Ar(Re.apiUrl||Ge(Mt)),vs(Array.isArray((Ho=Re.config)==null?void 0:Ho.acceptedInputs)?Re.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),Tt({maxTokens:((qo=Re.config)==null?void 0:qo.maxTokens)??8192,temperature:((Bo=Re.config)==null?void 0:Bo.temperature)??.7,topP:((zo=Re.config)==null?void 0:zo.topP)??.95,topK:((Wo=Re.config)==null?void 0:Wo.topK)??40,frequencyPenalty:((Yo=Re.config)==null?void 0:Yo.frequencyPenalty)??0,presencePenalty:((Zo=Re.config)==null?void 0:Zo.presencePenalty)??0}),Ns({enableThinkingMode:((Jo=Re.config)==null?void 0:Jo.enableThinkingMode)??!0,thinkingLevel:((en=Re.config)==null?void 0:en.thinkingLevel)||"medium"}),Oa({imageResolution:((tn=Re.config)==null?void 0:tn.imageResolution)||"media_resolution_high",pdfResolution:((an=Re.config)==null?void 0:an.pdfResolution)||"media_resolution_medium",videoResolution:((sn=Re.config)==null?void 0:sn.videoResolution)||"media_resolution_low"})):(Ga(null),jr("Gemini 3 Flash"),vr(!0),wr(""),Ir(""),Ar(Ge(Mt)),vs(["TEXT","IMAGE","VIDEO","DOCUMENT"]),Tt({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),Ns({enableThinkingMode:!0,thinkingLevel:"medium"}),Oa({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}));const Be=xe.find(X=>X.modelId===wa);Be?(ws(Be.id),Sr(Be.name),Tr(Be.isActive),Rr(Be.pricePerUse||""),Pr(Be.apiKey||""),Mr(Be.apiUrl||it),Dr(Array.isArray((rn=Be.config)==null?void 0:rn.acceptedInputs)?Be.config.acceptedInputs:["TEXT","IMAGE"]),na({supportedRatios:((dn=Be.config)==null?void 0:dn.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((ln=Be.config)==null?void 0:ln.supportedResolutions)||["720P","1080P","2K","4K"],supportedGenerationTypes:((on=Be.config)==null?void 0:on.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((nn=Be.config)==null?void 0:nn.supportedDurations)||[5,6,8,10,15,30]})):(ws(null),Sr("Doubao SeeDance 1.0 Pro"),Tr(!0),Rr(""),Pr(""),Mr(it),Dr(["TEXT","IMAGE"]),na({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}));const ze=xe.find(X=>X.modelId===Ia);ze?(Is(ze.id),Ur(ze.name),Or(ze.isActive),Fr(ze.pricePerUse||""),Lr(ze.apiKey||""),$r(ze.apiUrl||it),Qr(Array.isArray((cn=ze.config)==null?void 0:cn.acceptedInputs)?ze.config.acceptedInputs:["TEXT","IMAGE"]),ca({supportedRatios:((xn=ze.config)==null?void 0:xn.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((mn=ze.config)==null?void 0:mn.supportedResolutions)||["720P","1080P"],supportedGenerationTypes:((un=ze.config)==null?void 0:un.supportedGenerationTypes)||["文生视频","首帧"],supportedDurations:((bn=ze.config)==null?void 0:bn.supportedDurations)||[5,6,8,10]})):(Is(null),Ur("Doubao SeeDance 1.0 Pro Fast"),Or(!0),Fr(""),Lr(""),$r(it),Qr(["TEXT","IMAGE"]),ca({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}));const rt=xe.find(X=>X.modelId===Aa);rt?(As(rt.id),Hr(rt.name),qr(rt.isActive),zr(rt.pricePerUse||""),Wr(rt.apiKey||""),Yr(rt.apiUrl||it),Jr(Array.isArray((pn=rt.config)==null?void 0:pn.acceptedInputs)?rt.config.acceptedInputs:["TEXT","IMAGE"]),Va({supportedRatios:((gn=rt.config)==null?void 0:gn.supportedRatios)||ge.map(X=>X.value),supportsImageToImage:((hn=rt.config)==null?void 0:hn.supportsImageToImage)!==!1,maxReferenceImages:((kn=rt.config)==null?void 0:kn.maxReferenceImages)??10})):(As(null),Hr("Doubao SeeDream 4.0"),qr(!0),zr(""),Wr(""),Yr(it),Jr(["TEXT","IMAGE"]),Va({supportedRatios:ge.map(X=>X.value),supportsImageToImage:!0,maxReferenceImages:10}));const We=xe.find(X=>X.modelId===ys);We?(Cs(We.id),td(We.name),ad(We.isActive),rd(We.pricePerUse||""),dd(We.apiKey||""),ld(We.apiUrl||it),od(Array.isArray((yn=We.config)==null?void 0:yn.acceptedInputs)?We.config.acceptedInputs:["TEXT","IMAGE"]),xa({supportedRatios:((fn=We.config)==null?void 0:fn.supportedRatios)||ge.map(X=>X.value),supportsImageToImage:((jn=We.config)==null?void 0:jn.supportsImageToImage)!==!1,supportsImageEditing:((vn=We.config)==null?void 0:vn.supportsImageEditing)===!0,maxReferenceImages:((Nn=We.config)==null?void 0:Nn.maxReferenceImages)??10})):(Cs(null),td("Doubao SeeDream 4.5"),ad(!0),rd(""),dd(""),ld(it),od(["TEXT","IMAGE"]),xa({supportedRatios:ge.map(X=>X.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}));const dt=xe.find(X=>X.modelId===_t);dt?(Fa(dt.id),Ss(dt.name),Ts(dt.isActive),Es(dt.pricePerUse||""),$t(dt.apiKey||""),Kt(dt.apiUrl||`${Ta}/api/v1/services/aigc/multimodal-generation/generation`),Rs(Array.isArray((wn=dt.config)==null?void 0:wn.acceptedInputs)?dt.config.acceptedInputs:["TEXT","IMAGE"]),ma({supportedRatios:((In=dt.config)==null?void 0:In.supportedRatios)||ge.map(X=>X.value),supportsImageToImage:((An=dt.config)==null?void 0:An.supportsImageToImage)!==!1,maxReferenceImages:((Cn=dt.config)==null?void 0:Cn.maxReferenceImages)??10})):(Fa(null),Ss("Qwen Image Edit Plus"),Ts(!0),Es(""),$t(""),Kt(`${Ta}/api/v1/services/aigc/multimodal-generation/generation`),Rs(["TEXT","IMAGE"]),ma({supportedRatios:ge.map(X=>X.value),supportsImageToImage:!0,maxReferenceImages:10}));const It=xe.find(X=>X.modelId===Dt);It?(Ka(It.id),Ps(It.name),Ms(It.isActive),_s(It.pricePerUse||""),Qt(It.apiKey||""),Xt(It.apiUrl||ot),Ds(Array.isArray((Sn=It.config)==null?void 0:Sn.serviceModes)?It.config.serviceModes:["wan-std","wan-pro"])):(Ka(null),Ps("Aliyun Wan Animate Move"),Ms(!0),_s(""),Qt(""),Xt(ot),Ds(["wan-std","wan-pro"]));const At=xe.find(X=>X.modelId===Gt);At?(qa(At.id),Gs(At.name),Us(At.isActive),Os(At.pricePerUse||""),Ht(At.apiKey||""),qt(At.apiUrl||ot),Vs(Array.isArray((Tn=At.config)==null?void 0:Tn.serviceModes)?At.config.serviceModes:["wan-std","wan-pro"])):(qa(null),Gs("Aliyun Wan Animate Mix"),Us(!0),Os(""),Ht(""),qt(ot),Vs(["wan-std","wan-pro"]));const gt=xe.find(X=>X.modelId===Ut);gt?(Ya(gt.id),Fs(gt.name),Ls(gt.isActive),$s(gt.pricePerUse||""),Bt(gt.apiKey||""),zt(gt.apiUrl||Zs),Qs(Array.isArray((En=gt.config)==null?void 0:En.supportedStyles)?gt.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ks(((Rn=gt.config)==null?void 0:Rn.video_fps)??15)):(Ya(null),Fs("Aliyun Video Style Transform"),Ls(!0),$s(""),Bt(""),zt(Zs),Qs([0,1,2,3,4,5,6,7]),Ks(15));const ht=xe.find(X=>X.modelId===Ot);ht?(ts(ht.id),Xs(ht.name),Hs(ht.isActive),qs(ht.pricePerUse||""),Wt(ht.apiKey||""),Yt(ht.apiUrl||`${ot}/`),Bs(Array.isArray((Pn=ht.config)==null?void 0:Pn.acceptedInputs)?ht.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),zs({video_extension:!!((Mn=ht.config)!=null&&Mn.video_extension)})):(ts(null),Xs("Aliyun VideoRetalk"),Hs(!0),qs(""),Wt(""),Yt(`${ot}/`),Bs(["VIDEO","AUDIO","IMAGE"]),zs({video_extension:!1}));const Ye=xe.find(X=>X.modelId===ea);Ye?(rs(Ye.id),hd(Ye.name),kd(Ye.isActive),fd(Ye.pricePerUse||""),jd(Ye.apiKey||""),vd(Ye.apiUrl||"https://api.minimaxi.com/v1"),wd(Array.isArray((_n=Ye.config)==null?void 0:_n.acceptedInputs)?Ye.config.acceptedInputs:["TEXT","IMAGE"]),ua({supportedRatios:((Dn=Ye.config)==null?void 0:Dn.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((Gn=Ye.config)==null?void 0:Gn.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((Un=Ye.config)==null?void 0:Un.supportedGenerationTypes)||["文生视频","参考图","首帧"],supportedDurations:((On=Ye.config)==null?void 0:On.supportedDurations)||[6,10]})):(rs(null),hd("MiniMax Hailuo 2.3"),kd(!0),fd(""),jd(""),vd("https://api.minimaxi.com/v1"),wd(["TEXT","IMAGE"]),ua({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}));const Ze=xe.find(X=>X.modelId===ta);Ze?(ds(Ze.id),Id(Ze.name),Ad(Ze.isActive),Sd(Ze.pricePerUse||""),Td(Ze.apiKey||""),Ed(Ze.apiUrl||"https://api.minimaxi.com/v1"),Pd(Array.isArray((Vn=Ze.config)==null?void 0:Vn.acceptedInputs)?Ze.config.acceptedInputs:["TEXT","IMAGE"]),ba({supportedRatios:((Fn=Ze.config)==null?void 0:Fn.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((Ln=Ze.config)==null?void 0:Ln.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:(($n=Ze.config)==null?void 0:$n.supportedGenerationTypes)||["首帧"],supportedDurations:((Kn=Ze.config)==null?void 0:Kn.supportedDurations)||[6,10]})):(ds(null),Id("MiniMax Hailuo 2.3 Fast"),Ad(!0),Sd(""),Td(""),Ed("https://api.minimaxi.com/v1"),Pd(["TEXT","IMAGE"]),ba({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}));const Je=xe.find(X=>X.modelId===aa);Je?(ls(Je.id),Md(Je.name),_d(Je.isActive),Gd(Je.pricePerUse||""),Ud(Je.apiKey||""),Od(Je.apiUrl||"https://api.minimaxi.com/v1"),Fd(Array.isArray((Qn=Je.config)==null?void 0:Qn.acceptedInputs)?Je.config.acceptedInputs:["TEXT","IMAGE"]),pa({supportedRatios:((Xn=Je.config)==null?void 0:Xn.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((Hn=Je.config)==null?void 0:Hn.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((qn=Je.config)==null?void 0:qn.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Bn=Je.config)==null?void 0:Bn.supportedDurations)||[6,8,10]})):(ls(null),Md("MiniMax Hailuo 02"),_d(!0),Gd(""),Ud(""),Od("https://api.minimaxi.com/v1"),Fd(["TEXT","IMAGE"]),pa({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}));const $e=xe.find(X=>X.modelId===Ct);if($e){is($e.id),Ld($e.name),$d($e.isActive),Qd($e.pricePerUse||""),Xd($e.apiKey||""),Hd($e.apiUrl||"https://api.minimaxi.com/v1"),Bd(Array.isArray((zn=$e.config)==null?void 0:zn.acceptedInputs)?$e.config.acceptedInputs:["TEXT","AUDIO"]),os({supportedFormats:((Wn=$e.config)==null?void 0:Wn.supportedFormats)||["mp3","wav"],sampleRateMin:((Yn=$e.config)==null?void 0:Yn.sampleRateMin)??16e3,supportsStereo:((Zn=$e.config)==null?void 0:Zn.supportsStereo)!==!1});const X=Array.isArray($e.capabilities)?$e.capabilities:[],hs=X.find(ks=>ks.capability==="语音合成"),Jt=X.find(ks=>ks.capability==="音色克隆"),rx=X.find(ks=>ks.capability==="音色设计");ns({synth:hs?!!hs.supported:!0,clone:Jt?!!Jt.supported:!0,design:rx?!!rx.supported:!0})}else is(null),Ld("MiniMax Speech 2.6 HD"),$d(!0),Qd(""),Xd(""),Hd("https://api.minimaxi.com/v1"),Bd(["TEXT","AUDIO"]),os({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),ns({synth:!0,clone:!0,design:!0});const lt=xe.find(X=>X.modelId===sa);lt?(cs(lt.id),zd(lt.name),Wd(lt.isActive),Zd(lt.pricePerUse||""),Jd(lt.apiKey||""),el(lt.apiUrl||Ca),al(Array.isArray((Jn=lt.config)==null?void 0:Jn.acceptedInputs)?lt.config.acceptedInputs:["TEXT","IMAGE"]),xs({supportedRatios:((ec=lt.config)==null?void 0:ec.supportedRatios)||ge.map(X=>X.value),supportsImageToImage:((tc=lt.config)==null?void 0:tc.supportsImageToImage)!==!1,maxReferenceImages:((ac=lt.config)==null?void 0:ac.maxReferenceImages)??5})):(cs(null),zd("Sora2 Image"),Wd(!0),Zd(""),Jd(""),el(Ca),al(["TEXT","IMAGE"]),xs({supportedRatios:ge.map(X=>X.value),supportsImageToImage:!0,maxReferenceImages:5}));const Ke=xe.find(X=>X.modelId===ra);Ke?(ms(Ke.id),sl(Ke.name),rl(Ke.isActive),ll(Ke.pricePerUse||""),il(Ke.apiKey||""),ol(Ke.apiUrl||Ca),cl(Array.isArray((sc=Ke.config)==null?void 0:sc.acceptedInputs)?Ke.config.acceptedInputs:["TEXT","IMAGE"]),Zt({supportedRatios:((rc=Ke.config)==null?void 0:rc.supportedRatios)||["landscape","portrait"],supportsImageToVideo:((dc=Ke.config)==null?void 0:dc.supportsImageToVideo)!==!1,maxReferenceImages:((lc=Ke.config)==null?void 0:lc.maxReferenceImages)??1,supportedGenerationTypes:((ic=Ke.config)==null?void 0:ic.supportedGenerationTypes)||["文生视频","图生视频","视频生视频"],supportedDurations:((oc=Ke.config)==null?void 0:oc.supportedDurations)||[10,15,25]})):(ms(null),sl("Sora2 Video"),rl(!0),ll(""),il(""),ol(Ca),cl(["TEXT","IMAGE","VIDEO"]),Zt({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}));const Pe=xe.find(X=>X.modelId===da);Pe?(us(Pe.id),xl(Pe.name),ml(Pe.isActive),bl(Pe.pricePerUse||""),pl(Pe.apiKey||""),gl(Pe.apiUrl||nt),kl(Array.isArray((nc=Pe.config)==null?void 0:nc.acceptedInputs)?Pe.config.acceptedInputs:["TEXT","IMAGE"]),Et({supportedRatios:((cc=Pe.config)==null?void 0:cc.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((xc=Pe.config)==null?void 0:xc.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((mc=Pe.config)==null?void 0:mc.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((uc=Pe.config)==null?void 0:uc.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((bc=Pe.config)==null?void 0:bc.maxDuration)??10,supportedFps:((pc=Pe.config)==null?void 0:pc.supportedFps)||[24,30],maxResolution:((gc=Pe.config)==null?void 0:gc.maxResolution)||"1920x1080",supportsImageToVideo:((hc=Pe.config)==null?void 0:hc.supportsImageToVideo)!==!1,maxReferenceImages:((kc=Pe.config)==null?void 0:kc.maxReferenceImages)??2,supportsSubjects:((yc=Pe.config)==null?void 0:yc.supportsSubjects)!==!1,supportsAudioOutput:((fc=Pe.config)==null?void 0:fc.supportsAudioOutput)!==!1})):(us(null),xl("Vidu Q2 Pro"),ml(!0),bl(""),pl(""),gl(nt),kl(["TEXT","IMAGE"]),Et({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Me=xe.find(X=>X.modelId===la);Me?(bs(Me.id),yl(Me.name),fl(Me.isActive),vl(Me.pricePerUse||""),Nl(Me.apiKey||""),wl(Me.apiUrl||nt),Al(Array.isArray((jc=Me.config)==null?void 0:jc.acceptedInputs)?Me.config.acceptedInputs:["TEXT","IMAGE"]),Rt({supportedRatios:((vc=Me.config)==null?void 0:vc.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((Nc=Me.config)==null?void 0:Nc.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((wc=Me.config)==null?void 0:wc.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Ic=Me.config)==null?void 0:Ic.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Ac=Me.config)==null?void 0:Ac.maxDuration)??10,supportedFps:((Cc=Me.config)==null?void 0:Cc.supportedFps)||[24,30],maxResolution:((Sc=Me.config)==null?void 0:Sc.maxResolution)||"1920x1080",supportsImageToVideo:((Tc=Me.config)==null?void 0:Tc.supportsImageToVideo)!==!1,maxReferenceImages:((Ec=Me.config)==null?void 0:Ec.maxReferenceImages)??2,supportsSubjects:((Rc=Me.config)==null?void 0:Rc.supportsSubjects)!==!1,supportsAudioOutput:((Pc=Me.config)==null?void 0:Pc.supportsAudioOutput)!==!1})):(bs(null),yl("Vidu Q2 Pro Fast"),fl(!0),vl(""),Nl(""),wl(nt),Al(["TEXT","IMAGE"]),Rt({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const _e=xe.find(X=>X.modelId===ia);_e?(ps(_e.id),Cl(_e.name),Sl(_e.isActive),El(_e.pricePerUse||""),Rl(_e.apiKey||""),Pl(_e.apiUrl||nt),_l(Array.isArray((Mc=_e.config)==null?void 0:Mc.acceptedInputs)?_e.config.acceptedInputs:["TEXT","IMAGE"]),Pt({supportedRatios:((_c=_e.config)==null?void 0:_c.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((Dc=_e.config)==null?void 0:Dc.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((Gc=_e.config)==null?void 0:Gc.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Uc=_e.config)==null?void 0:Uc.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Oc=_e.config)==null?void 0:Oc.maxDuration)??10,supportedFps:((Vc=_e.config)==null?void 0:Vc.supportedFps)||[24,30],maxResolution:((Fc=_e.config)==null?void 0:Fc.maxResolution)||"1920x1080",supportsImageToVideo:((Lc=_e.config)==null?void 0:Lc.supportsImageToVideo)!==!1,maxReferenceImages:(($c=_e.config)==null?void 0:$c.maxReferenceImages)??2,supportsSubjects:((Kc=_e.config)==null?void 0:Kc.supportsSubjects)!==!1,supportsAudioOutput:((Qc=_e.config)==null?void 0:Qc.supportsAudioOutput)!==!1})):(ps(null),Cl("Vidu Q2 Turbo"),Sl(!0),El(""),Rl(""),Pl(nt),_l(["TEXT","IMAGE"]),Pt({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Ce=xe.find(X=>X.modelId===oa);Ce?(gs(Ce.id),Dl(Ce.name),Gl(Ce.isActive),Ol(Ce.pricePerUse||""),Vl(Ce.apiKey||""),Fl(Ce.apiUrl||nt),$l(Array.isArray((Xc=Ce.config)==null?void 0:Xc.acceptedInputs)?Ce.config.acceptedInputs:["IMAGE"]),ga({supportedRatios:((Hc=Ce.config)==null?void 0:Hc.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((qc=Ce.config)==null?void 0:qc.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((Bc=Ce.config)==null?void 0:Bc.supportedGenerationTypes)||["参考图生视频"],supportedDurations:((zc=Ce.config)==null?void 0:zc.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Wc=Ce.config)==null?void 0:Wc.maxDuration)??10,supportedFps:((Yc=Ce.config)==null?void 0:Yc.supportedFps)||[24,30],maxResolution:((Zc=Ce.config)==null?void 0:Zc.maxResolution)||"1920x1080",supportsImageToVideo:((Jc=Ce.config)==null?void 0:Jc.supportsImageToVideo)!==!1,maxReferenceImages:((ex=Ce.config)==null?void 0:ex.maxReferenceImages)??7,supportsSubjects:((tx=Ce.config)==null?void 0:tx.supportsSubjects)!==!1,supportsAudioOutput:((ax=Ce.config)==null?void 0:ax.supportsAudioOutput)!==!1,supportsBgm:((sx=Ce.config)==null?void 0:sx.supportsBgm)!==!1})):(gs(null),Dl("Vidu Q2"),Gl(!0),Ol(""),Vl(""),Fl(nt),$l(["IMAGE"]),ga({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0}))}finally{A(!1)}})()},[]);const So=a.useRef(!1),Ae=(t,c,o)=>{const I=t.includes(c);o(I?t.filter(S=>S!==c):[...t,c])},ce=async()=>{const t=await b.admin.getAIModels({provider:"google"}),c=await b.admin.getAIModels({provider:"bytedance"}),o=await b.admin.getAIModels({provider:"doubao"}),I=await b.admin.getAIModels({provider:"aliyun"}),S=await b.admin.getAIModels({provider:"minimaxi"}),d=await b.admin.getAIModels({provider:"sora"}),l=await b.admin.getAIModels({provider:"vidu"}),g=Array.isArray(t==null?void 0:t.data)?t.data:Array.isArray(t)?t:[],L=Array.isArray(c==null?void 0:c.data)?c.data:Array.isArray(c)?c:[],z=Array.isArray(o==null?void 0:o.data)?o.data:Array.isArray(o)?o:[],re=Array.isArray(I==null?void 0:I.data)?I.data:Array.isArray(I)?I:[],de=Array.isArray(S==null?void 0:S.data)?S.data:Array.isArray(S)?S:[],Q=Array.isArray(d==null?void 0:d.data)?d.data:Array.isArray(d)?d:[],O=Array.isArray(l==null?void 0:l.data)?l.data:Array.isArray(l)?l:[];_([...g,...L,...z,...re,...de,...Q,...O])},Fx=async()=>{var t,c;try{const o={name:V,provider:"google",modelId:kt,type:"TEXT_GENERATION",apiKey:M,apiUrl:N,isActive:x,pricePerUse:v?parseFloat(v):void 0,config:{...U,acceptedInputs:h}},I=n.find(d=>d.provider==="google"&&d.modelId===kt),S=G||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;F((l==null?void 0:l.id)||S),i.success("已保存 Gemini 2.5 Pro 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;F((l==null?void 0:l.id)||null),i.success("已创建 Gemini 2.5 Pro 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===kt);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;F((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 2.5 Pro 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Lx=async()=>{var t,c;try{const o={name:w,provider:"google",modelId:yt,type:"TEXT_GENERATION",apiKey:Se,apiUrl:ye,isActive:q,pricePerUse:J?parseFloat(J):void 0,config:{...Oe,acceptedInputs:Nt}},I=n.find(d=>d.provider==="google"&&d.modelId===yt),S=y||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;u((l==null?void 0:l.id)||S),i.success("已保存 Gemini 2.5 Flash 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;u((l==null?void 0:l.id)||null),i.success("已创建 Gemini 2.5 Flash 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===yt);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;u((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 2.5 Flash 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},$x=async()=>{var t,c;try{const o={name:le,provider:"google",modelId:ft,type:"IMAGE_GENERATION",apiKey:ei,apiUrl:ti,isActive:ne,pricePerUse:ct?parseFloat(ct):void 0,config:{...xt,acceptedInputs:sr}},I=n.find(d=>d.provider==="google"&&d.modelId===ft),S=ee||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||S),i.success("已保存 Gemini 2.5 Flash Image 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||null),i.success("已创建 Gemini 2.5 Flash Image 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===ft);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;ae((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 2.5 Flash Image 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Kx=async()=>{var t,c;try{const o={name:ai,provider:"google",modelId:jt,type:"TEXT_GENERATION",apiKey:ri,apiUrl:di,isActive:si,pricePerUse:ir?parseFloat(ir):void 0,config:{...Qe,...Ma,...Vt,acceptedInputs:xr}},I=n.find(d=>d.provider==="google"&&d.modelId===jt),S=yx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;Pa((l==null?void 0:l.id)||S),i.success("已保存 Gemini 3.0 Pro 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;Pa((l==null?void 0:l.id)||null),i.success("已创建 Gemini 3.0 Pro 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===jt);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;Pa((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 3.0 Pro 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Qx=async()=>{var t,c;try{const o={name:li,provider:"google",modelId:vt,type:"IMAGE_GENERATION",apiKey:oi,apiUrl:ni,isActive:ii,pricePerUse:pr?parseFloat(pr):void 0,config:{...De,acceptedInputs:yr}},I=n.find(d=>d.provider==="google"&&d.modelId===vt),S=fx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;Da((l==null?void 0:l.id)||S),i.success("已保存 Gemini 3 Pro Image 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;Da((l==null?void 0:l.id)||null),i.success("已创建 Gemini 3 Pro Image 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===vt);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;Da((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 3 Pro Image 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Xx=async()=>{var t,c;try{const o={name:ci,provider:"google",modelId:Mt,type:"TEXT_GENERATION",apiKey:mi,apiUrl:ui,isActive:xi,pricePerUse:Nr?parseFloat(Nr):void 0,config:{...Xe,...Ua,...Lt,acceptedInputs:js}},I=n.find(d=>d.provider==="google"&&d.modelId===Mt),S=jx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;Ga((l==null?void 0:l.id)||S),i.success("已保存 Gemini 3 Flash 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;Ga((l==null?void 0:l.id)||null),i.success("已创建 Gemini 3 Flash 配置")}catch(d){const l=n.find(g=>g.provider==="google"&&g.modelId===Mt);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;Ga((L==null?void 0:L.id)||l.id),i.success("已保存 Gemini 3 Flash 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Hx=async()=>{var t,c,o,I,S,d,l,g,L;try{const z={name:Ei,provider:"aliyun",modelId:_t,type:"IMAGE_GENERATION",apiKey:La,apiUrl:$a,isActive:Ri,pricePerUse:nd?parseFloat(nd):void 0,config:{...ut,acceptedInputs:cd}},re=n.find(H=>H.provider==="aliyun"&&H.modelId===_t),de=vx||(re==null?void 0:re.id);if(de){const H=await b.admin.updateAIModel(de,z),te=((t=H==null?void 0:H.data)==null?void 0:t.data)||(H==null?void 0:H.data)||H;Fa((te==null?void 0:te.id)||de),$t((te==null?void 0:te.apiKey)||La),Kt((te==null?void 0:te.apiUrl)||$a),i.success("已保存 Qwen Image Edit Plus 配置")}else try{const H=await b.admin.createAIModel(z),te=((c=H==null?void 0:H.data)==null?void 0:c.data)||(H==null?void 0:H.data)||H;Fa((te==null?void 0:te.id)||null),$t((te==null?void 0:te.apiKey)||La),Kt((te==null?void 0:te.apiUrl)||$a),i.success("已创建 Qwen Image Edit Plus 配置")}catch(H){const te=n.find(He=>He.provider==="aliyun"&&He.modelId===_t);if(te){const He=await b.admin.updateAIModel(te.id,z),at=((o=He==null?void 0:He.data)==null?void 0:o.data)||(He==null?void 0:He.data)||He;Fa((at==null?void 0:at.id)||te.id),$t((at==null?void 0:at.apiKey)||La),Kt((at==null?void 0:at.apiUrl)||$a),i.success("已保存 Qwen Image Edit Plus 配置")}else throw H}const Q=await b.admin.getAIModels({provider:"aliyun"}),K=(Array.isArray(Q==null?void 0:Q.data)?Q.data:Array.isArray(Q)?Q:[]).find(H=>H.modelId===_t);K&&(Ss(K.name),Ts(K.isActive),Es(K.pricePerUse||""),$t(K.apiKey||""),Kt(K.apiUrl||`${Ta}/api/v1/services/aigc/multimodal-generation/generation`),Rs(Array.isArray((I=K.config)==null?void 0:I.acceptedInputs)?K.config.acceptedInputs:["TEXT","IMAGE"]),ma({supportedRatios:((S=K.config)==null?void 0:S.supportedRatios)||ge.map(H=>H.value),supportsImageToImage:((d=K.config)==null?void 0:d.supportsImageToImage)!==!1,maxReferenceImages:((l=K.config)==null?void 0:l.maxReferenceImages)??10})),await ce()}catch(z){i.error(((L=(g=z==null?void 0:z.response)==null?void 0:g.data)==null?void 0:L.message)||"保存失败")}},qx=async()=>{var t,c,o,I,S,d;try{const l={name:Pi,provider:"aliyun",modelId:Dt,type:"VIDEO_EDITING",apiKey:Qa,apiUrl:Xa,isActive:Mi,pricePerUse:xd?parseFloat(xd):void 0,config:{serviceModes:Ha,acceptedInputs:wx,supportedEditingCapabilities:["动作克隆"]}},g=n.find(Q=>Q.provider==="aliyun"&&Q.modelId===Dt),L=Nx||(g==null?void 0:g.id);if(L){const Q=await b.admin.updateAIModel(L,l),O=((t=Q==null?void 0:Q.data)==null?void 0:t.data)||(Q==null?void 0:Q.data)||Q;Ka((O==null?void 0:O.id)||L),Qt((O==null?void 0:O.apiKey)||Qa),Xt((O==null?void 0:O.apiUrl)||Xa),i.success("已保存 Wan Animate Move 配置")}else try{const Q=await b.admin.createAIModel(l),O=((c=Q==null?void 0:Q.data)==null?void 0:c.data)||(Q==null?void 0:Q.data)||Q;Ka((O==null?void 0:O.id)||null),Qt((O==null?void 0:O.apiKey)||Qa),Xt((O==null?void 0:O.apiUrl)||Xa),i.success("已创建 Wan Animate Move 配置")}catch(Q){const O=n.find(K=>K.provider==="aliyun"&&K.modelId===Dt);if(O){const K=await b.admin.updateAIModel(O.id,l),H=((o=K==null?void 0:K.data)==null?void 0:o.data)||(K==null?void 0:K.data)||K;Ka((H==null?void 0:H.id)||O.id),Qt((H==null?void 0:H.apiKey)||Qa),Xt((H==null?void 0:H.apiUrl)||Xa),i.success("已保存 Wan Animate Move 配置")}else throw Q}const z=await b.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(z==null?void 0:z.data)?z.data:Array.isArray(z)?z:[]).find(Q=>Q.modelId===Dt);de&&(Ps(de.name),Ms(de.isActive),_s(de.pricePerUse||""),Qt(de.apiKey||""),Xt(de.apiUrl||ot),Ds(Array.isArray((I=de.config)==null?void 0:I.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await ce()}catch(l){i.error(((d=(S=l==null?void 0:l.response)==null?void 0:S.data)==null?void 0:d.message)||"保存失败")}},Bx=async()=>{var t,c,o,I,S,d;try{const l={name:_i,provider:"aliyun",modelId:Gt,type:"VIDEO_EDITING",apiKey:Ba,apiUrl:za,isActive:Di,pricePerUse:md?parseFloat(md):void 0,config:{serviceModes:Wa,acceptedInputs:Ax,supportedEditingCapabilities:["视频换人"]}},g=n.find(Q=>Q.provider==="aliyun"&&Q.modelId===Gt),L=Ix||(g==null?void 0:g.id);if(L){const Q=await b.admin.updateAIModel(L,l),O=((t=Q==null?void 0:Q.data)==null?void 0:t.data)||(Q==null?void 0:Q.data)||Q;qa((O==null?void 0:O.id)||L),Ht((O==null?void 0:O.apiKey)||Ba),qt((O==null?void 0:O.apiUrl)||za),i.success("已保存 Wan Animate Mix 配置")}else try{const Q=await b.admin.createAIModel(l),O=((c=Q==null?void 0:Q.data)==null?void 0:c.data)||(Q==null?void 0:Q.data)||Q;qa((O==null?void 0:O.id)||null),Ht((O==null?void 0:O.apiKey)||Ba),qt((O==null?void 0:O.apiUrl)||za),i.success("已创建 Wan Animate Mix 配置")}catch(Q){const O=n.find(K=>K.provider==="aliyun"&&K.modelId===Gt);if(O){const K=await b.admin.updateAIModel(O.id,l),H=((o=K==null?void 0:K.data)==null?void 0:o.data)||(K==null?void 0:K.data)||K;qa((H==null?void 0:H.id)||O.id),Ht((H==null?void 0:H.apiKey)||Ba),qt((H==null?void 0:H.apiUrl)||za),i.success("已保存 Wan Animate Mix 配置")}else throw Q}const z=await b.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(z==null?void 0:z.data)?z.data:Array.isArray(z)?z:[]).find(Q=>Q.modelId===Gt);de&&(Gs(de.name),Us(de.isActive),Os(de.pricePerUse||""),Ht(de.apiKey||""),qt(de.apiUrl||ot),Vs(Array.isArray((I=de.config)==null?void 0:I.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await ce()}catch(l){i.error(((d=(S=l==null?void 0:l.response)==null?void 0:S.data)==null?void 0:d.message)||"保存失败")}},zx=async()=>{var t,c,o,I,S,d,l;try{const g={name:Gi,provider:"aliyun",modelId:Ut,type:"VIDEO_EDITING",apiKey:Za,apiUrl:Ja,isActive:Ui,pricePerUse:ud?parseFloat(ud):void 0,config:{supportedStyles:es,video_fps:Oi,acceptedInputs:Sx,supportedEditingCapabilities:["风格转换"]}},L=n.find(O=>O.provider==="aliyun"&&O.modelId===Ut),z=Cx||(L==null?void 0:L.id);if(z){const O=await b.admin.updateAIModel(z,g),K=((t=O==null?void 0:O.data)==null?void 0:t.data)||(O==null?void 0:O.data)||O;Ya((K==null?void 0:K.id)||z),Bt((K==null?void 0:K.apiKey)||Za),zt((K==null?void 0:K.apiUrl)||Ja),i.success("已保存 Video Style Transform 配置")}else try{const O=await b.admin.createAIModel(g),K=((c=O==null?void 0:O.data)==null?void 0:c.data)||(O==null?void 0:O.data)||O;Ya((K==null?void 0:K.id)||null),Bt((K==null?void 0:K.apiKey)||Za),zt((K==null?void 0:K.apiUrl)||Ja),i.success("已创建 Video Style Transform 配置")}catch(O){const K=n.find(H=>H.provider==="aliyun"&&H.modelId===Ut);if(K){const H=await b.admin.updateAIModel(K.id,g),te=((o=H==null?void 0:H.data)==null?void 0:o.data)||(H==null?void 0:H.data)||H;Ya((te==null?void 0:te.id)||K.id),Bt((te==null?void 0:te.apiKey)||Za),zt((te==null?void 0:te.apiUrl)||Ja),i.success("已保存 Video Style Transform 配置")}else throw O}const re=await b.admin.getAIModels({provider:"aliyun"}),Q=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(O=>O.modelId===Ut);Q&&(Fs(Q.name),Ls(Q.isActive),$s(Q.pricePerUse||""),Bt(Q.apiKey||""),zt(Q.apiUrl||Zs),Qs(Array.isArray((I=Q.config)==null?void 0:I.supportedStyles)?Q.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ks(((S=Q.config)==null?void 0:S.video_fps)??15)),await ce()}catch(g){i.error(((l=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},Wx=async()=>{var t,c,o,I,S,d,l;try{const g={name:Vi,provider:"aliyun",modelId:Ot,type:"VIDEO_EDITING",apiKey:as,apiUrl:ss,isActive:Fi,pricePerUse:bd?parseFloat(bd):void 0,config:{...gd,acceptedInputs:pd,supportedEditingCapabilities:["对口型"]}},L=n.find(O=>O.provider==="aliyun"&&O.modelId===Ot),z=Tx||(L==null?void 0:L.id);if(z){const O=await b.admin.updateAIModel(z,g),K=((t=O==null?void 0:O.data)==null?void 0:t.data)||(O==null?void 0:O.data)||O;ts((K==null?void 0:K.id)||z),Wt((K==null?void 0:K.apiKey)||as),Yt((K==null?void 0:K.apiUrl)||ss),i.success("已保存 VideoRetalk 配置")}else try{const O=await b.admin.createAIModel(g),K=((c=O==null?void 0:O.data)==null?void 0:c.data)||(O==null?void 0:O.data)||O;ts((K==null?void 0:K.id)||null),Wt((K==null?void 0:K.apiKey)||as),Yt((K==null?void 0:K.apiUrl)||ss),i.success("已创建 VideoRetalk 配置")}catch(O){const K=n.find(H=>H.provider==="aliyun"&&H.modelId===Ot);if(K){const H=await b.admin.updateAIModel(K.id,g),te=((o=H==null?void 0:H.data)==null?void 0:o.data)||(H==null?void 0:H.data)||H;ts((te==null?void 0:te.id)||K.id),Wt((te==null?void 0:te.apiKey)||as),Yt((te==null?void 0:te.apiUrl)||ss),i.success("已保存 VideoRetalk 配置")}else throw O}const re=await b.admin.getAIModels({provider:"aliyun"}),Q=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(O=>O.modelId===Ot);Q&&(Xs(Q.name),Hs(Q.isActive),qs(Q.pricePerUse||""),Wt(Q.apiKey||""),Yt(Q.apiUrl||`${ot}/`),Bs(Array.isArray((I=Q.config)==null?void 0:I.acceptedInputs)?Q.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),zs({video_extension:!!((S=Q.config)!=null&&S.video_extension)})),await ce()}catch(g){i.error(((l=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},Yx=async()=>{var t,c;try{const o={name:bi,provider:"bytedance",modelId:wa,type:"VIDEO_GENERATION",apiKey:gi,apiUrl:hi,isActive:pi,pricePerUse:Er?parseFloat(Er):void 0,config:{...fe,acceptedInputs:_r}};if(Cr){const I=await b.admin.updateAIModel(Cr,o),S=(I==null?void 0:I.data)||I;ws((S==null?void 0:S.id)||Cr),i.success("已保存 Doubao SeeDance 1.0 Pro 配置")}else{const I=await b.admin.createAIModel(o),S=(I==null?void 0:I.data)||I;ws((S==null?void 0:S.id)||null),i.success("已创建 Doubao SeeDance 1.0 Pro 配置")}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Zx=async()=>{var t,c;try{const o={name:ki,provider:"bytedance",modelId:Ia,type:"VIDEO_GENERATION",apiKey:fi,apiUrl:ji,isActive:yi,pricePerUse:Vr?parseFloat(Vr):void 0,config:{...je,acceptedInputs:Kr}};if(Gr){const I=await b.admin.updateAIModel(Gr,o),S=(I==null?void 0:I.data)||I;Is((S==null?void 0:S.id)||Gr),i.success("已保存 Doubao SeeDance 1.0 Pro Fast 配置")}else{const I=await b.admin.createAIModel(o),S=(I==null?void 0:I.data)||I;Is((S==null?void 0:S.id)||null),i.success("已创建 Doubao SeeDance 1.0 Pro Fast 配置")}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},Jx=async()=>{var t,c;try{const o={name:vi,provider:"bytedance",modelId:Aa,type:"IMAGE_GENERATION",apiKey:wi,apiUrl:Ii,isActive:Ni,pricePerUse:Br?parseFloat(Br):void 0,config:{...mt,acceptedInputs:Zr}};if(Xr){const I=await b.admin.updateAIModel(Xr,o),S=(I==null?void 0:I.data)||I;As((S==null?void 0:S.id)||Xr),i.success("已保存 Doubao SeeDream 4.0 配置")}else{const I=await b.admin.createAIModel(o),S=(I==null?void 0:I.data)||I;As((S==null?void 0:S.id)||null),i.success("已创建 Doubao SeeDream 4.0 配置")}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},e0=async()=>{var t,c;try{const o={name:Ai,provider:"bytedance",modelId:ys,type:"IMAGE_GENERATION",apiKey:Si,apiUrl:Ti,isActive:Ci,pricePerUse:sd?parseFloat(sd):void 0,config:{...et,acceptedInputs:id}};if(ed){const I=await b.admin.updateAIModel(ed,o),S=(I==null?void 0:I.data)||I;Cs((S==null?void 0:S.id)||ed),i.success("已保存 Doubao SeeDream 4.5 配置")}else{const I=await b.admin.createAIModel(o),S=(I==null?void 0:I.data)||I;Cs((S==null?void 0:S.id)||null),i.success("已创建 Doubao SeeDream 4.5 配置")}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"模型配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"左侧模型列表，右侧对应配置"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Midjourney Fast 模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 mt-1",children:"当 Fast 模式额度用完时，可以在此禁用。禁用后用户只能使用 Relax 模式。"})]}),e.jsx("button",{type:"button",onClick:()=>Vx(!p),disabled:j,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-green-500":"bg-slate-300 dark:bg-slate-600"} ${j?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p?"translate-x-6":"translate-x-1"}`})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Google / Gemini"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("google_pro"),className:`w-full text-left p-3 rounded-lg border ${m==="google_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:kt})]}),n.find(t=>t.modelId===kt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_flash_text"),className:`w-full text-left p-3 rounded-lg border ${m==="google_flash_text"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-xs text-neutral-400",children:"(视频分析)"})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:yt})]}),n.find(t=>t.modelId===yt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_flash"),className:`w-full text-left p-3 rounded-lg border ${m==="google_flash"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ft})]}),n.find(t=>t.modelId===ft)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_gemini3"),className:`w-full text-left p-3 rounded-lg border ${m==="google_gemini3"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:jt})]}),n.find(t=>t.modelId===jt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_gemini3_image"),className:`w-full text-left p-3 rounded-lg border ${m==="google_gemini3_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:vt})]}),n.find(t=>t.modelId===vt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_gemini3_flash"),className:`w-full text-left p-3 rounded-lg border ${m==="google_gemini3_flash"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3 Flash"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Mt})]}),n.find(t=>t.modelId===Mt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),Jl.map(t=>e.jsxs("button",{type:"button",onClick:()=>T(t.id),className:`w-full text-left p-3 rounded-lg border ${m===t.id?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:t.name}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:t.id})]}),n.find(c=>c.modelId===t.id)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]},t.id))]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Bytedance / Doubao"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedance_pro"),className:`w-full text-left p-3 rounded-lg border ${m==="doubao_seedance_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:wa})]}),n.find(t=>t.modelId===wa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedance_fast"),className:`w-full text-left p-3 rounded-lg border ${m==="doubao_seedance_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ia})]}),n.find(t=>t.modelId===Ia)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedream"),className:`w-full text-left p-3 rounded-lg border ${m==="doubao_seedream"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Aa})]}),n.find(t=>t.modelId===Aa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedream_45"),className:`w-full text-left p-3 rounded-lg border ${m==="doubao_seedream_45"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ys})]}),n.find(t=>t.modelId===ys)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Aliyun / Qwen & Wanx"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("aliyun_qwen_image_edit"),className:`w-full text-left p-3 rounded-lg border ${m==="aliyun_qwen_image_edit"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:_t})]}),n.find(t=>t.modelId===_t)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_animate_move"),className:`w-full text-left p-3 rounded-lg border ${m==="aliyun_animate_move"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Dt})]}),n.find(t=>t.modelId===Dt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_animate_mix"),className:`w-full text-left p-3 rounded-lg border ${m==="aliyun_animate_mix"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Gt})]}),n.find(t=>t.modelId===Gt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_video_style"),className:`w-full text-left p-3 rounded-lg border ${m==="aliyun_video_style"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ut})]}),n.find(t=>t.modelId===Ut)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_videoretalk"),className:`w-full text-left p-3 rounded-lg border ${m==="aliyun_videoretalk"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ot})]}),n.find(t=>t.modelId===Ot)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"MiniMax / Hailuo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_23"),className:`w-full text-left p-3 rounded-lg border ${m==="minimaxi_hailuo_23"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ea})]}),n.find(t=>t.modelId===ea)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_23_fast"),className:`w-full text-left p-3 rounded-lg border ${m==="minimaxi_hailuo_23_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ta})]}),n.find(t=>t.modelId===ta)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_02"),className:`w-full text-left p-3 rounded-lg border ${m==="minimaxi_hailuo_02"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:aa})]}),n.find(t=>t.modelId===aa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_speech_26_hd"),className:`w-full text-left p-3 rounded-lg border ${m==="minimaxi_speech_26_hd"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ct})]}),n.find(t=>t.modelId===Ct)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Sora / OpenAI"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("sora_image"),className:`w-full text-left p-3 rounded-lg border ${m==="sora_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:sa})]}),n.find(t=>t.modelId===sa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("sora_video"),className:`w-full text-left p-3 rounded-lg border ${m==="sora_video"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ra})]}),n.find(t=>t.modelId===ra)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Vidu"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2_pro"),className:`w-full text-left p-3 rounded-lg border ${m==="vidu_q2_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:da})]}),n.find(t=>t.modelId===da)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2_pro_fast"),className:`w-full text-left p-3 rounded-lg border ${m==="vidu_q2_pro_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Pro Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:la})]}),n.find(t=>t.modelId===la)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2_turbo"),className:`w-full text-left p-3 rounded-lg border ${m==="vidu_q2_turbo"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ia})]}),n.find(t=>t.modelId===ia)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2"),className:`w-full text-left p-3 rounded-lg border ${m==="vidu_q2"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:oa})]}),n.find(t=>t.modelId===oa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[m==="google_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:V,onChange:t=>R(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:kt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:v,onChange:t=>P(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:M,onChange:t=>B(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:N,onChange:t=>r(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ge(kt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(h,t,D),className:`px-3 py-1.5 rounded border-2 text-sm ${h.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:U.maxTokens,onChange:t=>W({...U,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:U.temperature,onChange:t=>W({...U,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:U.topP,onChange:t=>W({...U,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:U.topK,onChange:t=>W({...U,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:U.frequencyPenalty,onChange:t=>W({...U,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:U.presencePenalty,onChange:t=>W({...U,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:t=>E(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Fx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="google_flash_text"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-neutral-500",children:"(视频分析)"})]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:w,onChange:t=>k(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:yt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:J,onChange:t=>se(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key *"}),e.jsx("input",{value:Se,onChange:t=>oe(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"AIzaSy..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ye,onChange:t=>Ue(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ge(yt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Nt,t,wt),className:`px-3 py-1.5 rounded border-2 text-sm ${Nt.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:Oe.maxTokens,onChange:t=>C({...Oe,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:Oe.temperature,onChange:t=>C({...Oe,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:Oe.topP,onChange:t=>C({...Oe,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:Oe.topK,onChange:t=>C({...Oe,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-neutral-50 dark:bg-neutral-900/20 rounded-lg border border-neutral-200 dark:border-neutral-800",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-300 mb-2",children:"💡 专用于视频分析"}),e.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-400",children:'此模型用于"灵感/创意"页面的视频分镜分析功能，支持多模态输入（文本、图片、视频）'})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:t=>Y(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Lx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="google_flash"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:le,onChange:t=>Z(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ft,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ct,onChange:t=>Ea(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:ei,onChange:t=>tr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ti,onChange:t=>ar(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ge(ft)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(sr,t,rr),className:`px-3 py-1.5 rounded border-2 text-sm ${sr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Ra({...xt,supportedRatios:xt.supportedRatios.includes(t.value)?xt.supportedRatios.filter(c=>c!==t.value):[...xt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:xt.supportsImageToImage,onChange:t=>Ra({...xt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:xt.maxReferenceImages,onChange:t=>Ra({...xt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:t=>he(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:$x,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="google_gemini3"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ai,onChange:t=>dr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:jt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ir,onChange:t=>or(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:ri,onChange:t=>nr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:di,onChange:t=>cr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ge(jt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(xr,t,mr),className:`px-3 py-1.5 rounded border-2 text-sm ${xr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"思维模式配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Ma.enableThinkingMode,onChange:t=>fs({...Ma,enableThinkingMode:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"启用思维模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许模型展示推理过程"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"思维水平"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(t=>e.jsx("button",{type:"button",onClick:()=>fs({...Ma,thinkingLevel:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Ma.thinkingLevel===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="low"?"低":t==="medium"?"中":"高"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"低：快速响应，简化推理；中：平衡速度与质量；高：深度思考，详细推理"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"媒体分辨率配置"}),e.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"分辨率越高，模型读取细小文本或识别细微细节的能力就越强，但会增加令牌用量和延迟时间"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"图片分辨率（推荐：High）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>_a({...Vt,imageResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Vt.imageResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"建议用于大多数图片分析任务，以确保获得最佳质量"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"PDF分辨率（推荐：Medium）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>_a({...Vt,pdfResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Vt.pdfResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"非常适合文档理解；质量通常在 Medium 时达到饱和"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频分辨率（推荐：Low）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>_a({...Vt,videoResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Vt.videoResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (70/帧)":t.includes("medium")?"Medium (70/帧)":"High (280/帧)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Low/Medium 对于大多数动作识别和描述任务已足够；High 仅用于读取密集文本或视频帧中的微小细节"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:Qe.maxTokens,onChange:t=>St({...Qe,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:Qe.temperature,onChange:t=>St({...Qe,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:Qe.topP,onChange:t=>St({...Qe,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:Qe.topK,onChange:t=>St({...Qe,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Qe.frequencyPenalty,onChange:t=>St({...Qe,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Qe.presencePenalty,onChange:t=>St({...Qe,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:si,onChange:t=>lr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Kx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="google_gemini3_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:li,onChange:t=>ur(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:vt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:pr,onChange:t=>gr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:oi,onChange:t=>hr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ni,onChange:t=>kr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ge(vt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(yr,t,fr),className:`px-3 py-1.5 rounded border-2 text-sm ${yr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Ft({...De,supportedRatios:De.supportedRatios.includes(t.value)?De.supportedRatios.filter(c=>c!==t.value):[...De.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${De.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ft({...De,supportedResolutions:De.supportedResolutions.includes(t)?De.supportedResolutions.filter(c=>c!==t):[...De.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${De.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:De.supportsImageToImage,onChange:t=>Ft({...De,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图（对话式编辑）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行对话式编辑"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:De.supportsImageEditing,onChange:t=>Ft({...De,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:De.maxReferenceImages,onChange:t=>Ft({...De,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"特殊能力"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 dark:text-blue-300 font-medium",children:"✓ Google 搜索集成"}),e.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:"支持实时检索和事实依据核查"})]}),e.jsxs("div",{className:"px-4 py-2 bg-neutral-50 dark:bg-neutral-900/20 border border-neutral-200 dark:border-neutral-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-300 font-medium",children:"✓ 推理能力"}),e.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-400",children:"支持思维过程推理生成"})]}),e.jsxs("div",{className:"px-4 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-900 dark:text-green-300 font-medium",children:"✓ 文本渲染"}),e.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:"支持清晰易读的文本和图表渲染"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ii,onChange:t=>br(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Qx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="google_gemini3_flash"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3 Flash"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称"}),e.jsx("input",{type:"text",value:ci,onChange:t=>jr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"单次使用价格"}),e.jsx("input",{type:"text",value:Nr,onChange:t=>wr(t.target.value),placeholder:"留空则不计费",className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{type:"password",value:mi,onChange:t=>Ir(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API URL"}),e.jsx("input",{type:"text",value:ui,onChange:t=>Ar(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接受的输入类型"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsxs("label",{className:"flex items-center gap-1 text-sm text-slate-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:js.includes(t),onChange:c=>{c.target.checked?vs([...js,t]):vs(js.filter(o=>o!==t))}}),t]},t))})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Max Tokens"}),e.jsx("input",{type:"number",value:Xe.maxTokens,onChange:t=>Tt({...Xe,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Temperature"}),e.jsx("input",{type:"number",step:"0.1",value:Xe.temperature,onChange:t=>Tt({...Xe,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:"0.01",value:Xe.topP,onChange:t=>Tt({...Xe,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",value:Xe.topK,onChange:t=>Tt({...Xe,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Frequency Penalty"}),e.jsx("input",{type:"number",step:"0.1",value:Xe.frequencyPenalty,onChange:t=>Tt({...Xe,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Presence Penalty"}),e.jsx("input",{type:"number",step:"0.1",value:Xe.presencePenalty,onChange:t=>Tt({...Xe,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"思考模式配置"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Ua.enableThinkingMode,onChange:t=>Ns({...Ua,enableThinkingMode:t.target.checked}),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"启用思考模式"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"思考深度"}),e.jsxs("select",{value:Ua.thinkingLevel,onChange:t=>Ns({...Ua,thinkingLevel:t.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white",children:[e.jsx("option",{value:"minimal",children:"Minimal - 最短延迟"}),e.jsx("option",{value:"low",children:"Low - 简单任务"}),e.jsx("option",{value:"medium",children:"Medium - 平衡推理"}),e.jsx("option",{value:"high",children:"High - 最大推理深度"})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"媒体分辨率配置"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"图片分辨率"}),e.jsxs("select",{value:Lt.imageResolution,onChange:t=>Oa({...Lt,imageResolution:t.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white",children:[e.jsx("option",{value:"media_resolution_low",children:"低"}),e.jsx("option",{value:"media_resolution_medium",children:"中"}),e.jsx("option",{value:"media_resolution_high",children:"高"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"PDF分辨率"}),e.jsxs("select",{value:Lt.pdfResolution,onChange:t=>Oa({...Lt,pdfResolution:t.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white",children:[e.jsx("option",{value:"media_resolution_low",children:"低"}),e.jsx("option",{value:"media_resolution_medium",children:"中"}),e.jsx("option",{value:"media_resolution_high",children:"高"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频分辨率"}),e.jsxs("select",{value:Lt.videoResolution,onChange:t=>Oa({...Lt,videoResolution:t.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white",children:[e.jsx("option",{value:"media_resolution_low",children:"低"}),e.jsx("option",{value:"media_resolution_medium",children:"中"}),e.jsx("option",{value:"media_resolution_high",children:"高"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:xi,onChange:t=>vr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Xx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="doubao_seedance_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:bi,onChange:t=>Sr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:wa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Er,onChange:t=>Rr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:gi,onChange:t=>Pr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:hi,onChange:t=>Mr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(_r,t,Dr),className:`px-3 py-1.5 rounded border-2 text-sm ${_r.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>na({...fe,supportedRatios:fe.supportedRatios.includes(t)?fe.supportedRatios.filter(c=>c!==t):[...fe.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P","2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>na({...fe,supportedResolutions:fe.supportedResolutions.includes(t)?fe.supportedResolutions.filter(c=>c!==t):[...fe.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>na({...fe,supportedGenerationTypes:fe.supportedGenerationTypes.includes(t)?fe.supportedGenerationTypes.filter(c=>c!==t):[...fe.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10,15,30].map(t=>e.jsxs("button",{type:"button",onClick:()=>na({...fe,supportedDurations:fe.supportedDurations.includes(t)?fe.supportedDurations.filter(c=>c!==t):[...fe.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${fe.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:pi,onChange:t=>Tr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Yx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="doubao_seedance_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ki,onChange:t=>Ur(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ia,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text.sm font-medium text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Vr,onChange:t=>Fr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:fi,onChange:t=>Lr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ji,onChange:t=>$r(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Kr,t,Qr),className:`px-3 py-1.5 rounded border-2 text-sm ${Kr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>ca({...je,supportedRatios:je.supportedRatios.includes(t)?je.supportedRatios.filter(c=>c!==t):[...je.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>ca({...je,supportedResolutions:je.supportedResolutions.includes(t)?je.supportedResolutions.filter(c=>c!==t):[...je.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>ca({...je,supportedGenerationTypes:je.supportedGenerationTypes.includes(t)?je.supportedGenerationTypes.filter(c=>c!==t):[...je.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>ca({...je,supportedDurations:je.supportedDurations.includes(t)?je.supportedDurations.filter(c=>c!==t):[...je.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${je.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:yi,onChange:t=>Or(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Zx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="doubao_seedream"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:vi,onChange:t=>Hr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Aa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Br,onChange:t=>zr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:wi,onChange:t=>Wr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ii,onChange:t=>Yr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Zr,t,Jr),className:`px-3 py-1.5 rounded border-2 text-sm ${Zr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Va({...mt,supportedRatios:mt.supportedRatios.includes(t.value)?mt.supportedRatios.filter(c=>c!==t.value):[...mt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${mt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:mt.supportsImageToImage,onChange:t=>Va({...mt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:mt.maxReferenceImages,onChange:t=>Va({...mt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ni,onChange:t=>qr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Jx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="doubao_seedream_45"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ai,onChange:t=>td(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ys,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:sd,onChange:t=>rd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Si,onChange:t=>dd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ti,onChange:t=>ld(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(id,t,od),className:`px-3 py-1.5 rounded border-2 text-sm ${id.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>xa({...et,supportedRatios:et.supportedRatios.includes(t.value)?et.supportedRatios.filter(c=>c!==t.value):[...et.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${et.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:et.supportsImageToImage,onChange:t=>xa({...et,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:et.supportsImageEditing,onChange:t=>xa({...et,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:et.maxReferenceImages,onChange:t=>xa({...et,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ci,onChange:t=>ad(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:e0,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="aliyun_qwen_image_edit"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ei,onChange:t=>Ss(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:_t,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:nd,onChange:t=>Es(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:La,onChange:t=>$t(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:$a,onChange:t=>Kt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${Ta}/api/v1/services/aigc/multimodal-generation/generation`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(cd,t,Rs),className:`px-3 py-1.5 rounded border-2 text-sm ${cd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>ma({...ut,supportedRatios:ut.supportedRatios.includes(t.value)?ut.supportedRatios.filter(c=>c!==t.value):[...ut.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ut.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ut.supportsImageToImage,onChange:t=>ma({...ut,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"图片分辨率 200-4096px，比例 1:3 至 3:1，大小 ≤5MB"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ut.maxReferenceImages,onChange:t=>ma({...ut,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ri,onChange:t=>Ts(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Hx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="aliyun_animate_move"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Pi,onChange:t=>Ps(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Dt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:xd,onChange:t=>_s(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Qa,onChange:t=>Qt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Xa,onChange:t=>Xt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:ot})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ha.includes(t);Ds(c?Ha.filter(o=>o!==t):[...Ha,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Ha.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB，建议仅一人正面"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Mi,onChange:t=>Ms(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:qx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="aliyun_animate_mix"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:_i,onChange:t=>Gs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Gt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:md,onChange:t=>Os(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ba,onChange:t=>Ht(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:za,onChange:t=>qt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:ot})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Wa.includes(t);Vs(c?Wa.filter(o=>o!==t):[...Wa,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Wa.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Di,onChange:t=>Us(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Bx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="aliyun_video_style"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Gi,onChange:t=>Fs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ut,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ud,onChange:t=>$s(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Za,onChange:t=>Bt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Ja,onChange:t=>zt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Zs})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可用风格（0-7，可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,1,2,3,4,5,6,7].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=es.includes(t);Qs(c?es.filter(o=>o!==t):[...es,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${es.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频帧率"}),e.jsx("input",{type:"number",min:1,max:60,value:Oi,onChange:t=>Ks(Number(t.target.value)),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"视频：时长 ≤30s，格式 MP4/AVI/MOV 等"}),e.jsx("div",{children:"异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ui,onChange:t=>Ls(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:zx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="aliyun_videoretalk"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Vi,onChange:t=>Xs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ot,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:bd,onChange:t=>qs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:as,onChange:t=>Wt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:ss,onChange:t=>Yt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${ot}/`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["VIDEO","AUDIO","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(pd,t,Bs),className:`px-3 py-1.5 rounded border-2 text-sm ${pd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:gd.video_extension,onChange:t=>zs({...gd,video_extension:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"音频时长超出时扩展视频长度"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"视频 2~120s、15~60fps、640~2048 边长；音频 2~120s、≤30MB"})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"异步调用：提交任务后以 task_id 轮询结果"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Fi,onChange:t=>Hs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Wx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="minimaxi_hailuo_23"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Li,onChange:t=>hd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ea,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:yd,onChange:t=>fd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ki,onChange:t=>jd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Qi,onChange:t=>vd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Nd,t,wd),className:`px-3 py-1.5 rounded border-2 text-sm ${Nd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedRatios.includes(t);ua({...ve,supportedRatios:c?ve.supportedRatios.filter(o=>o!==t):[...ve.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedResolutions.includes(t);ua({...ve,supportedResolutions:c?ve.supportedResolutions.filter(o=>o!==t):[...ve.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedGenerationTypes.includes(t);ua({...ve,supportedGenerationTypes:c?ve.supportedGenerationTypes.filter(o=>o!==t):[...ve.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=ve.supportedDurations.includes(t);ua({...ve,supportedDurations:c?ve.supportedDurations.filter(o=>o!==t):[...ve.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:$i,onChange:t=>kd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c,o;try{const I={name:Li,provider:"minimaxi",modelId:ea,type:"VIDEO_GENERATION",apiKey:Ki,apiUrl:Qi,isActive:$i,pricePerUse:yd?parseFloat(yd):void 0,config:{...ve,acceptedInputs:Nd}},S=n.find(l=>l.provider==="minimaxi"&&l.modelId===ea),d=Ex||(S==null?void 0:S.id);if(d){const l=await b.admin.updateAIModel(d,I),g=(l==null?void 0:l.data)||l;rs((g==null?void 0:g.id)||d),i.success("已保存 MiniMax Hailuo 2.3 配置")}else try{const l=await b.admin.createAIModel(I),g=(l==null?void 0:l.data)||l;rs((g==null?void 0:g.id)||null),i.success("已创建 MiniMax Hailuo 2.3 配置")}catch(l){const g=n.find(L=>L.provider==="minimaxi"&&L.modelId===ea);if(g){const L=await b.admin.updateAIModel(g.id,I),z=(L==null?void 0:L.data)||L;rs((z==null?void 0:z.id)||g.id),i.success("已保存 MiniMax Hailuo 2.3 配置")}else throw l}try{const l=Ws||(S==null?void 0:S.id)||((t=n.find(g=>g.provider==="minimaxi"&&g.modelId===Ct))==null?void 0:t.id);l&&await b.admin.upsertAIModelCapabilities({aiModelId:l,capabilities:[{capability:"语音合成",supported:!!tt.synth},{capability:"音色克隆",supported:!!tt.clone},{capability:"音色设计",supported:!!tt.design}]})}catch{}await ce()}catch(I){i.error(((o=(c=I==null?void 0:I.response)==null?void 0:c.data)==null?void 0:o.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="minimaxi_hailuo_23_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Xi,onChange:t=>Id(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ta,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Cd,onChange:t=>Sd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:qi,onChange:t=>Td(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Bi,onChange:t=>Ed(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Rd,t,Pd),className:`px-3 py-1.5 rounded border-2 text-sm ${Rd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedRatios.includes(t);ba({...Ne,supportedRatios:c?Ne.supportedRatios.filter(o=>o!==t):[...Ne.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedResolutions.includes(t);ba({...Ne,supportedResolutions:c?Ne.supportedResolutions.filter(o=>o!==t):[...Ne.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedGenerationTypes.includes(t);ba({...Ne,supportedGenerationTypes:c?Ne.supportedGenerationTypes.filter(o=>o!==t):[...Ne.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=Ne.supportedDurations.includes(t);ba({...Ne,supportedDurations:c?Ne.supportedDurations.filter(o=>o!==t):[...Ne.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Hi,onChange:t=>Ad(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:Xi,provider:"minimaxi",modelId:ta,type:"VIDEO_GENERATION",apiKey:qi,apiUrl:Bi,isActive:Hi,pricePerUse:Cd?parseFloat(Cd):void 0,config:{...Ne,acceptedInputs:Rd}},I=n.find(d=>d.provider==="minimaxi"&&d.modelId===ta),S=Rx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;ds((l==null?void 0:l.id)||S),i.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;ds((l==null?void 0:l.id)||null),i.success("已创建 MiniMax Hailuo 2.3 Fast 配置")}catch(d){const l=n.find(g=>g.provider==="minimaxi"&&g.modelId===ta);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;ds((L==null?void 0:L.id)||l.id),i.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="minimaxi_hailuo_02"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:zi,onChange:t=>Md(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:aa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Dd,onChange:t=>Gd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Yi,onChange:t=>Ud(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Zi,onChange:t=>Od(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Vd,t,Fd),className:`px-3 py-1.5 rounded border-2 text-sm ${Vd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedRatios.includes(t);pa({...we,supportedRatios:c?we.supportedRatios.filter(o=>o!==t):[...we.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedResolutions.includes(t);pa({...we,supportedResolutions:c?we.supportedResolutions.filter(o=>o!==t):[...we.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedGenerationTypes.includes(t);pa({...we,supportedGenerationTypes:c?we.supportedGenerationTypes.filter(o=>o!==t):[...we.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=we.supportedDurations.includes(t);pa({...we,supportedDurations:c?we.supportedDurations.filter(o=>o!==t):[...we.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Wi,onChange:t=>_d(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:zi,provider:"minimaxi",modelId:aa,type:"VIDEO_GENERATION",apiKey:Yi,apiUrl:Zi,isActive:Wi,pricePerUse:Dd?parseFloat(Dd):void 0,config:{...we,acceptedInputs:Vd}},I=n.find(d=>d.provider==="minimaxi"&&d.modelId===aa),S=Px||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;ls((l==null?void 0:l.id)||S),i.success("已保存 MiniMax Hailuo 02 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;ls((l==null?void 0:l.id)||null),i.success("已创建 MiniMax Hailuo 02 配置")}catch(d){const l=n.find(g=>g.provider==="minimaxi"&&g.modelId===aa);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;ls((L==null?void 0:L.id)||l.id),i.success("已保存 MiniMax Hailuo 02 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="minimaxi_speech_26_hd"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"AUDIO_SYNTHESIS"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ji,onChange:t=>Ld(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ct,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Kd,onChange:t=>Qd(t.target.value),className:"w-full px-4 py-2 bg-background-dark border border-border-dark rounded-lg text白"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:to,onChange:t=>Xd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ao,onChange:t=>Hd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","AUDIO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(qd,t,Bd),className:`px-3 py-1.5 rounded border-2 text-sm ${qd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的输出格式（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["mp3","wav"].map(t=>e.jsx("button",{type:"button",onClick:()=>os({...bt,supportedFormats:bt.supportedFormats.includes(t)?bt.supportedFormats.filter(c=>c!==t):[...bt.supportedFormats,t]}),className:`px-3 py-1.5 rounded border-2 text-sm ${bt.supportedFormats.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.toUpperCase()},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最小采样率"}),e.jsx("input",{type:"number",min:8e3,value:bt.sampleRateMin,onChange:t=>os({...bt,sampleRateMin:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:bt.supportsStereo,onChange:t=>os({...bt,supportsStereo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持立体声"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"输出双声道（channel=2），默认兼容"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"模型能力（音频）"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:tt.synth,onChange:t=>ns({...tt,synth:t.target.checked})})," 语音合成"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:tt.clone,onChange:t=>ns({...tt,clone:t.target.checked})})," 音色克隆"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:tt.design,onChange:t=>ns({...tt,design:t.target.checked})})," 音色设计"]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:eo,onChange:t=>$d(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c,o;try{const I={name:Ji,provider:"minimaxi",modelId:Ct,type:"AUDIO_SYNTHESIS",apiKey:to,apiUrl:ao,isActive:eo,pricePerUse:Kd?parseFloat(Kd):void 0,config:{...bt,acceptedInputs:qd}},S=n.find(z=>z.provider==="minimaxi"&&z.modelId===Ct),d=Ws||(S==null?void 0:S.id);if(d){const z=await b.admin.updateAIModel(d,I),re=(z==null?void 0:z.data)||z;is((re==null?void 0:re.id)||d),i.success("已保存 MiniMax Speech 2.6 HD 配置")}else try{const z=await b.admin.createAIModel(I),re=(z==null?void 0:z.data)||z;is((re==null?void 0:re.id)||null),i.success("已创建 MiniMax Speech 2.6 HD 配置")}catch(z){const re=n.find(de=>de.provider==="minimaxi"&&de.modelId===Ct);if(re){const de=await b.admin.updateAIModel(re.id,I),Q=(de==null?void 0:de.data)||de;is((Q==null?void 0:Q.id)||re.id),i.success("已保存 MiniMax Speech 2.6 HD 配置")}else throw z}const l=Ws||(S==null?void 0:S.id),g=[{capability:"语音合成",supported:!!tt.synth},{capability:"音色克隆",supported:!!tt.clone},{capability:"音色设计",supported:!!tt.design}],L=l||((t=n.find(z=>z.provider==="minimaxi"&&z.modelId===Ct))==null?void 0:t.id)||Ws;L&&await b.admin.upsertAIModelCapabilities({aiModelId:L,capabilities:g}),await ce()}catch(I){i.error(((o=(c=I==null?void 0:I.response)==null?void 0:c.data)==null?void 0:o.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="sora_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:so,onChange:t=>zd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:sa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Yd,onChange:t=>Zd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:lo,onChange:t=>Jd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:io,onChange:t=>el(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ca})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(tl,t,al),className:`px-3 py-1.5 rounded border-2 text-sm ${tl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>xs({...pt,supportedRatios:pt.supportedRatios.includes(t.value)?pt.supportedRatios.filter(c=>c!==t.value):[...pt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${pt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:pt.supportsImageToImage,onChange:t=>xs({...pt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:pt.maxReferenceImages,onChange:t=>xs({...pt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ro,onChange:t=>Wd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:so,provider:"sora",modelId:sa,type:"IMAGE_GENERATION",apiKey:lo,apiUrl:io,isActive:ro,pricePerUse:Yd?parseFloat(Yd):void 0,config:{...pt,acceptedInputs:tl}},I=n.find(d=>d.provider==="sora"&&d.modelId===sa),S=Mx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;cs((l==null?void 0:l.id)||S),i.success("已保存 Sora2 Image 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;cs((l==null?void 0:l.id)||null),i.success("已创建 Sora2 Image 配置")}catch(d){const l=n.find(g=>g.provider==="sora"&&g.modelId===sa);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;cs((L==null?void 0:L.id)||l.id),i.success("已保存 Sora2 Image 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="sora_video"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:oo,onChange:t=>sl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ra,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:dl,onChange:t=>ll(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:co,onChange:t=>il(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:xo,onChange:t=>ol(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ca})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(nl,t,cl),className:`px-3 py-1.5 rounded border-2 text-sm ${nl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["landscape","portrait"].map(t=>e.jsx("button",{type:"button",onClick:()=>Zt({...Te,supportedRatios:Te.supportedRatios.includes(t)?Te.supportedRatios.filter(c=>c!==t):[...Te.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Te.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="landscape"?"横屏 (landscape)":"竖屏 (portrait)"},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Te.supportsImageToVideo,onChange:t=>Zt({...Te,supportsImageToVideo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生视频"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Te.maxReferenceImages,onChange:t=>Zt({...Te,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","图生视频","视频生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>Zt({...Te,supportedGenerationTypes:Te.supportedGenerationTypes.includes(t)?Te.supportedGenerationTypes.filter(c=>c!==t):[...Te.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Te.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[10,15,25].map(t=>e.jsxs("button",{type:"button",onClick:()=>Zt({...Te,supportedDurations:(Te.supportedDurations||[]).includes(t)?(Te.supportedDurations||[]).filter(c=>c!==t):[...Te.supportedDurations||[],t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${(Te.supportedDurations||[]).includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"秒"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:no,onChange:t=>rl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:oo,provider:"sora",modelId:ra,type:"VIDEO_GENERATION",apiKey:co,apiUrl:xo,isActive:no,pricePerUse:dl?parseFloat(dl):void 0,config:{...Te,acceptedInputs:nl}},I=n.find(d=>d.provider==="sora"&&d.modelId===ra),S=_x||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;ms((l==null?void 0:l.id)||S),i.success("已保存 Sora2 Video 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;ms((l==null?void 0:l.id)||null),i.success("已创建 Sora2 Video 配置")}catch(d){const l=n.find(g=>g.provider==="sora"&&g.modelId===ra);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;ms((L==null?void 0:L.id)||l.id),i.success("已保存 Sora2 Video 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="vidu_q2_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:mo,onChange:t=>xl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:da,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ul,onChange:t=>bl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:bo,onChange:t=>pl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:po,onChange:t=>gl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(hl,t,kl),className:`px-3 py-1.5 rounded border-2 text-sm ${hl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>Et({...ue,supportedRatios:ue.supportedRatios.includes(t)?ue.supportedRatios.filter(c=>c!==t):[...ue.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>Et({...ue,supportedResolutions:ue.supportedResolutions.includes(t)?ue.supportedResolutions.filter(c=>c!==t):[...ue.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ue.supportsSubjects,onChange:t=>Et({...ue,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ue.maxReferenceImages,onChange:t=>Et({...ue,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>Et({...ue,supportedGenerationTypes:ue.supportedGenerationTypes.includes(t)?ue.supportedGenerationTypes.filter(c=>c!==t):[...ue.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>Et({...ue,supportedDurations:ue.supportedDurations.includes(t)?ue.supportedDurations.filter(c=>c!==t):[...ue.supportedDurations,t].sort((c,o)=>c-o)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:uo,onChange:t=>ml(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:mo,provider:"vidu",modelId:da,type:"VIDEO_GENERATION",apiKey:bo,apiUrl:po,isActive:uo,pricePerUse:ul?parseFloat(ul):void 0,config:{...ue,acceptedInputs:hl}},I=n.find(d=>d.provider==="vidu"&&d.modelId===da),S=Dx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;us((l==null?void 0:l.id)||S),i.success("已保存 Vidu Q2 Pro 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;us((l==null?void 0:l.id)||null),i.success("已创建 Vidu Q2 Pro 配置")}catch(d){const l=n.find(g=>g.provider==="vidu"&&g.modelId===da);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;us((L==null?void 0:L.id)||l.id),i.success("已保存 Vidu Q2 Pro 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="vidu_q2_pro_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Pro Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:go,onChange:t=>yl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:la,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:jl,onChange:t=>vl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:["API Key ",e.jsx("span",{className:"text-xs text-slate-500",children:"（留空使用 waule-api）"})]}),e.jsx("input",{value:ko,onChange:t=>Nl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:yo,onChange:t=>wl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Il,t,Al),className:`px-3 py-1.5 rounded border-2 text-sm ${Il.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>Rt({...be,supportedRatios:be.supportedRatios.includes(t)?be.supportedRatios.filter(c=>c!==t):[...be.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>Rt({...be,supportedResolutions:be.supportedResolutions.includes(t)?be.supportedResolutions.filter(c=>c!==t):[...be.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:be.supportsSubjects,onChange:t=>Rt({...be,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:be.maxReferenceImages,onChange:t=>Rt({...be,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>Rt({...be,supportedGenerationTypes:be.supportedGenerationTypes.includes(t)?be.supportedGenerationTypes.filter(c=>c!==t):[...be.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>Rt({...be,supportedDurations:be.supportedDurations.includes(t)?be.supportedDurations.filter(c=>c!==t):[...be.supportedDurations,t].sort((c,o)=>c-o)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ho,onChange:t=>fl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:go,provider:"vidu",modelId:la,type:"VIDEO_GENERATION",apiKey:ko,apiUrl:yo,isActive:ho,pricePerUse:jl?parseFloat(jl):void 0,config:{...be,acceptedInputs:Il}},I=n.find(d=>d.provider==="vidu"&&d.modelId===la),S=Gx||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;bs((l==null?void 0:l.id)||S),i.success("已保存 Vidu Q2 Pro Fast 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;bs((l==null?void 0:l.id)||null),i.success("已创建 Vidu Q2 Pro Fast 配置")}catch(d){const l=n.find(g=>g.provider==="vidu"&&g.modelId===la);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;bs((L==null?void 0:L.id)||l.id),i.success("已保存 Vidu Q2 Pro Fast 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="vidu_q2_turbo"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:fo,onChange:t=>Cl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ia,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Tl,onChange:t=>El(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:vo,onChange:t=>Rl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:No,onChange:t=>Pl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Ml,t,_l),className:`px-3 py-1.5 rounded border-2 text-sm ${Ml.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>Pt({...pe,supportedRatios:pe.supportedRatios.includes(t)?pe.supportedRatios.filter(c=>c!==t):[...pe.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${pe.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>Pt({...pe,supportedResolutions:pe.supportedResolutions.includes(t)?pe.supportedResolutions.filter(c=>c!==t):[...pe.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${pe.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:pe.supportsSubjects,onChange:t=>Pt({...pe,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:pe.maxReferenceImages,onChange:t=>Pt({...pe,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>Pt({...pe,supportedGenerationTypes:pe.supportedGenerationTypes.includes(t)?pe.supportedGenerationTypes.filter(c=>c!==t):[...pe.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${pe.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>Pt({...pe,supportedDurations:pe.supportedDurations.includes(t)?pe.supportedDurations.filter(c=>c!==t):[...pe.supportedDurations,t].sort((c,o)=>c-o)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${pe.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:jo,onChange:t=>Sl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:fo,provider:"vidu",modelId:ia,type:"VIDEO_GENERATION",apiKey:vo,apiUrl:No,isActive:jo,pricePerUse:Tl?parseFloat(Tl):void 0,config:{...pe,acceptedInputs:Ml}},I=n.find(d=>d.provider==="vidu"&&d.modelId===ia),S=Ux||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;ps((l==null?void 0:l.id)||S),i.success("已保存 Vidu Q2 Turbo 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;ps((l==null?void 0:l.id)||null),i.success("已创建 Vidu Q2 Turbo 配置")}catch(d){const l=n.find(g=>g.provider==="vidu"&&g.modelId===ia);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;ps((L==null?void 0:L.id)||l.id),i.success("已保存 Vidu Q2 Turbo 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),m==="vidu_q2"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:wo,onChange:t=>Dl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:oa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ul,onChange:t=>Ol(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ao,onChange:t=>Vl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Co,onChange:t=>Fl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Ll,t,$l),className:`px-3 py-1.5 rounded border-2 text-sm ${Ll.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频宽高比（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>ga({...Ie,supportedRatios:Ie.supportedRatios.includes(t)?Ie.supportedRatios.filter(c=>c!==t):[...Ie.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>ga({...Ie,supportedResolutions:Ie.supportedResolutions.includes(t)?Ie.supportedResolutions.filter(c=>c!==t):[...Ie.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["参考图生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>ga({...Ie,supportedGenerationTypes:Ie.supportedGenerationTypes.includes(t)?Ie.supportedGenerationTypes.filter(c=>c!==t):[...Ie.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>ga({...Ie,supportedDurations:Ie.supportedDurations.includes(t)?Ie.supportedDurations.filter(c=>c!==t):[...Ie.supportedDurations,t].sort((c,o)=>c-o)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Io,onChange:t=>Gl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const o={name:wo,provider:"vidu",modelId:oa,type:"VIDEO_GENERATION",apiKey:Ao,apiUrl:Co,isActive:Io,pricePerUse:Ul?parseFloat(Ul):void 0,config:{...Ie,acceptedInputs:Ll}},I=n.find(d=>d.provider==="vidu"&&d.modelId===oa),S=Ox||(I==null?void 0:I.id);if(S){const d=await b.admin.updateAIModel(S,o),l=(d==null?void 0:d.data)||d;gs((l==null?void 0:l.id)||S),i.success("已保存 Vidu Q2 配置")}else try{const d=await b.admin.createAIModel(o),l=(d==null?void 0:d.data)||d;gs((l==null?void 0:l.id)||null),i.success("已创建 Vidu Q2 配置")}catch(d){const l=n.find(g=>g.provider==="vidu"&&g.modelId===oa);if(l){const g=await b.admin.updateAIModel(l.id,o),L=(g==null?void 0:g.data)||g;gs((L==null?void 0:L.id)||l.id),i.success("已保存 Vidu Q2 配置")}else throw d}await ce()}catch(o){i.error(((c=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),Jl.some(t=>t.id===m)&&e.jsx(M0,{selectedModel:m,existingModels:n,onRefresh:ce}),s&&e.jsx("div",{className:"text-gray-400",children:"加载中..."})]})]})]})};function D0(){const[s,A]=a.useState([]),[n,_]=a.useState([]),[m,T]=a.useState(!0),[p,f]=a.useState(!1),[j,$]=a.useState(null),[G,F]=a.useState(!1),[V,R]=a.useState(null),[x,E]=a.useState({name:"",description:"",usageScene:"workflow",isActive:!0}),[v,P]=a.useState({agentId:"",name:"",description:"",systemPrompt:"",aiModelId:"",temperature:.7,maxTokens:2e3,isActive:!0});a.useEffect(()=>{M(),B()},[]);const M=async()=>{try{const k=await b.agents.getAll(),q=await Promise.all(k.map(async Y=>{try{const J=await b.agents.roles.listByAgent(Y.id);return{...Y,roles:J}}catch{return{...Y,roles:[]}}}));A(q)}catch{i.error("加载智能体失败")}finally{T(!1)}},B=async()=>{try{const k=await b.agents.getAvailableModels();_(k)}catch{i.error("加载可用模型失败")}},N=()=>{$(null),E({name:"",description:"",usageScene:"workflow",isActive:!0}),f(!0)},r=k=>{$(k),E({name:k.name,description:k.description||"",usageScene:k.usageScene||"workflow",isActive:k.isActive}),f(!0)},h=k=>{$(k),R(null),P({agentId:k.id,name:"",description:"",systemPrompt:"",aiModelId:n.length>0?n[0].id:"",temperature:.7,maxTokens:2e3,isActive:!0}),F(!0)},D=k=>{R(k),P({agentId:k.agentId,name:k.name,description:k.description||"",systemPrompt:k.systemPrompt,aiModelId:k.aiModelId,temperature:k.temperature,maxTokens:k.maxTokens,isActive:k.isActive}),F(!0)},U=async(k,q)=>{if(window.confirm(`确定要删除智能体 "${q}" 吗？`))try{await b.agents.delete(k),i.success("删除成功"),M()}catch{i.error("删除失败")}},W=async k=>{if(k.preventDefault(),!x.name){i.error("请填写必填字段");return}try{j?(await b.agents.update(j.id,x),i.success("更新成功")):(await b.agents.create(x),i.success("创建成功")),f(!1),M()}catch{i.error(j?"更新失败":"创建失败")}},y=async k=>{if(k.preventDefault(),!v.agentId||!v.name||!v.systemPrompt||!v.aiModelId){i.error("请填写角色必填字段");return}try{V?(await b.agents.roles.update(V.id,v),i.success("角色更新成功")):(await b.agents.roles.create(v),i.success("角色创建成功")),F(!1),M()}catch{i.error(V?"角色更新失败":"角色创建失败")}},u=async k=>{if(window.confirm(`确定要删除角色 "${k.name}" 吗？`))try{await b.agents.roles.delete(k.id),i.success("角色删除成功"),M()}catch{i.error("角色删除失败")}},w=async(k,q,Y)=>{const J=s.find(oe=>oe.id===k),se=[...(J==null?void 0:J.roles)||[]];if(q===Y||se.length===0)return;const[Se]=se.splice(q,1);se.splice(Y,0,Se),A(oe=>oe.map(ye=>ye.id===k?{...ye,roles:se}:ye));try{for(let ye=0;ye<se.length;ye++)await b.agents.roles.update(se[ye].id,{order:ye});const oe=await b.agents.roles.listByAgent(k);A(ye=>ye.map(Ue=>Ue.id===k?{...Ue,roles:oe}:Ue)),i.success("角色顺序已更新")}catch{i.error("更新排序失败"),M()}};return m?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-tiffany-500 border-t-transparent"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"智能体配置"}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:"管理AI智能体，配置提示词赋予不同角色和专业能力"})]}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"新建智能体"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.map(k=>e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl border border-border-light dark:border-border-dark p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-light-primary dark:text-text-dark-primary mb-1",children:k.name}),k.description&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary line-clamp-2",children:k.description})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs ${k.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:k.isActive?"启用":"禁用"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k.usageScene==="workflow"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":k.usageScene==="episode"?"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-700 dark:text-neutral-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:k.usageScene==="workflow"?"工作流":k.usageScene==="episode"?"剧集创作":"广告创作"})}),e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"此智能体为空壳，具体能力由下方角色决定"})]}),e.jsxs("div",{className:"border-t border-border-light dark:border-border-dark pt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>r(k),className:"flex-1 px-3 py-1.5 bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary rounded hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>h(k),className:"flex-1 px-3 py-1.5 bg-tiffany-50 dark:bg-tiffany-900/20 text-tiffany-600 dark:text-tiffany-400 rounded hover:bg-tiffany-100 dark:hover:bg-tiffany-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_circle"}),"添加角色"]}),e.jsxs("button",{onClick:()=>U(k.id,k.name),className:"flex-1 px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"删除"]})]}),(k.roles||[]).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色"}),e.jsx("div",{className:"space-y-2",children:(k.roles||[]).map((q,Y)=>{var J;return e.jsxs("div",{className:"group flex items-center justify-between p-2 bg-background-light dark:bg-background-dark rounded border border-border-light dark:border-border-dark",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:[q.name," ",q.isActive?"":"(已禁用)"]}),e.jsxs("div",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["模型：",(J=q.aiModel)==null?void 0:J.name," | 温度：",q.temperature," | Token：",q.maxTokens]}),q.description&&e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary line-clamp-1",children:q.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(q),className:"px-2 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",children:"编辑"}),e.jsx("button",{onClick:()=>u(q),className:"px-2 py-1 text-xs bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30",children:"删除"}),e.jsx("button",{type:"button",onClick:()=>w(k.id,Y,Math.max(0,Y-1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"上移",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>w(k.id,Y,Math.min((k.roles||[]).length-1,Y+1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"下移",children:"↓"})]})]},q.id)})})]})]},k.id)),s.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-text-light-tertiary dark:text-text-dark-tertiary mb-4 block",children:"smart_toy"}),e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"还没有智能体，点击右上角创建第一个"})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:j?"编辑智能体":"新建智能体"}),e.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:W,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.name,onChange:k=>E({...x,name:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：小红书文案大师",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"描述"}),e.jsx("input",{type:"text",value:x.description,onChange:k=>E({...x,description:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述智能体的功能"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["使用场景 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:x.usageScene,onChange:k=>E({...x,usageScene:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",children:[e.jsx("option",{value:"workflow",children:"工作流"}),e.jsx("option",{value:"episode",children:"剧集创作"}),e.jsx("option",{value:"advertisement",children:"广告创作"})]}),e.jsx("p",{className:"mt-1 text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"选择智能体的使用场景，不同场景下的智能体会在对应功能中显示"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:x.isActive,onChange:k=>E({...x,isActive:k.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用智能体"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:j?"更新":"创建"})]})]})]})}),G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:V?"编辑角色":"添加角色"}),e.jsx("button",{onClick:()=>F(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:y,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.name,onChange:k=>P({...v,name:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：导演、编剧、推广运营",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色描述"}),e.jsx("input",{type:"text",value:v.description,onChange:k=>P({...v,description:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述角色的职责"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色提示词 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:v.systemPrompt,onChange:k=>P({...v,systemPrompt:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500 min-h-32",placeholder:"为该角色定义专属提示词",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["调用模型 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:v.aiModelId,onChange:k=>P({...v,aiModelId:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",required:!0,children:n.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.provider,")"]},k.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"温度 (Temperature)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:v.temperature,onChange:k=>P({...v,temperature:parseFloat(k.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",step:"100",min:"100",max:"32000",value:v.maxTokens,onChange:k=>P({...v,maxTokens:parseInt(k.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"roleActive",checked:v.isActive,onChange:k=>P({...v,isActive:k.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"roleActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用角色"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>F(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:V?"更新角色":"创建角色"})]})]})]})})]})}const G0=()=>{var oe,ye,Ue,Nt,wt,Oe;const[s,A]=a.useState([]),[n,_]=a.useState({page:1,limit:20,total:0,totalPages:0}),[m,T]=a.useState(!0),[p,f]=a.useState(""),[j,$]=a.useState(""),[G,F]=a.useState(null),[V,R]=a.useState(null),[x,E]=a.useState(null),[v,P]=a.useState(!1),[M,B]=a.useState(null),[N,r]=a.useState(null),h=a.useCallback(async()=>{var C,ee;T(!0);try{const ae={page:n.page,limit:n.limit};p&&(ae.search=p),j&&(ae.role=j);const le=await b.admin.getUsers(ae);le.success&&(A(le.data),_(le.pagination))}catch(ae){i.error(((ee=(C=ae.response)==null?void 0:C.data)==null?void 0:ee.message)||"获取用户列表失败")}finally{T(!1)}},[n.page,n.limit,p,j]);a.useEffect(()=>{h()},[h]);const D=C=>{C.preventDefault(),_(ee=>({...ee,page:1}))},U=async C=>{var le,Z;if(C.role==="ADMIN"){i.error("管理员账户不能被禁用");return}const ee=!C.isActive,ae=ee?"启用":"禁用";if(confirm(`确定要${ae}用户「${C.nickname||C.phone||C.id}」吗？`))try{await b.admin.updateUser(C.id,{isActive:ee}),i.success(`用户已${ae}`),A(ne=>ne.map(he=>he.id===C.id?{...he,isActive:ee}:he))}catch(ne){i.error(((Z=(le=ne.response)==null?void 0:le.data)==null?void 0:Z.message)||`${ae}失败`)}},W=async(C,ee)=>{var le,Z;if(C.role===ee)return;if(C.role==="ADMIN"){i.error("不能修改管理员的角色");return}const ae={USER:"普通用户",VIP:"VIP",SVIP:"SVIP",INTERNAL:"内部用户"};if(confirm(`确定要将用户「${C.nickname||C.phone||C.id}」的类型改为「${ae[ee]||ee}」吗？`))try{await b.admin.updateUser(C.id,{role:ee}),i.success(`用户类型已更新为 ${ae[ee]||ee}`),A(ne=>ne.map(he=>he.id===C.id?{...he,role:ee}:he))}catch(ne){i.error(((Z=(le=ne.response)==null?void 0:le.data)==null?void 0:Z.message)||"更新失败")}},y=C=>{switch(C){case"ADMIN":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(m0,{className:"w-3 h-3"}),"管理员"]});case"SVIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-amber-500/20 to-orange-500/20 text-amber-400",children:[e.jsx(er,{className:"w-3 h-3"}),"SVIP"]});case"VIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-500/20 text-neutral-400",children:[e.jsx(h0,{className:"w-3 h-3"}),"VIP"]});case"INTERNAL":return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:"内部用户"});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(E0,{className:"w-3 h-3"}),"普通用户"]})}},u=C=>C?new Date(C).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",w=(C,ee)=>{if(ee==="USER"||ee==="ADMIN"||ee==="INTERNAL")return"-";if(!C)return"永久";const ae=new Date(C),Z=ae<new Date,ne=ae.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});return Z?e.jsxs("span",{className:"text-red-400",children:[ne," (已过期)"]}):e.jsx("span",{className:"text-green-400",children:ne})},k=C=>C?C.length===11?C.slice(0,3)+"****"+C.slice(7):C:"-",q=async C=>{var le,Z;if(C.role!=="VIP"&&C.role!=="SVIP"){i.error("只能修改VIP或SVIP用户的会员到期时间");return}const ee=C.membershipExpireAt?new Date(C.membershipExpireAt).toISOString().split("T")[0]:"",ae=prompt(`请输入新的会员到期日期 (格式: YYYY-MM-DD)
留空表示永久会员
当前: ${ee||"永久"}`,ee);if(ae!==null)try{await b.admin.updateUser(C.id,{membershipExpireAt:ae===""?null:ae}),i.success("会员到期日期已更新"),A(ne=>ne.map(he=>he.id===C.id?{...he,membershipExpireAt:ae===""?null:new Date(ae).toISOString()}:he))}catch(ne){i.error(((Z=(le=ne.response)==null?void 0:le.data)==null?void 0:Z.message)||"更新失败")}},Y=async C=>{var ee,ae;F(C),R("workflows"),P(!0),E(null);try{const le=await b.admin.inspection.getUserWorkflows(C.id);le.success&&E(le.data)}catch(le){i.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取工作流失败"),F(null),R(null)}finally{P(!1)}},J=async C=>{var ee,ae;F(C),R("assets"),P(!0),E(null),B(null),r(null);try{const le=await b.admin.inspection.getUserAssetLibraries(C.id);le.success&&E(le.data)}catch(le){i.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产库失败"),F(null),R(null)}finally{P(!1)}},se=async C=>{var ee,ae;B(C),P(!0);try{const le=await b.admin.inspection.getAssetLibraryAssets(C.id);le.success&&r(le.data)}catch(le){i.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产列表失败")}finally{P(!1)}},Se=()=>{F(null),R(null),E(null),B(null),r(null)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"用户管理"}),e.jsxs("div",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["共 ",n.total," 位用户"]})]}),e.jsx("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:e.jsxs("form",{onSubmit:D,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(hx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索手机号、昵称...",value:p,onChange:C=>f(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("select",{value:j,onChange:C=>{$(C.target.value),_(ee=>({...ee,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"ADMIN",children:"管理员"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]})}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[m?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无用户数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"手机号"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"积分"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"会员到期"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"项目数"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"注册时间"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"最后登录"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"巡查"})]})}),e.jsx("tbody",{children:s.map(C=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neutral-800 to-neutral-700 flex items-center justify-center text-white font-medium overflow-hidden",children:C.avatar?e.jsx("img",{src:C.avatar,alt:"",className:"w-full h-full object-cover"}):(C.nickname||C.phone||"?")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:C.nickname||"未设置昵称"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",C.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-4 py-3 text-text-light-primary dark:text-text-dark-primary",children:k(C.phone)}),e.jsx("td",{className:"px-4 py-3",children:C.role==="ADMIN"?y(C.role):e.jsxs("select",{value:C.role,onChange:ee=>W(C,ee.target.value),className:"px-2 py-1 text-xs rounded-lg bg-slate-100 dark:bg-white/10 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500 cursor-pointer",children:[e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"INTERNAL",children:"内部用户"})]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"font-medium text-amber-500",children:C.credits.toLocaleString()})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:C.role==="VIP"||C.role==="SVIP"?e.jsx("button",{onClick:()=>q(C),className:"hover:underline cursor-pointer",title:"点击修改到期日期",children:w(C.membershipExpireAt,C.role)}):w(C.membershipExpireAt,C.role)}),e.jsx("td",{className:"px-4 py-3 text-right text-text-light-primary dark:text-text-dark-primary",children:C._count.projects}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:u(C.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:u(C.lastLoginAt)}),e.jsx("td",{className:"px-4 py-3 text-center",children:C.role==="ADMIN"?e.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-green-500/20 text-green-400",children:"启用"}):e.jsx("button",{onClick:ee=>{ee.stopPropagation(),U(C)},className:`px-2 py-1 text-xs rounded transition-colors ${C.isActive?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:C.isActive?"启用":"禁用"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Y(C),className:"p-1.5 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-colors",title:"查看工作流",children:e.jsx(y0,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>J(C),className:"p-1.5 rounded-lg bg-neutral-500/10 text-neutral-400 hover:bg-neutral-500/20 transition-colors",title:"查看资产库",children:e.jsx(lx,{className:"w-4 h-4"})})]})})]},C.id))})]})}),n.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",n.page," / ",n.totalPages," 页"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(C=>({...C,page:C.page-1})),disabled:n.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(gx,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(C=>({...C,page:C.page+1})),disabled:n.page>=n.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(ux,{className:"w-4 h-4"})})]})]})]}),G&&V&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-[90vw] max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:V==="workflows"?"工作流巡查":"资产库巡查"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["用户：",G.nickname||G.phone||G.id]})]}),e.jsx("button",{onClick:Se,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 transition-colors",children:e.jsx(R0,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):V==="workflows"?e.jsx("div",{className:"space-y-4",children:((oe=x==null?void 0:x.workflows)==null?void 0:oe.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无工作流"}):(ye=x==null?void 0:x.workflows)==null?void 0:ye.map(C=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:C.name}),C.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:C.description})]}),e.jsxs("div",{className:"text-right text-xs text-gray-400",children:[e.jsxs("div",{children:["节点: ",C.nodeCount]}),e.jsxs("div",{children:["连线: ",C.edgeCount]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(C.nodeTypes||{}).map(([ee,ae])=>e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-neutral-500/10 text-neutral-400",children:[ee,": ",ae]},ee))}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:["更新于 ",new Date(C.updatedAt).toLocaleString("zh-CN")]})]},C.id))}):e.jsx("div",{className:"space-y-4",children:M?e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{B(null),r(null)},className:"mb-4 text-sm text-neutral-400 hover:text-neutral-300 flex items-center gap-1",children:"← 返回资产库列表"}),e.jsx("h3",{className:"text-lg font-medium text-text-light-primary dark:text-text-dark-primary mb-4",children:M.name}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3",children:(Ue=N==null?void 0:N.assets)==null?void 0:Ue.map(C=>e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-slate-200 dark:bg-white/10 relative group",children:[C.type==="IMAGE"?e.jsx("img",{src:C.thumbnail||C.url,alt:C.name,className:"w-full h-full object-cover"}):C.type==="VIDEO"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(bx,{className:"w-8 h-8 text-gray-400"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(px,{className:"w-8 h-8 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-1",children:e.jsx("span",{className:"text-[10px] text-white truncate w-full",children:C.name})})]},C.id))}),((Nt=N==null?void 0:N.assets)==null?void 0:Nt.length)===0&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该资产库暂无资产"})]}):e.jsx(e.Fragment,{children:((wt=x==null?void 0:x.libraries)==null?void 0:wt.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无资产库"}):(Oe=x==null?void 0:x.libraries)==null?void 0:Oe.map(C=>e.jsx("div",{onClick:()=>se(C),className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10 cursor-pointer hover:border-neutral-400 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 dark:bg-white/10 overflow-hidden flex-shrink-0",children:C.thumbnail?e.jsx("img",{src:C.thumbnail,alt:C.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(lx,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:C.name}),C.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:C.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[C.assetCount," 个资产 · 更新于 ",new Date(C.updatedAt).toLocaleString("zh-CN")]})]})]})},C.id))})})})]})})]})},U0=()=>{const[s,A]=a.useState([]),[n,_]=a.useState(null),[m,T]=a.useState({page:1,limit:20,total:0,totalPages:0}),[p,f]=a.useState(!0),[j,$]=a.useState(!0),[G,F]=a.useState({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),[V,R]=a.useState(!1),[x,E]=a.useState(null),v=a.useCallback(async()=>{$(!0);try{const y=await b.admin.tasks.getStats();y.success&&_(y.data)}catch{}finally{$(!1)}},[]),P=a.useCallback(async()=>{var y,u;f(!0);try{const w={page:m.page,limit:m.limit};G.nickname&&(w.nickname=G.nickname),G.status&&(w.status=G.status),G.type&&(w.type=G.type),G.isZombie&&(w.isZombie="true"),G.dateFrom&&(w.dateFrom=G.dateFrom),G.dateTo&&(w.dateTo=G.dateTo);const k=await b.admin.tasks.getList(w);k.success&&(A(k.data),T(k.pagination))}catch(w){i.error(((u=(y=w.response)==null?void 0:y.data)==null?void 0:u.message)||"获取任务列表失败")}finally{f(!1)}},[m.page,m.limit,G]);a.useEffect(()=>{v()},[v]),a.useEffect(()=>{P()},[P]);const M=y=>{y.preventDefault(),T(u=>({...u,page:1}))},B=async y=>{var u,w,k,q;if(!y.creditsCharged||y.creditsCharged<=0){i.error("该任务没有扣费记录");return}if((u=y.metadata)!=null&&u.refunded){i.error("该任务已退款");return}if(confirm(`确定要退还 ${y.creditsCharged} 积分给用户「${((w=y.user)==null?void 0:w.nickname)||y.userId}」吗？`)){E(y.id);try{const Y=await b.admin.tasks.refund(y.id);Y.success&&(i.success(Y.message),P(),v())}catch(Y){i.error(((q=(k=Y.response)==null?void 0:k.data)==null?void 0:q.message)||"退款失败")}finally{E(null)}}},N=async y=>{var k,q,Y;if(y.status==="SUCCESS"||y.status==="FAILURE"){i.error("任务已完成，无法取消");return}const u=y.creditsCharged>0&&!((k=y.metadata)!=null&&k.refunded),w=u?`确定要取消任务并退还 ${y.creditsCharged} 积分吗？`:"确定要取消该任务吗？";if(confirm(w)){E(y.id);try{const J=await b.admin.tasks.cancel(y.id,u);J.success&&(i.success(J.message),P(),v())}catch(J){i.error(((Y=(q=J.response)==null?void 0:q.data)==null?void 0:Y.message)||"取消失败")}finally{E(null)}}},r=(y,u)=>{switch(y){case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(g0,{className:"w-3 h-3"}),"等待中"]});case"PROCESSING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:[e.jsx(Ys,{className:"w-3 h-3 animate-spin"}),"处理中 ",u,"%"]});case"SUCCESS":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:[e.jsx(p0,{className:"w-3 h-3"}),"成功"]});case"FAILURE":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(ix,{className:"w-3 h-3"}),"失败"]});default:return e.jsx("span",{className:"text-gray-400",children:y})}},h=y=>y==="IMAGE"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-500/20 text-neutral-400",children:[e.jsx(px,{className:"w-3 h-3"}),"图片"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-500/20 text-cyan-400",children:[e.jsx(bx,{className:"w-3 h-3"}),"视频"]}),D=y=>y?new Date(y).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",U=y=>{if(y.status!=="PENDING"&&y.status!=="PROCESSING")return!1;const u=new Date(y.updatedAt).getTime();return Date.now()-u>30*60*1e3},W=(y,u=50)=>y?y.length>u?y.slice(0,u)+"...":y:"-";return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"任务管理"}),e.jsxs("button",{onClick:()=>{v(),P()},className:"flex items-center gap-2 px-4 py-2 bg-neutral-500 text-white rounded-lg hover:bg-neutral-600 transition-colors",children:[e.jsx(I0,{className:"w-4 h-4"}),"刷新"]})]}),j?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[...Array(6)].map((y,u)=>e.jsx("div",{className:"h-24 bg-white/50 dark:bg-white/5 rounded-xl animate-pulse"},u))}):n?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(u0,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"总任务数"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.total.toLocaleString()}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.total]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(S0,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"成功率"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.overview.successRate,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.successRate,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Kl,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"僵尸任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.zombie}),e.jsx("p",{className:"text-xs opacity-60",children:"超过30分钟未完成"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ys,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"处理中"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.processing}),e.jsxs("p",{className:"text-xs opacity-60",children:["等待中: ",n.overview.pending]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ix,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"失败任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.failure}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.failure]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(k0,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"7日消耗积分"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.credits.totalCharged7d.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"任务扣费总计"})]})]}):null,n&&n.byModel.length>0&&e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-light-secondary dark:text-text-dark-secondary mb-3",children:"模型成功率（7天）"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:n.byModel.slice(0,12).map(y=>e.jsxs("div",{className:"bg-slate-50 dark:bg-white/5 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mb-1",title:y.modelName,children:y.modelName}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[y.successRate,"%"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[y.total,"次"]})]}),e.jsx("div",{className:"mt-1 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${parseFloat(y.successRate)>=90?"bg-green-500":parseFloat(y.successRate)>=70?"bg-amber-500":"bg-red-500"}`,style:{width:`${y.successRate}%`}})})]},y.modelId))})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsxs("form",{onSubmit:M,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(hx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索用户昵称...",value:G.nickname,onChange:y=>F(u=>({...u,nickname:y.target.value})),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("select",{value:G.status,onChange:y=>{F(u=>({...u,status:y.target.value})),T(u=>({...u,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"PENDING",children:"等待中"}),e.jsx("option",{value:"PROCESSING",children:"处理中"}),e.jsx("option",{value:"SUCCESS",children:"成功"}),e.jsx("option",{value:"FAILURE",children:"失败"})]}),e.jsxs("select",{value:G.type,onChange:y=>{F(u=>({...u,type:y.target.value})),T(u=>({...u,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"IMAGE",children:"图片"}),e.jsx("option",{value:"VIDEO",children:"视频"})]}),e.jsxs("button",{type:"button",onClick:()=>{F(y=>({...y,isZombie:!y.isZombie})),T(y=>({...y,page:1}))},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${G.isZombie?"bg-amber-500 text-white":"bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary"}`,children:[e.jsx(Kl,{className:"w-4 h-4"}),"僵尸任务"]}),e.jsxs("button",{type:"button",onClick:()=>R(!V),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary flex items-center gap-2",children:[e.jsx(f0,{className:"w-4 h-4"}),"更多筛选"]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]}),V&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"开始日期"}),e.jsx("input",{type:"date",value:G.dateFrom,onChange:y=>F(u=>({...u,dateFrom:y.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"结束日期"}),e.jsx("input",{type:"date",value:G.dateTo,onChange:y=>F(u=>({...u,dateTo:y.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500"})]}),e.jsx("button",{type:"button",onClick:()=>{F({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),T(y=>({...y,page:1}))},className:"self-end px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"清除筛选"})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[p?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无任务数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"模型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"提示词"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"扣费"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"创建时间"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"操作"})]})}),e.jsx("tbody",{children:s.map(y=>{var w,k,q,Y,J,se,Se,oe;const u=U(y);return e.jsxs("tr",{className:`border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors ${u?"bg-amber-50 dark:bg-amber-900/10":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx(Kl,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:((w=y.user)==null?void 0:w.nickname)||"未知用户"}),e.jsx("div",{className:"text-xs text-gray-400",children:((q=(k=y.user)==null?void 0:k.phone)==null?void 0:q.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||y.userId.slice(0,8)})]})]})}),e.jsx("td",{className:"px-4 py-3",children:h(y.type)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm text-text-light-primary dark:text-text-dark-primary truncate max-w-[120px]",title:((Y=y.model)==null?void 0:Y.name)||y.modelId,children:((J=y.model)==null?void 0:J.name)||"未知模型"}),e.jsx("div",{className:"text-xs text-gray-400",children:((se=y.model)==null?void 0:se.provider)||""})]}),e.jsxs("td",{className:"px-4 py-3",children:[r(y.status,y.progress),y.errorMessage&&e.jsx("div",{className:"text-xs text-red-400 mt-1 truncate max-w-[150px]",title:y.errorMessage,children:y.errorMessage})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",title:y.prompt,children:W(y.prompt)})}),e.jsx("td",{className:"px-4 py-3 text-right",children:y.isFreeUsage?e.jsx("span",{className:"text-xs text-green-500",children:"免费"}):y.creditsCharged>0?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-500",children:y.creditsCharged}),((Se=y.metadata)==null?void 0:Se.refunded)&&e.jsx("span",{className:"ml-1 text-xs text-green-500",children:"(已退)"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:D(y.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.status==="FAILURE"&&y.creditsCharged>0&&!((oe=y.metadata)!=null&&oe.refunded)&&e.jsx("button",{onClick:()=>B(y),disabled:x===y.id,className:"p-1.5 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors disabled:opacity-50",title:"退款",children:x===y.id?e.jsx(Ys,{className:"w-4 h-4 animate-spin"}):e.jsx(T0,{className:"w-4 h-4"})}),(y.status==="PENDING"||y.status==="PROCESSING")&&e.jsx("button",{onClick:()=>N(y),disabled:x===y.id,className:"p-1.5 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",title:"取消任务",children:x===y.id?e.jsx(Ys,{className:"w-4 h-4 animate-spin"}):e.jsx(b0,{className:"w-4 h-4"})})]})})]},y.id)})})]})}),m.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",m.page," / ",m.totalPages," 页，共"," ",m.total," 条"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(y=>({...y,page:y.page-1})),disabled:m.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(gx,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(y=>({...y,page:y.page+1})),disabled:m.page>=m.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(ux,{className:"w-4 h-4"})})]})]})]})]})};var ie=(s=>(s.PER_REQUEST="PER_REQUEST",s.PER_IMAGE="PER_IMAGE",s.PER_DURATION="PER_DURATION",s.DURATION_RESOLUTION="DURATION_RESOLUTION",s.PER_CHARACTER="PER_CHARACTER",s.DURATION_MODE="DURATION_MODE",s.OPERATION_MODE="OPERATION_MODE",s))(ie||{});const kx={PER_REQUEST:"按次计费",PER_IMAGE:"按图片数量",PER_DURATION:"按时长计费",DURATION_RESOLUTION:"按时长+分辨率",PER_CHARACTER:"按字符数计费",DURATION_MODE:"按模式计费 (支持时长/次数)",OPERATION_MODE:"按操作+模式"},ql=({value:s,onChange:A,label:n="费用"})=>e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-gray-300 w-20",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:s,onChange:_=>A(parseInt(_.target.value)||0),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]})]})}),O0=({prices:s,onChange:A,modelConfig:n})=>{const[_,m]=a.useState(["720p","1080p","4K"]),[T,p]=a.useState(()=>{const R=new Set;s.forEach(E=>{if(E.dimension==="resolution"&&E.value.includes("_")){const v=parseInt(E.value.split("_")[1]);isNaN(v)||R.add(v)}});const x=[3,5,6,8,10];return R.size>0?Array.from(R).sort((E,v)=>E-v):x});a.useEffect(()=>{var R,x;n&&(((R=n.supportedResolutions)==null?void 0:R.length)>0&&m(n.supportedResolutions),((x=n.supportedDurations)==null?void 0:x.length)>0&&p(n.supportedDurations.sort((E,v)=>E-v)))},[n]);const[f,j]=a.useState(""),$=(R,x)=>{const E=s.find(v=>v.dimension==="resolution"&&v.value===`${R}_${x}`);return(E==null?void 0:E.creditsPerUnit)||0},G=(R,x,E)=>{const v=s.filter(P=>!(P.dimension==="resolution"&&P.value===`${R}_${x}`));E>0&&v.push({dimension:"resolution",value:`${R}_${x}`,creditsPerUnit:E,unitSize:1}),A(v)},F=()=>{const R=parseInt(f);if(R>0&&!T.includes(R)){const x=[...T,R].sort((E,v)=>E-v);p(x),j("")}},V=R=>{p(T.filter(E=>E!==R));const x=s.filter(E=>E.dimension==="resolution"&&E.value.includes("_")?parseInt(E.value.split("_")[1])!==R:!0);A(x)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"阶梯计费模式"}),"：配置特定时长的固定价格（总价）。",e.jsx("br",{}),"• 系统会自动匹配最接近的时长档位（向上取整）。",e.jsx("br",{}),"• 例如：配置了5秒和10秒，请求6秒时会自动匹配到10秒的价格。"]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"number",min:"1",value:f,onChange:R=>j(R.target.value),placeholder:"新增时长(秒)",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-32"}),e.jsx("button",{onClick:F,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"添加时长列"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-r border-slate-200 dark:border-border-dark bg-slate-100 dark:bg-slate-800/50",children:"分辨率 \\ 时长"}),T.map(R=>e.jsxs("th",{className:"px-4 py-3 text-center border-b border-slate-200 dark:border-border-dark min-w-[100px] relative group",children:[R,"秒",e.jsx("button",{onClick:()=>V(R),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"删除此时长列",children:"×"})]},R))]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:_.map(R=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white border-r border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/30",children:R}),T.map(x=>e.jsx("td",{className:"px-2 py-2 text-center border-r border-slate-200 dark:border-border-dark last:border-r-0",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:e.jsx("input",{type:"number",min:"0",value:$(R,x),onChange:E=>G(R,x,parseInt(E.target.value)||0),className:"w-16 px-2 py-1 text-center border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})},`${R}_${x}`))]},R))})]})}),e.jsxs("div",{className:"text-xs text-slate-400 dark:text-gray-500",children:["* 支持阶梯定价：请在对应的时长/分辨率单元格中填入该档位的",e.jsx("strong",{children:"总积分"}),"。"]})]})},V0=({prices:s,config:A,onChange:n})=>{const _=[{value:"std",label:"标准版 (Std)"},{value:"pro",label:"专业版 (Pro)"}],m=s.some(F=>F.dimension==="mode"&&F.value==="standard"),T=s.some(F=>F.dimension==="mode"&&F.value==="professional"),p=[..._];m&&p.push({value:"standard",label:"标准模式 (旧)"}),T&&p.push({value:"professional",label:"专业模式 (旧)"});const f=(A==null?void 0:A.pricingUnit)||"per_second",j=F=>{const V=s.find(R=>R.dimension==="mode"&&R.value===F);return(V==null?void 0:V.creditsPerUnit)||0},$=(F,V)=>{const R=s.filter(x=>!(x.dimension==="mode"&&x.value===F));V>0&&R.push({dimension:"mode",value:F,creditsPerUnit:V,unitSize:1}),n(R,A)},G=(F,V)=>{n(s,{...A,[F]:V})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:f==="per_second",onChange:()=>G("pricingUnit","per_second"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按时长计费 (积分/秒)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:f==="per_request",onChange:()=>G("pricingUnit","per_request"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按次计费 (积分/次)"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:f==="per_second"?"模式定价（每秒）":"模式定价（每次）"}),p.map(F=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:F.label}),e.jsx("input",{type:"number",min:"0",value:j(F.value),onChange:V=>$(F.value,parseInt(V.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:f==="per_second"?"积分/秒":"积分/次"})]},F.value))]}),f==="per_second"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"时长计费规则"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:(A==null?void 0:A.roundUp)!==!1,onChange:F=>G("roundUp",F.target.checked),className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"向上取整到整秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"最小计费时长:"}),e.jsx("input",{type:"number",min:"1",value:(A==null?void 0:A.minDuration)||1,onChange:F=>G("minDuration",parseInt(F.target.value)||1),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]})]})]})]})},F0=({prices:s,onChange:A})=>{const n=[{value:"imagine",label:"生成图片 (Imagine)"},{value:"upscale",label:"升分辨率 (Upscale)"},{value:"variation",label:"变换 (Variation)"},{value:"reroll",label:"重新生成 (Reroll)"}],_=[{value:"relax",label:"慢速模式 (Relax)"},{value:"fast",label:"快速模式 (Fast)"}],m=j=>{const $=s.find(G=>G.dimension==="operationType"&&G.value===j);return($==null?void 0:$.creditsPerUnit)||0},T=j=>{const $=s.find(G=>G.dimension==="mode"&&G.value===j);return($==null?void 0:$.creditsPerUnit)||1},p=(j,$)=>{const G=s.filter(F=>!(F.dimension==="operationType"&&F.value===j));$>0&&G.push({dimension:"operationType",value:j,creditsPerUnit:$,unitSize:1}),A(G)},f=(j,$)=>{const G=s.filter(F=>!(F.dimension==="mode"&&F.value===j));$>0&&G.push({dimension:"mode",value:j,creditsPerUnit:$,unitSize:1}),A(G)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"操作类型定价（基础价格）"}),n.map(j=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:j.label}),e.jsx("input",{type:"number",min:"0",value:m(j.value),onChange:$=>p(j.value,parseInt($.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]},j.value))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"模式倍率"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:"最终费用 = 操作类型基础价格 × 模式倍率"}),_.map(j=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:j.label}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"×"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:T(j.value),onChange:$=>f(j.value,parseFloat($.target.value)||1),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})]},j.value))]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:"💡 计费示例"}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{children:["• 生成图片（快速模式）= ",m("imagine")," × ",T("fast")," = ",m("imagine")*T("fast")," 积分"]}),e.jsxs("li",{children:["• 升分辨率（慢速模式）= ",m("upscale")," × ",T("relax")," = ",m("upscale")*T("relax")," 积分"]})]})]})]})},L0=({prices:s,onChange:A})=>{const n=()=>s[0]||{creditsPerUnit:5,unitSize:100},_=(T,p)=>{const f=n();A([{dimension:"character",value:"default",creditsPerUnit:T==="creditsPerUnit"?p:f.creditsPerUnit,unitSize:T==="unitSize"?p:f.unitSize||100}])},m=n();return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-slate-200 dark:border-border-dark rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"每"}),e.jsx("input",{type:"number",min:"1",value:m.unitSize||100,onChange:T=>_("unitSize",parseInt(T.target.value)||100),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符收费"}),e.jsx("input",{type:"number",min:"0",value:m.creditsPerUnit,onChange:T=>_("creditsPerUnit",parseInt(T.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:["💡 计费规则：不足",m.unitSize||100,"字符按",m.unitSize||100,"字符计算"]}),e.jsx("p",{className:"mt-2",children:"示例："}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:["50个字符 → ",m.unitSize||100,"字符 → ",m.creditsPerUnit,"积分"]}),e.jsxs("li",{children:["150个字符 → ",(m.unitSize||100)*2,"字符 → ",m.creditsPerUnit*2,"积分"]}),e.jsxs("li",{children:["1000个字符 → 1000字符 → ",m.creditsPerUnit*Math.ceil(1e3/(m.unitSize||100)),"积分"]})]})]})]})})},$0=({prices:s,onChange:A,modelConfig:n})=>{var V;const[_,m]=a.useState("2K"),[T,p]=a.useState(10),f=s.filter(R=>R.dimension==="resolution"),j=()=>{if(!_||T<0)return;if(f.some(x=>x.value===_)){alert("该分辨率已存在");return}const R=[...s,{dimension:"resolution",value:_,creditsPerUnit:T,unitSize:1}];A(R),m("4K")},$=()=>{var E;if(!((E=n==null?void 0:n.supportedResolutions)!=null&&E.length))return;const R=[...s];let x=0;n.supportedResolutions.forEach(v=>{R.some(P=>P.dimension==="resolution"&&P.value===v)||(R.push({dimension:"resolution",value:v,creditsPerUnit:10,unitSize:1}),x++)}),x>0?(A(R),alert(`已导入 ${x} 个分辨率配置`)):alert("所有支持的分辨率已存在")},G=R=>{A(s.filter(x=>!(x.dimension==="resolution"&&x.value===R)))},F=(R,x)=>{const E=s.map(v=>v.dimension==="resolution"&&v.value===R?{...v,creditsPerUnit:x}:v);A(E)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2",children:"💡 分辨率阶梯计费："}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• 支持格式：像素格式 (如 1024x1024) 或标签 (如 2K, 4K)。"}),e.jsx("li",{children:"• 智能匹配：系统会优先精确匹配标签，否则按像素总数匹配最近的档位。"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"分辨率标识"}),e.jsx("input",{type:"text",value:_,onChange:R=>m(R.target.value),placeholder:"2K / 1024x1024",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"单价 (积分)"}),e.jsx("input",{type:"number",min:"0",value:T,onChange:R=>p(parseInt(R.target.value)||0),className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-24"})]}),e.jsx("button",{onClick:j,className:"px-4 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors h-[34px]",children:"添加"}),((V=n==null?void 0:n.supportedResolutions)==null?void 0:V.length)>0&&e.jsx("button",{onClick:$,className:"px-4 py-1.5 text-sm bg-neutral-500 text-white rounded-md hover:bg-neutral-600 transition-colors h-[34px] ml-auto",title:"自动加载模型支持的所有分辨率",children:"从模型导入"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"分辨率"}),e.jsx("th",{className:"px-4 py-3",children:"像素总数 (预估)"}),e.jsx("th",{className:"px-4 py-3",children:"单价 (积分/张)"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-slate-400",children:"暂无配置，请添加分辨率"})}):f.map(R=>{const[x,E]=R.value.split(/[x*]/).map(Number),v=x&&E?(x*E/1e4).toFixed(1)+"万":"-";return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:R.value}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-400",children:v}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",min:"0",value:R.creditsPerUnit,onChange:P=>F(R.value,parseInt(P.target.value)||0),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{onClick:()=>G(R.value),className:"text-red-500 hover:text-red-600 transition-colors",children:"删除"})})]},R.value)})})]})})]})},K0=({rule:s})=>{const[A,n]=a.useState({quantity:1,duration:10,resolution:"1080p",mode:"standard",operationType:"imagine",characterCount:100}),[_,m]=a.useState(0);a.useEffect(()=>{T()},[s,A]);const T=()=>{var j;let f=0;switch(s.billingType){case ie.PER_REQUEST:f=s.baseCredits;break;case ie.PER_IMAGE:f=s.baseCredits*(A.quantity||1);break;case ie.PER_DURATION:f=s.baseCredits*(A.duration||1);break;case ie.DURATION_RESOLUTION:const $=s.prices.find(E=>E.dimension==="resolution"&&E.value.startsWith(A.resolution));f=(A.duration||1)*(($==null?void 0:$.creditsPerUnit)||0);break;case ie.DURATION_MODE:const G=s.prices.find(E=>E.dimension==="mode"&&E.value===A.mode);f=((j=s.config)!=null&&j.roundUp?Math.ceil(A.duration||1):A.duration||1)*((G==null?void 0:G.creditsPerUnit)||0);break;case ie.PER_CHARACTER:const V=s.prices[0];V&&(f=Math.ceil((A.characterCount||0)/(V.unitSize||100))*V.creditsPerUnit);break;case ie.OPERATION_MODE:const R=s.prices.find(E=>E.dimension==="operationType"&&E.value===A.operationType),x=s.prices.find(E=>E.dimension==="mode"&&E.value===A.mode);f=((R==null?void 0:R.creditsPerUnit)||0)*((x==null?void 0:x.creditsPerUnit)||1);break}m(Math.round(f))},p=()=>{var f;switch(s.billingType){case ie.PER_REQUEST:return e.jsx("div",{className:"text-sm text-slate-600 dark:text-gray-400",children:"每次调用固定费用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"生成数量:"}),e.jsx("input",{type:"number",min:"1",value:A.quantity,onChange:j=>n({...A,quantity:parseInt(j.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"张"})]});case ie.PER_DURATION:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:A.duration,onChange:j=>n({...A,duration:parseInt(j.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]});case ie.DURATION_RESOLUTION:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:A.duration,onChange:j=>n({...A,duration:parseInt(j.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"分辨率:"}),e.jsxs("select",{value:A.resolution,onChange:j=>n({...A,resolution:j.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"4K",children:"4K"})]})]})]});case ie.DURATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:A.duration,onChange:j=>n({...A,duration:parseFloat(j.target.value)||0}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"编辑模式:"}),e.jsxs("select",{value:A.mode,onChange:j=>n({...A,mode:j.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"standard",children:"标准模式"}),e.jsx("option",{value:"professional",children:"专业模式"})]})]}),((f=s.config)==null?void 0:f.roundUp)&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["实际计费: ",Math.ceil(A.duration)," 秒（向上取整）"]})]});case ie.PER_CHARACTER:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符数:"}),e.jsx("input",{type:"number",min:"0",value:A.characterCount,onChange:j=>n({...A,characterCount:parseInt(j.target.value)||0}),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"字符"})]});case ie.OPERATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"操作类型:"}),e.jsxs("select",{value:A.operationType,onChange:j=>n({...A,operationType:j.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"imagine",children:"生成图片"}),e.jsx("option",{value:"upscale",children:"升分辨率"}),e.jsx("option",{value:"variation",children:"变换"}),e.jsx("option",{value:"reroll",children:"重新生成"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"运行模式:"}),e.jsxs("select",{value:A.mode,onChange:j=>n({...A,mode:j.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"relax",children:"慢速模式"}),e.jsx("option",{value:"fast",children:"快速模式"})]})]})]});default:return null}};return e.jsxs("div",{className:"space-y-4",children:[p(),e.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"预估费用:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[_," 积分"]})]})})]})},Q0=({rule:s,isCreating:A,existingRules:n=[],onSave:_,onCancel:m,onDelete:T,onToggle:p})=>{const[f,j]=a.useState(s),[$,G]=a.useState("model"),[F,V]=a.useState([]),[R,x]=a.useState(!1);a.useEffect(()=>{j(s),s.nodeType?G("node"):s.moduleType?G("module"):G("model")},[s]),a.useEffect(()=>{E()},[]);const E=async()=>{try{const h=await b.admin.getAIModels({provider:"google"}),D=await b.admin.getAIModels({provider:"bytedance"}),U=await b.admin.getAIModels({provider:"doubao"}),W=await b.admin.getAIModels({provider:"aliyun"}),y=await b.admin.getAIModels({provider:"minimaxi"}),u=await b.admin.getAIModels({provider:"sora"}),w=await b.admin.getAIModels({provider:"vidu"}),k=Array.isArray(h==null?void 0:h.data)?h.data:Array.isArray(h)?h:[],q=Array.isArray(D==null?void 0:D.data)?D.data:Array.isArray(D)?D:[],Y=Array.isArray(U==null?void 0:U.data)?U.data:Array.isArray(U)?U:[],J=Array.isArray(W==null?void 0:W.data)?W.data:Array.isArray(W)?W:[],se=Array.isArray(y==null?void 0:y.data)?y.data:Array.isArray(y)?y:[],Se=Array.isArray(u==null?void 0:u.data)?u.data:Array.isArray(u)?u:[],oe=Array.isArray(w==null?void 0:w.data)?w.data:Array.isArray(w)?w:[],ye=[...k,...q,...Y,...J,...se,...Se,...oe].filter(Ue=>Ue.isActive);V(ye)}catch{}};a.useEffect(()=>{if(!A)return;let h="";if($==="model"&&f.aiModelId){const D=F.find(U=>U.id===f.aiModelId);D&&(h=`${D.name} 计费规则`)}else if($==="node"&&f.nodeType){const D={super_resolution:"智能超清",ad_composition:"广告成片",sora_character:"Sora角色生成",image_editing:"图片编辑",hd_upscale:"高清放大",image_fusion:"智能溶图",smart_storyboard:"智能分镜"};D[f.nodeType]&&(h=`${D[f.nodeType]} 计费规则`)}else $==="module"&&f.moduleType&&f.moduleType==="midjourney"&&(h="Midjourney 计费规则");h&&(!f.name||f.name.includes("计费规则"))&&N("name",h)},[f.aiModelId,f.nodeType,f.moduleType,$,A,F]);const v=F.filter(h=>h.id===f.aiModelId?!0:!n.some(D=>D.aiModelId===h.id)),P=F.find(h=>h.id===f.aiModelId),M=(P==null?void 0:P.config)||{},B=async()=>{var h,D;if(!f.name){alert("请输入规则名称");return}if(!f.aiModelId&&!f.nodeType&&!f.moduleType){alert("请选择关联的模型、节点或模块");return}try{x(!0),await _(f),alert("保存成功！")}catch(U){alert("保存失败: "+(((D=(h=U.response)==null?void 0:h.data)==null?void 0:D.message)||U.message||"未知错误"))}finally{x(!1)}},N=(h,D)=>{j(U=>({...U,[h]:D}))},r=()=>{switch(f.billingType){case ie.PER_REQUEST:return e.jsx(ql,{value:f.baseCredits,onChange:h=>N("baseCredits",h),label:"每次调用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!f.prices||f.prices.length===0,onChange:()=>N("prices",[]),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"统一一口价"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!!f.prices&&f.prices.length>0,onChange:()=>{(!f.prices||f.prices.length===0)&&N("prices",[{dimension:"resolution",value:"1024x1024",creditsPerUnit:10,unitSize:1}])},className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按分辨率阶梯"})]})]}),!f.prices||f.prices.length===0?e.jsx(ql,{value:f.baseCredits,onChange:h=>N("baseCredits",h),label:"每张图片"}):e.jsx($0,{prices:f.prices,onChange:h=>N("prices",h),modelConfig:M})]});case ie.DURATION_RESOLUTION:return e.jsx(O0,{prices:f.prices,onChange:h=>N("prices",h),modelConfig:M});case ie.DURATION_MODE:return e.jsx(V0,{prices:f.prices,config:f.config||{},onChange:(h,D)=>{N("prices",h),N("config",D)}});case ie.PER_DURATION:return e.jsx(ql,{value:f.baseCredits,onChange:h=>N("baseCredits",h),label:"每秒费用"});case ie.PER_CHARACTER:return e.jsx(L0,{prices:f.prices,onChange:h=>N("prices",h)});case ie.OPERATION_MODE:return e.jsx(F0,{prices:f.prices,onChange:h=>N("prices",h)});default:return e.jsx("div",{className:"text-slate-400",children:"请选择计费类型"})}};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-background-dark",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:A?"新建计费规则":"编辑计费规则"}),e.jsx("div",{className:"flex items-center gap-2",children:!A&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(f.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${f.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200"}`,children:f.isActive?"已启用":"已禁用"}),e.jsx("button",{onClick:()=>T(f.id),className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg hover:bg-red-200 text-sm font-medium transition-colors",children:"删除"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"基础信息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"规则名称 *"}),e.jsx("input",{type:"text",value:f.name,onChange:h=>N("name",h.target.value),placeholder:"例如：Gemini 2.0 Flash 文本调用",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"描述"}),e.jsx("textarea",{value:f.description||"",onChange:h=>N("description",h.target.value),placeholder:"规则说明（可选）",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"关联对象 *"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:$==="model",onChange:()=>{G("model"),N("nodeType",null),N("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"AI模型"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:$==="node",onChange:()=>{G("node"),N("aiModelId",null),N("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"固定节点"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:$==="module",onChange:()=>{G("module"),N("aiModelId",null),N("nodeType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"特殊模块"})]})]}),$==="model"&&e.jsxs("select",{value:f.aiModelId||"",onChange:h=>N("aiModelId",h.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择AI模型"}),v.map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.provider,")"]},h.id))]}),$==="node"&&e.jsxs("select",{value:f.nodeType||"",onChange:h=>N("nodeType",h.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择节点类型"}),e.jsx("option",{value:"super_resolution",children:"智能超清"}),e.jsx("option",{value:"ad_composition",children:"广告成片"}),e.jsx("option",{value:"sora_character",children:"Sora角色生成"}),e.jsx("option",{value:"image_editing",children:"图片编辑"}),e.jsx("option",{value:"hd_upscale",children:"高清放大"}),e.jsx("option",{value:"image_fusion",children:"智能溶图"}),e.jsx("option",{value:"smart_storyboard",children:"智能分镜"})]}),$==="module"&&e.jsxs("select",{value:f.moduleType||"",onChange:h=>N("moduleType",h.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择模块"}),e.jsx("option",{value:"midjourney",children:"Midjourney"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"计费类型 *"}),e.jsx("select",{value:f.billingType,onChange:h=>N("billingType",h.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(kx).map(([h,D])=>e.jsx("option",{value:h,children:D},h))})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"价格配置"}),r()]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"预览测试"}),e.jsx(K0,{rule:f})]})]})}),e.jsxs("div",{className:"px-8 py-4 border-t border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:m,className:"px-6 py-2 border border-slate-300 dark:border-border-dark text-slate-700 dark:text-gray-300 rounded-lg hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:"取消"}),e.jsx("button",{onClick:B,disabled:R,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors",children:R?"保存中...":"保存规则"})]})]})},X0=()=>{const[s,A]=a.useState([]),[n,_]=a.useState(null),[m,T]=a.useState(!0),[p,f]=a.useState("all"),[j,$]=a.useState(""),[G,F]=a.useState(!1);a.useEffect(()=>{V()},[]);const V=async()=>{var r,h;try{T(!0);const U=(await b.get("/admin/billing/rules")).data||[];A(U)}catch(D){alert(((h=(r=D.response)==null?void 0:r.data)==null?void 0:h.message)||"加载计费规则失败")}finally{T(!1)}},R=()=>{F(!0),_({name:"",billingType:ie.PER_REQUEST,baseCredits:0,isActive:!0,prices:[]})},x=r=>{F(!1),_(r)},E=async r=>{var h,D;try{G?await b.post("/admin/billing/rules",r):r.id&&await b.put(`/admin/billing/rules/${r.id}`,r),await V(),F(!1),_(null)}catch(U){throw alert(((D=(h=U.response)==null?void 0:h.data)==null?void 0:D.message)||"保存失败"),U}},v=async r=>{var h,D;if(confirm("确定要删除这条计费规则吗？"))try{await b.delete(`/admin/billing/rules/${r}`),await V(),(n==null?void 0:n.id)===r&&_(null)}catch(U){alert(((D=(h=U.response)==null?void 0:h.data)==null?void 0:D.message)||"删除失败")}},P=async r=>{var h,D;try{await b.post(`/admin/billing/rules/${r}/toggle`),await V()}catch(U){alert(((D=(h=U.response)==null?void 0:h.data)==null?void 0:D.message)||"切换状态失败")}},M=()=>{F(!1),_(null)},B=s.filter(r=>{var h,D;if(p!=="all"&&(p==="TEXT_GENERATION"&&r.billingType!==ie.PER_REQUEST||p==="IMAGE_GENERATION"&&r.billingType!==ie.PER_IMAGE||p==="VIDEO_GENERATION"&&r.billingType!==ie.DURATION_RESOLUTION||p==="VIDEO_EDITING"&&r.billingType!==ie.DURATION_MODE||p==="AUDIO_SYNTHESIS"&&r.billingType!==ie.PER_CHARACTER||p==="FIXED_NODE"&&!r.nodeType||p==="MIDJOURNEY"&&r.moduleType!=="midjourney"))return!1;if(j){const U=j.toLowerCase();return r.name.toLowerCase().includes(U)||((h=r.description)==null?void 0:h.toLowerCase().includes(U))||((D=r.aiModel)==null?void 0:D.name.toLowerCase().includes(U))}return!0}),N=r=>r==="all"?s.length:s.filter(h=>r==="TEXT_GENERATION"?h.billingType===ie.PER_REQUEST:r==="IMAGE_GENERATION"?h.billingType===ie.PER_IMAGE:r==="VIDEO_GENERATION"?h.billingType===ie.DURATION_RESOLUTION:r==="VIDEO_EDITING"?h.billingType===ie.DURATION_MODE:r==="AUDIO_SYNTHESIS"?h.billingType===ie.PER_CHARACTER:r==="FIXED_NODE"?!!h.nodeType:r==="MIDJOURNEY"?h.moduleType==="midjourney":!1).length;return e.jsxs("div",{className:"flex h-full bg-slate-50 dark:bg-background-dark",children:[e.jsxs("aside",{className:"w-80 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"计费规则"}),e.jsx("button",{onClick:R,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors",children:"+ 新建"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"搜索规则...",value:j,onChange:r=>$(r.target.value),className:"w-full px-3 py-2 pl-9 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-xl",children:"search"})]})]}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark space-y-1",children:[{key:"all",label:"全部",icon:"list"},{key:"TEXT_GENERATION",label:"文本模型",icon:"article"},{key:"IMAGE_GENERATION",label:"图片模型",icon:"image"},{key:"VIDEO_GENERATION",label:"视频生成",icon:"videocam"},{key:"VIDEO_EDITING",label:"视频编辑",icon:"movie_edit"},{key:"AUDIO_SYNTHESIS",label:"音频合成",icon:"graphic_eq"},{key:"FIXED_NODE",label:"固定节点",icon:"developer_board"},{key:"MIDJOURNEY",label:"Midjourney",icon:"palette"}].map(r=>e.jsxs("button",{onClick:()=>f(r.key),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${p===r.key?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.icon}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"text-xs opacity-60",children:N(r.key)})]},r.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:m?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"加载中..."}):B.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"暂无规则"}):B.map(r=>e.jsxs("div",{onClick:()=>x(r),className:`p-3 rounded-lg border cursor-pointer transition-all ${(n==null?void 0:n.id)===r.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-border-dark hover:border-slate-300 dark:hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white text-sm",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"启用":"禁用"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:kx[r.billingType]}),r.aiModel&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模型: ",r.aiModel.name]}),r.moduleType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模块: ",r.moduleType]}),r.nodeType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["节点: ",r.nodeType]})]},r.id))})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-50 dark:bg-background-dark",children:n?e.jsx(Q0,{rule:n,isCreating:G,existingRules:s,onSave:E,onCancel:M,onDelete:v,onToggle:P}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 dark:text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"receipt_long"}),e.jsx("p",{children:"选择一条规则或创建新规则"})]})})})]})},Bl={ALIPAY:"支付宝",WECHAT:"微信支付",MANUAL:"人工充值"},ox={ALIPAY:"account_balance_wallet",WECHAT:"chat",MANUAL:"person"},H0=()=>{const[s,A]=a.useState([]),[n,_]=a.useState(!0),[m,T]=a.useState(null),[p,f]=a.useState(!1),[j,$]=a.useState(null);a.useEffect(()=>{G()},[]);const G=async()=>{var M,B;try{_(!0);const N=await b.payment.admin.getConfigs();A(N.data||[])}catch(N){i.error(((B=(M=N.response)==null?void 0:M.data)==null?void 0:B.message)||"加载配置失败")}finally{_(!1)}},F=async M=>{try{const B=await b.payment.admin.getConfig(M.id);T(B.data)}catch{i.error("获取配置详情失败")}},V=async M=>{var B,N;if(M.provider==="MANUAL"){i.info("人工充值无需测试连通性");return}try{$(M.id);const r=await b.payment.admin.testConfig(M.id);r.success?i.success(r.message||"连接测试成功"):i.error(r.message||"连接测试失败")}catch(r){i.error(((N=(B=r.response)==null?void 0:B.data)==null?void 0:N.message)||"测试失败")}finally{$(null)}},R=M=>{T({provider:M,name:Bl[M]||M,appId:"",privateKey:"",publicKey:"",config:{},isActive:!0,isSandbox:!1})},x=async()=>{var M,B;if(m){if(!m.appId){i.error("请填写 AppID");return}try{f(!0),await b.payment.admin.saveConfig({provider:m.provider,name:m.name,appId:m.appId,privateKey:m.privateKey,publicKey:m.publicKey,config:m.config,isActive:m.isActive,isSandbox:m.isSandbox}),i.success("保存成功"),T(null),G()}catch(N){i.error(((B=(M=N.response)==null?void 0:M.data)==null?void 0:B.message)||"保存失败")}finally{f(!1)}}},E=async M=>{var B,N;if(confirm("确定要删除此配置吗？"))try{await b.payment.admin.deleteConfig(M),i.success("删除成功"),G()}catch(r){i.error(((N=(B=r.response)==null?void 0:B.data)==null?void 0:N.message)||"删除失败")}},v=s.map(M=>M.provider),P=["ALIPAY","WECHAT"].filter(M=>!v.includes(M));return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"支付配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"配置支付宝、微信支付等支付渠道"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[s.map(M=>e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${M.provider==="ALIPAY"?"bg-blue-100 dark:bg-blue-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined text-2xl ${M.provider==="ALIPAY"?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400"}`,children:ox[M.provider]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:M.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:["AppID: ",M.appId]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[M.isSandbox&&e.jsx("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded",children:"沙箱"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${M.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:M.isActive?"已启用":"已禁用"}),M.provider!=="MANUAL"&&e.jsx("button",{onClick:()=>V(M),disabled:j===M.id,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg transition-colors disabled:opacity-50",children:j===M.id?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base animate-spin",children:"progress_activity"}),"测试中..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"network_check"}),"测试连通"]})}),e.jsx("button",{onClick:()=>F(M),className:"p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"edit"})}),e.jsx("button",{onClick:()=>E(M.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"delete"})})]})]})},M.id)),s.length===0&&e.jsx("div",{className:"text-center py-12 text-slate-400",children:"暂无支付配置，请添加"})]}),P.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"添加支付渠道"}),e.jsx("div",{className:"flex gap-4",children:P.map(M=>e.jsxs("button",{onClick:()=>R(M),className:"flex items-center gap-3 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-border-dark rounded-xl hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:ox[M]}),e.jsx("span",{className:"text-slate-600 dark:text-gray-400",children:Bl[M]})]},M))})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[m.id?"编辑":"添加",Bl[m.provider],"配置"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"配置名称"}),e.jsx("input",{type:"text",value:m.name||"",onChange:M=>T({...m,name:M.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["AppID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:m.appId||"",onChange:M=>T({...m,appId:M.target.value}),placeholder:"应用ID",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"应用私钥"}),e.jsx("textarea",{value:m.privateKey||"",onChange:M=>T({...m,privateKey:M.target.value}),placeholder:"RSA私钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"可以是 PKCS#1 或 PKCS#8 格式，不需要包含 BEGIN/END 行"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:m.provider==="ALIPAY"?"支付宝公钥":"平台公钥"}),e.jsx("textarea",{value:m.publicKey||"",onChange:M=>T({...m,publicKey:M.target.value}),placeholder:"平台公钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.isActive??!0,onChange:M=>T({...m,isActive:M.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"启用"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.isSandbox??!1,onChange:M=>T({...m,isSandbox:M.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"沙箱环境"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:x,disabled:p,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:p?"保存中...":"保存"})]})]})})]})},nx={RECHARGE:{label:"会员充值",icon:"workspace_premium"},CREDITS:{label:"积分购买",icon:"diamond"}},q0={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},B0=[{value:"#ef4444",label:"红色"},{value:"#f97316",label:"橙色"},{value:"#eab308",label:"黄色"},{value:"#22c55e",label:"绿色"},{value:"#3b82f6",label:"蓝色"},{value:"#8b5cf6",label:"紫色"},{value:"#404040",label:"粉色"}],z0=()=>{const[s,A]=a.useState([]),[n,_]=a.useState(!0),[m,T]=a.useState(""),[p,f]=a.useState(null),[j,$]=a.useState(!1),[G,F]=a.useState(!1),V=a.useRef(null);a.useEffect(()=>{R()},[]);const R=async()=>{var r,h;try{_(!0);const D=await b.payment.admin.getPackages();A(D.data||[])}catch(D){i.error(((h=(r=D.response)==null?void 0:r.data)==null?void 0:h.message)||"加载套餐失败")}finally{_(!1)}},x=m?s.filter(r=>r.type===m):s,E=(r="RECHARGE")=>{f({type:r,name:"",description:"",price:0,credits:0,bonusCredits:0,memberLevel:null,memberDays:null,coverImage:null,badge:null,badgeColor:null,sortOrder:s.length,isActive:!0,isRecommend:!1})},v=r=>{f({...r})},P=async()=>{var r,h;if(p){if(!p.name||!p.price||!p.credits){i.error("请填写套餐名称、价格和积分");return}try{$(!0),p.id?await b.payment.admin.updatePackage(p.id,p):await b.payment.admin.createPackage({type:p.type||"RECHARGE",name:p.name,description:p.description||void 0,price:p.price,credits:p.credits,bonusCredits:p.bonusCredits,memberLevel:p.type==="CREDITS"?void 0:p.memberLevel||void 0,memberDays:p.type==="CREDITS"?void 0:p.memberDays||void 0,coverImage:p.coverImage||void 0,badge:p.badge||void 0,badgeColor:p.badgeColor||void 0,sortOrder:p.sortOrder,isActive:p.isActive,isRecommend:p.isRecommend}),i.success("保存成功"),f(null),R()}catch(D){i.error(((h=(r=D.response)==null?void 0:r.data)==null?void 0:h.message)||"保存失败")}finally{$(!1)}}},M=async r=>{var h,D;if(confirm("确定要删除此套餐吗？"))try{await b.payment.admin.deletePackage(r),i.success("删除成功"),R()}catch(U){i.error(((D=(h=U.response)==null?void 0:h.data)==null?void 0:D.message)||"删除失败")}},B=async r=>{try{await b.payment.admin.updatePackage(r.id,{isActive:!r.isActive}),R()}catch{i.error("切换状态失败")}},N=r=>`¥${(r/100).toFixed(2)}`;return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"套餐管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"管理会员充值和积分购买套餐"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>E("RECHARGE"),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"workspace_premium"}),"新建会员套餐"]}),e.jsxs("button",{onClick:()=>E("CREDITS"),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"diamond"}),"新建积分套餐"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"筛选:"}),[{value:"",label:"全部"},{value:"RECHARGE",label:"会员充值"},{value:"CREDITS",label:"积分购买"}].map(r=>e.jsx("button",{onClick:()=>T(r.value),className:`px-3 py-1 text-sm rounded-full transition-colors ${m===r.value?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:r.label},r.value))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.map(r=>{var h,D;return e.jsxs("div",{className:`relative bg-white dark:bg-card-dark border rounded-2xl overflow-hidden transition-all ${r.isActive?"border-slate-200 dark:border-border-dark":"border-slate-200 dark:border-border-dark opacity-60"} ${r.isRecommend?"ring-2 ring-blue-500":""}`,children:[e.jsxs("div",{className:`absolute top-3 left-3 px-2 py-1 text-xs font-medium text-white rounded flex items-center gap-1 ${r.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:((h=nx[r.type])==null?void 0:h.icon)||"redeem"}),((D=nx[r.type])==null?void 0:D.label)||"套餐"]}),r.badge&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 text-xs font-medium text-white rounded",style:{backgroundColor:r.badgeColor||"#3b82f6"},children:r.badge}),e.jsx("div",{className:"h-32 bg-gradient-to-br from-blue-500 to-neutral-600 flex items-center justify-center",children:r.coverImage?e.jsx("img",{src:r.coverImage,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"material-symbols-outlined text-6xl text-white/30",children:"diamond"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"上架中":"已下架"})]}),r.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:N(r.price)}),e.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:["/ ",r.credits+r.bonusCredits," 积分"]})]}),r.bonusCredits>0&&e.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-2",children:["赠送 ",r.bonusCredits," 积分"]}),r.memberLevel&&e.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:["升级为 ",q0[r.memberLevel],r.memberDays&&` (${r.memberDays}天)`]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100 dark:border-border-dark",children:[e.jsxs("button",{onClick:()=>v(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>B(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.isActive?"visibility_off":"visibility"}),r.isActive?"下架":"上架"]}),e.jsx("button",{onClick:()=>M(r.id),className:"flex items-center justify-center p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]})]},r.id)}),s.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无套餐，点击上方按钮创建"})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium text-white flex items-center gap-1 ${p.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:p.type==="CREDITS"?"diamond":"workspace_premium"}),p.type==="CREDITS"?"积分购买":"会员充值"]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:p.id?"编辑套餐":"新建套餐"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["套餐名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.name||"",onChange:r=>f({...p,name:r.target.value}),placeholder:"如：入门包、超值包",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"排序"}),e.jsx("input",{type:"number",value:p.sortOrder||0,onChange:r=>f({...p,sortOrder:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"套餐简介"}),e.jsx("textarea",{value:p.description||"",onChange:r=>f({...p,description:r.target.value}),placeholder:"套餐描述...",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["价格（分） ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:p.price||0,onChange:r=>f({...p,price:Number(r.target.value)}),placeholder:"1000 = ¥10",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["= ¥",((p.price||0)/100).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:p.credits||0,onChange:r=>f({...p,credits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"赠送积分"}),e.jsx("input",{type:"number",value:p.bonusCredits||0,onChange:r=>f({...p,bonusCredits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),p.type!=="CREDITS"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"升级会员等级"}),e.jsxs("select",{value:p.memberLevel||"",onChange:r=>f({...p,memberLevel:r.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"不升级"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数"}),e.jsx("input",{type:"number",value:p.memberDays||"",onChange:r=>f({...p,memberDays:r.target.value?Number(r.target.value):null}),placeholder:"留空为永久",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"封面图片"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{onClick:()=>{var r;return(r=V.current)==null?void 0:r.click()},className:`relative w-40 h-24 rounded-xl border-2 border-dashed cursor-pointer transition-all overflow-hidden ${p.coverImage?"border-blue-400":"border-slate-300 dark:border-border-dark hover:border-blue-400"}`,children:[p.coverImage?e.jsx("img",{src:p.coverImage,alt:"封面预览",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"}),e.jsx("span",{className:"text-xs mt-1",children:"上传封面"})]}),G&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white animate-spin",children:"progress_activity"})})]}),e.jsx("input",{ref:V,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:async r=>{var D,U,W,y;const h=(D=r.target.files)==null?void 0:D[0];if(h){if(!["image/jpeg","image/png","image/webp"].includes(h.type)){i.error("仅支持 JPG、PNG、WebP 格式");return}if(h.size>2*1024*1024){i.error("图片大小不能超过 2MB");return}try{F(!0);const u=await b.assets.upload(h,{type:"package-cover"});f({...p,coverImage:((U=u.data)==null?void 0:U.url)||u.url}),i.success("封面上传成功")}catch(u){i.error(((y=(W=u.response)==null?void 0:W.data)==null?void 0:y.message)||"上传失败")}finally{F(!1),r.target.value=""}}},className:"hidden"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"最佳尺寸："}),"800 × 480 像素（5:3 比例）"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"格式："}),"JPG、PNG、WebP"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"大小："}),"不超过 2MB"]}),p.coverImage&&e.jsxs("button",{onClick:()=>f({...p,coverImage:null}),className:"mt-2 text-xs text-red-500 hover:text-red-600 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"移除封面"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标文字"}),e.jsx("input",{type:"text",value:p.badge||"",onChange:r=>f({...p,badge:r.target.value||null}),placeholder:"如：热销、超值、限时",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标颜色"}),e.jsx("div",{className:"flex items-center gap-2",children:B0.map(r=>e.jsx("button",{onClick:()=>f({...p,badgeColor:r.value}),className:`w-6 h-6 rounded-full transition-transform ${p.badgeColor===r.value?"ring-2 ring-offset-2 ring-blue-500 scale-110":""}`,style:{backgroundColor:r.value},title:r.label},r.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.isActive??!0,onChange:r=>f({...p,isActive:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"上架"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.isRecommend??!1,onChange:r=>f({...p,isRecommend:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"推荐（高亮显示）"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:P,disabled:j,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:j?"保存中...":"保存"})]})]})})]})},cx={VIP:"VIP会员",SVIP:"SVIP会员"},W0=()=>{const[s,A]=a.useState([]),[n,_]=a.useState([]),[m,T]=a.useState(!0),[p,f]=a.useState("codes"),[j,$]=a.useState(!1),[G,F]=a.useState(!1),[V,R]=a.useState({page:1,pageSize:20,total:0}),[x,E]=a.useState({status:"",batchId:""}),[v,P]=a.useState({count:10,credits:100,memberLevel:"",memberDays:0,expireAt:"",remark:""}),[M,B]=a.useState([]);a.useEffect(()=>{p==="codes"?N():r()},[p,V.page,x]);const N=async()=>{var w,k;try{T(!0);const q=await b.redeem.admin.getCodes({page:V.page,pageSize:V.pageSize,status:x.status||void 0,batchId:x.batchId||void 0});A(q.data||[]),R(Y=>{var J;return{...Y,total:((J=q.pagination)==null?void 0:J.total)||0}})}catch(q){i.error(((k=(w=q.response)==null?void 0:w.data)==null?void 0:k.message)||"加载失败")}finally{T(!1)}},r=async()=>{var w,k;try{T(!0);const q=await b.redeem.admin.getBatches();_(q.data||[])}catch(q){i.error(((k=(w=q.response)==null?void 0:w.data)==null?void 0:k.message)||"加载失败")}finally{T(!1)}},h=async()=>{var w,k,q,Y,J;if(v.credits<=0){i.error("积分数量必须大于0");return}if(v.count<1||v.count>100){i.error("生成数量必须在1-100之间");return}try{F(!0);const se=await b.redeem.admin.generate({count:v.count,credits:v.credits,memberLevel:v.memberLevel||void 0,memberDays:v.memberDays||void 0,expireAt:v.expireAt||void 0,remark:v.remark||void 0}),Se=((k=(w=se.data)==null?void 0:w.data)==null?void 0:k.codes)||[];if(Se.length>0)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Se.join(`
`));else{const oe=document.createElement("textarea");oe.value=Se.join(`
`),oe.style.position="fixed",oe.style.opacity="0",document.body.appendChild(oe),oe.select(),document.execCommand("copy"),document.body.removeChild(oe)}i.success(`生成成功！${Se.length} 个兑换码已复制到剪贴板`)}catch{i.success(`生成成功！${Se.length} 个兑换码`)}else i.success(((q=se.data)==null?void 0:q.message)||"生成成功");$(!1),B([]),N(),r()}catch(se){i.error(((J=(Y=se.response)==null?void 0:Y.data)==null?void 0:J.message)||"生成失败")}finally{F(!1)}},D=async w=>{var k,q;if(confirm("确定删除此兑换码？"))try{await b.redeem.admin.deleteCode(w),i.success("删除成功"),N()}catch(Y){i.error(((q=(k=Y.response)==null?void 0:k.data)==null?void 0:q.message)||"删除失败")}},U=async w=>{var k,q,Y;if(confirm("确定删除此批次所有未使用的兑换码？"))try{const J=await b.redeem.admin.deleteBatch(w);i.success((k=J.data)!=null&&k.deletedCount?`成功删除 ${J.data.deletedCount} 个兑换码`:"删除成功"),r(),N()}catch(J){i.error(((Y=(q=J.response)==null?void 0:q.data)==null?void 0:Y.message)||"删除失败")}},W=async w=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(w);else{const k=document.createElement("textarea");k.value=w,k.style.position="fixed",k.style.opacity="0",document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k)}i.success("已复制到剪贴板")}catch{i.error("复制失败")}},y=async()=>{await W(M.join(`
`))},u=w=>w?new Date(w).toLocaleString("zh-CN"):"-";return m&&s.length===0&&n.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"兑换码管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"生成和管理积分兑换码"})]}),e.jsxs("button",{onClick:()=>{B([]),$(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"生成兑换码"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>f("codes"),className:`pb-3 px-1 border-b-2 transition-colors ${p==="codes"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"兑换码列表"}),e.jsx("button",{onClick:()=>f("batches"),className:`pb-3 px-1 border-b-2 transition-colors ${p==="batches"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"批次管理"})]}),p==="codes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs("select",{value:x.status,onChange:w=>E({...x,status:w.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"unused",children:"未使用"}),e.jsx("option",{value:"used",children:"已使用"})]})}),e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"兑换码"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"状态"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"使用者"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"备注"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"创建时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark",children:[s.map(w=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:w.code}),e.jsx("button",{onClick:()=>W(w.code),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]})}),e.jsxs("td",{className:"px-4 py-3 text-amber-600 dark:text-amber-400 font-medium",children:["+",w.credits]}),e.jsxs("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400",children:[w.memberLevel?cx[w.memberLevel]||w.memberLevel:"-",w.memberDays?` (${w.memberDays}天)`:""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${w.isUsed?"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:w.isUsed?"已使用":"未使用"})}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400 text-sm",children:w.usedBy?e.jsx("span",{children:w.usedBy.nickname||w.usedBy.phone}):"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:w.remark||"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:u(w.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:!w.isUsed&&e.jsx("button",{onClick:()=>D(w.id),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})})]},w.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-400",children:"暂无兑换码"})})]})]})}),V.total>V.pageSize&&e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>R(w=>({...w,page:w.page-1})),disabled:V.page<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"上一页"}),e.jsxs("span",{className:"px-3 py-1",children:[V.page," / ",Math.ceil(V.total/V.pageSize)]}),e.jsx("button",{onClick:()=>R(w=>({...w,page:w.page+1})),disabled:V.page>=Math.ceil(V.total/V.pageSize),className:"px-3 py-1 border rounded disabled:opacity-50",children:"下一页"})]})]}),p==="batches"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(w=>{var k;return e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:[(k=w.batchId)==null?void 0:k.substring(0,20),"..."]}),w.unused>0&&e.jsx("button",{onClick:()=>U(w.batchId),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-amber-500",children:["+",w.credits]}),w.memberLevel&&e.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-600 dark:bg-neutral-900/30 dark:text-neutral-400 rounded",children:cx[w.memberLevel]||w.memberLevel})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 text-center",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:w.total}),e.jsx("div",{className:"text-xs text-slate-500",children:"总数"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:w.unused}),e.jsx("div",{className:"text-xs text-slate-500",children:"可用"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-500",children:w.used}),e.jsx("div",{className:"text-xs text-slate-500",children:"已用"})]})]}),w.remark&&e.jsxs("div",{className:"text-sm text-slate-500 mb-2",children:["备注：",w.remark]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["创建于 ",u(w.createdAt)]})]},w.batchId)}),n.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无批次记录"})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"生成兑换码"})}),e.jsx("div",{className:"p-6 space-y-4",children:M.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["生成数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,max:100,value:v.count,onChange:w=>P({...v,count:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"最多100个"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,value:v.credits,onChange:w=>P({...v,credits:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员等级（可选）"}),e.jsxs("select",{value:v.memberLevel,onChange:w=>P({...v,memberLevel:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"不设置"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"向上原则：不会降低用户等级"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数（可选）"}),e.jsx("input",{type:"number",min:0,value:v.memberDays,onChange:w=>P({...v,memberDays:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"过期时间（可选）"}),e.jsx("input",{type:"datetime-local",value:v.expireAt,onChange:w=>P({...v,expireAt:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"备注（可选）"}),e.jsx("input",{type:"text",value:v.remark,onChange:w=>P({...v,remark:w.target.value}),placeholder:"如：活动名称",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-medium text-slate-900 dark:text-white",children:["已生成 ",M.length," 个兑换码"]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"}),"复制全部"]})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 max-h-60 overflow-y-auto",children:M.map((w,k)=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-slate-200 dark:border-border-dark last:border-0",children:[e.jsx("code",{className:"font-mono text-sm",children:w}),e.jsx("button",{onClick:()=>W(w),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]},k))})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"关闭"}),M.length===0&&e.jsx("button",{onClick:h,disabled:G,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:G?"生成中...":"生成"})]})]})})]})},zl={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},Wl={USER:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",VIP:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200",SVIP:"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-800 dark:text-neutral-200"},Y0=()=>{const[s,A]=a.useState(!0),[n,_]=a.useState(!1),[m,T]=a.useState("levels"),[p,f]=a.useState([]),[j,$]=a.useState(null),[G,F]=a.useState(null),[V,R]=a.useState({}),x=a.useCallback(async()=>{A(!0);try{const[N,r]=await Promise.all([b.admin.userLevels.getConfigs(),b.admin.userLevels.getPermissionsSummary()]);N.success&&f(N.data),r.success&&$(r.data)}catch{i.error("加载配置失败")}finally{A(!1)}},[]);a.useEffect(()=>{x()},[x]);const E=async()=>{_(!0);try{(await b.admin.userLevels.batchUpdateConfigs(p.map(r=>({...r,giftDescription:r.giftDescription??void 0})))).success&&(i.success("等级配置保存成功"),x())}catch{i.error("保存失败")}finally{_(!1)}},v=(N,r,h)=>{f(D=>D.map(U=>U.userRole===N?{...U,[r]:h}:U))},P=async N=>{_(!0);try{const r=["USER","VIP","SVIP"].map(D=>{const U=N.permissions.find(y=>y.userRole===D),W=V[`${N.id}-${D}`]||{};return{aiModelId:N.id,userRole:D,isAllowed:W.isAllowed??(U==null?void 0:U.isAllowed)??!0,dailyLimit:W.dailyLimit??(U==null?void 0:U.dailyLimit)??-1,isFreeForMember:W.isFreeForMember??(U==null?void 0:U.isFreeForMember)??!1,freeDailyLimit:W.freeDailyLimit??(U==null?void 0:U.freeDailyLimit)??0,isActive:!0}});(await b.admin.userLevels.batchUpdatePermissions(r)).success&&(i.success("权限配置保存成功"),R({}),x())}catch{i.error("保存失败")}finally{_(!1)}},M=(N,r,h,D)=>{R(U=>({...U,[`${N}-${r}`]:{...U[`${N}-${r}`],[h]:D}}))},B=(N,r,h)=>{const D=V[`${N.id}-${r}`];if(D&&h in D)return D[h];const U=N.permissions.find(W=>W.userRole===r);return U?U[h]:h==="isAllowed"?!0:h==="dailyLimit"?-1:h==="isFreeForMember"?!1:h==="freeDailyLimit"?0:null};return s?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"用户等级权限配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400 mt-1",children:"配置不同等级用户的积分赠送规则和模型使用权限"})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>T("levels"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${m==="levels"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"等级配置"}),e.jsx("button",{onClick:()=>T("permissions"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${m==="permissions"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"模型权限"})]}),m==="levels"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"积分赠送与并发配置"}),e.jsx("button",{onClick:E,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"保存中...":"保存配置"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"用户等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日赠送积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"赠送天数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"最大并发数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"存储保留"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"规则描述"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"启用"})]})}),e.jsx("tbody",{children:p.map(N=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Wl[N.userRole]}`,children:zl[N.userRole]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"0",value:N.dailyGiftCredits,onChange:r=>v(N.userRole,"dailyGiftCredits",parseInt(r.target.value)||0),className:"w-24 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:N.giftDays,onChange:r=>v(N.userRole,"giftDays",parseInt(r.target.value)||0),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:N.giftDays===0?"(无限期)":"天"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"1",value:N.maxConcurrency,onChange:r=>v(N.userRole,"maxConcurrency",parseInt(r.target.value)||1),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:N.storageRetentionDays,onChange:r=>v(N.userRole,"storageRetentionDays",parseInt(r.target.value)||-1),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:N.storageRetentionDays===-1?"(永久)":"天"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"text",value:N.giftDescription||"",onChange:r=>v(N.userRole,"giftDescription",r.target.value),placeholder:"规则说明...",className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.isActive,onChange:r=>v(N.userRole,"isActive",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]},N.userRole))})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"说明"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日赠送积分"}),"：用户每天登录时自动赠送的积分数量，赠送积分不累计（次日清零）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"赠送天数"}),"：新用户注册后赠送积分的天数，0表示无限期（VIP/SVIP会员有效期内持续赠送）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"最大并发数"}),"：用户同时进行的生成任务数量上限"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"存储保留"}),"：用户生成内容的OSS存储保留天数，-1表示永久保留。保留期限按内容生成时的用户等级计算"]})]})]})]})}),m==="permissions"&&j&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"模型使用权限配置"}),e.jsx("div",{className:"space-y-4",children:j.models.map(N=>e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>F((G==null?void 0:G.id)===N.id?null:N),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:(G==null?void 0:G.id)===N.id?"expand_less":"expand_more"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:[N.provider," / ",N.modelId]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${N.type==="TEXT_GENERATION"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":N.type==="IMAGE_GENERATION"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":N.type==="VIDEO_GENERATION"?"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-700 dark:text-neutral-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:N.type})})]}),(G==null?void 0:G.id)===N.id&&e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(r=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${Wl[r]}`,children:zl[r]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B(N,r,"isAllowed"),onChange:h=>M(N.id,r,"isAllowed",h.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:B(N,r,"dailyLimit"),onChange:h=>M(N.id,r,"dailyLimit",parseInt(h.target.value)),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:B(N,r,"dailyLimit")===-1?"不限":"次/日"})]})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B(N,r,"isFreeForMember"),onChange:h=>M(N.id,r,"isFreeForMember",h.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-600"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"&&B(N,r,"isFreeForMember")?e.jsx("input",{type:"number",min:"0",value:B(N,r,"freeDailyLimit"),onChange:h=>M(N.id,r,"freeDailyLimit",parseInt(h.target.value)||0),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})})]},r))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>P(N),disabled:n,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"保存中...":"保存权限"})})]})]},N.id))}),j.models.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-gray-400",children:"暂无活跃的AI模型"})]}),j.nodeTypes.length>0&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"节点类型权限配置"}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:["已配置 ",j.nodeTypes.length," 个节点类型"]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"独立模块权限配置"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-4",children:"配置 Midjourney、广告成片等独立节点的使用权限"}),e.jsx("div",{className:"space-y-4",children:[{moduleType:"midjourney",name:"Midjourney",description:"文生图/图生图"},{moduleType:"commercial-video",name:"广告成片",description:"Vidu 广告视频"}].map(N=>{var h;const r=((h=j==null?void 0:j.moduleTypes.find(D=>D.moduleType===N.moduleType))==null?void 0:h.permissions)||[];return e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:N.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:N.description})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(D=>{const U=r.find(J=>J.userRole===D),W=`module-${N.moduleType}-${D}`,y=V[W]||{},u=y.isAllowed??(U==null?void 0:U.isAllowed)??!0,w=y.dailyLimit??(U==null?void 0:U.dailyLimit)??-1,k=y.isFreeForMember??(U==null?void 0:U.isFreeForMember)??!1,q=y.freeDailyLimit??(U==null?void 0:U.freeDailyLimit)??0,Y=D==="VIP"||D==="SVIP";return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${Wl[D]}`,children:zl[D]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:J=>R(se=>({...se,[W]:{...se[W],isAllowed:J.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:Y?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:J=>R(se=>({...se,[W]:{...se[W],isFreeForMember:J.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-amber-500"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:Y?e.jsx("input",{type:"number",min:"0",value:q,onChange:J=>R(se=>({...se,[W]:{...se[W],freeDailyLimit:parseInt(J.target.value)||0}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:w,onChange:J=>R(se=>({...se,[W]:{...se[W],dailyLimit:parseInt(J.target.value)}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:w===-1?"不限":""})]})})]},D)})})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:async()=>{_(!0);try{const D=["USER","VIP","SVIP"].map(U=>{const W=`module-${N.moduleType}-${U}`,y=r.find(w=>w.userRole===U),u=V[W]||{};return{moduleType:N.moduleType,userRole:U,isAllowed:u.isAllowed??(y==null?void 0:y.isAllowed)??!0,dailyLimit:u.dailyLimit??(y==null?void 0:y.dailyLimit)??-1,isFreeForMember:u.isFreeForMember??(y==null?void 0:y.isFreeForMember)??!1,freeDailyLimit:u.freeDailyLimit??(y==null?void 0:y.freeDailyLimit)??0,isActive:!0}});await b.admin.userLevels.batchUpdatePermissions(D),i.success(`${N.name} 权限保存成功`),x()}catch{i.error("保存失败")}finally{_(!1)}},disabled:n,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:"保存"})})]})]},N.moduleType)})})]}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"权限配置说明"}),e.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"允许使用"}),"：该等级用户是否可以使用此模型/节点"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日限制"}),"：每日可调用次数，-1表示不限制"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"会员免费"}),"：VIP/SVIP会员使用时是否免费（0积分）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"免费次数/日"}),"：每日免费使用的次数上限"]})]})]})]})]})},ke=(s,A=2)=>{if(s===0)return"0 B";const n=1024,_=A<0?0:A,m=["B","KB","MB","GB","TB"],T=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,T)).toFixed(_))+" "+m[T]},Yl=s=>{const A=Math.floor(s/86400),n=Math.floor(s%86400/3600),_=Math.floor(s%3600/60),m=[];return A>0&&m.push(`${A}天`),n>0&&m.push(`${n}小时`),_>0&&m.push(`${_}分钟`),m.join(" ")||"< 1分钟"},Js=({value:s,color:A="blue",showLabel:n=!0})=>{const _=()=>s>=90?"bg-red-500":s>=70?"bg-yellow-500":A==="blue"?"bg-blue-500":`bg-${A}-500`;return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${_()}`,style:{width:`${Math.min(s,100)}%`}})}),n&&e.jsxs("p",{className:`text-xs mt-1 ${s>=90?"text-red-500":s>=70?"text-yellow-500":"text-gray-500 dark:text-gray-400"}`,children:[s.toFixed(1),"%"]})]})},Sa=({title:s,icon:A,children:n,className:_=""})=>e.jsxs("div",{className:`bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5 ${_}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:A}),e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300",children:s})]}),n]}),Z0=({status:s})=>{const A=()=>{switch(s){case"online":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"stopping":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"stopped":case"errored":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${A()}`,children:s})},J0=()=>{var R,x,E;const[s,A]=a.useState(null),[n,_]=a.useState(!0),[m,T]=a.useState(null),[p,f]=a.useState(!0),[j,$]=a.useState(5e3),[G,F]=a.useState(null),V=a.useCallback(async()=>{var v,P,M;try{const B=await b.admin.getServerMetrics(),N=((v=B.data)==null?void 0:v.data)||B.data;N&&N.system?(A(N),F(new Date),T(null)):T("返回数据格式错误")}catch(B){T(((M=(P=B.response)==null?void 0:P.data)==null?void 0:M.message)||B.message||"获取监控数据失败")}finally{_(!1)}},[]);return a.useEffect(()=>{V()},[V]),a.useEffect(()=>{if(!p)return;const v=setInterval(V,j);return()=>clearInterval(v)},[p,j,V]),n&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载监控数据中..."})]})}):m||!n&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:m||"无法加载监控数据"}),e.jsx("button",{onClick:()=>{_(!0),V()},className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"重试"})]})}):s?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"服务器监控"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:["主机: ",s==null?void 0:s.system.hostname," | ",s==null?void 0:s.system.platform," ",s==null?void 0:s.system.arch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:j,onChange:v=>$(Number(v.target.value)),className:"px-3 py-1.5 text-sm bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("option",{value:3e3,children:"3秒"}),e.jsx("option",{value:5e3,children:"5秒"}),e.jsx("option",{value:1e4,children:"10秒"}),e.jsx("option",{value:3e4,children:"30秒"})]}),e.jsxs("button",{onClick:()=>f(!p),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors ${p?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:p?"sync":"sync_disabled"}),p?"自动刷新":"已暂停"]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]})]}),G&&e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["最后更新: ",G.toLocaleTimeString("zh-CN")]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"CPU 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.cpu.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[s.cpu.count," 核心"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"内存使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.memory.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.memory.used)," / ",ke(s.memory.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Swap 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.swap.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.swap.used)," / ",ke(s.swap.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"磁盘使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.disk.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.disk.used)," / ",ke(s.disk.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:s.connections.onlineNow||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["WebSocket: ",s.connections.socket," | 会话: ",s.connections.validSessions]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"24h 请求"}),e.jsx("p",{className:"text-2xl font-bold",children:s.traffic.last24h.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"API 调用"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Sa,{title:"CPU",icon:"memory",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"型号"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white truncate max-w-[200px]",children:s.cpu.model})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"核心数"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.cpu.count})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"使用率"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[s.cpu.usage,"%"]})]}),e.jsx(Js,{value:s.cpu.usage,showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"系统负载"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["1m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"1分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["5m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"5分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["15m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"15分钟"})]})]})]})]})}),e.jsx(Sa,{title:"内存",icon:"memory_alt",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"物理内存"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.memory.used)," / ",ke(s.memory.total)]})]}),e.jsx(Js,{value:s.memory.usage,color:"gray",showLabel:!1})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Swap"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.swap.used)," / ",ke(s.swap.total)]})]}),e.jsx(Js,{value:s.swap.usage,color:"amber",showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用内存"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:ke(s.memory.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Swap 可用"}),e.jsx("p",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:ke(s.swap.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"系统运行"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Yl(s.system.uptime)})]})]})]})}),e.jsx(Sa,{title:"数据库 (PostgreSQL)",icon:"database",children:s.database.error?e.jsx("p",{className:"text-red-500 text-sm",children:s.database.error}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总连接数"}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:((R=s.database.connections)==null?void 0:R.total)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃连接"}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400",children:((x=s.database.connections)==null?void 0:x.active)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"空闲连接"}),e.jsx("p",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400",children:((E=s.database.connections)==null?void 0:E.idle)||0})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"数据库大小"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.database.size||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃查询"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:s.database.activeQueries||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"慢查询"}),e.jsx("p",{className:`text-sm font-semibold ${(s.database.slowQueries||0)>0?"text-red-500":"text-green-500"}`,children:s.database.slowQueries||0})]})]})]})}),e.jsx(Sa,{title:"Node.js 进程",icon:"code",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程 PID"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.process.pid})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程运行时间"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:Yl(s.process.uptime)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"内存使用"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Used"}),e.jsx("p",{className:"text-sm font-semibold text-neutral-600 dark:text-neutral-400",children:ke(s.process.memory.heapUsed)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Total"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.heapTotal)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"RSS"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.rss)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"External"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.external)})]})]})]})]})})]}),s.pm2.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(Sa,{title:"PM2 进程管理",icon:"hub",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"pb-2 font-medium",children:"进程名"}),e.jsx("th",{className:"pb-2 font-medium",children:"PID"}),e.jsx("th",{className:"pb-2 font-medium",children:"状态"}),e.jsx("th",{className:"pb-2 font-medium",children:"CPU"}),e.jsx("th",{className:"pb-2 font-medium",children:"内存"}),e.jsx("th",{className:"pb-2 font-medium",children:"运行时间"}),e.jsx("th",{className:"pb-2 font-medium",children:"重启次数"})]})}),e.jsx("tbody",{children:s.pm2.map((v,P)=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsx("td",{className:"py-2.5 font-medium text-slate-900 dark:text-white",children:v.name}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:v.pid}),e.jsx("td",{className:"py-2.5",children:e.jsx(Z0,{status:v.status})}),e.jsx("td",{className:"py-2.5",children:e.jsxs("span",{className:v.cpu>80?"text-red-500":v.cpu>50?"text-yellow-500":"text-green-500",children:[v.cpu,"%"]})}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:ke(v.memory)}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:Yl(v.uptime/1e3)}),e.jsx("td",{className:"py-2.5",children:e.jsx("span",{className:v.restarts>5?"text-red-500":"text-gray-600 dark:text-gray-400",children:v.restarts})})]},P))})]})})})}),e.jsx("div",{className:"mt-6",children:e.jsx(Sa,{title:"磁盘存储",icon:"hard_drive",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"根分区 (/)"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.disk.used)," / ",ke(s.disk.total)]})]}),e.jsx(Js,{value:s.disk.usage,color:"green"})]}),e.jsxs("div",{className:"pt-2 grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"已使用"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.disk.used)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用空间"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:ke(s.disk.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总容量"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.disk.total)})]})]})]})})})]})]}):e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载中..."})]})})},em=[{name:"userInput",desc:"用户输入的场景描述",example:"高清放大这张图片"}],tm=[{name:"userPrompt",desc:"用户输入的剧情简述",example:"一个女孩在雨中奔跑"},{name:"imageStyle",desc:"用户输入的图片风格",example:"赛博朋克、水彩画"},{name:"aspectRatio",desc:"用户选择的宽高比",example:"16:9"}],xx=[{value:"hdUpscale",label:"高清放大",icon:"high_quality"},{value:"storyboardMaster",label:"智能溶图",icon:"auto_awesome"},{value:"smartStoryboard",label:"智能分镜",icon:"grid_view"},{value:"aiImage",label:"图片生成",icon:"image"},{value:"aiVideo",label:"视频生成",icon:"movie"},{value:"aiVideo_t2v",label:"文生视频",icon:"movie"},{value:"aiVideo_i2v_first",label:"图生视频（首帧）",icon:"movie"},{value:"aiVideo_i2v_last",label:"图生视频（尾帧）",icon:"movie"},{value:"aiVideo_first_last",label:"首尾帧生成",icon:"movie"},{value:"aiVideo_reference",label:"参考图生成",icon:"movie"},{value:"aiVideo_swap",label:"视频编辑",icon:"movie"},{value:"aiVideo_lipsync",label:"口型同步",icon:"movie"},{value:"aiVideo_style",label:"风格迁移",icon:"movie"},{value:"soraVideo",label:"Sora视频",icon:"movie"},{value:"soraCharacter",label:"Sora角色",icon:"face"},{value:"midjourney",label:"Midjourney",icon:"palette"},{value:"agent",label:"智能体",icon:"smart_toy"},{value:"audioVoice",label:"语音合成",icon:"record_voice_over"},{value:"voiceClone",label:"声音克隆",icon:"mic"},{value:"audioSynthesize",label:"音频合成",icon:"music_note"},{value:"audioDesign",label:"音效设计",icon:"graphic_eq"},{value:"superCanvas",label:"超级画布",icon:"draw"},{value:"videoUpscale",label:"视频超分",icon:"high_quality"},{value:"commercialVideo",label:"广告成片",icon:"campaign"}],am=()=>{const[s,A]=a.useState([]),[n,_]=a.useState(null),[m,T]=a.useState(!0),[p,f]=a.useState(!1),[j,$]=a.useState(!1),[G,F]=a.useState([]),[V,R]=a.useState({system:!0,user:!0,enhance:!1,variables:!1}),[x,E]=a.useState({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0,textModel:""}),v=async()=>{try{T(!0);const u=await b.nodePrompts.getAll(!0);u.success&&A(u.data||[])}catch(u){i.error("加载失败: "+(u.message||"未知错误"))}finally{T(!1)}},P=async()=>{try{const u=await b.admin.getAIModels({type:"TEXT_GENERATION"});if(u.success&&u.data){const w=u.data.map(k=>({value:k.modelId,label:k.name||k.modelId}));F(w)}}catch{}};a.useEffect(()=>{v(),P()},[]);const M=u=>{_(u),$(!1);const w=u.variables||[],k=w.find(q=>q.name==="__textModel__");E({nodeType:u.nodeType,name:u.name,description:u.description||"",systemPrompt:u.systemPrompt||"",userPromptTemplate:u.userPromptTemplate,enhancePromptTemplate:u.enhancePromptTemplate||"",variables:w.filter(q=>{var Y;return!((Y=q.name)!=null&&Y.startsWith("__"))}),isActive:u.isActive,textModel:(k==null?void 0:k.value)||""})},B=()=>{_(null),$(!0),E({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0,textModel:""})},N=async()=>{try{const u=await b.nodePrompts.initHDUpscale();u.success&&(i.success(u.message||"初始化成功"),await v(),u.data&&M(u.data))}catch(u){i.error("初始化失败: "+(u.message||"未知错误"))}},r=async()=>{try{const u=await b.nodePrompts.initImageFusion();u.success&&(i.success(u.message||"初始化成功"),await v(),u.data&&M(u.data))}catch(u){i.error("初始化失败: "+(u.message||"未知错误"))}},h=async()=>{try{const u=await b.nodePrompts.initSmartStoryboard();u.success&&(i.success(u.message||"初始化成功"),await v(),u.data&&M(u.data))}catch(u){i.error("初始化失败: "+(u.message||"未知错误"))}},D=async()=>{if(!x.nodeType.trim()){i.error("请输入节点类型");return}if(!x.name.trim()){i.error("请输入名称");return}if(!x.userPromptTemplate.trim()){i.error("请输入用户提示词模板");return}const u={...x,variables:[...x.variables,...x.textModel?[{name:"__textModel__",desc:"文本模型",value:x.textModel}]:[]]};try{if(f(!0),j){const w=await b.nodePrompts.create(u);w.success&&(i.success("创建成功"),await v(),M(w.data))}else if(n){const w=await b.nodePrompts.update(n.id,u);w.success&&(i.success("保存成功"),await v(),M(w.data))}}catch(w){i.error("保存失败: "+(w.message||"未知错误"))}finally{f(!1)}},U=async()=>{if(n&&confirm(`确定要删除 "${n.name}" 吗？`))try{(await b.nodePrompts.delete(n.id)).success&&(i.success("删除成功"),_(null),$(!1),await v())}catch(u){i.error("删除失败: "+(u.message||"未知错误"))}},W=async()=>{if(n)try{const u=await b.nodePrompts.toggle(n.id);u.success&&(i.success(u.data.isActive?"已启用":"已禁用"),await v(),M(u.data))}catch(u){i.error("操作失败: "+(u.message||"未知错误"))}},y=u=>{R({...V,[u]:!V[u]})};return e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"节点提示词管理"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"配置工作流节点的 AI 提示词模板，支持变量替换"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-neutral-500/20 text-neutral-400 rounded-lg hover:bg-neutral-500/30 transition-colors",children:[e.jsx(er,{className:"w-4 h-4"}),"初始化高清放大"]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-neutral-500/20 text-neutral-400 rounded-lg hover:bg-neutral-500/30 transition-colors",children:[e.jsx(er,{className:"w-4 h-4"}),"初始化智能溶图"]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors",children:[e.jsx(er,{className:"w-4 h-4"}),"初始化智能分镜"]}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:[e.jsx(v0,{className:"w-4 h-4"}),"新建模板"]})]})]}),e.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsx("h2",{className:"text-sm font-medium text-gray-400",children:"模板列表"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-neutral-500/20 border-t-neutral-500 rounded-full animate-spin"})}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(dx,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"暂无模板"}),e.jsx("p",{className:"text-xs mt-1",children:'点击"初始化高清放大模板"开始'})]}):e.jsx("ul",{className:"space-y-1",children:s.map(u=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>M(u),className:`w-full text-left px-3 py-2.5 rounded-lg transition-all ${(n==null?void 0:n.id)===u.id?"bg-neutral-500/20 text-neutral-400":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${u.isActive?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium truncate",children:u.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:u.nodeType})]})},u.id))})})]}),e.jsx("div",{className:"flex-1 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:!n&&!j?e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(dx,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"选择一个模板进行编辑"}),e.jsx("p",{className:"text-sm mt-1",children:'或点击"新建模板"创建'})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:j?"新建模板":`编辑: ${n==null?void 0:n.name}`}),e.jsxs("div",{className:"flex gap-2",children:[!j&&n&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:W,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-colors ${x.isActive?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,children:[x.isActive?e.jsx(N0,{className:"w-4 h-4"}):e.jsx(w0,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:x.isActive?"禁用":"启用"})]}),e.jsxs("button",{onClick:U,className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[e.jsx(x0,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"删除"})]})]}),e.jsxs("button",{onClick:D,disabled:p,className:"flex items-center gap-1.5 px-4 py-1.5 bg-neutral-500 text-white rounded-lg hover:bg-neutral-600 transition-colors disabled:opacity-50",children:[p?e.jsx(A0,{className:"w-4 h-4 animate-spin"}):e.jsx(C0,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"保存"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["节点类型 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:x.nodeType,onChange:u=>{const w=xx.find(k=>k.value===u.target.value);E({...x,nodeType:u.target.value,name:w?w.label+"提示词":x.name})},disabled:!j,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-neutral-500 disabled:opacity-50",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"请选择节点类型"}),xx.map(u=>e.jsxs("option",{value:u.value,className:"bg-gray-800",children:[u.label," (",u.value,")"]},u.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["显示名称 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:x.name,onChange:u=>E({...x,name:u.target.value}),placeholder:"如: 高清放大节点",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"描述"}),e.jsx("input",{type:"text",value:x.description,onChange:u=>E({...x,description:u.target.value}),placeholder:"节点功能描述",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>y("system"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"系统提示词 (System Prompt)"}),V.system?e.jsx(Xl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ql,{className:"w-4 h-4 text-gray-400"})]}),V.system&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:x.systemPrompt,onChange:u=>E({...x,systemPrompt:u.target.value}),placeholder:"设定 AI 的角色和行为...",rows:8,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>y("user"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["用户提示词模板 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-400",children:[e.jsx(j0,{className:"w-3 h-3"}),"支持 ","{{变量}}"," 语法"]})]}),V.user?e.jsx(Xl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ql,{className:"w-4 h-4 text-gray-400"})]}),V.user&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:x.userPromptTemplate,onChange:u=>E({...x,userPromptTemplate:u.target.value}),placeholder:"用户提示词模板，使用 {{变量名}} 插入动态内容...",rows:12,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>y("enhance"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"提示词增强模板 (可选)"}),V.enhance?e.jsx(Xl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ql,{className:"w-4 h-4 text-gray-400"})]}),V.enhance&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:x.enhancePromptTemplate,onChange:u=>E({...x,enhancePromptTemplate:u.target.value}),placeholder:"用于增强/优化用户输入的提示词...",rows:6,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),x.nodeType==="hdUpscale"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-neutral-500/10 border border-neutral-500/20 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-2 text-neutral-300",children:"🔍 高清放大可用变量（点击复制）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:em.map(u=>e.jsxs("button",{type:"button",onClick:async()=>{const w=`{{${u.name}}}`;try{await navigator.clipboard.writeText(w),i.success(`已复制 ${w}`)}catch{const k=document.createElement("textarea");k.value=w,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k),i.success(`已复制 ${w}`)}},className:"flex items-center gap-2 p-2 bg-black/20 rounded hover:bg-black/30 transition-colors text-left",children:[e.jsx("code",{className:"text-neutral-400 text-xs",children:`{{${u.name}}}`}),e.jsxs("span",{className:"text-gray-400 text-xs truncate",children:[u.desc,"：",u.example]})]},u.name))})]}),e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 默认提示词"}),e.jsx("p",{className:"text-xs opacity-80",children:"将这张图片进行高清放大，保持原有的画面内容、构图和风格不变，提升图片的清晰度和细节"})]})]}):x.nodeType==="smartStoryboard"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:"🤖 第一步文本模型"}),e.jsxs("select",{value:x.textModel,onChange:u=>E({...x,textModel:u.target.value}),className:"w-full px-3 py-2 bg-black/30 border border-purple-500/30 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"使用默认模型 (gemini-3-pro-preview)"}),G.map(u=>e.jsx("option",{value:u.value,className:"bg-gray-800",children:u.label},u.value))]}),e.jsx("p",{className:"text-xs text-purple-400/70 mt-1",children:"用于生成分镜描述文字"})]}),e.jsxs("div",{className:"p-3 bg-cyan-500/10 border border-cyan-500/20 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-2 text-cyan-300",children:"🎬 智能分镜可用变量（点击复制）"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:tm.map(u=>e.jsxs("button",{type:"button",onClick:async()=>{const w=`{{${u.name}}}`;try{await navigator.clipboard.writeText(w),i.success(`已复制 ${w}`)}catch{const k=document.createElement("textarea");k.value=w,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k),i.success(`已复制 ${w}`)}},className:"flex items-center gap-2 p-2 bg-black/20 rounded hover:bg-black/30 transition-colors text-left",children:[e.jsx("code",{className:"text-cyan-400 text-xs font-mono",children:`{{${u.name}}}`}),e.jsx("span",{className:"text-gray-400 text-xs",children:u.desc}),e.jsxs("span",{className:"text-gray-500 text-xs ml-auto",children:["例：",u.example]})]},u.name))})]}),e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 提示词说明"}),e.jsx("p",{className:"text-xs opacity-80",children:"系统提示词：用于第一步文字生成，指导AI生成分镜描述"}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"用户提示词：用于第二步图片生成，指导AI生成九宫格分镜图"})]})]}):e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 使用说明"}),e.jsxs("p",{children:["在提示词中可使用变量：",e.jsx("code",{className:"bg-black/30 px-1 rounded",children:"{{userInput}}"})," 会被替换为用户输入"]})]})]})]})})]})]})},sm={PENDING:"待处理",APPROVED:"已通过",COMPLETED:"已完成",REJECTED:"已拒绝"},rm={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200",APPROVED:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200",COMPLETED:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200",REJECTED:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"},dm=()=>{const[s,A]=a.useState(!0),[n,_]=a.useState(!1),[m,T]=a.useState("config"),[p,f]=a.useState(null),[j,$]=a.useState(null),[G,F]=a.useState([]),[V,R]=a.useState(""),x=a.useCallback(async()=>{A(!0);try{const[P,M]=await Promise.all([b.get("/referral/admin/config"),b.get("/referral/admin/stats")]);P.success&&f(P.data),M.success&&$(M.data);const B=await b.get("/referral/admin/withdrawals",{params:{status:V||void 0}});B.success&&F(B.data.list||[])}catch{i.error("加载数据失败")}finally{A(!1)}},[V]);a.useEffect(()=>{x()},[x]);const E=async()=>{if(p){_(!0);try{(await b.put("/referral/admin/config",{isActive:p.isActive,referrerBonus:p.referrerBonus,refereeBonus:p.refereeBonus,commissionRate:p.commissionRate,minWithdrawAmount:p.minWithdrawAmount,withdrawToCreditsRate:p.withdrawToCreditsRate})).success&&(i.success("配置保存成功"),x())}catch{i.error("保存失败")}finally{_(!1)}}},v=async(P,M,B)=>{try{const N=await b.put(`/referral/admin/withdrawals/${P}`,{action:M,rejectReason:B});N.success?(i.success(N.message),x()):i.error(N.message)}catch(N){i.error(N.message||"操作失败")}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"推荐返利管理"}),e.jsx("p",{className:"text-slate-500 dark:text-gray-400 mt-1",children:"管理推荐系统配置和提现申请"})]}),j&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"推荐用户"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:j.usersWithReferrer}),e.jsxs("div",{className:"text-xs text-slate-400",children:["占比 ",j.referralRate,"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"累计返利"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-500",children:["¥",(j.totalCommissions/100).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"待处理提现"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:j.pendingWithdrawals.count}),e.jsxs("div",{className:"text-xs text-slate-400",children:["¥",(j.pendingWithdrawals.amount/100).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"已完成提现"}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:j.completedWithdrawals.count}),e.jsxs("div",{className:"text-xs text-slate-400",children:["¥",(j.completedWithdrawals.amount/100).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-border-dark mb-6",children:[e.jsx("button",{className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px ${m==="config"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,onClick:()=>T("config"),children:"系统配置"}),e.jsxs("button",{className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px ${m==="withdrawals"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,onClick:()=>T("withdrawals"),children:["提现管理",j&&j.pendingWithdrawals.count>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:j.pendingWithdrawals.count})]})]}),m==="config"&&p&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:p.isActive,onChange:P=>f({...p,isActive:P.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"启用推荐系统"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"推荐人奖励积分"}),e.jsx("input",{type:"number",min:"0",value:p.referrerBonus,onChange:P=>f({...p,referrerBonus:parseInt(P.target.value)||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"成功推荐新用户后，推荐人获得的积分"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"被推荐人奖励积分"}),e.jsx("input",{type:"number",min:"0",value:p.refereeBonus,onChange:P=>f({...p,refereeBonus:parseInt(P.target.value)||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"新用户使用推荐码注册后获得的积分"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"充值返利比例 (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:(p.commissionRate*100).toFixed(1),onChange:P=>f({...p,commissionRate:parseFloat(P.target.value)/100||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"被推荐人充值后，推荐人获得的返利比例"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最低提现金额 (元)"}),e.jsx("input",{type:"number",min:"1",value:p.minWithdrawAmount/100,onChange:P=>f({...p,minWithdrawAmount:(parseFloat(P.target.value)||0)*100}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"用户申请提现的最低金额门槛"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"积分兑换比例 (1元=?积分)"}),e.jsx("input",{type:"number",min:"1",value:p.withdrawToCreditsRate,onChange:P=>f({...p,withdrawToCreditsRate:parseInt(P.target.value)||100}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"用户将返利余额兑换积分的比例"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:E,disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"保存中...":"保存配置"})})]}),m==="withdrawals"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("select",{value:V,onChange:P=>R(P.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"PENDING",children:"待处理"}),e.jsx("option",{value:"APPROVED",children:"已通过"}),e.jsx("option",{value:"COMPLETED",children:"已完成"}),e.jsx("option",{value:"REJECTED",children:"已拒绝"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"用户"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"金额"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"类型"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"支付宝"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"状态"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"申请时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsx("tbody",{children:G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-500 dark:text-gray-400",children:"暂无提现申请"})}):G.map(P=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:P.user.nickname||P.user.username||"未知"}),e.jsx("div",{className:"text-xs text-slate-500",children:P.user.phone})]}),e.jsxs("td",{className:"px-4 py-4 text-orange-500 font-medium",children:["¥",(P.amount/100).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4",children:P.type==="ALIPAY"?"提现到支付宝":"兑换积分"}),e.jsx("td",{className:"px-4 py-4",children:P.type==="ALIPAY"?e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:P.alipayName}),e.jsx("div",{className:"text-slate-500",children:P.alipayAccount})]}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${rm[P.status]}`,children:sm[P.status]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:new Date(P.createdAt).toLocaleString()}),e.jsxs("td",{className:"px-4 py-4",children:[P.status==="PENDING"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(P.id,"approve"),className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"通过"}),e.jsx("button",{onClick:()=>{const M=prompt("请输入拒绝原因:");M&&v(P.id,"reject",M)},className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:"拒绝"})]}),P.status==="APPROVED"&&e.jsx("button",{onClick:()=>v(P.id,"complete"),className:"px-3 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600",children:"标记完成"}),P.status==="REJECTED"&&P.rejectReason&&e.jsx("span",{className:"text-xs text-red-500",children:P.rejectReason}),P.status==="COMPLETED"&&P.creditsGranted&&e.jsxs("span",{className:"text-xs text-green-500",children:["+",P.creditsGranted,"积分"]})]})]},P.id))})]})})]})]})},mx=[{value:"NOTIFICATION",label:"通知"},{value:"ANNOUNCEMENT",label:"公告"},{value:"PROMOTION",label:"促销"},{value:"SYSTEM",label:"系统"}],lm=[{value:"ALL",label:"所有用户"},{value:"ROLE",label:"指定角色"}],im=[{value:"USER",label:"普通用户"},{value:"VIP",label:"VIP用户"},{value:"SVIP",label:"SVIP用户"}],om=()=>{const[s,A]=a.useState(!0),[n,_]=a.useState([]),[m,T]=a.useState(!1),[p,f]=a.useState(!1),[j,$]=a.useState({title:"",content:"",type:"NOTIFICATION",targetType:"ALL",targetRoles:[]}),G=a.useCallback(async()=>{A(!0);try{const x=await b.get("/messages/admin/list");x.success&&_(x.data.list||[])}catch{}finally{A(!1)}},[]);a.useEffect(()=>{G()},[G]);const F=async()=>{if(!j.title.trim()||!j.content.trim()){i.error("请填写标题和内容");return}if(j.targetType==="ROLE"&&j.targetRoles.length===0){i.error("请选择目标角色");return}f(!0);try{const x=await b.post("/messages/admin/send",{title:j.title,content:j.content,type:j.type,targetType:j.targetType,targetRoles:j.targetRoles});x.success?(i.success(x.message),T(!1),$({title:"",content:"",type:"NOTIFICATION",targetType:"ALL",targetRoles:[]}),G()):i.error(x.message)}catch(x){i.error(x.message||"发送失败")}finally{f(!1)}},V=async x=>{if(confirm("确定删除此消息？"))try{(await b.delete(`/messages/admin/${x}`)).success&&(i.success("删除成功"),G())}catch(E){i.error(E.message||"删除失败")}},R=x=>{$(E=>({...E,targetRoles:E.targetRoles.includes(x)?E.targetRoles.filter(v=>v!==x):[...E.targetRoles,x]}))};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"站内消息管理"}),e.jsx("p",{className:"text-slate-500 dark:text-gray-400 mt-1",children:"撰写和管理系统消息"})]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-neutral-800 dark:bg-white text-white dark:text-black rounded-lg text-sm font-medium hover:opacity-90 transition-all flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"}),"撰写消息"]})]}),e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-neutral-400 animate-spin",children:"progress_activity"})}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"mail"}),e.jsx("p",{children:"暂无消息"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"标题"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"类型"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"目标"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"送达/已读"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"发送时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsx("tbody",{children:n.map(x=>{var E;return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:x.title}),e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-xs",children:x.content})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded",children:((E=mx.find(v=>v.value===x.type))==null?void 0:E.label)||x.type})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-gray-400",children:x.targetType==="ALL"?"所有用户":x.targetRoles.join(", ")}),e.jsxs("td",{className:"px-4 py-4 text-sm",children:[e.jsx("span",{className:"text-slate-900 dark:text-white",children:x.recipientCount}),e.jsx("span",{className:"text-slate-400 mx-1",children:"/"}),e.jsx("span",{className:"text-green-500",children:x.readCount})]}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:new Date(x.createdAt).toLocaleString()}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:()=>V(x.id),className:"text-red-500 hover:text-red-600 text-sm",children:"删除"})})]},x.id)})})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl p-6 w-full max-w-lg mx-4 border border-slate-200 dark:border-border-dark",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"撰写消息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"标题"}),e.jsx("input",{type:"text",value:j.title,onChange:x=>$({...j,title:x.target.value}),placeholder:"消息标题",className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"内容"}),e.jsx("textarea",{value:j.content,onChange:x=>$({...j,content:x.target.value}),placeholder:"消息内容",rows:4,className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"消息类型"}),e.jsx("div",{className:"flex gap-2",children:mx.map(x=>e.jsx("button",{onClick:()=>$({...j,type:x.value}),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${j.type===x.value?"border-neutral-800 dark:border-white bg-neutral-800 dark:bg-white text-white dark:text-black":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:x.label},x.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"发送目标"}),e.jsx("div",{className:"flex gap-2 mb-2",children:lm.map(x=>e.jsx("button",{onClick:()=>$({...j,targetType:x.value,targetRoles:[]}),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${j.targetType===x.value?"border-neutral-800 dark:border-white bg-neutral-800 dark:bg-white text-white dark:text-black":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:x.label},x.value))}),j.targetType==="ROLE"&&e.jsx("div",{className:"flex gap-2 mt-2",children:im.map(x=>e.jsx("button",{onClick:()=>R(x.value),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${j.targetRoles.includes(x.value)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-600":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:x.label},x.value))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 border border-slate-200 dark:border-border-dark rounded-lg text-sm",children:"取消"}),e.jsx("button",{onClick:F,disabled:p,className:"flex-1 py-2 bg-neutral-800 dark:bg-white text-white dark:text-black rounded-lg text-sm font-medium hover:opacity-90 disabled:opacity-50",children:p?"发送中...":"发送消息"})]})]})})]})},nm=()=>{const[s,A]=a.useState(!1),[n,_]=a.useState(!0),[m,T]=a.useState("oss"),[p,f]=a.useState("oss"),[j,$]=a.useState(""),[G,F]=a.useState("");a.useEffect(()=>{V()},[]);const V=async()=>{var x,E;_(!0);try{const v=await b.get("/admin/settings/storage"),{mode:P,localBaseUrl:M}=v.data;T(P),f(P),$(M||""),F(M||"")}catch(v){i.error(((E=(x=v.response)==null?void 0:x.data)==null?void 0:E.message)||"获取配置失败")}finally{_(!1)}},R=async()=>{var x,E;if(m==="local"&&!j.trim()){i.error("请输入本地存储的基础 URL");return}A(!0);try{await b.put("/admin/settings/storage",{mode:m,localBaseUrl:j.trim()}),f(m),F(j.trim()),i.success("存储配置已更新")}catch(v){i.error(((E=(x=v.response)==null?void 0:x.data)==null?void 0:E.message)||"保存失败")}finally{A(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"存储设置"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"配置文件存储方式：阿里云 OSS、本地服务器存储或直接使用原始 URL"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"存储模式"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors hover:border-blue-500 dark:border-gray-700 dark:hover:border-blue-500",style:{borderColor:m==="oss"?"#3b82f6":void 0},children:[e.jsx("input",{type:"radio",name:"storage-mode",value:"oss",checked:m==="oss",onChange:x=>T(x.target.value),className:"mt-1"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"cloud"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"阿里云 OSS"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"使用阿里云对象存储服务，支持 CDN 加速，适合生产环境"})]})]}),e.jsxs("label",{className:"flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors hover:border-blue-500 dark:border-gray-700 dark:hover:border-blue-500",style:{borderColor:m==="local"?"#3b82f6":void 0},children:[e.jsx("input",{type:"radio",name:"storage-mode",value:"local",checked:m==="local",onChange:x=>T(x.target.value),className:"mt-1"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-green-600",children:"storage"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"本地服务器存储"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"文件存储在服务器本地磁盘，适合开发测试环境"})]})]}),e.jsxs("label",{className:"flex items-start p-4 border-2 rounded-lg cursor-pointer transition-colors hover:border-blue-500 dark:border-gray-700 dark:hover:border-blue-500",style:{borderColor:m==="original"?"#3b82f6":void 0},children:[e.jsx("input",{type:"radio",name:"storage-mode",value:"original",checked:m==="original",onChange:x=>T(x.target.value),className:"mt-1"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"link"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"原始 URL"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"直接使用上游返回的原始 URL，节约带宽和流量费用"})]})]})]})]}),m==="local"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"本地存储基础 URL"}),e.jsx("input",{type:"text",value:j,onChange:x=>$(x.target.value),placeholder:"例如: https://api.waule.ai",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"文件将存储在服务器的 public/images 目录，通过此 URL 访问"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400",children:"info"}),e.jsxs("div",{className:"flex-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-2",children:"切换说明："}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"新上传的文件将使用选定的存储方式"}),e.jsx("li",{children:"已有文件的链接仍然可以正常访问"}),e.jsx("li",{children:"系统会自动处理不同存储源的文件"})]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:R,disabled:s||m===p&&j===G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"保存中...":"保存配置"}),e.jsx("button",{onClick:()=>{T(p),$(G)},disabled:s,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"重置"})]})]})]})},Zl=({data:s,height:A=60,unit:n=""})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:A},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const _=Math.max(...s.map(p=>p.value),1);if(s.reduce((p,f)=>p+f.value,0)===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:A},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const T=A-20;return e.jsxs("div",{className:"flex flex-col",style:{height:A},children:[e.jsx("div",{className:"flex items-end gap-1 flex-1",style:{height:T},children:s.map((p,f)=>{const j=p.value/_*100;return e.jsx("div",{className:"flex-1 h-full flex items-end",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t transition-all duration-300",style:{height:`${j}%`,minHeight:p.value>0?"3px":"0px"},title:`${p.label}: ${p.value}${n}`})},f)})}),e.jsx("div",{className:"flex gap-1 mt-1",children:s.map((p,f)=>e.jsx("div",{className:"flex-1 text-center",children:e.jsx("span",{className:"text-[10px] text-gray-400",children:p.label})},f))})]})},cm=({rate:s})=>{const A=typeof s=="string"?parseFloat(s):s,n=A>0,_=A===0;return e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${_?"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400":n?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"}`,children:[n?"+":"",A,"%"]})},xm=({role:s})=>{const A={ADMIN:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",SVIP:"bg-neutral-100 text-neutral-700 dark:bg-neutral-900/30 dark:text-neutral-400",VIP:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",USER:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"};return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${A[s]||A.USER}`,children:s})},mm=()=>{var $,G,F,V,R,x,E,v,P,M,B,N,r,h,D,U,W,y,u,w,k,q,Y,J,se,Se,oe,ye,Ue,Nt,wt,Oe,C,ee,ae,le;const[s,A]=a.useState(null),[n,_]=a.useState(!0),[m,T]=a.useState(null),[p,f]=a.useState(null),j=a.useCallback(async()=>{var Z,ne,he;try{const ct=await b.admin.getStats(),Ea=((Z=ct.data)==null?void 0:Z.data)||ct.data;A(Ea),f(new Date),T(null)}catch(ct){T(((he=(ne=ct.response)==null?void 0:ne.data)==null?void 0:he.message)||"加载数据失败")}finally{_(!1)}},[]);return a.useEffect(()=>{j();const Z=setInterval(j,3e4);return()=>clearInterval(Z)},[j]),n&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载运营数据中..."})]})}):m&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:m}),e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"重试"})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"运营仪表板"}),p&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["最后更新: ",p.toLocaleTimeString("zh-CN")]})]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"总用户数"}),e.jsx("p",{className:"text-2xl font-bold",children:((G=($=s==null?void 0:s.users)==null?void 0:$.total)==null?void 0:G.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["活跃: ",((F=s==null?void 0:s.users)==null?void 0:F.active)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"付费用户"}),e.jsx("p",{className:"text-2xl font-bold",children:((V=s==null?void 0:s.users)==null?void 0:V.paidTotal)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["VIP: ",((R=s==null?void 0:s.users)==null?void 0:R.vip)||0," | SVIP: ",((x=s==null?void 0:s.users)==null?void 0:x.svip)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日新增"}),e.jsx("p",{className:"text-2xl font-bold",children:((E=s==null?void 0:s.users)==null?void 0:E.todayNew)||0}),e.jsxs("p",{className:"text-xs opacity-60 flex items-center gap-1",children:["较昨日 ",e.jsx(cm,{rate:((v=s==null?void 0:s.users)==null?void 0:v.growthRate)||0})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日收入"}),e.jsxs("p",{className:"text-2xl font-bold",children:["¥",(((P=s==null?void 0:s.revenue)==null?void 0:P.today)||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs opacity-60",children:["本月: ¥",(((M=s==null?void 0:s.revenue)==null?void 0:M.month)||0).toFixed(0)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:((B=s==null?void 0:s.online)==null?void 0:B.current)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日峰值: ",((N=s==null?void 0:s.online)==null?void 0:N.peakToday)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日AI调用"}),e.jsx("p",{className:"text-2xl font-bold",children:((h=(r=s==null?void 0:s.usage)==null?void 0:r.todayRecords)==null?void 0:h.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["消耗: ",((D=s==null?void 0:s.usage)==null?void 0:D.todayCredits)||0," 积分"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-neutral-500 text-lg",children:"folder"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"活跃项目"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((U=s==null?void 0:s.projects)==null?void 0:U.active)||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["总计: ",((W=s==null?void 0:s.projects)==null?void 0:W.total)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"photo_library"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"资产总数"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((u=(y=s==null?void 0:s.assets)==null?void 0:y.total)==null?void 0:u.toLocaleString())||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["今日新增: ",((w=s==null?void 0:s.assets)==null?void 0:w.todayNew)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"auto_awesome"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AI总调用"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((q=(k=s==null?void 0:s.usage)==null?void 0:k.totalRecords)==null?void 0:q.toLocaleString())||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"历史累计"})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500 text-lg",children:"person_add"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"今日新付费"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Y=s==null?void 0:s.users)==null?void 0:Y.todayNewPaid)||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"新增VIP/SVIP用户"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"show_chart"}),"24小时活跃度"]}),e.jsx(Zl,{data:((se=(J=s==null?void 0:s.trends)==null?void 0:J.hourlyActivity)==null?void 0:se.map(Z=>({label:`${Z.hour}`,value:Z.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500",children:"trending_up"}),"7天用户增长"]}),e.jsx(Zl,{data:((oe=(Se=s==null?void 0:s.trends)==null?void 0:Se.dailyUserGrowth)==null?void 0:oe.map(Z=>({label:Z.date.slice(5),value:Z.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"payments"}),"7天收入趋势"]}),e.jsx(Zl,{data:((Ue=(ye=s==null?void 0:s.trends)==null?void 0:ye.dailyRevenue)==null?void 0:Ue.map(Z=>({label:Z.date.slice(5),value:Z.amount})))||[],height:80,unit:"元"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"}),"最近注册用户"]}),e.jsxs("div",{className:"space-y-2",children:[(wt=(Nt=s==null?void 0:s.recent)==null?void 0:Nt.users)==null?void 0:wt.map(Z=>{var ne;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-neutral-400 to-neutral-500 flex items-center justify-center text-white text-sm font-medium",children:(Z.nickname||Z.phone||"?")[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Z.nickname||((ne=Z.phone)==null?void 0:ne.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(Z.createdAt).toLocaleString("zh-CN")})]})]}),e.jsx(xm,{role:Z.role})]},Z.id)}),(!((Oe=s==null?void 0:s.recent)!=null&&Oe.users)||s.recent.users.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无数据"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"receipt_long"}),"最近成功订单"]}),e.jsxs("div",{className:"space-y-2",children:[(ee=(C=s==null?void 0:s.recent)==null?void 0:C.orders)==null?void 0:ee.map(Z=>{var ne,he,ct;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:((ne=Z.user)==null?void 0:ne.nickname)||((ct=(he=Z.user)==null?void 0:he.phone)==null?void 0:ct.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知用户"}),e.jsx("p",{className:"text-xs text-gray-400",children:Z.paidAt?new Date(Z.paidAt).toLocaleString("zh-CN"):"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["¥",(Z.amount/100).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["+",Z.credits," 积分"]})]})]},Z.id)}),(!((ae=s==null?void 0:s.recent)!=null&&ae.orders)||s.recent.orders.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无订单"})]})]})]}),((le=s==null?void 0:s.usage)==null?void 0:le.byOperation)&&s.usage.byOperation.length>0&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-neutral-500",children:"analytics"}),"7天AI使用分布"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:s.usage.byOperation.slice(0,12).map((Z,ne)=>{var he;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",title:Z.operation,children:Z.operation}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Z._count}),e.jsxs("p",{className:"text-xs text-gray-400",children:[((he=Z._sum)==null?void 0:he.creditsCharged)||0," 积分"]})]},ne)})})]})]})},fm=()=>{const s=o0(),A=[{name:"仪表板",path:"/frame25",icon:"dashboard",exact:!0},{name:"服务器监控",path:"/frame25/server-monitor",icon:"monitoring"},{name:"任务管理",path:"/frame25/tasks",icon:"task_alt"},{name:"用户管理",path:"/frame25/users",icon:"group"},{name:"等级权限",path:"/frame25/user-levels",icon:"shield_person"},{name:"模型配置",path:"/frame25/model-config",icon:"smart_toy"},{name:"智能体配置",path:"/frame25/agents",icon:"psychology"},{name:"计费管理",path:"/frame25/billing",icon:"receipt_long"},{name:"支付配置",path:"/frame25/payment-config",icon:"account_balance_wallet"},{name:"套餐管理",path:"/frame25/packages",icon:"redeem"},{name:"兑换码管理",path:"/frame25/redeem-codes",icon:"confirmation_number"},{name:"存储设置",path:"/frame25/storage-settings",icon:"storage"},{name:"节点提示词",path:"/frame25/node-prompts",icon:"edit_note"},{name:"推荐返利",path:"/frame25/referral",icon:"share"},{name:"站内消息",path:"/frame25/messages",icon:"mail"}],n=(_,m=!1)=>m?s.pathname===_:s.pathname.startsWith(_);return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("aside",{className:"w-64 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"管理后台"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"系统管理与配置"})]}),e.jsx("nav",{className:"space-y-1",children:A.map(_=>e.jsxs(n0,{to:_.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${n(_.path,_.exact)?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:_.icon}),e.jsx("span",{className:"text-sm font-medium",children:_.name})]},_.path))})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs(c0,{children:[e.jsx(Le,{index:!0,element:e.jsx(mm,{})}),e.jsx(Le,{path:"server-monitor",element:e.jsx(J0,{})}),e.jsx(Le,{path:"users",element:e.jsx(G0,{})}),e.jsx(Le,{path:"tasks",element:e.jsx(U0,{})}),e.jsx(Le,{path:"user-levels",element:e.jsx(Y0,{})}),e.jsx(Le,{path:"model-config",element:e.jsx(_0,{})}),e.jsx(Le,{path:"agents",element:e.jsx(D0,{})}),e.jsx(Le,{path:"billing",element:e.jsx(X0,{})}),e.jsx(Le,{path:"payment-config",element:e.jsx(H0,{})}),e.jsx(Le,{path:"packages",element:e.jsx(z0,{})}),e.jsx(Le,{path:"redeem-codes",element:e.jsx(W0,{})}),e.jsx(Le,{path:"node-prompts",element:e.jsx(am,{})}),e.jsx(Le,{path:"referral",element:e.jsx(dm,{})}),e.jsx(Le,{path:"messages",element:e.jsx(om,{})}),e.jsx(Le,{path:"storage-settings",element:e.jsx(nm,{})})]})})]})};export{fm as default};
