import{r as a,j as e,u as qc,L as Bc,a as Wc,b as at}from"./react-vendor-BvY2dB7B.js";import{c as m,b as n}from"./index-B-U_h0BA.js";import{c as ce}from"./createLucideIcon-CK1cQnin.js";import{C as ac,V as sc,I as rc,S as Os,L as _s,T as Yc}from"./video-CPXLMxBS.js";import{S as Zc}from"./shield-Cyh8LQDI.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ce("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ce("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ce("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ce("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),be=[{value:"21:9",label:"21:9"},{value:"16:9",label:"16:9"},{value:"4:3",label:"4:3"},{value:"3:2",label:"3:2"},{value:"5:4",label:"5:4"},{value:"1:1",label:"1:1"},{value:"4:5",label:"4:5"},{value:"2:3",label:"2:3"},{value:"3:4",label:"3:4"},{value:"9:16",label:"9:16"}],ut="gemini-2.5-pro",bt="gemini-2.5-flash",pt="gemini-2.5-flash-image",gt="gemini-3-pro-preview",ht="gemini-3-pro-image-preview",pa="doubao-seedance-1-0-pro-250528",ga="doubao-seedance-1-0-pro-fast-251015",ha="doubao-seedream-4-0-250828",ls="doubao-seedream-4-5-251128",St="qwen-image-edit-plus",Ct="wan2.2-animate-move",Tt="wan2.2-animate-mix",Et="video-style-transform",Rt="videoretalk",Ht="MiniMax-Hailuo-2.3",zt="MiniMax-Hailuo-2.3-Fast",qt="MiniMax-Hailuo-02",vt="speech-2.6-hd",Bt="sora-image",Wt="sora-video",Yt="viduq2-pro",Zt="viduq2-turbo",Jt="viduq2",Ue=s=>`https://generativelanguage.googleapis.com/v1beta/models/${s}:generateContent`,st="https://ark.cn-beijing.volces.com/api/v3",fa="https://dashscope.aliyuncs.com",rt=`${fa}/api/v1/services/aigc/image2video/video-synthesis`,Gs=`${fa}/api/v1/services/aigc/video-generation/video-synthesis`,ka="http://localhost:8000",Nt="https://api.vidu.cn/ent/v2",kx=()=>{const[s,N]=a.useState(!1),[o,U]=a.useState([]),[b,T]=a.useState("google_pro"),[h,y]=a.useState(!0),[E,L]=a.useState(!1),[D,O]=a.useState(null),[M,S]=a.useState("Gemini 2.5 Pro"),[C,G]=a.useState(!0),[A,H]=a.useState(""),[_,B]=a.useState(""),[f,r]=a.useState(""),[g,P]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[c,W]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[u,Q]=a.useState(null),[I,k]=a.useState("Gemini 2.5 Flash (视频分析)"),[z,J]=a.useState(!0),[Z,se]=a.useState(""),[Ae,oe]=a.useState(""),[ke,Pe]=a.useState(""),[kt,yt]=a.useState(["TEXT","IMAGE","VIDEO"]),[De,v]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40}),[ee,ae]=a.useState(null),[le,Y]=a.useState("Gemini 2.5 Flash Image"),[ne,pe]=a.useState(!0),[dt,ja]=a.useState(""),[vl,Vs]=a.useState(""),[Nl,Fs]=a.useState(""),[$s,Ks]=a.useState(["TEXT","IMAGE"]),[lt,va]=a.useState({supportedRatios:be.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:2}),[oc,Na]=a.useState(null),[wl,Ls]=a.useState("Gemini 3.0 Pro"),[Il,Qs]=a.useState(!0),[Xs,Hs]=a.useState(""),[Al,zs]=a.useState(""),[Sl,qs]=a.useState(""),[Bs,Ws]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[Fe,wt]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[wa,is]=a.useState({enableThinkingMode:!0,thinkingLevel:"medium"}),[Mt,Ia]=a.useState({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}),[nc,Aa]=a.useState(null),[Cl,Ys]=a.useState("Gemini 3 Pro Image"),[Tl,Zs]=a.useState(!0),[Js,er]=a.useState(""),[El,tr]=a.useState(""),[Rl,ar]=a.useState(""),[sr,rr]=a.useState(["TEXT","IMAGE"]),[Me,Pt]=a.useState({supportedRatios:be.map(t=>t.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}),[dr,os]=a.useState(null),[Ml,lr]=a.useState("Doubao SeeDance 1.0 Pro"),[Pl,ir]=a.useState(!0),[or,nr]=a.useState(""),[Dl,cr]=a.useState(""),[_l,xr]=a.useState(""),[mr,ur]=a.useState(["TEXT","IMAGE"]),[ye,ea]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}),[br,ns]=a.useState(null),[Gl,pr]=a.useState("Doubao SeeDance 1.0 Pro Fast"),[Ul,gr]=a.useState(!0),[hr,kr]=a.useState(""),[Ol,yr]=a.useState(""),[Vl,fr]=a.useState(""),[jr,vr]=a.useState(["TEXT","IMAGE"]),[fe,ta]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}),[Nr,cs]=a.useState(null),[Fl,wr]=a.useState("Doubao SeeDream 4.0"),[$l,Ir]=a.useState(!0),[Ar,Sr]=a.useState(""),[Kl,Cr]=a.useState(""),[Ll,Tr]=a.useState(""),[Er,Rr]=a.useState(["TEXT","IMAGE"]),[it,Sa]=a.useState({supportedRatios:be.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[Mr,xs]=a.useState(null),[Ql,Pr]=a.useState("Doubao SeeDream 4.5"),[Xl,Dr]=a.useState(!0),[_r,Gr]=a.useState(""),[Hl,Ur]=a.useState(""),[zl,Or]=a.useState(""),[Vr,Fr]=a.useState(["TEXT","IMAGE"]),[Be,aa]=a.useState({supportedRatios:be.map(t=>t.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}),[cc,Ca]=a.useState(null),[ql,ms]=a.useState("Qwen Image Edit Plus"),[Bl,us]=a.useState(!0),[$r,bs]=a.useState(""),[Ta,Dt]=a.useState(""),[Ea,_t]=a.useState(""),[Kr,ps]=a.useState(["TEXT","IMAGE"]),[ot,sa]=a.useState({supportedRatios:be.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[xc,Ra]=a.useState(null),[Wl,gs]=a.useState("Aliyun Wan Animate Move"),[Yl,hs]=a.useState(!0),[Lr,ks]=a.useState(""),[Ma,Gt]=a.useState(""),[Pa,Ut]=a.useState(""),[mc]=a.useState(["IMAGE","VIDEO"]),[Da,ys]=a.useState(["wan-std","wan-pro"]),[uc,_a]=a.useState(null),[Zl,fs]=a.useState("Aliyun Wan Animate Mix"),[Jl,js]=a.useState(!0),[Qr,vs]=a.useState(""),[Ga,Ot]=a.useState(""),[Ua,Vt]=a.useState(""),[bc]=a.useState(["IMAGE","VIDEO"]),[Oa,Ns]=a.useState(["wan-std","wan-pro"]),[pc,Va]=a.useState(null),[ei,ws]=a.useState("Aliyun Video Style Transform"),[ti,Is]=a.useState(!0),[Xr,As]=a.useState(""),[Fa,Ft]=a.useState(""),[$a,$t]=a.useState(""),[gc]=a.useState(["VIDEO"]),[ai,Ss]=a.useState(15),[Ka,Cs]=a.useState([0,1,2,3,4,5,6,7]),[hc,La]=a.useState(null),[si,Ts]=a.useState("Aliyun VideoRetalk"),[ri,Es]=a.useState(!0),[Hr,Rs]=a.useState(""),[Qa,Kt]=a.useState(""),[Xa,Lt]=a.useState(""),[zr,Ms]=a.useState(["VIDEO","AUDIO","IMAGE"]),[qr,Ps]=a.useState({video_extension:!1}),[kc,Ha]=a.useState(null),[di,Br]=a.useState("MiniMax Hailuo 2.3"),[li,Wr]=a.useState(!0),[Yr,Zr]=a.useState(""),[ii,Jr]=a.useState(""),[oi,ed]=a.useState(""),[td,ad]=a.useState(["TEXT","IMAGE"]),[je,ra]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}),[yc,za]=a.useState(null),[ni,sd]=a.useState("MiniMax Hailuo 2.3 Fast"),[ci,rd]=a.useState(!0),[dd,ld]=a.useState(""),[xi,id]=a.useState(""),[mi,od]=a.useState(""),[nd,cd]=a.useState(["TEXT","IMAGE"]),[ve,da]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}),[fc,qa]=a.useState(null),[ui,xd]=a.useState("MiniMax Hailuo 02"),[bi,md]=a.useState(!0),[ud,bd]=a.useState(""),[pi,pd]=a.useState(""),[gi,gd]=a.useState(""),[hd,kd]=a.useState(["TEXT","IMAGE"]),[Ne,la]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}),[Ds,Ba]=a.useState(null),[hi,yd]=a.useState("MiniMax Speech 2.6 HD"),[ki,fd]=a.useState(!0),[jd,vd]=a.useState(""),[yi,Nd]=a.useState(""),[fi,wd]=a.useState(""),[Id,Ad]=a.useState(["TEXT","AUDIO"]),[nt,Wa]=a.useState({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),[We,Ya]=a.useState({synth:!0,clone:!0,design:!0}),[jc,Za]=a.useState(null),[ji,Sd]=a.useState("Sora2 Image"),[vi,Cd]=a.useState(!0),[Td,Ed]=a.useState(""),[Ni,Rd]=a.useState(""),[wi,Md]=a.useState(""),[Pd,Dd]=a.useState(["TEXT","IMAGE"]),[ct,Ja]=a.useState({supportedRatios:be.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:5}),[vc,es]=a.useState(null),[Ii,_d]=a.useState("Sora2 Video"),[Ai,Gd]=a.useState(!0),[Ud,Od]=a.useState(""),[Si,Vd]=a.useState(""),[Ci,Fd]=a.useState(""),[$d,Kd]=a.useState(["TEXT","IMAGE","VIDEO"]),[Se,Qt]=a.useState({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}),[Nc,ts]=a.useState(null),[Ti,Ld]=a.useState("Vidu Q2 Pro"),[Ei,Qd]=a.useState(!0),[Xd,Hd]=a.useState(""),[Ri,zd]=a.useState(""),[Mi,qd]=a.useState(""),[Bd,Wd]=a.useState(["TEXT","IMAGE"]),[xe,It]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[wc,as]=a.useState(null),[Pi,Yd]=a.useState("Vidu Q2 Turbo"),[Di,Zd]=a.useState(!0),[Jd,el]=a.useState(""),[_i,tl]=a.useState(""),[Gi,al]=a.useState(""),[sl,rl]=a.useState(["TEXT","IMAGE"]),[me,At]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[Ic,ss]=a.useState(null),[Ui,dl]=a.useState("Vidu Q2"),[Oi,ll]=a.useState(!0),[il,ol]=a.useState(""),[Vi,nl]=a.useState(""),[Fi,cl]=a.useState(""),[xl,ml]=a.useState(["IMAGE"]),[we,ia]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0});a.useEffect(()=>{(async()=>{var x;try{const i=await m.get("/admin/settings/midjourney");y(((x=i.settings)==null?void 0:x.fastEnabled)??!0)}catch{}})()},[]);const Ac=async t=>{try{L(!0),await m.put("/admin/settings/midjourney",{fastEnabled:t}),y(t),n.success(t?"Fast 模式已启用":"Fast 模式已禁用")}catch{n.error("更新设置失败")}finally{L(!1)}};a.useEffect(()=>{(async()=>{var x,i,j,w,d,l,p,F,q,re,de,$,R,V,X,te,$e,Ye,Ki,Li,Qi,Xi,Hi,zi,qi,Bi,Wi,Yi,Zi,Ji,eo,to,ao,so,ro,lo,io,oo,no,co,xo,mo,uo,bo,po,go,ho,ko,yo,fo,jo,vo,No,wo,Io,Ao,So,Co,To,Eo,Ro,Mo,Po,Do,_o,Go,Uo,Oo,Vo,Fo,$o,Ko,Lo,Qo,Xo,Ho,zo,qo,Bo,Wo,Yo,Zo,Jo,en,tn,an,sn,rn,dn,ln,on,nn,cn,xn,mn,un,bn,pn,gn,hn,kn,yn,fn,jn,vn,Nn,wn,In,An,Sn,Cn,Tn,En,Rn,Mn,Pn,Dn,_n,Gn,Un,On,Vn,Fn,$n,Kn,Ln,Qn,Xn,Hn,zn;try{N(!0);const oa=await m.admin.getAIModels({provider:"google"}),na=await m.admin.getAIModels({provider:"bytedance"}),ca=await m.admin.getAIModels({provider:"doubao"}),xa=await m.admin.getAIModels({provider:"aliyun"}),ma=await m.admin.getAIModels({provider:"minimaxi"}),ua=await m.admin.getAIModels({provider:"sora"}),ba=await m.admin.getAIModels({provider:"vidu"}),$c=Array.isArray(oa==null?void 0:oa.data)?oa.data:Array.isArray(oa)?oa:[],Kc=Array.isArray(na==null?void 0:na.data)?na.data:Array.isArray(na)?na:[],Lc=Array.isArray(ca==null?void 0:ca.data)?ca.data:Array.isArray(ca)?ca:[],Qc=Array.isArray(xa==null?void 0:xa.data)?xa.data:Array.isArray(xa)?xa:[],Xc=Array.isArray(ma==null?void 0:ma.data)?ma.data:Array.isArray(ma)?ma:[],Hc=Array.isArray(ua==null?void 0:ua.data)?ua.data:Array.isArray(ua)?ua:[],zc=Array.isArray(ba==null?void 0:ba.data)?ba.data:Array.isArray(ba)?ba:[],ue=[...$c,...Kc,...Lc,...Qc,...Xc,...Hc,...zc];if(U(ue),!$i.current){const K={"doubao-seedream-4-0":ha,"doubao-seedance-1-0-pro-fast":ga,"doubao-seedance-1-0-pro":pa},rs=ue.filter(Xt=>K[Xt.modelId]);if(rs.length){for(const Xt of rs)try{await m.admin.updateAIModel(Xt.id,{modelId:K[Xt.modelId]})}catch{}await ge()}$i.current=!0}const _e=ue.find(K=>K.modelId===ut);_e?(O(_e.id),S(_e.name),G(_e.isActive),H(_e.pricePerUse||""),B(_e.apiKey||""),r(_e.apiUrl||Ue(ut)),P(Array.isArray((x=_e.config)==null?void 0:x.acceptedInputs)?_e.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:((i=_e.config)==null?void 0:i.maxTokens)??8192,temperature:((j=_e.config)==null?void 0:j.temperature)??.7,topP:((w=_e.config)==null?void 0:w.topP)??.95,topK:((d=_e.config)==null?void 0:d.topK)??40,frequencyPenalty:((l=_e.config)==null?void 0:l.frequencyPenalty)??0,presencePenalty:((p=_e.config)==null?void 0:p.presencePenalty)??0})):(O(null),S("Gemini 2.5 Pro"),G(!0),H(""),B(""),r(Ue(ut)),P(["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}));const Ke=ue.find(K=>K.modelId===bt);Ke?(Q(Ke.id),k(Ke.name),J(Ke.isActive),se(Ke.pricePerUse||""),oe(Ke.apiKey||""),Pe(Ke.apiUrl||Ue(bt)),yt(Array.isArray((F=Ke.config)==null?void 0:F.acceptedInputs)?Ke.config.acceptedInputs:["TEXT","IMAGE","VIDEO"]),v({maxTokens:((q=Ke.config)==null?void 0:q.maxTokens)??8192,temperature:((re=Ke.config)==null?void 0:re.temperature)??.7,topP:((de=Ke.config)==null?void 0:de.topP)??.95,topK:(($=Ke.config)==null?void 0:$.topK)??40})):(Q(null),k("Gemini 2.5 Flash (视频分析)"),J(!0),se(""),oe(""),Pe(Ue(bt)),yt(["TEXT","IMAGE","VIDEO"]),v({maxTokens:8192,temperature:.7,topP:.95,topK:40}));const Ze=ue.find(K=>K.modelId===pt);Ze?(ae(Ze.id),Y(Ze.name),pe(Ze.isActive),ja(Ze.pricePerUse||""),Vs(Ze.apiKey||""),Fs(Ze.apiUrl||Ue(pt)),Ks(Array.isArray((R=Ze.config)==null?void 0:R.acceptedInputs)?Ze.config.acceptedInputs:["TEXT","IMAGE"]),va({supportedRatios:((V=Ze.config)==null?void 0:V.supportedRatios)||be.map(K=>K.value),supportsImageToImage:((X=Ze.config)==null?void 0:X.supportsImageToImage)!==!1,maxReferenceImages:((te=Ze.config)==null?void 0:te.maxReferenceImages)??2})):(ae(null),Y("Gemini 2.5 Flash Image"),pe(!0),ja(""),Vs(""),Fs(Ue(pt)),Ks(["TEXT","IMAGE"]),va({supportedRatios:be.map(K=>K.value),supportsImageToImage:!0,maxReferenceImages:2}));const Te=ue.find(K=>K.modelId===gt);Te?(Na(Te.id),Ls(Te.name),Qs(Te.isActive),Hs(Te.pricePerUse||""),zs(Te.apiKey||""),qs(Te.apiUrl||Ue(gt)),Ws(Array.isArray(($e=Te.config)==null?void 0:$e.acceptedInputs)?Te.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),wt({maxTokens:((Ye=Te.config)==null?void 0:Ye.maxTokens)??8192,temperature:((Ki=Te.config)==null?void 0:Ki.temperature)??.7,topP:((Li=Te.config)==null?void 0:Li.topP)??.95,topK:((Qi=Te.config)==null?void 0:Qi.topK)??40,frequencyPenalty:((Xi=Te.config)==null?void 0:Xi.frequencyPenalty)??0,presencePenalty:((Hi=Te.config)==null?void 0:Hi.presencePenalty)??0}),is({enableThinkingMode:((zi=Te.config)==null?void 0:zi.enableThinkingMode)??!0,thinkingLevel:((qi=Te.config)==null?void 0:qi.thinkingLevel)||"medium"}),Ia({imageResolution:((Bi=Te.config)==null?void 0:Bi.imageResolution)||"media_resolution_high",pdfResolution:((Wi=Te.config)==null?void 0:Wi.pdfResolution)||"media_resolution_medium",videoResolution:((Yi=Te.config)==null?void 0:Yi.videoResolution)||"media_resolution_low"})):(Na(null),Ls("Gemini 3.0 Pro"),Qs(!0),Hs(""),zs(""),qs(Ue(gt)),Ws(["TEXT","IMAGE","VIDEO","DOCUMENT"]),wt({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),is({enableThinkingMode:!0,thinkingLevel:"medium"}),Ia({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}));const Ge=ue.find(K=>K.modelId===ht);Ge?(Aa(Ge.id),Ys(Ge.name),Zs(Ge.isActive),er(Ge.pricePerUse||""),tr(Ge.apiKey||""),ar(Ge.apiUrl||Ue(ht)),rr(Array.isArray((Zi=Ge.config)==null?void 0:Zi.acceptedInputs)?Ge.config.acceptedInputs:["TEXT","IMAGE"]),Pt({supportedRatios:((Ji=Ge.config)==null?void 0:Ji.supportedRatios)||be.map(K=>K.value),supportedResolutions:((eo=Ge.config)==null?void 0:eo.supportedResolutions)||["2K","4K"],supportsImageToImage:((to=Ge.config)==null?void 0:to.supportsImageToImage)!==!1,supportsImageEditing:((ao=Ge.config)==null?void 0:ao.supportsImageEditing)===!0,maxReferenceImages:((so=Ge.config)==null?void 0:so.maxReferenceImages)??1,capabilities:((ro=Ge.config)==null?void 0:ro.capabilities)||["google_search","reasoning","text_rendering"]})):(Aa(null),Ys("Gemini 3 Pro Image"),Zs(!0),er(""),tr(""),ar(Ue(ht)),rr(["TEXT","IMAGE"]),Pt({supportedRatios:be.map(K=>K.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}));const Le=ue.find(K=>K.modelId===pa);Le?(os(Le.id),lr(Le.name),ir(Le.isActive),nr(Le.pricePerUse||""),cr(Le.apiKey||""),xr(Le.apiUrl||st),ur(Array.isArray((lo=Le.config)==null?void 0:lo.acceptedInputs)?Le.config.acceptedInputs:["TEXT","IMAGE"]),ea({supportedRatios:((io=Le.config)==null?void 0:io.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((oo=Le.config)==null?void 0:oo.supportedResolutions)||["720P","1080P","2K","4K"],supportedGenerationTypes:((no=Le.config)==null?void 0:no.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((co=Le.config)==null?void 0:co.supportedDurations)||[5,6,8,10,15,30]})):(os(null),lr("Doubao SeeDance 1.0 Pro"),ir(!0),nr(""),cr(""),xr(st),ur(["TEXT","IMAGE"]),ea({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}));const Qe=ue.find(K=>K.modelId===ga);Qe?(ns(Qe.id),pr(Qe.name),gr(Qe.isActive),kr(Qe.pricePerUse||""),yr(Qe.apiKey||""),fr(Qe.apiUrl||st),vr(Array.isArray((xo=Qe.config)==null?void 0:xo.acceptedInputs)?Qe.config.acceptedInputs:["TEXT","IMAGE"]),ta({supportedRatios:((mo=Qe.config)==null?void 0:mo.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((uo=Qe.config)==null?void 0:uo.supportedResolutions)||["720P","1080P"],supportedGenerationTypes:((bo=Qe.config)==null?void 0:bo.supportedGenerationTypes)||["文生视频","首帧"],supportedDurations:((po=Qe.config)==null?void 0:po.supportedDurations)||[5,6,8,10]})):(ns(null),pr("Doubao SeeDance 1.0 Pro Fast"),gr(!0),kr(""),yr(""),fr(st),vr(["TEXT","IMAGE"]),ta({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}));const Je=ue.find(K=>K.modelId===ha);Je?(cs(Je.id),wr(Je.name),Ir(Je.isActive),Sr(Je.pricePerUse||""),Cr(Je.apiKey||""),Tr(Je.apiUrl||st),Rr(Array.isArray((go=Je.config)==null?void 0:go.acceptedInputs)?Je.config.acceptedInputs:["TEXT","IMAGE"]),Sa({supportedRatios:((ho=Je.config)==null?void 0:ho.supportedRatios)||be.map(K=>K.value),supportsImageToImage:((ko=Je.config)==null?void 0:ko.supportsImageToImage)!==!1,maxReferenceImages:((yo=Je.config)==null?void 0:yo.maxReferenceImages)??10})):(cs(null),wr("Doubao SeeDream 4.0"),Ir(!0),Sr(""),Cr(""),Tr(st),Rr(["TEXT","IMAGE"]),Sa({supportedRatios:be.map(K=>K.value),supportsImageToImage:!0,maxReferenceImages:10}));const Xe=ue.find(K=>K.modelId===ls);Xe?(xs(Xe.id),Pr(Xe.name),Dr(Xe.isActive),Gr(Xe.pricePerUse||""),Ur(Xe.apiKey||""),Or(Xe.apiUrl||st),Fr(Array.isArray((fo=Xe.config)==null?void 0:fo.acceptedInputs)?Xe.config.acceptedInputs:["TEXT","IMAGE"]),aa({supportedRatios:((jo=Xe.config)==null?void 0:jo.supportedRatios)||be.map(K=>K.value),supportsImageToImage:((vo=Xe.config)==null?void 0:vo.supportsImageToImage)!==!1,supportsImageEditing:((No=Xe.config)==null?void 0:No.supportsImageEditing)===!0,maxReferenceImages:((wo=Xe.config)==null?void 0:wo.maxReferenceImages)??10})):(xs(null),Pr("Doubao SeeDream 4.5"),Dr(!0),Gr(""),Ur(""),Or(st),Fr(["TEXT","IMAGE"]),aa({supportedRatios:be.map(K=>K.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}));const et=ue.find(K=>K.modelId===St);et?(Ca(et.id),ms(et.name),us(et.isActive),bs(et.pricePerUse||""),Dt(et.apiKey||""),_t(et.apiUrl||`${fa}/api/v1/services/aigc/multimodal-generation/generation`),ps(Array.isArray((Io=et.config)==null?void 0:Io.acceptedInputs)?et.config.acceptedInputs:["TEXT","IMAGE"]),sa({supportedRatios:((Ao=et.config)==null?void 0:Ao.supportedRatios)||be.map(K=>K.value),supportsImageToImage:((So=et.config)==null?void 0:So.supportsImageToImage)!==!1,maxReferenceImages:((Co=et.config)==null?void 0:Co.maxReferenceImages)??10})):(Ca(null),ms("Qwen Image Edit Plus"),us(!0),bs(""),Dt(""),_t(`${fa}/api/v1/services/aigc/multimodal-generation/generation`),ps(["TEXT","IMAGE"]),sa({supportedRatios:be.map(K=>K.value),supportsImageToImage:!0,maxReferenceImages:10}));const ft=ue.find(K=>K.modelId===Ct);ft?(Ra(ft.id),gs(ft.name),hs(ft.isActive),ks(ft.pricePerUse||""),Gt(ft.apiKey||""),Ut(ft.apiUrl||rt),ys(Array.isArray((To=ft.config)==null?void 0:To.serviceModes)?ft.config.serviceModes:["wan-std","wan-pro"])):(Ra(null),gs("Aliyun Wan Animate Move"),hs(!0),ks(""),Gt(""),Ut(rt),ys(["wan-std","wan-pro"]));const jt=ue.find(K=>K.modelId===Tt);jt?(_a(jt.id),fs(jt.name),js(jt.isActive),vs(jt.pricePerUse||""),Ot(jt.apiKey||""),Vt(jt.apiUrl||rt),Ns(Array.isArray((Eo=jt.config)==null?void 0:Eo.serviceModes)?jt.config.serviceModes:["wan-std","wan-pro"])):(_a(null),fs("Aliyun Wan Animate Mix"),js(!0),vs(""),Ot(""),Vt(rt),Ns(["wan-std","wan-pro"]));const xt=ue.find(K=>K.modelId===Et);xt?(Va(xt.id),ws(xt.name),Is(xt.isActive),As(xt.pricePerUse||""),Ft(xt.apiKey||""),$t(xt.apiUrl||Gs),Cs(Array.isArray((Ro=xt.config)==null?void 0:Ro.supportedStyles)?xt.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ss(((Mo=xt.config)==null?void 0:Mo.video_fps)??15)):(Va(null),ws("Aliyun Video Style Transform"),Is(!0),As(""),Ft(""),$t(Gs),Cs([0,1,2,3,4,5,6,7]),Ss(15));const mt=ue.find(K=>K.modelId===Rt);mt?(La(mt.id),Ts(mt.name),Es(mt.isActive),Rs(mt.pricePerUse||""),Kt(mt.apiKey||""),Lt(mt.apiUrl||`${rt}/`),Ms(Array.isArray((Po=mt.config)==null?void 0:Po.acceptedInputs)?mt.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),Ps({video_extension:!!((Do=mt.config)!=null&&Do.video_extension)})):(La(null),Ts("Aliyun VideoRetalk"),Es(!0),Rs(""),Kt(""),Lt(`${rt}/`),Ms(["VIDEO","AUDIO","IMAGE"]),Ps({video_extension:!1}));const He=ue.find(K=>K.modelId===Ht);He?(Ha(He.id),Br(He.name),Wr(He.isActive),Zr(He.pricePerUse||""),Jr(He.apiKey||""),ed(He.apiUrl||"https://api.minimaxi.com/v1"),ad(Array.isArray((_o=He.config)==null?void 0:_o.acceptedInputs)?He.config.acceptedInputs:["TEXT","IMAGE"]),ra({supportedRatios:((Go=He.config)==null?void 0:Go.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((Uo=He.config)==null?void 0:Uo.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((Oo=He.config)==null?void 0:Oo.supportedGenerationTypes)||["文生视频","参考图","首帧"],supportedDurations:((Vo=He.config)==null?void 0:Vo.supportedDurations)||[6,10]})):(Ha(null),Br("MiniMax Hailuo 2.3"),Wr(!0),Zr(""),Jr(""),ed("https://api.minimaxi.com/v1"),ad(["TEXT","IMAGE"]),ra({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}));const ze=ue.find(K=>K.modelId===zt);ze?(za(ze.id),sd(ze.name),rd(ze.isActive),ld(ze.pricePerUse||""),id(ze.apiKey||""),od(ze.apiUrl||"https://api.minimaxi.com/v1"),cd(Array.isArray((Fo=ze.config)==null?void 0:Fo.acceptedInputs)?ze.config.acceptedInputs:["TEXT","IMAGE"]),da({supportedRatios:(($o=ze.config)==null?void 0:$o.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((Ko=ze.config)==null?void 0:Ko.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((Lo=ze.config)==null?void 0:Lo.supportedGenerationTypes)||["首帧"],supportedDurations:((Qo=ze.config)==null?void 0:Qo.supportedDurations)||[6,10]})):(za(null),sd("MiniMax Hailuo 2.3 Fast"),rd(!0),ld(""),id(""),od("https://api.minimaxi.com/v1"),cd(["TEXT","IMAGE"]),da({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}));const qe=ue.find(K=>K.modelId===qt);qe?(qa(qe.id),xd(qe.name),md(qe.isActive),bd(qe.pricePerUse||""),pd(qe.apiKey||""),gd(qe.apiUrl||"https://api.minimaxi.com/v1"),kd(Array.isArray((Xo=qe.config)==null?void 0:Xo.acceptedInputs)?qe.config.acceptedInputs:["TEXT","IMAGE"]),la({supportedRatios:((Ho=qe.config)==null?void 0:Ho.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((zo=qe.config)==null?void 0:zo.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((qo=qe.config)==null?void 0:qo.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Bo=qe.config)==null?void 0:Bo.supportedDurations)||[6,8,10]})):(qa(null),xd("MiniMax Hailuo 02"),md(!0),bd(""),pd(""),gd("https://api.minimaxi.com/v1"),kd(["TEXT","IMAGE"]),la({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}));const Oe=ue.find(K=>K.modelId===vt);if(Oe){Ba(Oe.id),yd(Oe.name),fd(Oe.isActive),vd(Oe.pricePerUse||""),Nd(Oe.apiKey||""),wd(Oe.apiUrl||"https://api.minimaxi.com/v1"),Ad(Array.isArray((Wo=Oe.config)==null?void 0:Wo.acceptedInputs)?Oe.config.acceptedInputs:["TEXT","AUDIO"]),Wa({supportedFormats:((Yo=Oe.config)==null?void 0:Yo.supportedFormats)||["mp3","wav"],sampleRateMin:((Zo=Oe.config)==null?void 0:Zo.sampleRateMin)??16e3,supportsStereo:((Jo=Oe.config)==null?void 0:Jo.supportsStereo)!==!1});const K=Array.isArray(Oe.capabilities)?Oe.capabilities:[],rs=K.find(ds=>ds.capability==="语音合成"),Xt=K.find(ds=>ds.capability==="音色克隆"),qn=K.find(ds=>ds.capability==="音色设计");Ya({synth:rs?!!rs.supported:!0,clone:Xt?!!Xt.supported:!0,design:qn?!!qn.supported:!0})}else Ba(null),yd("MiniMax Speech 2.6 HD"),fd(!0),vd(""),Nd(""),wd("https://api.minimaxi.com/v1"),Ad(["TEXT","AUDIO"]),Wa({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),Ya({synth:!0,clone:!0,design:!0});const tt=ue.find(K=>K.modelId===Bt);tt?(Za(tt.id),Sd(tt.name),Cd(tt.isActive),Ed(tt.pricePerUse||""),Rd(tt.apiKey||""),Md(tt.apiUrl||ka),Dd(Array.isArray((en=tt.config)==null?void 0:en.acceptedInputs)?tt.config.acceptedInputs:["TEXT","IMAGE"]),Ja({supportedRatios:((tn=tt.config)==null?void 0:tn.supportedRatios)||be.map(K=>K.value),supportsImageToImage:((an=tt.config)==null?void 0:an.supportsImageToImage)!==!1,maxReferenceImages:((sn=tt.config)==null?void 0:sn.maxReferenceImages)??5})):(Za(null),Sd("Sora2 Image"),Cd(!0),Ed(""),Rd(""),Md(ka),Dd(["TEXT","IMAGE"]),Ja({supportedRatios:be.map(K=>K.value),supportsImageToImage:!0,maxReferenceImages:5}));const Ve=ue.find(K=>K.modelId===Wt);Ve?(es(Ve.id),_d(Ve.name),Gd(Ve.isActive),Od(Ve.pricePerUse||""),Vd(Ve.apiKey||""),Fd(Ve.apiUrl||ka),Kd(Array.isArray((rn=Ve.config)==null?void 0:rn.acceptedInputs)?Ve.config.acceptedInputs:["TEXT","IMAGE"]),Qt({supportedRatios:((dn=Ve.config)==null?void 0:dn.supportedRatios)||["landscape","portrait"],supportsImageToVideo:((ln=Ve.config)==null?void 0:ln.supportsImageToVideo)!==!1,maxReferenceImages:((on=Ve.config)==null?void 0:on.maxReferenceImages)??1,supportedGenerationTypes:((nn=Ve.config)==null?void 0:nn.supportedGenerationTypes)||["文生视频","图生视频","视频生视频"],supportedDurations:((cn=Ve.config)==null?void 0:cn.supportedDurations)||[10,15,25]})):(es(null),_d("Sora2 Video"),Gd(!0),Od(""),Vd(""),Fd(ka),Kd(["TEXT","IMAGE","VIDEO"]),Qt({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}));const Ee=ue.find(K=>K.modelId===Yt);Ee?(ts(Ee.id),Ld(Ee.name),Qd(Ee.isActive),Hd(Ee.pricePerUse||""),zd(Ee.apiKey||""),qd(Ee.apiUrl||Nt),Wd(Array.isArray((xn=Ee.config)==null?void 0:xn.acceptedInputs)?Ee.config.acceptedInputs:["TEXT","IMAGE"]),It({supportedRatios:((mn=Ee.config)==null?void 0:mn.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((un=Ee.config)==null?void 0:un.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((bn=Ee.config)==null?void 0:bn.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((pn=Ee.config)==null?void 0:pn.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((gn=Ee.config)==null?void 0:gn.maxDuration)??10,supportedFps:((hn=Ee.config)==null?void 0:hn.supportedFps)||[24,30],maxResolution:((kn=Ee.config)==null?void 0:kn.maxResolution)||"1920x1080",supportsImageToVideo:((yn=Ee.config)==null?void 0:yn.supportsImageToVideo)!==!1,maxReferenceImages:((fn=Ee.config)==null?void 0:fn.maxReferenceImages)??2,supportsSubjects:((jn=Ee.config)==null?void 0:jn.supportsSubjects)!==!1,supportsAudioOutput:((vn=Ee.config)==null?void 0:vn.supportsAudioOutput)!==!1})):(ts(null),Ld("Vidu Q2 Pro"),Qd(!0),Hd(""),zd(""),qd(Nt),Wd(["TEXT","IMAGE"]),It({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Re=ue.find(K=>K.modelId===Zt);Re?(as(Re.id),Yd(Re.name),Zd(Re.isActive),el(Re.pricePerUse||""),tl(Re.apiKey||""),al(Re.apiUrl||Nt),rl(Array.isArray((Nn=Re.config)==null?void 0:Nn.acceptedInputs)?Re.config.acceptedInputs:["TEXT","IMAGE"]),At({supportedRatios:((wn=Re.config)==null?void 0:wn.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((In=Re.config)==null?void 0:In.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((An=Re.config)==null?void 0:An.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Sn=Re.config)==null?void 0:Sn.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Cn=Re.config)==null?void 0:Cn.maxDuration)??10,supportedFps:((Tn=Re.config)==null?void 0:Tn.supportedFps)||[24,30],maxResolution:((En=Re.config)==null?void 0:En.maxResolution)||"1920x1080",supportsImageToVideo:((Rn=Re.config)==null?void 0:Rn.supportsImageToVideo)!==!1,maxReferenceImages:((Mn=Re.config)==null?void 0:Mn.maxReferenceImages)??2,supportsSubjects:((Pn=Re.config)==null?void 0:Pn.supportsSubjects)!==!1,supportsAudioOutput:((Dn=Re.config)==null?void 0:Dn.supportsAudioOutput)!==!1})):(as(null),Yd("Vidu Q2 Turbo"),Zd(!0),el(""),tl(""),al(Nt),rl(["TEXT","IMAGE"]),At({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Ie=ue.find(K=>K.modelId===Jt);Ie?(ss(Ie.id),dl(Ie.name),ll(Ie.isActive),ol(Ie.pricePerUse||""),nl(Ie.apiKey||""),cl(Ie.apiUrl||Nt),ml(Array.isArray((_n=Ie.config)==null?void 0:_n.acceptedInputs)?Ie.config.acceptedInputs:["IMAGE"]),ia({supportedRatios:((Gn=Ie.config)==null?void 0:Gn.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((Un=Ie.config)==null?void 0:Un.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((On=Ie.config)==null?void 0:On.supportedGenerationTypes)||["参考图生视频"],supportedDurations:((Vn=Ie.config)==null?void 0:Vn.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Fn=Ie.config)==null?void 0:Fn.maxDuration)??10,supportedFps:(($n=Ie.config)==null?void 0:$n.supportedFps)||[24,30],maxResolution:((Kn=Ie.config)==null?void 0:Kn.maxResolution)||"1920x1080",supportsImageToVideo:((Ln=Ie.config)==null?void 0:Ln.supportsImageToVideo)!==!1,maxReferenceImages:((Qn=Ie.config)==null?void 0:Qn.maxReferenceImages)??7,supportsSubjects:((Xn=Ie.config)==null?void 0:Xn.supportsSubjects)!==!1,supportsAudioOutput:((Hn=Ie.config)==null?void 0:Hn.supportsAudioOutput)!==!1,supportsBgm:((zn=Ie.config)==null?void 0:zn.supportsBgm)!==!1})):(ss(null),dl("Vidu Q2"),ll(!0),ol(""),nl(""),cl(Nt),ml(["IMAGE"]),ia({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0}))}finally{N(!1)}})()},[]);const $i=a.useRef(!1),Ce=(t,x,i)=>{const j=t.includes(x);i(j?t.filter(w=>w!==x):[...t,x])},ge=async()=>{const t=await m.admin.getAIModels({provider:"google"}),x=await m.admin.getAIModels({provider:"bytedance"}),i=await m.admin.getAIModels({provider:"doubao"}),j=await m.admin.getAIModels({provider:"aliyun"}),w=await m.admin.getAIModels({provider:"minimaxi"}),d=await m.admin.getAIModels({provider:"sora"}),l=await m.admin.getAIModels({provider:"vidu"}),p=Array.isArray(t==null?void 0:t.data)?t.data:Array.isArray(t)?t:[],F=Array.isArray(x==null?void 0:x.data)?x.data:Array.isArray(x)?x:[],q=Array.isArray(i==null?void 0:i.data)?i.data:Array.isArray(i)?i:[],re=Array.isArray(j==null?void 0:j.data)?j.data:Array.isArray(j)?j:[],de=Array.isArray(w==null?void 0:w.data)?w.data:Array.isArray(w)?w:[],$=Array.isArray(d==null?void 0:d.data)?d.data:Array.isArray(d)?d:[],R=Array.isArray(l==null?void 0:l.data)?l.data:Array.isArray(l)?l:[];U([...p,...F,...q,...re,...de,...$,...R])},Sc=async()=>{var t,x;try{const i={name:M,provider:"google",modelId:ut,type:"TEXT_GENERATION",apiKey:_,apiUrl:f,isActive:C,pricePerUse:A?parseFloat(A):void 0,config:{...c,acceptedInputs:g}},j=o.find(d=>d.provider==="google"&&d.modelId===ut),w=D||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;O((l==null?void 0:l.id)||w),n.success("已保存 Gemini 2.5 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;O((l==null?void 0:l.id)||null),n.success("已创建 Gemini 2.5 Pro 配置")}catch(d){const l=o.find(p=>p.provider==="google"&&p.modelId===ut);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;O((F==null?void 0:F.id)||l.id),n.success("已保存 Gemini 2.5 Pro 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Cc=async()=>{var t,x;try{const i={name:I,provider:"google",modelId:bt,type:"TEXT_GENERATION",apiKey:Ae,apiUrl:ke,isActive:z,pricePerUse:Z?parseFloat(Z):void 0,config:{...De,acceptedInputs:kt}},j=o.find(d=>d.provider==="google"&&d.modelId===bt),w=u||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;Q((l==null?void 0:l.id)||w),n.success("已保存 Gemini 2.5 Flash 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Q((l==null?void 0:l.id)||null),n.success("已创建 Gemini 2.5 Flash 配置")}catch(d){const l=o.find(p=>p.provider==="google"&&p.modelId===bt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;Q((F==null?void 0:F.id)||l.id),n.success("已保存 Gemini 2.5 Flash 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Tc=async()=>{var t,x;try{const i={name:le,provider:"google",modelId:pt,type:"IMAGE_GENERATION",apiKey:vl,apiUrl:Nl,isActive:ne,pricePerUse:dt?parseFloat(dt):void 0,config:{...lt,acceptedInputs:$s}},j=o.find(d=>d.provider==="google"&&d.modelId===pt),w=ee||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||w),n.success("已保存 Gemini 2.5 Flash Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||null),n.success("已创建 Gemini 2.5 Flash Image 配置")}catch(d){const l=o.find(p=>p.provider==="google"&&p.modelId===pt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;ae((F==null?void 0:F.id)||l.id),n.success("已保存 Gemini 2.5 Flash Image 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Ec=async()=>{var t,x;try{const i={name:wl,provider:"google",modelId:gt,type:"TEXT_GENERATION",apiKey:Al,apiUrl:Sl,isActive:Il,pricePerUse:Xs?parseFloat(Xs):void 0,config:{...Fe,...wa,...Mt,acceptedInputs:Bs}},j=o.find(d=>d.provider==="google"&&d.modelId===gt),w=oc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;Na((l==null?void 0:l.id)||w),n.success("已保存 Gemini 3.0 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Na((l==null?void 0:l.id)||null),n.success("已创建 Gemini 3.0 Pro 配置")}catch(d){const l=o.find(p=>p.provider==="google"&&p.modelId===gt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;Na((F==null?void 0:F.id)||l.id),n.success("已保存 Gemini 3.0 Pro 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Rc=async()=>{var t,x;try{const i={name:Cl,provider:"google",modelId:ht,type:"IMAGE_GENERATION",apiKey:El,apiUrl:Rl,isActive:Tl,pricePerUse:Js?parseFloat(Js):void 0,config:{...Me,acceptedInputs:sr}},j=o.find(d=>d.provider==="google"&&d.modelId===ht),w=nc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;Aa((l==null?void 0:l.id)||w),n.success("已保存 Gemini 3 Pro Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Aa((l==null?void 0:l.id)||null),n.success("已创建 Gemini 3 Pro Image 配置")}catch(d){const l=o.find(p=>p.provider==="google"&&p.modelId===ht);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;Aa((F==null?void 0:F.id)||l.id),n.success("已保存 Gemini 3 Pro Image 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Mc=async()=>{var t,x,i,j,w,d,l,p,F;try{const q={name:ql,provider:"aliyun",modelId:St,type:"IMAGE_GENERATION",apiKey:Ta,apiUrl:Ea,isActive:Bl,pricePerUse:$r?parseFloat($r):void 0,config:{...ot,acceptedInputs:Kr}},re=o.find(X=>X.provider==="aliyun"&&X.modelId===St),de=cc||(re==null?void 0:re.id);if(de){const X=await m.admin.updateAIModel(de,q),te=((t=X==null?void 0:X.data)==null?void 0:t.data)||(X==null?void 0:X.data)||X;Ca((te==null?void 0:te.id)||de),Dt((te==null?void 0:te.apiKey)||Ta),_t((te==null?void 0:te.apiUrl)||Ea),n.success("已保存 Qwen Image Edit Plus 配置")}else try{const X=await m.admin.createAIModel(q),te=((x=X==null?void 0:X.data)==null?void 0:x.data)||(X==null?void 0:X.data)||X;Ca((te==null?void 0:te.id)||null),Dt((te==null?void 0:te.apiKey)||Ta),_t((te==null?void 0:te.apiUrl)||Ea),n.success("已创建 Qwen Image Edit Plus 配置")}catch(X){const te=o.find($e=>$e.provider==="aliyun"&&$e.modelId===St);if(te){const $e=await m.admin.updateAIModel(te.id,q),Ye=((i=$e==null?void 0:$e.data)==null?void 0:i.data)||($e==null?void 0:$e.data)||$e;Ca((Ye==null?void 0:Ye.id)||te.id),Dt((Ye==null?void 0:Ye.apiKey)||Ta),_t((Ye==null?void 0:Ye.apiUrl)||Ea),n.success("已保存 Qwen Image Edit Plus 配置")}else throw X}const $=await m.admin.getAIModels({provider:"aliyun"}),V=(Array.isArray($==null?void 0:$.data)?$.data:Array.isArray($)?$:[]).find(X=>X.modelId===St);V&&(ms(V.name),us(V.isActive),bs(V.pricePerUse||""),Dt(V.apiKey||""),_t(V.apiUrl||`${fa}/api/v1/services/aigc/multimodal-generation/generation`),ps(Array.isArray((j=V.config)==null?void 0:j.acceptedInputs)?V.config.acceptedInputs:["TEXT","IMAGE"]),sa({supportedRatios:((w=V.config)==null?void 0:w.supportedRatios)||be.map(X=>X.value),supportsImageToImage:((d=V.config)==null?void 0:d.supportsImageToImage)!==!1,maxReferenceImages:((l=V.config)==null?void 0:l.maxReferenceImages)??10})),await ge()}catch(q){n.error(((F=(p=q==null?void 0:q.response)==null?void 0:p.data)==null?void 0:F.message)||"保存失败")}},Pc=async()=>{var t,x,i,j,w,d;try{const l={name:Wl,provider:"aliyun",modelId:Ct,type:"VIDEO_EDITING",apiKey:Ma,apiUrl:Pa,isActive:Yl,pricePerUse:Lr?parseFloat(Lr):void 0,config:{serviceModes:Da,acceptedInputs:mc,supportedEditingCapabilities:["动作克隆"]}},p=o.find($=>$.provider==="aliyun"&&$.modelId===Ct),F=xc||(p==null?void 0:p.id);if(F){const $=await m.admin.updateAIModel(F,l),R=((t=$==null?void 0:$.data)==null?void 0:t.data)||($==null?void 0:$.data)||$;Ra((R==null?void 0:R.id)||F),Gt((R==null?void 0:R.apiKey)||Ma),Ut((R==null?void 0:R.apiUrl)||Pa),n.success("已保存 Wan Animate Move 配置")}else try{const $=await m.admin.createAIModel(l),R=((x=$==null?void 0:$.data)==null?void 0:x.data)||($==null?void 0:$.data)||$;Ra((R==null?void 0:R.id)||null),Gt((R==null?void 0:R.apiKey)||Ma),Ut((R==null?void 0:R.apiUrl)||Pa),n.success("已创建 Wan Animate Move 配置")}catch($){const R=o.find(V=>V.provider==="aliyun"&&V.modelId===Ct);if(R){const V=await m.admin.updateAIModel(R.id,l),X=((i=V==null?void 0:V.data)==null?void 0:i.data)||(V==null?void 0:V.data)||V;Ra((X==null?void 0:X.id)||R.id),Gt((X==null?void 0:X.apiKey)||Ma),Ut((X==null?void 0:X.apiUrl)||Pa),n.success("已保存 Wan Animate Move 配置")}else throw $}const q=await m.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(q==null?void 0:q.data)?q.data:Array.isArray(q)?q:[]).find($=>$.modelId===Ct);de&&(gs(de.name),hs(de.isActive),ks(de.pricePerUse||""),Gt(de.apiKey||""),Ut(de.apiUrl||rt),ys(Array.isArray((j=de.config)==null?void 0:j.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await ge()}catch(l){n.error(((d=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:d.message)||"保存失败")}},Dc=async()=>{var t,x,i,j,w,d;try{const l={name:Zl,provider:"aliyun",modelId:Tt,type:"VIDEO_EDITING",apiKey:Ga,apiUrl:Ua,isActive:Jl,pricePerUse:Qr?parseFloat(Qr):void 0,config:{serviceModes:Oa,acceptedInputs:bc,supportedEditingCapabilities:["视频换人"]}},p=o.find($=>$.provider==="aliyun"&&$.modelId===Tt),F=uc||(p==null?void 0:p.id);if(F){const $=await m.admin.updateAIModel(F,l),R=((t=$==null?void 0:$.data)==null?void 0:t.data)||($==null?void 0:$.data)||$;_a((R==null?void 0:R.id)||F),Ot((R==null?void 0:R.apiKey)||Ga),Vt((R==null?void 0:R.apiUrl)||Ua),n.success("已保存 Wan Animate Mix 配置")}else try{const $=await m.admin.createAIModel(l),R=((x=$==null?void 0:$.data)==null?void 0:x.data)||($==null?void 0:$.data)||$;_a((R==null?void 0:R.id)||null),Ot((R==null?void 0:R.apiKey)||Ga),Vt((R==null?void 0:R.apiUrl)||Ua),n.success("已创建 Wan Animate Mix 配置")}catch($){const R=o.find(V=>V.provider==="aliyun"&&V.modelId===Tt);if(R){const V=await m.admin.updateAIModel(R.id,l),X=((i=V==null?void 0:V.data)==null?void 0:i.data)||(V==null?void 0:V.data)||V;_a((X==null?void 0:X.id)||R.id),Ot((X==null?void 0:X.apiKey)||Ga),Vt((X==null?void 0:X.apiUrl)||Ua),n.success("已保存 Wan Animate Mix 配置")}else throw $}const q=await m.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(q==null?void 0:q.data)?q.data:Array.isArray(q)?q:[]).find($=>$.modelId===Tt);de&&(fs(de.name),js(de.isActive),vs(de.pricePerUse||""),Ot(de.apiKey||""),Vt(de.apiUrl||rt),Ns(Array.isArray((j=de.config)==null?void 0:j.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await ge()}catch(l){n.error(((d=(w=l==null?void 0:l.response)==null?void 0:w.data)==null?void 0:d.message)||"保存失败")}},_c=async()=>{var t,x,i,j,w,d,l;try{const p={name:ei,provider:"aliyun",modelId:Et,type:"VIDEO_EDITING",apiKey:Fa,apiUrl:$a,isActive:ti,pricePerUse:Xr?parseFloat(Xr):void 0,config:{supportedStyles:Ka,video_fps:ai,acceptedInputs:gc,supportedEditingCapabilities:["风格转换"]}},F=o.find(R=>R.provider==="aliyun"&&R.modelId===Et),q=pc||(F==null?void 0:F.id);if(q){const R=await m.admin.updateAIModel(q,p),V=((t=R==null?void 0:R.data)==null?void 0:t.data)||(R==null?void 0:R.data)||R;Va((V==null?void 0:V.id)||q),Ft((V==null?void 0:V.apiKey)||Fa),$t((V==null?void 0:V.apiUrl)||$a),n.success("已保存 Video Style Transform 配置")}else try{const R=await m.admin.createAIModel(p),V=((x=R==null?void 0:R.data)==null?void 0:x.data)||(R==null?void 0:R.data)||R;Va((V==null?void 0:V.id)||null),Ft((V==null?void 0:V.apiKey)||Fa),$t((V==null?void 0:V.apiUrl)||$a),n.success("已创建 Video Style Transform 配置")}catch(R){const V=o.find(X=>X.provider==="aliyun"&&X.modelId===Et);if(V){const X=await m.admin.updateAIModel(V.id,p),te=((i=X==null?void 0:X.data)==null?void 0:i.data)||(X==null?void 0:X.data)||X;Va((te==null?void 0:te.id)||V.id),Ft((te==null?void 0:te.apiKey)||Fa),$t((te==null?void 0:te.apiUrl)||$a),n.success("已保存 Video Style Transform 配置")}else throw R}const re=await m.admin.getAIModels({provider:"aliyun"}),$=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(R=>R.modelId===Et);$&&(ws($.name),Is($.isActive),As($.pricePerUse||""),Ft($.apiKey||""),$t($.apiUrl||Gs),Cs(Array.isArray((j=$.config)==null?void 0:j.supportedStyles)?$.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ss(((w=$.config)==null?void 0:w.video_fps)??15)),await ge()}catch(p){n.error(((l=(d=p==null?void 0:p.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},Gc=async()=>{var t,x,i,j,w,d,l;try{const p={name:si,provider:"aliyun",modelId:Rt,type:"VIDEO_EDITING",apiKey:Qa,apiUrl:Xa,isActive:ri,pricePerUse:Hr?parseFloat(Hr):void 0,config:{...qr,acceptedInputs:zr,supportedEditingCapabilities:["对口型"]}},F=o.find(R=>R.provider==="aliyun"&&R.modelId===Rt),q=hc||(F==null?void 0:F.id);if(q){const R=await m.admin.updateAIModel(q,p),V=((t=R==null?void 0:R.data)==null?void 0:t.data)||(R==null?void 0:R.data)||R;La((V==null?void 0:V.id)||q),Kt((V==null?void 0:V.apiKey)||Qa),Lt((V==null?void 0:V.apiUrl)||Xa),n.success("已保存 VideoRetalk 配置")}else try{const R=await m.admin.createAIModel(p),V=((x=R==null?void 0:R.data)==null?void 0:x.data)||(R==null?void 0:R.data)||R;La((V==null?void 0:V.id)||null),Kt((V==null?void 0:V.apiKey)||Qa),Lt((V==null?void 0:V.apiUrl)||Xa),n.success("已创建 VideoRetalk 配置")}catch(R){const V=o.find(X=>X.provider==="aliyun"&&X.modelId===Rt);if(V){const X=await m.admin.updateAIModel(V.id,p),te=((i=X==null?void 0:X.data)==null?void 0:i.data)||(X==null?void 0:X.data)||X;La((te==null?void 0:te.id)||V.id),Kt((te==null?void 0:te.apiKey)||Qa),Lt((te==null?void 0:te.apiUrl)||Xa),n.success("已保存 VideoRetalk 配置")}else throw R}const re=await m.admin.getAIModels({provider:"aliyun"}),$=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(R=>R.modelId===Rt);$&&(Ts($.name),Es($.isActive),Rs($.pricePerUse||""),Kt($.apiKey||""),Lt($.apiUrl||`${rt}/`),Ms(Array.isArray((j=$.config)==null?void 0:j.acceptedInputs)?$.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),Ps({video_extension:!!((w=$.config)!=null&&w.video_extension)})),await ge()}catch(p){n.error(((l=(d=p==null?void 0:p.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},Uc=async()=>{var t,x;try{const i={name:Ml,provider:"bytedance",modelId:pa,type:"VIDEO_GENERATION",apiKey:Dl,apiUrl:_l,isActive:Pl,pricePerUse:or?parseFloat(or):void 0,config:{...ye,acceptedInputs:mr}};if(dr){const j=await m.admin.updateAIModel(dr,i),w=(j==null?void 0:j.data)||j;os((w==null?void 0:w.id)||dr),n.success("已保存 Doubao SeeDance 1.0 Pro 配置")}else{const j=await m.admin.createAIModel(i),w=(j==null?void 0:j.data)||j;os((w==null?void 0:w.id)||null),n.success("已创建 Doubao SeeDance 1.0 Pro 配置")}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Oc=async()=>{var t,x;try{const i={name:Gl,provider:"bytedance",modelId:ga,type:"VIDEO_GENERATION",apiKey:Ol,apiUrl:Vl,isActive:Ul,pricePerUse:hr?parseFloat(hr):void 0,config:{...fe,acceptedInputs:jr}};if(br){const j=await m.admin.updateAIModel(br,i),w=(j==null?void 0:j.data)||j;ns((w==null?void 0:w.id)||br),n.success("已保存 Doubao SeeDance 1.0 Pro Fast 配置")}else{const j=await m.admin.createAIModel(i),w=(j==null?void 0:j.data)||j;ns((w==null?void 0:w.id)||null),n.success("已创建 Doubao SeeDance 1.0 Pro Fast 配置")}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Vc=async()=>{var t,x;try{const i={name:Fl,provider:"bytedance",modelId:ha,type:"IMAGE_GENERATION",apiKey:Kl,apiUrl:Ll,isActive:$l,pricePerUse:Ar?parseFloat(Ar):void 0,config:{...it,acceptedInputs:Er}};if(Nr){const j=await m.admin.updateAIModel(Nr,i),w=(j==null?void 0:j.data)||j;cs((w==null?void 0:w.id)||Nr),n.success("已保存 Doubao SeeDream 4.0 配置")}else{const j=await m.admin.createAIModel(i),w=(j==null?void 0:j.data)||j;cs((w==null?void 0:w.id)||null),n.success("已创建 Doubao SeeDream 4.0 配置")}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},Fc=async()=>{var t,x;try{const i={name:Ql,provider:"bytedance",modelId:ls,type:"IMAGE_GENERATION",apiKey:Hl,apiUrl:zl,isActive:Xl,pricePerUse:_r?parseFloat(_r):void 0,config:{...Be,acceptedInputs:Vr}};if(Mr){const j=await m.admin.updateAIModel(Mr,i),w=(j==null?void 0:j.data)||j;xs((w==null?void 0:w.id)||Mr),n.success("已保存 Doubao SeeDream 4.5 配置")}else{const j=await m.admin.createAIModel(i),w=(j==null?void 0:j.data)||j;xs((w==null?void 0:w.id)||null),n.success("已创建 Doubao SeeDream 4.5 配置")}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"模型配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"左侧模型列表，右侧对应配置"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Midjourney Fast 模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 mt-1",children:"当 Fast 模式额度用完时，可以在此禁用。禁用后用户只能使用 Relax 模式。"})]}),e.jsx("button",{type:"button",onClick:()=>Ac(!h),disabled:E,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h?"bg-green-500":"bg-slate-300 dark:bg-slate-600"} ${E?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h?"translate-x-6":"translate-x-1"}`})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Google / Gemini"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("google_pro"),className:`w-full text-left p-3 rounded-lg border ${b==="google_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ut})]}),o.find(t=>t.modelId===ut)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_flash_text"),className:`w-full text-left p-3 rounded-lg border ${b==="google_flash_text"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-xs text-purple-400",children:"(视频分析)"})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:bt})]}),o.find(t=>t.modelId===bt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_flash"),className:`w-full text-left p-3 rounded-lg border ${b==="google_flash"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:pt})]}),o.find(t=>t.modelId===pt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_gemini3"),className:`w-full text-left p-3 rounded-lg border ${b==="google_gemini3"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:gt})]}),o.find(t=>t.modelId===gt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("google_gemini3_image"),className:`w-full text-left p-3 rounded-lg border ${b==="google_gemini3_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ht})]}),o.find(t=>t.modelId===ht)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Bytedance / Doubao"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedance_pro"),className:`w-full text-left p-3 rounded-lg border ${b==="doubao_seedance_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:pa})]}),o.find(t=>t.modelId===pa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedance_fast"),className:`w-full text-left p-3 rounded-lg border ${b==="doubao_seedance_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ga})]}),o.find(t=>t.modelId===ga)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedream"),className:`w-full text-left p-3 rounded-lg border ${b==="doubao_seedream"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ha})]}),o.find(t=>t.modelId===ha)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("doubao_seedream_45"),className:`w-full text-left p-3 rounded-lg border ${b==="doubao_seedream_45"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ls})]}),o.find(t=>t.modelId===ls)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Aliyun / Qwen & Wanx"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("aliyun_qwen_image_edit"),className:`w-full text-left p-3 rounded-lg border ${b==="aliyun_qwen_image_edit"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:St})]}),o.find(t=>t.modelId===St)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_animate_move"),className:`w-full text-left p-3 rounded-lg border ${b==="aliyun_animate_move"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ct})]}),o.find(t=>t.modelId===Ct)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_animate_mix"),className:`w-full text-left p-3 rounded-lg border ${b==="aliyun_animate_mix"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Tt})]}),o.find(t=>t.modelId===Tt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_video_style"),className:`w-full text-left p-3 rounded-lg border ${b==="aliyun_video_style"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Et})]}),o.find(t=>t.modelId===Et)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("aliyun_videoretalk"),className:`w-full text-left p-3 rounded-lg border ${b==="aliyun_videoretalk"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Rt})]}),o.find(t=>t.modelId===Rt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"MiniMax / Hailuo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_23"),className:`w-full text-left p-3 rounded-lg border ${b==="minimaxi_hailuo_23"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Ht})]}),o.find(t=>t.modelId===Ht)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_23_fast"),className:`w-full text-left p-3 rounded-lg border ${b==="minimaxi_hailuo_23_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:zt})]}),o.find(t=>t.modelId===zt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_hailuo_02"),className:`w-full text-left p-3 rounded-lg border ${b==="minimaxi_hailuo_02"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:qt})]}),o.find(t=>t.modelId===qt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("minimaxi_speech_26_hd"),className:`w-full text-left p-3 rounded-lg border ${b==="minimaxi_speech_26_hd"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:vt})]}),o.find(t=>t.modelId===vt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Sora / OpenAI"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("sora_image"),className:`w-full text-left p-3 rounded-lg border ${b==="sora_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Bt})]}),o.find(t=>t.modelId===Bt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("sora_video"),className:`w-full text-left p-3 rounded-lg border ${b==="sora_video"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Wt})]}),o.find(t=>t.modelId===Wt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Vidu"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2_pro"),className:`w-full text-left p-3 rounded-lg border ${b==="vidu_q2_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Yt})]}),o.find(t=>t.modelId===Yt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2_turbo"),className:`w-full text-left p-3 rounded-lg border ${b==="vidu_q2_turbo"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Zt})]}),o.find(t=>t.modelId===Zt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>T("vidu_q2"),className:`w-full text-left p-3 rounded-lg border ${b==="vidu_q2"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Jt})]}),o.find(t=>t.modelId===Jt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[b==="google_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:M,onChange:t=>S(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ut,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:A,onChange:t=>H(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:_,onChange:t=>B(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:f,onChange:t=>r(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ue(ut)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(g,t,P),className:`px-3 py-1.5 rounded border-2 text-sm ${g.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:c.maxTokens,onChange:t=>W({...c,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:c.temperature,onChange:t=>W({...c,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:c.topP,onChange:t=>W({...c,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:c.topK,onChange:t=>W({...c,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:c.frequencyPenalty,onChange:t=>W({...c,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:c.presencePenalty,onChange:t=>W({...c,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:t=>G(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Sc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="google_flash_text"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-purple-500",children:"(视频分析)"})]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:I,onChange:t=>k(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:bt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Z,onChange:t=>se(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key *"}),e.jsx("input",{value:Ae,onChange:t=>oe(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"AIzaSy..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ke,onChange:t=>Pe(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ue(bt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(kt,t,yt),className:`px-3 py-1.5 rounded border-2 text-sm ${kt.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:De.maxTokens,onChange:t=>v({...De,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:De.temperature,onChange:t=>v({...De,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:De.topP,onChange:t=>v({...De,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:De.topK,onChange:t=>v({...De,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"text-sm font-medium text-purple-900 dark:text-purple-300 mb-2",children:"💡 专用于视频分析"}),e.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-400",children:'此模型用于"灵感/创意"页面的视频分镜分析功能，支持多模态输入（文本、图片、视频）'})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:t=>J(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Cc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="google_flash"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:le,onChange:t=>Y(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:pt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:dt,onChange:t=>ja(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:vl,onChange:t=>Vs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Nl,onChange:t=>Fs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ue(pt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce($s,t,Ks),className:`px-3 py-1.5 rounded border-2 text-sm ${$s.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>va({...lt,supportedRatios:lt.supportedRatios.includes(t.value)?lt.supportedRatios.filter(x=>x!==t.value):[...lt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${lt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:lt.supportsImageToImage,onChange:t=>va({...lt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:lt.maxReferenceImages,onChange:t=>va({...lt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:t=>pe(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Tc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="google_gemini3"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:wl,onChange:t=>Ls(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:gt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Xs,onChange:t=>Hs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Al,onChange:t=>zs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Sl,onChange:t=>qs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ue(gt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Bs,t,Ws),className:`px-3 py-1.5 rounded border-2 text-sm ${Bs.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"思维模式配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:wa.enableThinkingMode,onChange:t=>is({...wa,enableThinkingMode:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"启用思维模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许模型展示推理过程"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"思维水平"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(t=>e.jsx("button",{type:"button",onClick:()=>is({...wa,thinkingLevel:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${wa.thinkingLevel===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="low"?"低":t==="medium"?"中":"高"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"低：快速响应，简化推理；中：平衡速度与质量；高：深度思考，详细推理"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"媒体分辨率配置"}),e.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"分辨率越高，模型读取细小文本或识别细微细节的能力就越强，但会增加令牌用量和延迟时间"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"图片分辨率（推荐：High）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ia({...Mt,imageResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Mt.imageResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"建议用于大多数图片分析任务，以确保获得最佳质量"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"PDF分辨率（推荐：Medium）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ia({...Mt,pdfResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Mt.pdfResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"非常适合文档理解；质量通常在 Medium 时达到饱和"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频分辨率（推荐：Low）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ia({...Mt,videoResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Mt.videoResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (70/帧)":t.includes("medium")?"Medium (70/帧)":"High (280/帧)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Low/Medium 对于大多数动作识别和描述任务已足够；High 仅用于读取密集文本或视频帧中的微小细节"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:Fe.maxTokens,onChange:t=>wt({...Fe,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:Fe.temperature,onChange:t=>wt({...Fe,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:Fe.topP,onChange:t=>wt({...Fe,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:Fe.topK,onChange:t=>wt({...Fe,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Fe.frequencyPenalty,onChange:t=>wt({...Fe,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Fe.presencePenalty,onChange:t=>wt({...Fe,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Il,onChange:t=>Qs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Ec,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="google_gemini3_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Cl,onChange:t=>Ys(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ht,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Js,onChange:t=>er(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:El,onChange:t=>tr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Rl,onChange:t=>ar(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ue(ht)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(sr,t,rr),className:`px-3 py-1.5 rounded border-2 text-sm ${sr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>Pt({...Me,supportedRatios:Me.supportedRatios.includes(t.value)?Me.supportedRatios.filter(x=>x!==t.value):[...Me.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Me.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>Pt({...Me,supportedResolutions:Me.supportedResolutions.includes(t)?Me.supportedResolutions.filter(x=>x!==t):[...Me.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Me.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Me.supportsImageToImage,onChange:t=>Pt({...Me,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图（对话式编辑）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行对话式编辑"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Me.supportsImageEditing,onChange:t=>Pt({...Me,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Me.maxReferenceImages,onChange:t=>Pt({...Me,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"特殊能力"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 dark:text-blue-300 font-medium",children:"✓ Google 搜索集成"}),e.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:"支持实时检索和事实依据核查"})]}),e.jsxs("div",{className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-900 dark:text-purple-300 font-medium",children:"✓ 推理能力"}),e.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-400",children:"支持思维过程推理生成"})]}),e.jsxs("div",{className:"px-4 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-900 dark:text-green-300 font-medium",children:"✓ 文本渲染"}),e.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:"支持清晰易读的文本和图表渲染"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Tl,onChange:t=>Zs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Rc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="doubao_seedance_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ml,onChange:t=>lr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:pa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:or,onChange:t=>nr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Dl,onChange:t=>cr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:_l,onChange:t=>xr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:st})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(mr,t,ur),className:`px-3 py-1.5 rounded border-2 text-sm ${mr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>ea({...ye,supportedRatios:ye.supportedRatios.includes(t)?ye.supportedRatios.filter(x=>x!==t):[...ye.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ye.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P","2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>ea({...ye,supportedResolutions:ye.supportedResolutions.includes(t)?ye.supportedResolutions.filter(x=>x!==t):[...ye.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ye.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>ea({...ye,supportedGenerationTypes:ye.supportedGenerationTypes.includes(t)?ye.supportedGenerationTypes.filter(x=>x!==t):[...ye.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ye.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10,15,30].map(t=>e.jsxs("button",{type:"button",onClick:()=>ea({...ye,supportedDurations:ye.supportedDurations.includes(t)?ye.supportedDurations.filter(x=>x!==t):[...ye.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${ye.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Pl,onChange:t=>ir(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Uc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="doubao_seedance_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Gl,onChange:t=>pr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ga,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text.sm font-medium text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:hr,onChange:t=>kr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ol,onChange:t=>yr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Vl,onChange:t=>fr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:st})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(jr,t,vr),className:`px-3 py-1.5 rounded border-2 text-sm ${jr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>ta({...fe,supportedRatios:fe.supportedRatios.includes(t)?fe.supportedRatios.filter(x=>x!==t):[...fe.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>ta({...fe,supportedResolutions:fe.supportedResolutions.includes(t)?fe.supportedResolutions.filter(x=>x!==t):[...fe.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>ta({...fe,supportedGenerationTypes:fe.supportedGenerationTypes.includes(t)?fe.supportedGenerationTypes.filter(x=>x!==t):[...fe.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>ta({...fe,supportedDurations:fe.supportedDurations.includes(t)?fe.supportedDurations.filter(x=>x!==t):[...fe.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${fe.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ul,onChange:t=>gr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Oc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="doubao_seedream"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Fl,onChange:t=>wr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ha,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ar,onChange:t=>Sr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Kl,onChange:t=>Cr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ll,onChange:t=>Tr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:st})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Er,t,Rr),className:`px-3 py-1.5 rounded border-2 text-sm ${Er.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>Sa({...it,supportedRatios:it.supportedRatios.includes(t.value)?it.supportedRatios.filter(x=>x!==t.value):[...it.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${it.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:it.supportsImageToImage,onChange:t=>Sa({...it,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:it.maxReferenceImages,onChange:t=>Sa({...it,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:$l,onChange:t=>Ir(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Vc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="doubao_seedream_45"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ql,onChange:t=>Pr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ls,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:_r,onChange:t=>Gr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Hl,onChange:t=>Ur(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:zl,onChange:t=>Or(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:st})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Vr,t,Fr),className:`px-3 py-1.5 rounded border-2 text-sm ${Vr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>aa({...Be,supportedRatios:Be.supportedRatios.includes(t.value)?Be.supportedRatios.filter(x=>x!==t.value):[...Be.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Be.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Be.supportsImageToImage,onChange:t=>aa({...Be,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Be.supportsImageEditing,onChange:t=>aa({...Be,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Be.maxReferenceImages,onChange:t=>aa({...Be,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Xl,onChange:t=>Dr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Fc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="aliyun_qwen_image_edit"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ql,onChange:t=>ms(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:St,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:$r,onChange:t=>bs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ta,onChange:t=>Dt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ea,onChange:t=>_t(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${fa}/api/v1/services/aigc/multimodal-generation/generation`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Kr,t,ps),className:`px-3 py-1.5 rounded border-2 text-sm ${Kr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>sa({...ot,supportedRatios:ot.supportedRatios.includes(t.value)?ot.supportedRatios.filter(x=>x!==t.value):[...ot.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ot.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ot.supportsImageToImage,onChange:t=>sa({...ot,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"图片分辨率 200-4096px，比例 1:3 至 3:1，大小 ≤5MB"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ot.maxReferenceImages,onChange:t=>sa({...ot,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Bl,onChange:t=>us(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Mc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="aliyun_animate_move"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Wl,onChange:t=>gs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ct,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Lr,onChange:t=>ks(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ma,onChange:t=>Gt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Pa,onChange:t=>Ut(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:rt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Da.includes(t);ys(x?Da.filter(i=>i!==t):[...Da,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Da.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB，建议仅一人正面"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Yl,onChange:t=>hs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Pc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="aliyun_animate_mix"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Zl,onChange:t=>fs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Tt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Qr,onChange:t=>vs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ga,onChange:t=>Ot(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Ua,onChange:t=>Vt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:rt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Oa.includes(t);Ns(x?Oa.filter(i=>i!==t):[...Oa,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Oa.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Jl,onChange:t=>js(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Dc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="aliyun_video_style"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ei,onChange:t=>ws(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Et,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Xr,onChange:t=>As(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Fa,onChange:t=>Ft(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:$a,onChange:t=>$t(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Gs})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可用风格（0-7，可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,1,2,3,4,5,6,7].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Ka.includes(t);Cs(x?Ka.filter(i=>i!==t):[...Ka,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Ka.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频帧率"}),e.jsx("input",{type:"number",min:1,max:60,value:ai,onChange:t=>Ss(Number(t.target.value)),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"视频：时长 ≤30s，格式 MP4/AVI/MOV 等"}),e.jsx("div",{children:"异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ti,onChange:t=>Is(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:_c,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="aliyun_videoretalk"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:si,onChange:t=>Ts(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Rt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Hr,onChange:t=>Rs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Qa,onChange:t=>Kt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Xa,onChange:t=>Lt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${rt}/`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["VIDEO","AUDIO","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(zr,t,Ms),className:`px-3 py-1.5 rounded border-2 text-sm ${zr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:qr.video_extension,onChange:t=>Ps({...qr,video_extension:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"音频时长超出时扩展视频长度"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"视频 2~120s、15~60fps、640~2048 边长；音频 2~120s、≤30MB"})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"异步调用：提交任务后以 task_id 轮询结果"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ri,onChange:t=>Es(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:Gc,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="minimaxi_hailuo_23"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:di,onChange:t=>Br(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Ht,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Yr,onChange:t=>Zr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:ii,onChange:t=>Jr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:oi,onChange:t=>ed(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(td,t,ad),className:`px-3 py-1.5 rounded border-2 text-sm ${td.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=je.supportedRatios.includes(t);ra({...je,supportedRatios:x?je.supportedRatios.filter(i=>i!==t):[...je.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${je.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=je.supportedResolutions.includes(t);ra({...je,supportedResolutions:x?je.supportedResolutions.filter(i=>i!==t):[...je.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${je.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=je.supportedGenerationTypes.includes(t);ra({...je,supportedGenerationTypes:x?je.supportedGenerationTypes.filter(i=>i!==t):[...je.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${je.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const x=je.supportedDurations.includes(t);ra({...je,supportedDurations:x?je.supportedDurations.filter(i=>i!==t):[...je.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${je.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:li,onChange:t=>Wr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x,i;try{const j={name:di,provider:"minimaxi",modelId:Ht,type:"VIDEO_GENERATION",apiKey:ii,apiUrl:oi,isActive:li,pricePerUse:Yr?parseFloat(Yr):void 0,config:{...je,acceptedInputs:td}},w=o.find(l=>l.provider==="minimaxi"&&l.modelId===Ht),d=kc||(w==null?void 0:w.id);if(d){const l=await m.admin.updateAIModel(d,j),p=(l==null?void 0:l.data)||l;Ha((p==null?void 0:p.id)||d),n.success("已保存 MiniMax Hailuo 2.3 配置")}else try{const l=await m.admin.createAIModel(j),p=(l==null?void 0:l.data)||l;Ha((p==null?void 0:p.id)||null),n.success("已创建 MiniMax Hailuo 2.3 配置")}catch(l){const p=o.find(F=>F.provider==="minimaxi"&&F.modelId===Ht);if(p){const F=await m.admin.updateAIModel(p.id,j),q=(F==null?void 0:F.data)||F;Ha((q==null?void 0:q.id)||p.id),n.success("已保存 MiniMax Hailuo 2.3 配置")}else throw l}try{const l=Ds||(w==null?void 0:w.id)||((t=o.find(p=>p.provider==="minimaxi"&&p.modelId===vt))==null?void 0:t.id);l&&await m.admin.upsertAIModelCapabilities({aiModelId:l,capabilities:[{capability:"语音合成",supported:!!We.synth},{capability:"音色克隆",supported:!!We.clone},{capability:"音色设计",supported:!!We.design}]})}catch{}await ge()}catch(j){n.error(((i=(x=j==null?void 0:j.response)==null?void 0:x.data)==null?void 0:i.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="minimaxi_hailuo_23_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ni,onChange:t=>sd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:zt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:dd,onChange:t=>ld(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:xi,onChange:t=>id(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:mi,onChange:t=>od(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(nd,t,cd),className:`px-3 py-1.5 rounded border-2 text-sm ${nd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=ve.supportedRatios.includes(t);da({...ve,supportedRatios:x?ve.supportedRatios.filter(i=>i!==t):[...ve.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=ve.supportedResolutions.includes(t);da({...ve,supportedResolutions:x?ve.supportedResolutions.filter(i=>i!==t):[...ve.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=ve.supportedGenerationTypes.includes(t);da({...ve,supportedGenerationTypes:x?ve.supportedGenerationTypes.filter(i=>i!==t):[...ve.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const x=ve.supportedDurations.includes(t);da({...ve,supportedDurations:x?ve.supportedDurations.filter(i=>i!==t):[...ve.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ci,onChange:t=>rd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:ni,provider:"minimaxi",modelId:zt,type:"VIDEO_GENERATION",apiKey:xi,apiUrl:mi,isActive:ci,pricePerUse:dd?parseFloat(dd):void 0,config:{...ve,acceptedInputs:nd}},j=o.find(d=>d.provider==="minimaxi"&&d.modelId===zt),w=yc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;za((l==null?void 0:l.id)||w),n.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;za((l==null?void 0:l.id)||null),n.success("已创建 MiniMax Hailuo 2.3 Fast 配置")}catch(d){const l=o.find(p=>p.provider==="minimaxi"&&p.modelId===zt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;za((F==null?void 0:F.id)||l.id),n.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="minimaxi_hailuo_02"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ui,onChange:t=>xd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:qt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ud,onChange:t=>bd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:pi,onChange:t=>pd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:gi,onChange:t=>gd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(hd,t,kd),className:`px-3 py-1.5 rounded border-2 text-sm ${hd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Ne.supportedRatios.includes(t);la({...Ne,supportedRatios:x?Ne.supportedRatios.filter(i=>i!==t):[...Ne.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Ne.supportedResolutions.includes(t);la({...Ne,supportedResolutions:x?Ne.supportedResolutions.filter(i=>i!==t):[...Ne.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const x=Ne.supportedGenerationTypes.includes(t);la({...Ne,supportedGenerationTypes:x?Ne.supportedGenerationTypes.filter(i=>i!==t):[...Ne.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const x=Ne.supportedDurations.includes(t);la({...Ne,supportedDurations:x?Ne.supportedDurations.filter(i=>i!==t):[...Ne.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:bi,onChange:t=>md(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:ui,provider:"minimaxi",modelId:qt,type:"VIDEO_GENERATION",apiKey:pi,apiUrl:gi,isActive:bi,pricePerUse:ud?parseFloat(ud):void 0,config:{...Ne,acceptedInputs:hd}},j=o.find(d=>d.provider==="minimaxi"&&d.modelId===qt),w=fc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;qa((l==null?void 0:l.id)||w),n.success("已保存 MiniMax Hailuo 02 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;qa((l==null?void 0:l.id)||null),n.success("已创建 MiniMax Hailuo 02 配置")}catch(d){const l=o.find(p=>p.provider==="minimaxi"&&p.modelId===qt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;qa((F==null?void 0:F.id)||l.id),n.success("已保存 MiniMax Hailuo 02 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="minimaxi_speech_26_hd"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"AUDIO_SYNTHESIS"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:hi,onChange:t=>yd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:vt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:jd,onChange:t=>vd(t.target.value),className:"w-full px-4 py-2 bg-background-dark border border-border-dark rounded-lg text白"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:yi,onChange:t=>Nd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:fi,onChange:t=>wd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","AUDIO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Id,t,Ad),className:`px-3 py-1.5 rounded border-2 text-sm ${Id.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的输出格式（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["mp3","wav"].map(t=>e.jsx("button",{type:"button",onClick:()=>Wa({...nt,supportedFormats:nt.supportedFormats.includes(t)?nt.supportedFormats.filter(x=>x!==t):[...nt.supportedFormats,t]}),className:`px-3 py-1.5 rounded border-2 text-sm ${nt.supportedFormats.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.toUpperCase()},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最小采样率"}),e.jsx("input",{type:"number",min:8e3,value:nt.sampleRateMin,onChange:t=>Wa({...nt,sampleRateMin:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:nt.supportsStereo,onChange:t=>Wa({...nt,supportsStereo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持立体声"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"输出双声道（channel=2），默认兼容"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"模型能力（音频）"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:We.synth,onChange:t=>Ya({...We,synth:t.target.checked})})," 语音合成"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:We.clone,onChange:t=>Ya({...We,clone:t.target.checked})})," 音色克隆"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:We.design,onChange:t=>Ya({...We,design:t.target.checked})})," 音色设计"]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ki,onChange:t=>fd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x,i;try{const j={name:hi,provider:"minimaxi",modelId:vt,type:"AUDIO_SYNTHESIS",apiKey:yi,apiUrl:fi,isActive:ki,pricePerUse:jd?parseFloat(jd):void 0,config:{...nt,acceptedInputs:Id}},w=o.find(q=>q.provider==="minimaxi"&&q.modelId===vt),d=Ds||(w==null?void 0:w.id);if(d){const q=await m.admin.updateAIModel(d,j),re=(q==null?void 0:q.data)||q;Ba((re==null?void 0:re.id)||d),n.success("已保存 MiniMax Speech 2.6 HD 配置")}else try{const q=await m.admin.createAIModel(j),re=(q==null?void 0:q.data)||q;Ba((re==null?void 0:re.id)||null),n.success("已创建 MiniMax Speech 2.6 HD 配置")}catch(q){const re=o.find(de=>de.provider==="minimaxi"&&de.modelId===vt);if(re){const de=await m.admin.updateAIModel(re.id,j),$=(de==null?void 0:de.data)||de;Ba(($==null?void 0:$.id)||re.id),n.success("已保存 MiniMax Speech 2.6 HD 配置")}else throw q}const l=Ds||(w==null?void 0:w.id),p=[{capability:"语音合成",supported:!!We.synth},{capability:"音色克隆",supported:!!We.clone},{capability:"音色设计",supported:!!We.design}],F=l||((t=o.find(q=>q.provider==="minimaxi"&&q.modelId===vt))==null?void 0:t.id)||Ds;F&&await m.admin.upsertAIModelCapabilities({aiModelId:F,capabilities:p}),await ge()}catch(j){n.error(((i=(x=j==null?void 0:j.response)==null?void 0:x.data)==null?void 0:i.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="sora_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ji,onChange:t=>Sd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Bt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Td,onChange:t=>Ed(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ni,onChange:t=>Rd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:wi,onChange:t=>Md(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:ka})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Pd,t,Dd),className:`px-3 py-1.5 rounded border-2 text-sm ${Pd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>Ja({...ct,supportedRatios:ct.supportedRatios.includes(t.value)?ct.supportedRatios.filter(x=>x!==t.value):[...ct.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ct.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ct.supportsImageToImage,onChange:t=>Ja({...ct,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ct.maxReferenceImages,onChange:t=>Ja({...ct,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:vi,onChange:t=>Cd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:ji,provider:"sora",modelId:Bt,type:"IMAGE_GENERATION",apiKey:Ni,apiUrl:wi,isActive:vi,pricePerUse:Td?parseFloat(Td):void 0,config:{...ct,acceptedInputs:Pd}},j=o.find(d=>d.provider==="sora"&&d.modelId===Bt),w=jc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;Za((l==null?void 0:l.id)||w),n.success("已保存 Sora2 Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Za((l==null?void 0:l.id)||null),n.success("已创建 Sora2 Image 配置")}catch(d){const l=o.find(p=>p.provider==="sora"&&p.modelId===Bt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;Za((F==null?void 0:F.id)||l.id),n.success("已保存 Sora2 Image 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="sora_video"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ii,onChange:t=>_d(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Wt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ud,onChange:t=>Od(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Si,onChange:t=>Vd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ci,onChange:t=>Fd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:ka})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce($d,t,Kd),className:`px-3 py-1.5 rounded border-2 text-sm ${$d.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["landscape","portrait"].map(t=>e.jsx("button",{type:"button",onClick:()=>Qt({...Se,supportedRatios:Se.supportedRatios.includes(t)?Se.supportedRatios.filter(x=>x!==t):[...Se.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Se.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="landscape"?"横屏 (landscape)":"竖屏 (portrait)"},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Se.supportsImageToVideo,onChange:t=>Qt({...Se,supportsImageToVideo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生视频"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Se.maxReferenceImages,onChange:t=>Qt({...Se,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","图生视频","视频生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>Qt({...Se,supportedGenerationTypes:Se.supportedGenerationTypes.includes(t)?Se.supportedGenerationTypes.filter(x=>x!==t):[...Se.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Se.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[10,15,25].map(t=>e.jsxs("button",{type:"button",onClick:()=>Qt({...Se,supportedDurations:(Se.supportedDurations||[]).includes(t)?(Se.supportedDurations||[]).filter(x=>x!==t):[...Se.supportedDurations||[],t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${(Se.supportedDurations||[]).includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"秒"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ai,onChange:t=>Gd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:Ii,provider:"sora",modelId:Wt,type:"VIDEO_GENERATION",apiKey:Si,apiUrl:Ci,isActive:Ai,pricePerUse:Ud?parseFloat(Ud):void 0,config:{...Se,acceptedInputs:$d}},j=o.find(d=>d.provider==="sora"&&d.modelId===Wt),w=vc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;es((l==null?void 0:l.id)||w),n.success("已保存 Sora2 Video 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;es((l==null?void 0:l.id)||null),n.success("已创建 Sora2 Video 配置")}catch(d){const l=o.find(p=>p.provider==="sora"&&p.modelId===Wt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;es((F==null?void 0:F.id)||l.id),n.success("已保存 Sora2 Video 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="vidu_q2_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ti,onChange:t=>Ld(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Yt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Xd,onChange:t=>Hd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ri,onChange:t=>zd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Mi,onChange:t=>qd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(Bd,t,Wd),className:`px-3 py-1.5 rounded border-2 text-sm ${Bd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>It({...xe,supportedRatios:xe.supportedRatios.includes(t)?xe.supportedRatios.filter(x=>x!==t):[...xe.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xe.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>It({...xe,supportedResolutions:xe.supportedResolutions.includes(t)?xe.supportedResolutions.filter(x=>x!==t):[...xe.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xe.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:xe.supportsSubjects,onChange:t=>It({...xe,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:xe.maxReferenceImages,onChange:t=>It({...xe,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>It({...xe,supportedGenerationTypes:xe.supportedGenerationTypes.includes(t)?xe.supportedGenerationTypes.filter(x=>x!==t):[...xe.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xe.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>It({...xe,supportedDurations:xe.supportedDurations.includes(t)?xe.supportedDurations.filter(x=>x!==t):[...xe.supportedDurations,t].sort((x,i)=>x-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xe.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ei,onChange:t=>Qd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:Ti,provider:"vidu",modelId:Yt,type:"VIDEO_GENERATION",apiKey:Ri,apiUrl:Mi,isActive:Ei,pricePerUse:Xd?parseFloat(Xd):void 0,config:{...xe,acceptedInputs:Bd}},j=o.find(d=>d.provider==="vidu"&&d.modelId===Yt),w=Nc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;ts((l==null?void 0:l.id)||w),n.success("已保存 Vidu Q2 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ts((l==null?void 0:l.id)||null),n.success("已创建 Vidu Q2 Pro 配置")}catch(d){const l=o.find(p=>p.provider==="vidu"&&p.modelId===Yt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;ts((F==null?void 0:F.id)||l.id),n.success("已保存 Vidu Q2 Pro 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="vidu_q2_turbo"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Pi,onChange:t=>Yd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Zt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Jd,onChange:t=>el(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:_i,onChange:t=>tl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Gi,onChange:t=>al(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(sl,t,rl),className:`px-3 py-1.5 rounded border-2 text-sm ${sl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>At({...me,supportedRatios:me.supportedRatios.includes(t)?me.supportedRatios.filter(x=>x!==t):[...me.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>At({...me,supportedResolutions:me.supportedResolutions.includes(t)?me.supportedResolutions.filter(x=>x!==t):[...me.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:me.supportsSubjects,onChange:t=>At({...me,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:me.maxReferenceImages,onChange:t=>At({...me,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>At({...me,supportedGenerationTypes:me.supportedGenerationTypes.includes(t)?me.supportedGenerationTypes.filter(x=>x!==t):[...me.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>At({...me,supportedDurations:me.supportedDurations.includes(t)?me.supportedDurations.filter(x=>x!==t):[...me.supportedDurations,t].sort((x,i)=>x-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Di,onChange:t=>Zd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:Pi,provider:"vidu",modelId:Zt,type:"VIDEO_GENERATION",apiKey:_i,apiUrl:Gi,isActive:Di,pricePerUse:Jd?parseFloat(Jd):void 0,config:{...me,acceptedInputs:sl}},j=o.find(d=>d.provider==="vidu"&&d.modelId===Zt),w=wc||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;as((l==null?void 0:l.id)||w),n.success("已保存 Vidu Q2 Turbo 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;as((l==null?void 0:l.id)||null),n.success("已创建 Vidu Q2 Turbo 配置")}catch(d){const l=o.find(p=>p.provider==="vidu"&&p.modelId===Zt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;as((F==null?void 0:F.id)||l.id),n.success("已保存 Vidu Q2 Turbo 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),b==="vidu_q2"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ui,onChange:t=>dl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Jt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:il,onChange:t=>ol(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Vi,onChange:t=>nl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Fi,onChange:t=>cl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Nt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ce(xl,t,ml),className:`px-3 py-1.5 rounded border-2 text-sm ${xl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频宽高比（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>ia({...we,supportedRatios:we.supportedRatios.includes(t)?we.supportedRatios.filter(x=>x!==t):[...we.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${we.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>ia({...we,supportedResolutions:we.supportedResolutions.includes(t)?we.supportedResolutions.filter(x=>x!==t):[...we.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${we.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["参考图生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>ia({...we,supportedGenerationTypes:we.supportedGenerationTypes.includes(t)?we.supportedGenerationTypes.filter(x=>x!==t):[...we.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${we.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>ia({...we,supportedDurations:we.supportedDurations.includes(t)?we.supportedDurations.filter(x=>x!==t):[...we.supportedDurations,t].sort((x,i)=>x-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${we.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Oi,onChange:t=>ll(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,x;try{const i={name:Ui,provider:"vidu",modelId:Jt,type:"VIDEO_GENERATION",apiKey:Vi,apiUrl:Fi,isActive:Oi,pricePerUse:il?parseFloat(il):void 0,config:{...we,acceptedInputs:xl}},j=o.find(d=>d.provider==="vidu"&&d.modelId===Jt),w=Ic||(j==null?void 0:j.id);if(w){const d=await m.admin.updateAIModel(w,i),l=(d==null?void 0:d.data)||d;ss((l==null?void 0:l.id)||w),n.success("已保存 Vidu Q2 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ss((l==null?void 0:l.id)||null),n.success("已创建 Vidu Q2 配置")}catch(d){const l=o.find(p=>p.provider==="vidu"&&p.modelId===Jt);if(l){const p=await m.admin.updateAIModel(l.id,i),F=(p==null?void 0:p.data)||p;ss((F==null?void 0:F.id)||l.id),n.success("已保存 Vidu Q2 配置")}else throw d}await ge()}catch(i){n.error(((x=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:x.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),s&&e.jsx("div",{className:"text-gray-400",children:"加载中..."})]})]})]})};function yx(){const[s,N]=a.useState([]),[o,U]=a.useState([]),[b,T]=a.useState(!0),[h,y]=a.useState(!1),[E,L]=a.useState(null),[D,O]=a.useState(!1),[M,S]=a.useState(null),[C,G]=a.useState({name:"",description:"",usageScene:"workflow",isActive:!0}),[A,H]=a.useState({agentId:"",name:"",description:"",systemPrompt:"",aiModelId:"",temperature:.7,maxTokens:2e3,isActive:!0});a.useEffect(()=>{_(),B()},[]);const _=async()=>{try{const k=await m.agents.getAll(),z=await Promise.all(k.map(async J=>{try{const Z=await m.agents.roles.listByAgent(J.id);return{...J,roles:Z}}catch{return{...J,roles:[]}}}));N(z)}catch{n.error("加载智能体失败")}finally{T(!1)}},B=async()=>{try{const k=await m.agents.getAvailableModels();U(k)}catch{n.error("加载可用模型失败")}},f=()=>{L(null),G({name:"",description:"",usageScene:"workflow",isActive:!0}),y(!0)},r=k=>{L(k),G({name:k.name,description:k.description||"",usageScene:k.usageScene||"workflow",isActive:k.isActive}),y(!0)},g=k=>{L(k),S(null),H({agentId:k.id,name:"",description:"",systemPrompt:"",aiModelId:o.length>0?o[0].id:"",temperature:.7,maxTokens:2e3,isActive:!0}),O(!0)},P=k=>{S(k),H({agentId:k.agentId,name:k.name,description:k.description||"",systemPrompt:k.systemPrompt,aiModelId:k.aiModelId,temperature:k.temperature,maxTokens:k.maxTokens,isActive:k.isActive}),O(!0)},c=async(k,z)=>{if(window.confirm(`确定要删除智能体 "${z}" 吗？`))try{await m.agents.delete(k),n.success("删除成功"),_()}catch{n.error("删除失败")}},W=async k=>{if(k.preventDefault(),!C.name){n.error("请填写必填字段");return}try{E?(await m.agents.update(E.id,C),n.success("更新成功")):(await m.agents.create(C),n.success("创建成功")),y(!1),_()}catch{n.error(E?"更新失败":"创建失败")}},u=async k=>{if(k.preventDefault(),!A.agentId||!A.name||!A.systemPrompt||!A.aiModelId){n.error("请填写角色必填字段");return}try{M?(await m.agents.roles.update(M.id,A),n.success("角色更新成功")):(await m.agents.roles.create(A),n.success("角色创建成功")),O(!1),_()}catch{n.error(M?"角色更新失败":"角色创建失败")}},Q=async k=>{if(window.confirm(`确定要删除角色 "${k.name}" 吗？`))try{await m.agents.roles.delete(k.id),n.success("角色删除成功"),_()}catch{n.error("角色删除失败")}},I=async(k,z,J)=>{const Z=s.find(oe=>oe.id===k),se=[...(Z==null?void 0:Z.roles)||[]];if(z===J||se.length===0)return;const[Ae]=se.splice(z,1);se.splice(J,0,Ae),N(oe=>oe.map(ke=>ke.id===k?{...ke,roles:se}:ke));try{for(let ke=0;ke<se.length;ke++)await m.agents.roles.update(se[ke].id,{order:ke});const oe=await m.agents.roles.listByAgent(k);N(ke=>ke.map(Pe=>Pe.id===k?{...Pe,roles:oe}:Pe)),n.success("角色顺序已更新")}catch{n.error("更新排序失败"),_()}};return b?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-tiffany-500 border-t-transparent"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"智能体配置"}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:"管理AI智能体，配置提示词赋予不同角色和专业能力"})]}),e.jsxs("button",{onClick:f,className:"px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"新建智能体"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.map(k=>e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl border border-border-light dark:border-border-dark p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-light-primary dark:text-text-dark-primary mb-1",children:k.name}),k.description&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary line-clamp-2",children:k.description})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs ${k.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:k.isActive?"启用":"禁用"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${k.usageScene==="workflow"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":k.usageScene==="episode"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:k.usageScene==="workflow"?"工作流":k.usageScene==="episode"?"剧集创作":"广告创作"})}),e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"此智能体为空壳，具体能力由下方角色决定"})]}),e.jsxs("div",{className:"border-t border-border-light dark:border-border-dark pt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>r(k),className:"flex-1 px-3 py-1.5 bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary rounded hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>g(k),className:"flex-1 px-3 py-1.5 bg-tiffany-50 dark:bg-tiffany-900/20 text-tiffany-600 dark:text-tiffany-400 rounded hover:bg-tiffany-100 dark:hover:bg-tiffany-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_circle"}),"添加角色"]}),e.jsxs("button",{onClick:()=>c(k.id,k.name),className:"flex-1 px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"删除"]})]}),(k.roles||[]).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色"}),e.jsx("div",{className:"space-y-2",children:(k.roles||[]).map((z,J)=>{var Z;return e.jsxs("div",{className:"group flex items-center justify-between p-2 bg-background-light dark:bg-background-dark rounded border border-border-light dark:border-border-dark",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:[z.name," ",z.isActive?"":"(已禁用)"]}),e.jsxs("div",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["模型：",(Z=z.aiModel)==null?void 0:Z.name," | 温度：",z.temperature," | Token：",z.maxTokens]}),z.description&&e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary line-clamp-1",children:z.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(z),className:"px-2 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",children:"编辑"}),e.jsx("button",{onClick:()=>Q(z),className:"px-2 py-1 text-xs bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30",children:"删除"}),e.jsx("button",{type:"button",onClick:()=>I(k.id,J,Math.max(0,J-1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"上移",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>I(k.id,J,Math.min((k.roles||[]).length-1,J+1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"下移",children:"↓"})]})]},z.id)})})]})]},k.id)),s.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-text-light-tertiary dark:text-text-dark-tertiary mb-4 block",children:"smart_toy"}),e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"还没有智能体，点击右上角创建第一个"})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:E?"编辑智能体":"新建智能体"}),e.jsx("button",{onClick:()=>y(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:W,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:C.name,onChange:k=>G({...C,name:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：小红书文案大师",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"描述"}),e.jsx("input",{type:"text",value:C.description,onChange:k=>G({...C,description:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述智能体的功能"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["使用场景 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:C.usageScene,onChange:k=>G({...C,usageScene:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",children:[e.jsx("option",{value:"workflow",children:"工作流"}),e.jsx("option",{value:"episode",children:"剧集创作"}),e.jsx("option",{value:"advertisement",children:"广告创作"})]}),e.jsx("p",{className:"mt-1 text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"选择智能体的使用场景，不同场景下的智能体会在对应功能中显示"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:C.isActive,onChange:k=>G({...C,isActive:k.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用智能体"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:E?"更新":"创建"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:M?"编辑角色":"添加角色"}),e.jsx("button",{onClick:()=>O(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:u,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:A.name,onChange:k=>H({...A,name:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：导演、编剧、推广运营",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色描述"}),e.jsx("input",{type:"text",value:A.description,onChange:k=>H({...A,description:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述角色的职责"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色提示词 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:A.systemPrompt,onChange:k=>H({...A,systemPrompt:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500 min-h-32",placeholder:"为该角色定义专属提示词",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["调用模型 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:A.aiModelId,onChange:k=>H({...A,aiModelId:k.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",required:!0,children:o.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.provider,")"]},k.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"温度 (Temperature)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:A.temperature,onChange:k=>H({...A,temperature:parseFloat(k.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",step:"100",min:"100",max:"32000",value:A.maxTokens,onChange:k=>H({...A,maxTokens:parseInt(k.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"roleActive",checked:A.isActive,onChange:k=>H({...A,isActive:k.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"roleActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用角色"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:M?"更新角色":"创建角色"})]})]})]})})]})}const fx=()=>{var oe,ke,Pe,kt,yt,De;const[s,N]=a.useState([]),[o,U]=a.useState({page:1,limit:20,total:0,totalPages:0}),[b,T]=a.useState(!0),[h,y]=a.useState(""),[E,L]=a.useState(""),[D,O]=a.useState(null),[M,S]=a.useState(null),[C,G]=a.useState(null),[A,H]=a.useState(!1),[_,B]=a.useState(null),[f,r]=a.useState(null),g=a.useCallback(async()=>{var v,ee;T(!0);try{const ae={page:o.page,limit:o.limit};h&&(ae.search=h),E&&(ae.role=E);const le=await m.admin.getUsers(ae);le.success&&(N(le.data),U(le.pagination))}catch(ae){n.error(((ee=(v=ae.response)==null?void 0:v.data)==null?void 0:ee.message)||"获取用户列表失败")}finally{T(!1)}},[o.page,o.limit,h,E]);a.useEffect(()=>{g()},[g]);const P=v=>{v.preventDefault(),U(ee=>({...ee,page:1}))},c=async v=>{var le,Y;if(v.role==="ADMIN"){n.error("管理员账户不能被禁用");return}const ee=!v.isActive,ae=ee?"启用":"禁用";if(confirm(`确定要${ae}用户「${v.nickname||v.phone||v.id}」吗？`))try{await m.admin.updateUser(v.id,{isActive:ee}),n.success(`用户已${ae}`),N(ne=>ne.map(pe=>pe.id===v.id?{...pe,isActive:ee}:pe))}catch(ne){n.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||`${ae}失败`)}},W=async(v,ee)=>{var le,Y;if(v.role===ee)return;if(v.role==="ADMIN"){n.error("不能修改管理员的角色");return}const ae={USER:"普通用户",VIP:"VIP",SVIP:"SVIP",INTERNAL:"内部用户"};if(confirm(`确定要将用户「${v.nickname||v.phone||v.id}」的类型改为「${ae[ee]||ee}」吗？`))try{await m.admin.updateUser(v.id,{role:ee}),n.success(`用户类型已更新为 ${ae[ee]||ee}`),N(ne=>ne.map(pe=>pe.id===v.id?{...pe,role:ee}:pe))}catch(ne){n.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||"更新失败")}},u=v=>{switch(v){case"ADMIN":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(Zc,{className:"w-3 h-3"}),"管理员"]});case"SVIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-amber-500/20 to-orange-500/20 text-amber-400",children:[e.jsx(Os,{className:"w-3 h-3"}),"SVIP"]});case"VIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-500/20 text-purple-400",children:[e.jsx(sx,{className:"w-3 h-3"}),"VIP"]});case"INTERNAL":return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:"内部用户"});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(gx,{className:"w-3 h-3"}),"普通用户"]})}},Q=v=>v?new Date(v).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",I=(v,ee)=>{if(ee==="USER"||ee==="ADMIN"||ee==="INTERNAL")return"-";if(!v)return"永久";const ae=new Date(v),Y=ae<new Date,ne=ae.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});return Y?e.jsxs("span",{className:"text-red-400",children:[ne," (已过期)"]}):e.jsx("span",{className:"text-green-400",children:ne})},k=v=>v?v.length===11?v.slice(0,3)+"****"+v.slice(7):v:"-",z=async v=>{var le,Y;if(v.role!=="VIP"&&v.role!=="SVIP"){n.error("只能修改VIP或SVIP用户的会员到期时间");return}const ee=v.membershipExpireAt?new Date(v.membershipExpireAt).toISOString().split("T")[0]:"",ae=prompt(`请输入新的会员到期日期 (格式: YYYY-MM-DD)
留空表示永久会员
当前: ${ee||"永久"}`,ee);if(ae!==null)try{await m.admin.updateUser(v.id,{membershipExpireAt:ae===""?null:ae}),n.success("会员到期日期已更新"),N(ne=>ne.map(pe=>pe.id===v.id?{...pe,membershipExpireAt:ae===""?null:new Date(ae).toISOString()}:pe))}catch(ne){n.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||"更新失败")}},J=async v=>{var ee,ae;O(v),S("workflows"),H(!0),G(null);try{const le=await m.admin.inspection.getUserWorkflows(v.id);le.success&&G(le.data)}catch(le){n.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取工作流失败"),O(null),S(null)}finally{H(!1)}},Z=async v=>{var ee,ae;O(v),S("assets"),H(!0),G(null),B(null),r(null);try{const le=await m.admin.inspection.getUserAssetLibraries(v.id);le.success&&G(le.data)}catch(le){n.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产库失败"),O(null),S(null)}finally{H(!1)}},se=async v=>{var ee,ae;B(v),H(!0);try{const le=await m.admin.inspection.getAssetLibraryAssets(v.id);le.success&&r(le.data)}catch(le){n.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产列表失败")}finally{H(!1)}},Ae=()=>{O(null),S(null),G(null),B(null),r(null)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"用户管理"}),e.jsxs("div",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["共 ",o.total," 位用户"]})]}),e.jsx("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:e.jsxs("form",{onSubmit:P,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索手机号、昵称...",value:h,onChange:v=>y(v.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-purple-500"})]}),e.jsxs("select",{value:E,onChange:v=>{L(v.target.value),U(ee=>({...ee,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"ADMIN",children:"管理员"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]})}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无用户数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"手机号"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"积分"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"会员到期"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"项目数"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"注册时间"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"最后登录"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"巡查"})]})}),e.jsx("tbody",{children:s.map(v=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-medium overflow-hidden",children:v.avatar?e.jsx("img",{src:v.avatar,alt:"",className:"w-full h-full object-cover"}):(v.nickname||v.phone||"?")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:v.nickname||"未设置昵称"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",v.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-4 py-3 text-text-light-primary dark:text-text-dark-primary",children:k(v.phone)}),e.jsx("td",{className:"px-4 py-3",children:v.role==="ADMIN"?u(v.role):e.jsxs("select",{value:v.role,onChange:ee=>W(v,ee.target.value),className:"px-2 py-1 text-xs rounded-lg bg-slate-100 dark:bg-white/10 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500 cursor-pointer",children:[e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"INTERNAL",children:"内部用户"})]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"font-medium text-amber-500",children:v.credits.toLocaleString()})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:v.role==="VIP"||v.role==="SVIP"?e.jsx("button",{onClick:()=>z(v),className:"hover:underline cursor-pointer",title:"点击修改到期日期",children:I(v.membershipExpireAt,v.role)}):I(v.membershipExpireAt,v.role)}),e.jsx("td",{className:"px-4 py-3 text-right text-text-light-primary dark:text-text-dark-primary",children:v._count.projects}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:Q(v.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:Q(v.lastLoginAt)}),e.jsx("td",{className:"px-4 py-3 text-center",children:v.role==="ADMIN"?e.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-green-500/20 text-green-400",children:"启用"}):e.jsx("button",{onClick:ee=>{ee.stopPropagation(),c(v)},className:`px-2 py-1 text-xs rounded transition-colors ${v.isActive?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:v.isActive?"启用":"禁用"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>J(v),className:"p-1.5 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-colors",title:"查看工作流",children:e.jsx(dx,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Z(v),className:"p-1.5 rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 transition-colors",title:"查看资产库",children:e.jsx(Wn,{className:"w-4 h-4"})})]})})]},v.id))})]})}),o.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",o.page," / ",o.totalPages," 页"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(v=>({...v,page:v.page-1})),disabled:o.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(dc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(v=>({...v,page:v.page+1})),disabled:o.page>=o.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(ac,{className:"w-4 h-4"})})]})]})]}),D&&M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-[90vw] max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:M==="workflows"?"工作流巡查":"资产库巡查"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["用户：",D.nickname||D.phone||D.id]})]}),e.jsx("button",{onClick:Ae,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 transition-colors",children:e.jsx(hx,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"})}):M==="workflows"?e.jsx("div",{className:"space-y-4",children:((oe=C==null?void 0:C.workflows)==null?void 0:oe.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无工作流"}):(ke=C==null?void 0:C.workflows)==null?void 0:ke.map(v=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:v.name}),v.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v.description})]}),e.jsxs("div",{className:"text-right text-xs text-gray-400",children:[e.jsxs("div",{children:["节点: ",v.nodeCount]}),e.jsxs("div",{children:["连线: ",v.edgeCount]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(v.nodeTypes||{}).map(([ee,ae])=>e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-500/10 text-purple-400",children:[ee,": ",ae]},ee))}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:["更新于 ",new Date(v.updatedAt).toLocaleString("zh-CN")]})]},v.id))}):e.jsx("div",{className:"space-y-4",children:_?e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{B(null),r(null)},className:"mb-4 text-sm text-purple-400 hover:text-purple-300 flex items-center gap-1",children:"← 返回资产库列表"}),e.jsx("h3",{className:"text-lg font-medium text-text-light-primary dark:text-text-dark-primary mb-4",children:_.name}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3",children:(Pe=f==null?void 0:f.assets)==null?void 0:Pe.map(v=>e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-slate-200 dark:bg-white/10 relative group",children:[v.type==="IMAGE"?e.jsx("img",{src:v.thumbnail||v.url,alt:v.name,className:"w-full h-full object-cover"}):v.type==="VIDEO"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(sc,{className:"w-8 h-8 text-gray-400"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(rc,{className:"w-8 h-8 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-1",children:e.jsx("span",{className:"text-[10px] text-white truncate w-full",children:v.name})})]},v.id))}),((kt=f==null?void 0:f.assets)==null?void 0:kt.length)===0&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该资产库暂无资产"})]}):e.jsx(e.Fragment,{children:((yt=C==null?void 0:C.libraries)==null?void 0:yt.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无资产库"}):(De=C==null?void 0:C.libraries)==null?void 0:De.map(v=>e.jsx("div",{onClick:()=>se(v),className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10 cursor-pointer hover:border-purple-400 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 dark:bg-white/10 overflow-hidden flex-shrink-0",children:v.thumbnail?e.jsx("img",{src:v.thumbnail,alt:v.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Wn,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:v.name}),v.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[v.assetCount," 个资产 · 更新于 ",new Date(v.updatedAt).toLocaleString("zh-CN")]})]})]})},v.id))})})})]})})]})},jx=()=>{const[s,N]=a.useState([]),[o,U]=a.useState(null),[b,T]=a.useState({page:1,limit:20,total:0,totalPages:0}),[h,y]=a.useState(!0),[E,L]=a.useState(!0),[D,O]=a.useState({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),[M,S]=a.useState(!1),[C,G]=a.useState(null),A=a.useCallback(async()=>{L(!0);try{const u=await m.admin.tasks.getStats();u.success&&U(u.data)}catch{}finally{L(!1)}},[]),H=a.useCallback(async()=>{var u,Q;y(!0);try{const I={page:b.page,limit:b.limit};D.nickname&&(I.nickname=D.nickname),D.status&&(I.status=D.status),D.type&&(I.type=D.type),D.isZombie&&(I.isZombie="true"),D.dateFrom&&(I.dateFrom=D.dateFrom),D.dateTo&&(I.dateTo=D.dateTo);const k=await m.admin.tasks.getList(I);k.success&&(N(k.data),T(k.pagination))}catch(I){n.error(((Q=(u=I.response)==null?void 0:u.data)==null?void 0:Q.message)||"获取任务列表失败")}finally{y(!1)}},[b.page,b.limit,D]);a.useEffect(()=>{A()},[A]),a.useEffect(()=>{H()},[H]);const _=u=>{u.preventDefault(),T(Q=>({...Q,page:1}))},B=async u=>{var Q,I,k,z;if(!u.creditsCharged||u.creditsCharged<=0){n.error("该任务没有扣费记录");return}if((Q=u.metadata)!=null&&Q.refunded){n.error("该任务已退款");return}if(confirm(`确定要退还 ${u.creditsCharged} 积分给用户「${((I=u.user)==null?void 0:I.nickname)||u.userId}」吗？`)){G(u.id);try{const J=await m.admin.tasks.refund(u.id);J.success&&(n.success(J.message),H(),A())}catch(J){n.error(((z=(k=J.response)==null?void 0:k.data)==null?void 0:z.message)||"退款失败")}finally{G(null)}}},f=async u=>{var k,z,J;if(u.status==="SUCCESS"||u.status==="FAILURE"){n.error("任务已完成，无法取消");return}const Q=u.creditsCharged>0&&!((k=u.metadata)!=null&&k.refunded),I=Q?`确定要取消任务并退还 ${u.creditsCharged} 积分吗？`:"确定要取消该任务吗？";if(confirm(I)){G(u.id);try{const Z=await m.admin.tasks.cancel(u.id,Q);Z.success&&(n.success(Z.message),H(),A())}catch(Z){n.error(((J=(z=Z.response)==null?void 0:z.data)==null?void 0:J.message)||"取消失败")}finally{G(null)}}},r=(u,Q)=>{switch(u){case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(ax,{className:"w-3 h-3"}),"等待中"]});case"PROCESSING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:[e.jsx(_s,{className:"w-3 h-3 animate-spin"}),"处理中 ",Q,"%"]});case"SUCCESS":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:[e.jsx(tx,{className:"w-3 h-3"}),"成功"]});case"FAILURE":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(Yn,{className:"w-3 h-3"}),"失败"]});default:return e.jsx("span",{className:"text-gray-400",children:u})}},g=u=>u==="IMAGE"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-500/20 text-purple-400",children:[e.jsx(rc,{className:"w-3 h-3"}),"图片"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-500/20 text-cyan-400",children:[e.jsx(sc,{className:"w-3 h-3"}),"视频"]}),P=u=>u?new Date(u).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",c=u=>{if(u.status!=="PENDING"&&u.status!=="PROCESSING")return!1;const Q=new Date(u.updatedAt).getTime();return Date.now()-Q>30*60*1e3},W=(u,Q=50)=>u?u.length>Q?u.slice(0,Q)+"...":u:"-";return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"任务管理"}),e.jsxs("button",{onClick:()=>{A(),H()},className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(xx,{className:"w-4 h-4"}),"刷新"]})]}),E?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[...Array(6)].map((u,Q)=>e.jsx("div",{className:"h-24 bg-white/50 dark:bg-white/5 rounded-xl animate-pulse"},Q))}):o?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Jc,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"总任务数"})]}),e.jsx("p",{className:"text-2xl font-bold",children:o.overview.total.toLocaleString()}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",o.today.total]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(bx,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"成功率"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.overview.successRate,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",o.today.successRate,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ul,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"僵尸任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:o.overview.zombie}),e.jsx("p",{className:"text-xs opacity-60",children:"超过30分钟未完成"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"处理中"})]}),e.jsx("p",{className:"text-2xl font-bold",children:o.overview.processing}),e.jsxs("p",{className:"text-xs opacity-60",children:["等待中: ",o.overview.pending]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Yn,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"失败任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:o.overview.failure}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",o.today.failure]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rx,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"7日消耗积分"})]}),e.jsx("p",{className:"text-2xl font-bold",children:o.credits.totalCharged7d.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"任务扣费总计"})]})]}):null,o&&o.byModel.length>0&&e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-light-secondary dark:text-text-dark-secondary mb-3",children:"模型成功率（7天）"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:o.byModel.slice(0,12).map(u=>e.jsxs("div",{className:"bg-slate-50 dark:bg-white/5 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mb-1",title:u.modelName,children:u.modelName}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[u.successRate,"%"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[u.total,"次"]})]}),e.jsx("div",{className:"mt-1 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${parseFloat(u.successRate)>=90?"bg-green-500":parseFloat(u.successRate)>=70?"bg-amber-500":"bg-red-500"}`,style:{width:`${u.successRate}%`}})})]},u.modelId))})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsxs("form",{onSubmit:_,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索用户昵称...",value:D.nickname,onChange:u=>O(Q=>({...Q,nickname:u.target.value})),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-purple-500"})]}),e.jsxs("select",{value:D.status,onChange:u=>{O(Q=>({...Q,status:u.target.value})),T(Q=>({...Q,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"PENDING",children:"等待中"}),e.jsx("option",{value:"PROCESSING",children:"处理中"}),e.jsx("option",{value:"SUCCESS",children:"成功"}),e.jsx("option",{value:"FAILURE",children:"失败"})]}),e.jsxs("select",{value:D.type,onChange:u=>{O(Q=>({...Q,type:u.target.value})),T(Q=>({...Q,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"IMAGE",children:"图片"}),e.jsx("option",{value:"VIDEO",children:"视频"})]}),e.jsxs("button",{type:"button",onClick:()=>{O(u=>({...u,isZombie:!u.isZombie})),T(u=>({...u,page:1}))},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${D.isZombie?"bg-amber-500 text-white":"bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary"}`,children:[e.jsx(ul,{className:"w-4 h-4"}),"僵尸任务"]}),e.jsxs("button",{type:"button",onClick:()=>S(!M),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary flex items-center gap-2",children:[e.jsx(lx,{className:"w-4 h-4"}),"更多筛选"]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]}),M&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"开始日期"}),e.jsx("input",{type:"date",value:D.dateFrom,onChange:u=>O(Q=>({...Q,dateFrom:u.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"结束日期"}),e.jsx("input",{type:"date",value:D.dateTo,onChange:u=>O(Q=>({...Q,dateTo:u.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-purple-500"})]}),e.jsx("button",{type:"button",onClick:()=>{O({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),T(u=>({...u,page:1}))},className:"self-end px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"清除筛选"})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无任务数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"模型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"提示词"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"扣费"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"创建时间"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"操作"})]})}),e.jsx("tbody",{children:s.map(u=>{var I,k,z,J,Z,se,Ae,oe;const Q=c(u);return e.jsxs("tr",{className:`border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors ${Q?"bg-amber-50 dark:bg-amber-900/10":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Q&&e.jsx(ul,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:((I=u.user)==null?void 0:I.nickname)||"未知用户"}),e.jsx("div",{className:"text-xs text-gray-400",children:((z=(k=u.user)==null?void 0:k.phone)==null?void 0:z.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||u.userId.slice(0,8)})]})]})}),e.jsx("td",{className:"px-4 py-3",children:g(u.type)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm text-text-light-primary dark:text-text-dark-primary truncate max-w-[120px]",title:((J=u.model)==null?void 0:J.name)||u.modelId,children:((Z=u.model)==null?void 0:Z.name)||"未知模型"}),e.jsx("div",{className:"text-xs text-gray-400",children:((se=u.model)==null?void 0:se.provider)||""})]}),e.jsxs("td",{className:"px-4 py-3",children:[r(u.status,u.progress),u.errorMessage&&e.jsx("div",{className:"text-xs text-red-400 mt-1 truncate max-w-[150px]",title:u.errorMessage,children:u.errorMessage})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",title:u.prompt,children:W(u.prompt)})}),e.jsx("td",{className:"px-4 py-3 text-right",children:u.isFreeUsage?e.jsx("span",{className:"text-xs text-green-500",children:"免费"}):u.creditsCharged>0?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-500",children:u.creditsCharged}),((Ae=u.metadata)==null?void 0:Ae.refunded)&&e.jsx("span",{className:"ml-1 text-xs text-green-500",children:"(已退)"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:P(u.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.status==="FAILURE"&&u.creditsCharged>0&&!((oe=u.metadata)!=null&&oe.refunded)&&e.jsx("button",{onClick:()=>B(u),disabled:C===u.id,className:"p-1.5 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors disabled:opacity-50",title:"退款",children:C===u.id?e.jsx(_s,{className:"w-4 h-4 animate-spin"}):e.jsx(px,{className:"w-4 h-4"})}),(u.status==="PENDING"||u.status==="PROCESSING")&&e.jsx("button",{onClick:()=>f(u),disabled:C===u.id,className:"p-1.5 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",title:"取消任务",children:C===u.id?e.jsx(_s,{className:"w-4 h-4 animate-spin"}):e.jsx(ex,{className:"w-4 h-4"})})]})})]},u.id)})})]})}),b.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",b.page," / ",b.totalPages," 页，共"," ",b.total," 条"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(u=>({...u,page:u.page-1})),disabled:b.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(dc,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(u=>({...u,page:u.page+1})),disabled:b.page>=b.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(ac,{className:"w-4 h-4"})})]})]})]})]})};var ie=(s=>(s.PER_REQUEST="PER_REQUEST",s.PER_IMAGE="PER_IMAGE",s.PER_DURATION="PER_DURATION",s.DURATION_RESOLUTION="DURATION_RESOLUTION",s.PER_CHARACTER="PER_CHARACTER",s.DURATION_MODE="DURATION_MODE",s.OPERATION_MODE="OPERATION_MODE",s))(ie||{});const ic={PER_REQUEST:"按次计费",PER_IMAGE:"按图片数量",PER_DURATION:"按时长计费",DURATION_RESOLUTION:"按时长+分辨率",PER_CHARACTER:"按字符数计费",DURATION_MODE:"按模式计费 (支持时长/次数)",OPERATION_MODE:"按操作+模式"},gl=({value:s,onChange:N,label:o="费用"})=>e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-gray-300 w-20",children:o}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:s,onChange:U=>N(parseInt(U.target.value)||0),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]})]})}),vx=({prices:s,onChange:N,modelConfig:o})=>{const[U,b]=a.useState(["720p","1080p","4K"]),[T,h]=a.useState(()=>{const S=new Set;s.forEach(G=>{if(G.dimension==="resolution"&&G.value.includes("_")){const A=parseInt(G.value.split("_")[1]);isNaN(A)||S.add(A)}});const C=[3,5,6,8,10];return S.size>0?Array.from(S).sort((G,A)=>G-A):C});a.useEffect(()=>{var S,C;o&&(((S=o.supportedResolutions)==null?void 0:S.length)>0&&b(o.supportedResolutions),((C=o.supportedDurations)==null?void 0:C.length)>0&&h(o.supportedDurations.sort((G,A)=>G-A)))},[o]);const[y,E]=a.useState(""),L=(S,C)=>{const G=s.find(A=>A.dimension==="resolution"&&A.value===`${S}_${C}`);return(G==null?void 0:G.creditsPerUnit)||0},D=(S,C,G)=>{const A=s.filter(H=>!(H.dimension==="resolution"&&H.value===`${S}_${C}`));G>0&&A.push({dimension:"resolution",value:`${S}_${C}`,creditsPerUnit:G,unitSize:1}),N(A)},O=()=>{const S=parseInt(y);if(S>0&&!T.includes(S)){const C=[...T,S].sort((G,A)=>G-A);h(C),E("")}},M=S=>{h(T.filter(G=>G!==S));const C=s.filter(G=>G.dimension==="resolution"&&G.value.includes("_")?parseInt(G.value.split("_")[1])!==S:!0);N(C)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"阶梯计费模式"}),"：配置特定时长的固定价格（总价）。",e.jsx("br",{}),"• 系统会自动匹配最接近的时长档位（向上取整）。",e.jsx("br",{}),"• 例如：配置了5秒和10秒，请求6秒时会自动匹配到10秒的价格。"]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"number",min:"1",value:y,onChange:S=>E(S.target.value),placeholder:"新增时长(秒)",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-32"}),e.jsx("button",{onClick:O,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"添加时长列"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-r border-slate-200 dark:border-border-dark bg-slate-100 dark:bg-slate-800/50",children:"分辨率 \\ 时长"}),T.map(S=>e.jsxs("th",{className:"px-4 py-3 text-center border-b border-slate-200 dark:border-border-dark min-w-[100px] relative group",children:[S,"秒",e.jsx("button",{onClick:()=>M(S),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"删除此时长列",children:"×"})]},S))]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:U.map(S=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white border-r border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/30",children:S}),T.map(C=>e.jsx("td",{className:"px-2 py-2 text-center border-r border-slate-200 dark:border-border-dark last:border-r-0",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:e.jsx("input",{type:"number",min:"0",value:L(S,C),onChange:G=>D(S,C,parseInt(G.target.value)||0),className:"w-16 px-2 py-1 text-center border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})},`${S}_${C}`))]},S))})]})}),e.jsxs("div",{className:"text-xs text-slate-400 dark:text-gray-500",children:["* 支持阶梯定价：请在对应的时长/分辨率单元格中填入该档位的",e.jsx("strong",{children:"总积分"}),"。"]})]})},Nx=({prices:s,config:N,onChange:o})=>{const U=[{value:"std",label:"标准版 (Std)"},{value:"pro",label:"专业版 (Pro)"}],b=s.some(O=>O.dimension==="mode"&&O.value==="standard"),T=s.some(O=>O.dimension==="mode"&&O.value==="professional"),h=[...U];b&&h.push({value:"standard",label:"标准模式 (旧)"}),T&&h.push({value:"professional",label:"专业模式 (旧)"});const y=(N==null?void 0:N.pricingUnit)||"per_second",E=O=>{const M=s.find(S=>S.dimension==="mode"&&S.value===O);return(M==null?void 0:M.creditsPerUnit)||0},L=(O,M)=>{const S=s.filter(C=>!(C.dimension==="mode"&&C.value===O));M>0&&S.push({dimension:"mode",value:O,creditsPerUnit:M,unitSize:1}),o(S,N)},D=(O,M)=>{o(s,{...N,[O]:M})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:y==="per_second",onChange:()=>D("pricingUnit","per_second"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按时长计费 (积分/秒)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:y==="per_request",onChange:()=>D("pricingUnit","per_request"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按次计费 (积分/次)"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:y==="per_second"?"模式定价（每秒）":"模式定价（每次）"}),h.map(O=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:O.label}),e.jsx("input",{type:"number",min:"0",value:E(O.value),onChange:M=>L(O.value,parseInt(M.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:y==="per_second"?"积分/秒":"积分/次"})]},O.value))]}),y==="per_second"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"时长计费规则"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:(N==null?void 0:N.roundUp)!==!1,onChange:O=>D("roundUp",O.target.checked),className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"向上取整到整秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"最小计费时长:"}),e.jsx("input",{type:"number",min:"1",value:(N==null?void 0:N.minDuration)||1,onChange:O=>D("minDuration",parseInt(O.target.value)||1),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]})]})]})]})},wx=({prices:s,onChange:N})=>{const o=[{value:"imagine",label:"生成图片 (Imagine)"},{value:"upscale",label:"升分辨率 (Upscale)"},{value:"variation",label:"变换 (Variation)"},{value:"reroll",label:"重新生成 (Reroll)"}],U=[{value:"relax",label:"慢速模式 (Relax)"},{value:"fast",label:"快速模式 (Fast)"}],b=E=>{const L=s.find(D=>D.dimension==="operationType"&&D.value===E);return(L==null?void 0:L.creditsPerUnit)||0},T=E=>{const L=s.find(D=>D.dimension==="mode"&&D.value===E);return(L==null?void 0:L.creditsPerUnit)||1},h=(E,L)=>{const D=s.filter(O=>!(O.dimension==="operationType"&&O.value===E));L>0&&D.push({dimension:"operationType",value:E,creditsPerUnit:L,unitSize:1}),N(D)},y=(E,L)=>{const D=s.filter(O=>!(O.dimension==="mode"&&O.value===E));L>0&&D.push({dimension:"mode",value:E,creditsPerUnit:L,unitSize:1}),N(D)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"操作类型定价（基础价格）"}),o.map(E=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:E.label}),e.jsx("input",{type:"number",min:"0",value:b(E.value),onChange:L=>h(E.value,parseInt(L.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]},E.value))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"模式倍率"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:"最终费用 = 操作类型基础价格 × 模式倍率"}),U.map(E=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:E.label}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"×"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:T(E.value),onChange:L=>y(E.value,parseFloat(L.target.value)||1),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})]},E.value))]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:"💡 计费示例"}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{children:["• 生成图片（快速模式）= ",b("imagine")," × ",T("fast")," = ",b("imagine")*T("fast")," 积分"]}),e.jsxs("li",{children:["• 升分辨率（慢速模式）= ",b("upscale")," × ",T("relax")," = ",b("upscale")*T("relax")," 积分"]})]})]})]})},Ix=({prices:s,onChange:N})=>{const o=()=>s[0]||{creditsPerUnit:5,unitSize:100},U=(T,h)=>{const y=o();N([{dimension:"character",value:"default",creditsPerUnit:T==="creditsPerUnit"?h:y.creditsPerUnit,unitSize:T==="unitSize"?h:y.unitSize||100}])},b=o();return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-slate-200 dark:border-border-dark rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"每"}),e.jsx("input",{type:"number",min:"1",value:b.unitSize||100,onChange:T=>U("unitSize",parseInt(T.target.value)||100),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符收费"}),e.jsx("input",{type:"number",min:"0",value:b.creditsPerUnit,onChange:T=>U("creditsPerUnit",parseInt(T.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:["💡 计费规则：不足",b.unitSize||100,"字符按",b.unitSize||100,"字符计算"]}),e.jsx("p",{className:"mt-2",children:"示例："}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:["50个字符 → ",b.unitSize||100,"字符 → ",b.creditsPerUnit,"积分"]}),e.jsxs("li",{children:["150个字符 → ",(b.unitSize||100)*2,"字符 → ",b.creditsPerUnit*2,"积分"]}),e.jsxs("li",{children:["1000个字符 → 1000字符 → ",b.creditsPerUnit*Math.ceil(1e3/(b.unitSize||100)),"积分"]})]})]})]})})},Ax=({prices:s,onChange:N,modelConfig:o})=>{var M;const[U,b]=a.useState("2K"),[T,h]=a.useState(10),y=s.filter(S=>S.dimension==="resolution"),E=()=>{if(!U||T<0)return;if(y.some(C=>C.value===U)){alert("该分辨率已存在");return}const S=[...s,{dimension:"resolution",value:U,creditsPerUnit:T,unitSize:1}];N(S),b("4K")},L=()=>{var G;if(!((G=o==null?void 0:o.supportedResolutions)!=null&&G.length))return;const S=[...s];let C=0;o.supportedResolutions.forEach(A=>{S.some(H=>H.dimension==="resolution"&&H.value===A)||(S.push({dimension:"resolution",value:A,creditsPerUnit:10,unitSize:1}),C++)}),C>0?(N(S),alert(`已导入 ${C} 个分辨率配置`)):alert("所有支持的分辨率已存在")},D=S=>{N(s.filter(C=>!(C.dimension==="resolution"&&C.value===S)))},O=(S,C)=>{const G=s.map(A=>A.dimension==="resolution"&&A.value===S?{...A,creditsPerUnit:C}:A);N(G)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2",children:"💡 分辨率阶梯计费："}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• 支持格式：像素格式 (如 1024x1024) 或标签 (如 2K, 4K)。"}),e.jsx("li",{children:"• 智能匹配：系统会优先精确匹配标签，否则按像素总数匹配最近的档位。"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"分辨率标识"}),e.jsx("input",{type:"text",value:U,onChange:S=>b(S.target.value),placeholder:"2K / 1024x1024",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"单价 (积分)"}),e.jsx("input",{type:"number",min:"0",value:T,onChange:S=>h(parseInt(S.target.value)||0),className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-24"})]}),e.jsx("button",{onClick:E,className:"px-4 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors h-[34px]",children:"添加"}),((M=o==null?void 0:o.supportedResolutions)==null?void 0:M.length)>0&&e.jsx("button",{onClick:L,className:"px-4 py-1.5 text-sm bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors h-[34px] ml-auto",title:"自动加载模型支持的所有分辨率",children:"从模型导入"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"分辨率"}),e.jsx("th",{className:"px-4 py-3",children:"像素总数 (预估)"}),e.jsx("th",{className:"px-4 py-3",children:"单价 (积分/张)"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-slate-400",children:"暂无配置，请添加分辨率"})}):y.map(S=>{const[C,G]=S.value.split(/[x*]/).map(Number),A=C&&G?(C*G/1e4).toFixed(1)+"万":"-";return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:S.value}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-400",children:A}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",min:"0",value:S.creditsPerUnit,onChange:H=>O(S.value,parseInt(H.target.value)||0),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{onClick:()=>D(S.value),className:"text-red-500 hover:text-red-600 transition-colors",children:"删除"})})]},S.value)})})]})})]})},Sx=({rule:s})=>{const[N,o]=a.useState({quantity:1,duration:10,resolution:"1080p",mode:"standard",operationType:"imagine",characterCount:100}),[U,b]=a.useState(0);a.useEffect(()=>{T()},[s,N]);const T=()=>{var E;let y=0;switch(s.billingType){case ie.PER_REQUEST:y=s.baseCredits;break;case ie.PER_IMAGE:y=s.baseCredits*(N.quantity||1);break;case ie.PER_DURATION:y=s.baseCredits*(N.duration||1);break;case ie.DURATION_RESOLUTION:const L=s.prices.find(G=>G.dimension==="resolution"&&G.value.startsWith(N.resolution));y=(N.duration||1)*((L==null?void 0:L.creditsPerUnit)||0);break;case ie.DURATION_MODE:const D=s.prices.find(G=>G.dimension==="mode"&&G.value===N.mode);y=((E=s.config)!=null&&E.roundUp?Math.ceil(N.duration||1):N.duration||1)*((D==null?void 0:D.creditsPerUnit)||0);break;case ie.PER_CHARACTER:const M=s.prices[0];M&&(y=Math.ceil((N.characterCount||0)/(M.unitSize||100))*M.creditsPerUnit);break;case ie.OPERATION_MODE:const S=s.prices.find(G=>G.dimension==="operationType"&&G.value===N.operationType),C=s.prices.find(G=>G.dimension==="mode"&&G.value===N.mode);y=((S==null?void 0:S.creditsPerUnit)||0)*((C==null?void 0:C.creditsPerUnit)||1);break}b(Math.round(y))},h=()=>{var y;switch(s.billingType){case ie.PER_REQUEST:return e.jsx("div",{className:"text-sm text-slate-600 dark:text-gray-400",children:"每次调用固定费用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"生成数量:"}),e.jsx("input",{type:"number",min:"1",value:N.quantity,onChange:E=>o({...N,quantity:parseInt(E.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"张"})]});case ie.PER_DURATION:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:N.duration,onChange:E=>o({...N,duration:parseInt(E.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]});case ie.DURATION_RESOLUTION:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:N.duration,onChange:E=>o({...N,duration:parseInt(E.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"分辨率:"}),e.jsxs("select",{value:N.resolution,onChange:E=>o({...N,resolution:E.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"4K",children:"4K"})]})]})]});case ie.DURATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:N.duration,onChange:E=>o({...N,duration:parseFloat(E.target.value)||0}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"编辑模式:"}),e.jsxs("select",{value:N.mode,onChange:E=>o({...N,mode:E.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"standard",children:"标准模式"}),e.jsx("option",{value:"professional",children:"专业模式"})]})]}),((y=s.config)==null?void 0:y.roundUp)&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["实际计费: ",Math.ceil(N.duration)," 秒（向上取整）"]})]});case ie.PER_CHARACTER:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符数:"}),e.jsx("input",{type:"number",min:"0",value:N.characterCount,onChange:E=>o({...N,characterCount:parseInt(E.target.value)||0}),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"字符"})]});case ie.OPERATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"操作类型:"}),e.jsxs("select",{value:N.operationType,onChange:E=>o({...N,operationType:E.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"imagine",children:"生成图片"}),e.jsx("option",{value:"upscale",children:"升分辨率"}),e.jsx("option",{value:"variation",children:"变换"}),e.jsx("option",{value:"reroll",children:"重新生成"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"运行模式:"}),e.jsxs("select",{value:N.mode,onChange:E=>o({...N,mode:E.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"relax",children:"慢速模式"}),e.jsx("option",{value:"fast",children:"快速模式"})]})]})]});default:return null}};return e.jsxs("div",{className:"space-y-4",children:[h(),e.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"预估费用:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[U," 积分"]})]})})]})},Cx=({rule:s,isCreating:N,existingRules:o=[],onSave:U,onCancel:b,onDelete:T,onToggle:h})=>{const[y,E]=a.useState(s),[L,D]=a.useState("model"),[O,M]=a.useState([]),[S,C]=a.useState(!1);a.useEffect(()=>{E(s),s.nodeType?D("node"):s.moduleType?D("module"):D("model")},[s]),a.useEffect(()=>{G()},[]);const G=async()=>{try{const g=await m.admin.getAIModels({provider:"google"}),P=await m.admin.getAIModels({provider:"bytedance"}),c=await m.admin.getAIModels({provider:"doubao"}),W=await m.admin.getAIModels({provider:"aliyun"}),u=await m.admin.getAIModels({provider:"minimaxi"}),Q=await m.admin.getAIModels({provider:"sora"}),I=await m.admin.getAIModels({provider:"vidu"}),k=Array.isArray(g==null?void 0:g.data)?g.data:Array.isArray(g)?g:[],z=Array.isArray(P==null?void 0:P.data)?P.data:Array.isArray(P)?P:[],J=Array.isArray(c==null?void 0:c.data)?c.data:Array.isArray(c)?c:[],Z=Array.isArray(W==null?void 0:W.data)?W.data:Array.isArray(W)?W:[],se=Array.isArray(u==null?void 0:u.data)?u.data:Array.isArray(u)?u:[],Ae=Array.isArray(Q==null?void 0:Q.data)?Q.data:Array.isArray(Q)?Q:[],oe=Array.isArray(I==null?void 0:I.data)?I.data:Array.isArray(I)?I:[],ke=[...k,...z,...J,...Z,...se,...Ae,...oe].filter(Pe=>Pe.isActive);M(ke)}catch{}};a.useEffect(()=>{if(!N)return;let g="";if(L==="model"&&y.aiModelId){const P=O.find(c=>c.id===y.aiModelId);P&&(g=`${P.name} 计费规则`)}else if(L==="node"&&y.nodeType){const P={super_resolution:"智能超清",ad_composition:"广告成片",sora_character:"Sora角色生成",image_editing:"图片编辑"};P[y.nodeType]&&(g=`${P[y.nodeType]} 计费规则`)}else L==="module"&&y.moduleType&&y.moduleType==="midjourney"&&(g="Midjourney 计费规则");g&&(!y.name||y.name.includes("计费规则"))&&f("name",g)},[y.aiModelId,y.nodeType,y.moduleType,L,N,O]);const A=O.filter(g=>g.id===y.aiModelId?!0:!o.some(P=>P.aiModelId===g.id)),H=O.find(g=>g.id===y.aiModelId),_=(H==null?void 0:H.config)||{},B=async()=>{var g,P;if(!y.name){alert("请输入规则名称");return}if(!y.aiModelId&&!y.nodeType&&!y.moduleType){alert("请选择关联的模型、节点或模块");return}try{C(!0),await U(y),alert("保存成功！")}catch(c){alert("保存失败: "+(((P=(g=c.response)==null?void 0:g.data)==null?void 0:P.message)||c.message||"未知错误"))}finally{C(!1)}},f=(g,P)=>{E(c=>({...c,[g]:P}))},r=()=>{switch(y.billingType){case ie.PER_REQUEST:return e.jsx(gl,{value:y.baseCredits,onChange:g=>f("baseCredits",g),label:"每次调用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!y.prices||y.prices.length===0,onChange:()=>f("prices",[]),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"统一一口价"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!!y.prices&&y.prices.length>0,onChange:()=>{(!y.prices||y.prices.length===0)&&f("prices",[{dimension:"resolution",value:"1024x1024",creditsPerUnit:10,unitSize:1}])},className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按分辨率阶梯"})]})]}),!y.prices||y.prices.length===0?e.jsx(gl,{value:y.baseCredits,onChange:g=>f("baseCredits",g),label:"每张图片"}):e.jsx(Ax,{prices:y.prices,onChange:g=>f("prices",g),modelConfig:_})]});case ie.DURATION_RESOLUTION:return e.jsx(vx,{prices:y.prices,onChange:g=>f("prices",g),modelConfig:_});case ie.DURATION_MODE:return e.jsx(Nx,{prices:y.prices,config:y.config||{},onChange:(g,P)=>{f("prices",g),f("config",P)}});case ie.PER_DURATION:return e.jsx(gl,{value:y.baseCredits,onChange:g=>f("baseCredits",g),label:"每秒费用"});case ie.PER_CHARACTER:return e.jsx(Ix,{prices:y.prices,onChange:g=>f("prices",g)});case ie.OPERATION_MODE:return e.jsx(wx,{prices:y.prices,onChange:g=>f("prices",g)});default:return e.jsx("div",{className:"text-slate-400",children:"请选择计费类型"})}};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-background-dark",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:N?"新建计费规则":"编辑计费规则"}),e.jsx("div",{className:"flex items-center gap-2",children:!N&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(y.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200"}`,children:y.isActive?"已启用":"已禁用"}),e.jsx("button",{onClick:()=>T(y.id),className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg hover:bg-red-200 text-sm font-medium transition-colors",children:"删除"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"基础信息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"规则名称 *"}),e.jsx("input",{type:"text",value:y.name,onChange:g=>f("name",g.target.value),placeholder:"例如：Gemini 2.0 Flash 文本调用",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"描述"}),e.jsx("textarea",{value:y.description||"",onChange:g=>f("description",g.target.value),placeholder:"规则说明（可选）",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"关联对象 *"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="model",onChange:()=>{D("model"),f("nodeType",null),f("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"AI模型"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="node",onChange:()=>{D("node"),f("aiModelId",null),f("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"固定节点"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="module",onChange:()=>{D("module"),f("aiModelId",null),f("nodeType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"特殊模块"})]})]}),L==="model"&&e.jsxs("select",{value:y.aiModelId||"",onChange:g=>f("aiModelId",g.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择AI模型"}),A.map(g=>e.jsxs("option",{value:g.id,children:[g.name," (",g.provider,")"]},g.id))]}),L==="node"&&e.jsxs("select",{value:y.nodeType||"",onChange:g=>f("nodeType",g.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择节点类型"}),e.jsx("option",{value:"super_resolution",children:"智能超清"}),e.jsx("option",{value:"ad_composition",children:"广告成片"}),e.jsx("option",{value:"sora_character",children:"Sora角色生成"}),e.jsx("option",{value:"image_editing",children:"图片编辑"})]}),L==="module"&&e.jsxs("select",{value:y.moduleType||"",onChange:g=>f("moduleType",g.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择模块"}),e.jsx("option",{value:"midjourney",children:"Midjourney"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"计费类型 *"}),e.jsx("select",{value:y.billingType,onChange:g=>f("billingType",g.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(ic).map(([g,P])=>e.jsx("option",{value:g,children:P},g))})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"价格配置"}),r()]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"预览测试"}),e.jsx(Sx,{rule:y})]})]})}),e.jsxs("div",{className:"px-8 py-4 border-t border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:b,className:"px-6 py-2 border border-slate-300 dark:border-border-dark text-slate-700 dark:text-gray-300 rounded-lg hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:"取消"}),e.jsx("button",{onClick:B,disabled:S,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors",children:S?"保存中...":"保存规则"})]})]})},Tx=()=>{const[s,N]=a.useState([]),[o,U]=a.useState(null),[b,T]=a.useState(!0),[h,y]=a.useState("all"),[E,L]=a.useState(""),[D,O]=a.useState(!1);a.useEffect(()=>{M()},[]);const M=async()=>{var r,g;try{T(!0);const c=(await m.get("/admin/billing/rules")).data||[];N(c)}catch(P){alert(((g=(r=P.response)==null?void 0:r.data)==null?void 0:g.message)||"加载计费规则失败")}finally{T(!1)}},S=()=>{O(!0),U({name:"",billingType:ie.PER_REQUEST,baseCredits:0,isActive:!0,prices:[]})},C=r=>{O(!1),U(r)},G=async r=>{var g,P;try{D?await m.post("/admin/billing/rules",r):r.id&&await m.put(`/admin/billing/rules/${r.id}`,r),await M(),O(!1),U(null)}catch(c){throw alert(((P=(g=c.response)==null?void 0:g.data)==null?void 0:P.message)||"保存失败"),c}},A=async r=>{var g,P;if(confirm("确定要删除这条计费规则吗？"))try{await m.delete(`/admin/billing/rules/${r}`),await M(),(o==null?void 0:o.id)===r&&U(null)}catch(c){alert(((P=(g=c.response)==null?void 0:g.data)==null?void 0:P.message)||"删除失败")}},H=async r=>{var g,P;try{await m.post(`/admin/billing/rules/${r}/toggle`),await M()}catch(c){alert(((P=(g=c.response)==null?void 0:g.data)==null?void 0:P.message)||"切换状态失败")}},_=()=>{O(!1),U(null)},B=s.filter(r=>{var g,P;if(h!=="all"&&(h==="TEXT_GENERATION"&&r.billingType!==ie.PER_REQUEST||h==="IMAGE_GENERATION"&&r.billingType!==ie.PER_IMAGE||h==="VIDEO_GENERATION"&&r.billingType!==ie.DURATION_RESOLUTION||h==="VIDEO_EDITING"&&r.billingType!==ie.DURATION_MODE||h==="AUDIO_SYNTHESIS"&&r.billingType!==ie.PER_CHARACTER||h==="FIXED_NODE"&&!r.nodeType||h==="MIDJOURNEY"&&r.moduleType!=="midjourney"))return!1;if(E){const c=E.toLowerCase();return r.name.toLowerCase().includes(c)||((g=r.description)==null?void 0:g.toLowerCase().includes(c))||((P=r.aiModel)==null?void 0:P.name.toLowerCase().includes(c))}return!0}),f=r=>r==="all"?s.length:s.filter(g=>r==="TEXT_GENERATION"?g.billingType===ie.PER_REQUEST:r==="IMAGE_GENERATION"?g.billingType===ie.PER_IMAGE:r==="VIDEO_GENERATION"?g.billingType===ie.DURATION_RESOLUTION:r==="VIDEO_EDITING"?g.billingType===ie.DURATION_MODE:r==="AUDIO_SYNTHESIS"?g.billingType===ie.PER_CHARACTER:r==="FIXED_NODE"?!!g.nodeType:r==="MIDJOURNEY"?g.moduleType==="midjourney":!1).length;return e.jsxs("div",{className:"flex h-full bg-slate-50 dark:bg-background-dark",children:[e.jsxs("aside",{className:"w-80 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"计费规则"}),e.jsx("button",{onClick:S,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors",children:"+ 新建"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"搜索规则...",value:E,onChange:r=>L(r.target.value),className:"w-full px-3 py-2 pl-9 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-xl",children:"search"})]})]}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark space-y-1",children:[{key:"all",label:"全部",icon:"list"},{key:"TEXT_GENERATION",label:"文本模型",icon:"article"},{key:"IMAGE_GENERATION",label:"图片模型",icon:"image"},{key:"VIDEO_GENERATION",label:"视频生成",icon:"videocam"},{key:"VIDEO_EDITING",label:"视频编辑",icon:"movie_edit"},{key:"AUDIO_SYNTHESIS",label:"音频合成",icon:"graphic_eq"},{key:"FIXED_NODE",label:"固定节点",icon:"developer_board"},{key:"MIDJOURNEY",label:"Midjourney",icon:"palette"}].map(r=>e.jsxs("button",{onClick:()=>y(r.key),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${h===r.key?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.icon}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"text-xs opacity-60",children:f(r.key)})]},r.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:b?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"加载中..."}):B.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"暂无规则"}):B.map(r=>e.jsxs("div",{onClick:()=>C(r),className:`p-3 rounded-lg border cursor-pointer transition-all ${(o==null?void 0:o.id)===r.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-border-dark hover:border-slate-300 dark:hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white text-sm",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"启用":"禁用"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:ic[r.billingType]}),r.aiModel&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模型: ",r.aiModel.name]}),r.moduleType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模块: ",r.moduleType]}),r.nodeType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["节点: ",r.nodeType]})]},r.id))})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-50 dark:bg-background-dark",children:o?e.jsx(Cx,{rule:o,isCreating:D,existingRules:s,onSave:G,onCancel:_,onDelete:A,onToggle:H}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 dark:text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"receipt_long"}),e.jsx("p",{children:"选择一条规则或创建新规则"})]})})})]})},hl={ALIPAY:"支付宝",WECHAT:"微信支付",MANUAL:"人工充值"},Zn={ALIPAY:"account_balance_wallet",WECHAT:"chat",MANUAL:"person"},Ex=()=>{const[s,N]=a.useState([]),[o,U]=a.useState(!0),[b,T]=a.useState(null),[h,y]=a.useState(!1),[E,L]=a.useState(null);a.useEffect(()=>{D()},[]);const D=async()=>{var _,B;try{U(!0);const f=await m.payment.admin.getConfigs();N(f.data||[])}catch(f){n.error(((B=(_=f.response)==null?void 0:_.data)==null?void 0:B.message)||"加载配置失败")}finally{U(!1)}},O=async _=>{try{const B=await m.payment.admin.getConfig(_.id);T(B.data)}catch{n.error("获取配置详情失败")}},M=async _=>{var B,f;if(_.provider==="MANUAL"){n.info("人工充值无需测试连通性");return}try{L(_.id);const r=await m.payment.admin.testConfig(_.id);r.success?n.success(r.message||"连接测试成功"):n.error(r.message||"连接测试失败")}catch(r){n.error(((f=(B=r.response)==null?void 0:B.data)==null?void 0:f.message)||"测试失败")}finally{L(null)}},S=_=>{T({provider:_,name:hl[_]||_,appId:"",privateKey:"",publicKey:"",config:{},isActive:!0,isSandbox:!1})},C=async()=>{var _,B;if(b){if(!b.appId){n.error("请填写 AppID");return}try{y(!0),await m.payment.admin.saveConfig({provider:b.provider,name:b.name,appId:b.appId,privateKey:b.privateKey,publicKey:b.publicKey,config:b.config,isActive:b.isActive,isSandbox:b.isSandbox}),n.success("保存成功"),T(null),D()}catch(f){n.error(((B=(_=f.response)==null?void 0:_.data)==null?void 0:B.message)||"保存失败")}finally{y(!1)}}},G=async _=>{var B,f;if(confirm("确定要删除此配置吗？"))try{await m.payment.admin.deleteConfig(_),n.success("删除成功"),D()}catch(r){n.error(((f=(B=r.response)==null?void 0:B.data)==null?void 0:f.message)||"删除失败")}},A=s.map(_=>_.provider),H=["ALIPAY","WECHAT"].filter(_=>!A.includes(_));return o?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"支付配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"配置支付宝、微信支付等支付渠道"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[s.map(_=>e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${_.provider==="ALIPAY"?"bg-blue-100 dark:bg-blue-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined text-2xl ${_.provider==="ALIPAY"?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400"}`,children:Zn[_.provider]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:_.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:["AppID: ",_.appId]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[_.isSandbox&&e.jsx("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded",children:"沙箱"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${_.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:_.isActive?"已启用":"已禁用"}),_.provider!=="MANUAL"&&e.jsx("button",{onClick:()=>M(_),disabled:E===_.id,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg transition-colors disabled:opacity-50",children:E===_.id?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base animate-spin",children:"progress_activity"}),"测试中..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"network_check"}),"测试连通"]})}),e.jsx("button",{onClick:()=>O(_),className:"p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"edit"})}),e.jsx("button",{onClick:()=>G(_.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"delete"})})]})]})},_.id)),s.length===0&&e.jsx("div",{className:"text-center py-12 text-slate-400",children:"暂无支付配置，请添加"})]}),H.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"添加支付渠道"}),e.jsx("div",{className:"flex gap-4",children:H.map(_=>e.jsxs("button",{onClick:()=>S(_),className:"flex items-center gap-3 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-border-dark rounded-xl hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:Zn[_]}),e.jsx("span",{className:"text-slate-600 dark:text-gray-400",children:hl[_]})]},_))})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[b.id?"编辑":"添加",hl[b.provider],"配置"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"配置名称"}),e.jsx("input",{type:"text",value:b.name||"",onChange:_=>T({...b,name:_.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["AppID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.appId||"",onChange:_=>T({...b,appId:_.target.value}),placeholder:"应用ID",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"应用私钥"}),e.jsx("textarea",{value:b.privateKey||"",onChange:_=>T({...b,privateKey:_.target.value}),placeholder:"RSA私钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"可以是 PKCS#1 或 PKCS#8 格式，不需要包含 BEGIN/END 行"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:b.provider==="ALIPAY"?"支付宝公钥":"平台公钥"}),e.jsx("textarea",{value:b.publicKey||"",onChange:_=>T({...b,publicKey:_.target.value}),placeholder:"平台公钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.isActive??!0,onChange:_=>T({...b,isActive:_.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"启用"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.isSandbox??!1,onChange:_=>T({...b,isSandbox:_.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"沙箱环境"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:C,disabled:h,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:h?"保存中...":"保存"})]})]})})]})},Jn={RECHARGE:{label:"会员充值",icon:"workspace_premium"},CREDITS:{label:"积分购买",icon:"diamond"}},Rx={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},Mx=[{value:"#ef4444",label:"红色"},{value:"#f97316",label:"橙色"},{value:"#eab308",label:"黄色"},{value:"#22c55e",label:"绿色"},{value:"#3b82f6",label:"蓝色"},{value:"#8b5cf6",label:"紫色"},{value:"#ec4899",label:"粉色"}],Px=()=>{const[s,N]=a.useState([]),[o,U]=a.useState(!0),[b,T]=a.useState(""),[h,y]=a.useState(null),[E,L]=a.useState(!1),[D,O]=a.useState(!1),M=a.useRef(null);a.useEffect(()=>{S()},[]);const S=async()=>{var r,g;try{U(!0);const P=await m.payment.admin.getPackages();N(P.data||[])}catch(P){n.error(((g=(r=P.response)==null?void 0:r.data)==null?void 0:g.message)||"加载套餐失败")}finally{U(!1)}},C=b?s.filter(r=>r.type===b):s,G=(r="RECHARGE")=>{y({type:r,name:"",description:"",price:0,credits:0,bonusCredits:0,memberLevel:null,memberDays:null,coverImage:null,badge:null,badgeColor:null,sortOrder:s.length,isActive:!0,isRecommend:!1})},A=r=>{y({...r})},H=async()=>{var r,g;if(h){if(!h.name||!h.price||!h.credits){n.error("请填写套餐名称、价格和积分");return}try{L(!0),h.id?await m.payment.admin.updatePackage(h.id,h):await m.payment.admin.createPackage({type:h.type||"RECHARGE",name:h.name,description:h.description||void 0,price:h.price,credits:h.credits,bonusCredits:h.bonusCredits,memberLevel:h.type==="CREDITS"?void 0:h.memberLevel||void 0,memberDays:h.type==="CREDITS"?void 0:h.memberDays||void 0,coverImage:h.coverImage||void 0,badge:h.badge||void 0,badgeColor:h.badgeColor||void 0,sortOrder:h.sortOrder,isActive:h.isActive,isRecommend:h.isRecommend}),n.success("保存成功"),y(null),S()}catch(P){n.error(((g=(r=P.response)==null?void 0:r.data)==null?void 0:g.message)||"保存失败")}finally{L(!1)}}},_=async r=>{var g,P;if(confirm("确定要删除此套餐吗？"))try{await m.payment.admin.deletePackage(r),n.success("删除成功"),S()}catch(c){n.error(((P=(g=c.response)==null?void 0:g.data)==null?void 0:P.message)||"删除失败")}},B=async r=>{try{await m.payment.admin.updatePackage(r.id,{isActive:!r.isActive}),S()}catch{n.error("切换状态失败")}},f=r=>`¥${(r/100).toFixed(2)}`;return o?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"套餐管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"管理会员充值和积分购买套餐"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>G("RECHARGE"),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"workspace_premium"}),"新建会员套餐"]}),e.jsxs("button",{onClick:()=>G("CREDITS"),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"diamond"}),"新建积分套餐"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"筛选:"}),[{value:"",label:"全部"},{value:"RECHARGE",label:"会员充值"},{value:"CREDITS",label:"积分购买"}].map(r=>e.jsx("button",{onClick:()=>T(r.value),className:`px-3 py-1 text-sm rounded-full transition-colors ${b===r.value?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:r.label},r.value))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[C.map(r=>{var g,P;return e.jsxs("div",{className:`relative bg-white dark:bg-card-dark border rounded-2xl overflow-hidden transition-all ${r.isActive?"border-slate-200 dark:border-border-dark":"border-slate-200 dark:border-border-dark opacity-60"} ${r.isRecommend?"ring-2 ring-blue-500":""}`,children:[e.jsxs("div",{className:`absolute top-3 left-3 px-2 py-1 text-xs font-medium text-white rounded flex items-center gap-1 ${r.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:((g=Jn[r.type])==null?void 0:g.icon)||"redeem"}),((P=Jn[r.type])==null?void 0:P.label)||"套餐"]}),r.badge&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 text-xs font-medium text-white rounded",style:{backgroundColor:r.badgeColor||"#3b82f6"},children:r.badge}),e.jsx("div",{className:"h-32 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:r.coverImage?e.jsx("img",{src:r.coverImage,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"material-symbols-outlined text-6xl text-white/30",children:"diamond"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"上架中":"已下架"})]}),r.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:f(r.price)}),e.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:["/ ",r.credits+r.bonusCredits," 积分"]})]}),r.bonusCredits>0&&e.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-2",children:["赠送 ",r.bonusCredits," 积分"]}),r.memberLevel&&e.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 mb-2",children:["升级为 ",Rx[r.memberLevel],r.memberDays&&` (${r.memberDays}天)`]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100 dark:border-border-dark",children:[e.jsxs("button",{onClick:()=>A(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>B(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.isActive?"visibility_off":"visibility"}),r.isActive?"下架":"上架"]}),e.jsx("button",{onClick:()=>_(r.id),className:"flex items-center justify-center p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]})]},r.id)}),s.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无套餐，点击上方按钮创建"})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium text-white flex items-center gap-1 ${h.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:h.type==="CREDITS"?"diamond":"workspace_premium"}),h.type==="CREDITS"?"积分购买":"会员充值"]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:h.id?"编辑套餐":"新建套餐"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["套餐名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:h.name||"",onChange:r=>y({...h,name:r.target.value}),placeholder:"如：入门包、超值包",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"排序"}),e.jsx("input",{type:"number",value:h.sortOrder||0,onChange:r=>y({...h,sortOrder:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"套餐简介"}),e.jsx("textarea",{value:h.description||"",onChange:r=>y({...h,description:r.target.value}),placeholder:"套餐描述...",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["价格（分） ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:h.price||0,onChange:r=>y({...h,price:Number(r.target.value)}),placeholder:"1000 = ¥10",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["= ¥",((h.price||0)/100).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:h.credits||0,onChange:r=>y({...h,credits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"赠送积分"}),e.jsx("input",{type:"number",value:h.bonusCredits||0,onChange:r=>y({...h,bonusCredits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),h.type!=="CREDITS"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"升级会员等级"}),e.jsxs("select",{value:h.memberLevel||"",onChange:r=>y({...h,memberLevel:r.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"不升级"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数"}),e.jsx("input",{type:"number",value:h.memberDays||"",onChange:r=>y({...h,memberDays:r.target.value?Number(r.target.value):null}),placeholder:"留空为永久",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"封面图片"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{onClick:()=>{var r;return(r=M.current)==null?void 0:r.click()},className:`relative w-40 h-24 rounded-xl border-2 border-dashed cursor-pointer transition-all overflow-hidden ${h.coverImage?"border-blue-400":"border-slate-300 dark:border-border-dark hover:border-blue-400"}`,children:[h.coverImage?e.jsx("img",{src:h.coverImage,alt:"封面预览",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"}),e.jsx("span",{className:"text-xs mt-1",children:"上传封面"})]}),D&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white animate-spin",children:"progress_activity"})})]}),e.jsx("input",{ref:M,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:async r=>{var P,c,W,u;const g=(P=r.target.files)==null?void 0:P[0];if(g){if(!["image/jpeg","image/png","image/webp"].includes(g.type)){n.error("仅支持 JPG、PNG、WebP 格式");return}if(g.size>2*1024*1024){n.error("图片大小不能超过 2MB");return}try{O(!0);const Q=await m.assets.upload(g,{type:"package-cover"});y({...h,coverImage:((c=Q.data)==null?void 0:c.url)||Q.url}),n.success("封面上传成功")}catch(Q){n.error(((u=(W=Q.response)==null?void 0:W.data)==null?void 0:u.message)||"上传失败")}finally{O(!1),r.target.value=""}}},className:"hidden"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"最佳尺寸："}),"800 × 480 像素（5:3 比例）"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"格式："}),"JPG、PNG、WebP"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"大小："}),"不超过 2MB"]}),h.coverImage&&e.jsxs("button",{onClick:()=>y({...h,coverImage:null}),className:"mt-2 text-xs text-red-500 hover:text-red-600 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"移除封面"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标文字"}),e.jsx("input",{type:"text",value:h.badge||"",onChange:r=>y({...h,badge:r.target.value||null}),placeholder:"如：热销、超值、限时",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标颜色"}),e.jsx("div",{className:"flex items-center gap-2",children:Mx.map(r=>e.jsx("button",{onClick:()=>y({...h,badgeColor:r.value}),className:`w-6 h-6 rounded-full transition-transform ${h.badgeColor===r.value?"ring-2 ring-offset-2 ring-blue-500 scale-110":""}`,style:{backgroundColor:r.value},title:r.label},r.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.isActive??!0,onChange:r=>y({...h,isActive:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"上架"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.isRecommend??!1,onChange:r=>y({...h,isRecommend:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"推荐（高亮显示）"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:H,disabled:E,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:E?"保存中...":"保存"})]})]})})]})},ec={VIP:"VIP会员",SVIP:"SVIP会员"},Dx=()=>{const[s,N]=a.useState([]),[o,U]=a.useState([]),[b,T]=a.useState(!0),[h,y]=a.useState("codes"),[E,L]=a.useState(!1),[D,O]=a.useState(!1),[M,S]=a.useState({page:1,pageSize:20,total:0}),[C,G]=a.useState({status:"",batchId:""}),[A,H]=a.useState({count:10,credits:100,memberLevel:"",memberDays:0,expireAt:"",remark:""}),[_,B]=a.useState([]);a.useEffect(()=>{h==="codes"?f():r()},[h,M.page,C]);const f=async()=>{var I,k;try{T(!0);const z=await m.redeem.admin.getCodes({page:M.page,pageSize:M.pageSize,status:C.status||void 0,batchId:C.batchId||void 0});N(z.data||[]),S(J=>{var Z;return{...J,total:((Z=z.pagination)==null?void 0:Z.total)||0}})}catch(z){n.error(((k=(I=z.response)==null?void 0:I.data)==null?void 0:k.message)||"加载失败")}finally{T(!1)}},r=async()=>{var I,k;try{T(!0);const z=await m.redeem.admin.getBatches();U(z.data||[])}catch(z){n.error(((k=(I=z.response)==null?void 0:I.data)==null?void 0:k.message)||"加载失败")}finally{T(!1)}},g=async()=>{var I,k,z,J,Z;if(A.credits<=0){n.error("积分数量必须大于0");return}if(A.count<1||A.count>100){n.error("生成数量必须在1-100之间");return}try{O(!0);const se=await m.redeem.admin.generate({count:A.count,credits:A.credits,memberLevel:A.memberLevel||void 0,memberDays:A.memberDays||void 0,expireAt:A.expireAt||void 0,remark:A.remark||void 0}),Ae=((k=(I=se.data)==null?void 0:I.data)==null?void 0:k.codes)||[];if(Ae.length>0)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Ae.join(`
`));else{const oe=document.createElement("textarea");oe.value=Ae.join(`
`),oe.style.position="fixed",oe.style.opacity="0",document.body.appendChild(oe),oe.select(),document.execCommand("copy"),document.body.removeChild(oe)}n.success(`生成成功！${Ae.length} 个兑换码已复制到剪贴板`)}catch{n.success(`生成成功！${Ae.length} 个兑换码`)}else n.success(((z=se.data)==null?void 0:z.message)||"生成成功");L(!1),B([]),f(),r()}catch(se){n.error(((Z=(J=se.response)==null?void 0:J.data)==null?void 0:Z.message)||"生成失败")}finally{O(!1)}},P=async I=>{var k,z;if(confirm("确定删除此兑换码？"))try{await m.redeem.admin.deleteCode(I),n.success("删除成功"),f()}catch(J){n.error(((z=(k=J.response)==null?void 0:k.data)==null?void 0:z.message)||"删除失败")}},c=async I=>{var k,z,J;if(confirm("确定删除此批次所有未使用的兑换码？"))try{const Z=await m.redeem.admin.deleteBatch(I);n.success((k=Z.data)!=null&&k.deletedCount?`成功删除 ${Z.data.deletedCount} 个兑换码`:"删除成功"),r(),f()}catch(Z){n.error(((J=(z=Z.response)==null?void 0:z.data)==null?void 0:J.message)||"删除失败")}},W=async I=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(I);else{const k=document.createElement("textarea");k.value=I,k.style.position="fixed",k.style.opacity="0",document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k)}n.success("已复制到剪贴板")}catch{n.error("复制失败")}},u=async()=>{await W(_.join(`
`))},Q=I=>I?new Date(I).toLocaleString("zh-CN"):"-";return b&&s.length===0&&o.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"兑换码管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"生成和管理积分兑换码"})]}),e.jsxs("button",{onClick:()=>{B([]),L(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"生成兑换码"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>y("codes"),className:`pb-3 px-1 border-b-2 transition-colors ${h==="codes"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"兑换码列表"}),e.jsx("button",{onClick:()=>y("batches"),className:`pb-3 px-1 border-b-2 transition-colors ${h==="batches"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"批次管理"})]}),h==="codes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs("select",{value:C.status,onChange:I=>G({...C,status:I.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"unused",children:"未使用"}),e.jsx("option",{value:"used",children:"已使用"})]})}),e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"兑换码"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"状态"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"使用者"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"备注"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"创建时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark",children:[s.map(I=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:I.code}),e.jsx("button",{onClick:()=>W(I.code),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]})}),e.jsxs("td",{className:"px-4 py-3 text-amber-600 dark:text-amber-400 font-medium",children:["+",I.credits]}),e.jsxs("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400",children:[I.memberLevel?ec[I.memberLevel]||I.memberLevel:"-",I.memberDays?` (${I.memberDays}天)`:""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${I.isUsed?"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:I.isUsed?"已使用":"未使用"})}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400 text-sm",children:I.usedBy?e.jsx("span",{children:I.usedBy.nickname||I.usedBy.phone}):"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:I.remark||"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:Q(I.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:!I.isUsed&&e.jsx("button",{onClick:()=>P(I.id),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})})]},I.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-400",children:"暂无兑换码"})})]})]})}),M.total>M.pageSize&&e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>S(I=>({...I,page:I.page-1})),disabled:M.page<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"上一页"}),e.jsxs("span",{className:"px-3 py-1",children:[M.page," / ",Math.ceil(M.total/M.pageSize)]}),e.jsx("button",{onClick:()=>S(I=>({...I,page:I.page+1})),disabled:M.page>=Math.ceil(M.total/M.pageSize),className:"px-3 py-1 border rounded disabled:opacity-50",children:"下一页"})]})]}),h==="batches"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.map(I=>{var k;return e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:[(k=I.batchId)==null?void 0:k.substring(0,20),"..."]}),I.unused>0&&e.jsx("button",{onClick:()=>c(I.batchId),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-amber-500",children:["+",I.credits]}),I.memberLevel&&e.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400 rounded",children:ec[I.memberLevel]||I.memberLevel})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 text-center",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:I.total}),e.jsx("div",{className:"text-xs text-slate-500",children:"总数"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:I.unused}),e.jsx("div",{className:"text-xs text-slate-500",children:"可用"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-500",children:I.used}),e.jsx("div",{className:"text-xs text-slate-500",children:"已用"})]})]}),I.remark&&e.jsxs("div",{className:"text-sm text-slate-500 mb-2",children:["备注：",I.remark]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["创建于 ",Q(I.createdAt)]})]},I.batchId)}),o.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无批次记录"})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"生成兑换码"})}),e.jsx("div",{className:"p-6 space-y-4",children:_.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["生成数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,max:100,value:A.count,onChange:I=>H({...A,count:Number(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"最多100个"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,value:A.credits,onChange:I=>H({...A,credits:Number(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员等级（可选）"}),e.jsxs("select",{value:A.memberLevel,onChange:I=>H({...A,memberLevel:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"不设置"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"向上原则：不会降低用户等级"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数（可选）"}),e.jsx("input",{type:"number",min:0,value:A.memberDays,onChange:I=>H({...A,memberDays:Number(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"过期时间（可选）"}),e.jsx("input",{type:"datetime-local",value:A.expireAt,onChange:I=>H({...A,expireAt:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"备注（可选）"}),e.jsx("input",{type:"text",value:A.remark,onChange:I=>H({...A,remark:I.target.value}),placeholder:"如：活动名称",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-medium text-slate-900 dark:text-white",children:["已生成 ",_.length," 个兑换码"]}),e.jsxs("button",{onClick:u,className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"}),"复制全部"]})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 max-h-60 overflow-y-auto",children:_.map((I,k)=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-slate-200 dark:border-border-dark last:border-0",children:[e.jsx("code",{className:"font-mono text-sm",children:I}),e.jsx("button",{onClick:()=>W(I),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]},k))})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"关闭"}),_.length===0&&e.jsx("button",{onClick:g,disabled:D,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:D?"生成中...":"生成"})]})]})})]})},kl={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},yl={USER:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",VIP:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200",SVIP:"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200"},_x=()=>{const[s,N]=a.useState(!0),[o,U]=a.useState(!1),[b,T]=a.useState("levels"),[h,y]=a.useState([]),[E,L]=a.useState(null),[D,O]=a.useState(null),[M,S]=a.useState({}),C=a.useCallback(async()=>{N(!0);try{const[f,r]=await Promise.all([m.admin.userLevels.getConfigs(),m.admin.userLevels.getPermissionsSummary()]);f.success&&y(f.data),r.success&&L(r.data)}catch{n.error("加载配置失败")}finally{N(!1)}},[]);a.useEffect(()=>{C()},[C]);const G=async()=>{U(!0);try{(await m.admin.userLevels.batchUpdateConfigs(h.map(r=>({...r,giftDescription:r.giftDescription??void 0})))).success&&(n.success("等级配置保存成功"),C())}catch{n.error("保存失败")}finally{U(!1)}},A=(f,r,g)=>{y(P=>P.map(c=>c.userRole===f?{...c,[r]:g}:c))},H=async f=>{U(!0);try{const r=["USER","VIP","SVIP"].map(P=>{const c=f.permissions.find(u=>u.userRole===P),W=M[`${f.id}-${P}`]||{};return{aiModelId:f.id,userRole:P,isAllowed:W.isAllowed??(c==null?void 0:c.isAllowed)??!0,dailyLimit:W.dailyLimit??(c==null?void 0:c.dailyLimit)??-1,isFreeForMember:W.isFreeForMember??(c==null?void 0:c.isFreeForMember)??!1,freeDailyLimit:W.freeDailyLimit??(c==null?void 0:c.freeDailyLimit)??0,isActive:!0}});(await m.admin.userLevels.batchUpdatePermissions(r)).success&&(n.success("权限配置保存成功"),S({}),C())}catch{n.error("保存失败")}finally{U(!1)}},_=(f,r,g,P)=>{S(c=>({...c,[`${f}-${r}`]:{...c[`${f}-${r}`],[g]:P}}))},B=(f,r,g)=>{const P=M[`${f.id}-${r}`];if(P&&g in P)return P[g];const c=f.permissions.find(W=>W.userRole===r);return c?c[g]:g==="isAllowed"?!0:g==="dailyLimit"?-1:g==="isFreeForMember"?!1:g==="freeDailyLimit"?0:null};return s?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"用户等级权限配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400 mt-1",children:"配置不同等级用户的积分赠送规则和模型使用权限"})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>T("levels"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${b==="levels"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"等级配置"}),e.jsx("button",{onClick:()=>T("permissions"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${b==="permissions"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"模型权限"})]}),b==="levels"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"积分赠送与并发配置"}),e.jsx("button",{onClick:G,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"保存中...":"保存配置"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"用户等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日赠送积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"赠送天数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"最大并发数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"规则描述"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"启用"})]})}),e.jsx("tbody",{children:h.map(f=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${yl[f.userRole]}`,children:kl[f.userRole]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"0",value:f.dailyGiftCredits,onChange:r=>A(f.userRole,"dailyGiftCredits",parseInt(r.target.value)||0),className:"w-24 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:f.giftDays,onChange:r=>A(f.userRole,"giftDays",parseInt(r.target.value)||0),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:f.giftDays===0?"(无限期)":"天"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"1",value:f.maxConcurrency,onChange:r=>A(f.userRole,"maxConcurrency",parseInt(r.target.value)||1),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"text",value:f.giftDescription||"",onChange:r=>A(f.userRole,"giftDescription",r.target.value),placeholder:"规则说明...",className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.isActive,onChange:r=>A(f.userRole,"isActive",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]},f.userRole))})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"说明"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日赠送积分"}),"：用户每天登录时自动赠送的积分数量，赠送积分不累计（次日清零）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"赠送天数"}),"：新用户注册后赠送积分的天数，0表示无限期（VIP/SVIP会员有效期内持续赠送）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"最大并发数"}),"：用户同时进行的生成任务数量上限"]})]})]})]})}),b==="permissions"&&E&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"模型使用权限配置"}),e.jsx("div",{className:"space-y-4",children:E.models.map(f=>e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>O((D==null?void 0:D.id)===f.id?null:f),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:(D==null?void 0:D.id)===f.id?"expand_less":"expand_more"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:f.name}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:[f.provider," / ",f.modelId]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${f.type==="TEXT_GENERATION"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":f.type==="IMAGE_GENERATION"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":f.type==="VIDEO_GENERATION"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:f.type})})]}),(D==null?void 0:D.id)===f.id&&e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(r=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${yl[r]}`,children:kl[r]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B(f,r,"isAllowed"),onChange:g=>_(f.id,r,"isAllowed",g.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:B(f,r,"dailyLimit"),onChange:g=>_(f.id,r,"dailyLimit",parseInt(g.target.value)),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:B(f,r,"dailyLimit")===-1?"不限":"次/日"})]})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B(f,r,"isFreeForMember"),onChange:g=>_(f.id,r,"isFreeForMember",g.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-600"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"&&B(f,r,"isFreeForMember")?e.jsx("input",{type:"number",min:"0",value:B(f,r,"freeDailyLimit"),onChange:g=>_(f.id,r,"freeDailyLimit",parseInt(g.target.value)||0),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})})]},r))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>H(f),disabled:o,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"保存中...":"保存权限"})})]})]},f.id))}),E.models.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-gray-400",children:"暂无活跃的AI模型"})]}),E.nodeTypes.length>0&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"节点类型权限配置"}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:["已配置 ",E.nodeTypes.length," 个节点类型"]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"独立模块权限配置"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-4",children:"配置 Midjourney、广告成片等独立节点的使用权限"}),e.jsx("div",{className:"space-y-4",children:[{moduleType:"midjourney",name:"Midjourney",description:"文生图/图生图"},{moduleType:"commercial-video",name:"广告成片",description:"Vidu 广告视频"}].map(f=>{var g;const r=((g=E==null?void 0:E.moduleTypes.find(P=>P.moduleType===f.moduleType))==null?void 0:g.permissions)||[];return e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:f.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:f.description})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(P=>{const c=r.find(Z=>Z.userRole===P),W=`module-${f.moduleType}-${P}`,u=M[W]||{},Q=u.isAllowed??(c==null?void 0:c.isAllowed)??!0,I=u.dailyLimit??(c==null?void 0:c.dailyLimit)??-1,k=u.isFreeForMember??(c==null?void 0:c.isFreeForMember)??!1,z=u.freeDailyLimit??(c==null?void 0:c.freeDailyLimit)??0,J=P==="VIP"||P==="SVIP";return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${yl[P]}`,children:kl[P]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:Z=>S(se=>({...se,[W]:{...se[W],isAllowed:Z.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:J?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:Z=>S(se=>({...se,[W]:{...se[W],isFreeForMember:Z.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-amber-500"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:J?e.jsx("input",{type:"number",min:"0",value:z,onChange:Z=>S(se=>({...se,[W]:{...se[W],freeDailyLimit:parseInt(Z.target.value)||0}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:I,onChange:Z=>S(se=>({...se,[W]:{...se[W],dailyLimit:parseInt(Z.target.value)}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:I===-1?"不限":""})]})})]},P)})})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:async()=>{U(!0);try{const P=["USER","VIP","SVIP"].map(c=>{const W=`module-${f.moduleType}-${c}`,u=r.find(I=>I.userRole===c),Q=M[W]||{};return{moduleType:f.moduleType,userRole:c,isAllowed:Q.isAllowed??(u==null?void 0:u.isAllowed)??!0,dailyLimit:Q.dailyLimit??(u==null?void 0:u.dailyLimit)??-1,isFreeForMember:Q.isFreeForMember??(u==null?void 0:u.isFreeForMember)??!1,freeDailyLimit:Q.freeDailyLimit??(u==null?void 0:u.freeDailyLimit)??0,isActive:!0}});await m.admin.userLevels.batchUpdatePermissions(P),n.success(`${f.name} 权限保存成功`),C()}catch{n.error("保存失败")}finally{U(!1)}},disabled:o,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:"保存"})})]})]},f.moduleType)})})]}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"权限配置说明"}),e.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"允许使用"}),"：该等级用户是否可以使用此模型/节点"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日限制"}),"：每日可调用次数，-1表示不限制"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"会员免费"}),"：VIP/SVIP会员使用时是否免费（0积分）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"免费次数/日"}),"：每日免费使用的次数上限"]})]})]})]})]})},he=(s,N=2)=>{if(s===0)return"0 B";const o=1024,U=N<0?0:N,b=["B","KB","MB","GB","TB"],T=Math.floor(Math.log(s)/Math.log(o));return parseFloat((s/Math.pow(o,T)).toFixed(U))+" "+b[T]},fl=s=>{const N=Math.floor(s/86400),o=Math.floor(s%86400/3600),U=Math.floor(s%3600/60),b=[];return N>0&&b.push(`${N}天`),o>0&&b.push(`${o}小时`),U>0&&b.push(`${U}分钟`),b.join(" ")||"< 1分钟"},Us=({value:s,color:N="blue",showLabel:o=!0})=>{const U=()=>s>=90?"bg-red-500":s>=70?"bg-yellow-500":N==="blue"?"bg-blue-500":`bg-${N}-500`;return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${U()}`,style:{width:`${Math.min(s,100)}%`}})}),o&&e.jsxs("p",{className:`text-xs mt-1 ${s>=90?"text-red-500":s>=70?"text-yellow-500":"text-gray-500 dark:text-gray-400"}`,children:[s.toFixed(1),"%"]})]})},ya=({title:s,icon:N,children:o,className:U=""})=>e.jsxs("div",{className:`bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5 ${U}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:N}),e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300",children:s})]}),o]}),Gx=({status:s})=>{const N=()=>{switch(s){case"online":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"stopping":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"stopped":case"errored":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${N()}`,children:s})},Ux=()=>{var S,C,G;const[s,N]=a.useState(null),[o,U]=a.useState(!0),[b,T]=a.useState(null),[h,y]=a.useState(!0),[E,L]=a.useState(5e3),[D,O]=a.useState(null),M=a.useCallback(async()=>{var A,H,_;try{const B=await m.admin.getServerMetrics(),f=((A=B.data)==null?void 0:A.data)||B.data;f&&f.system?(N(f),O(new Date),T(null)):T("返回数据格式错误")}catch(B){T(((_=(H=B.response)==null?void 0:H.data)==null?void 0:_.message)||B.message||"获取监控数据失败")}finally{U(!1)}},[]);return a.useEffect(()=>{M()},[M]),a.useEffect(()=>{if(!h)return;const A=setInterval(M,E);return()=>clearInterval(A)},[h,E,M]),o&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载监控数据中..."})]})}):b||!o&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:b||"无法加载监控数据"}),e.jsx("button",{onClick:()=>{U(!0),M()},className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"重试"})]})}):s?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"服务器监控"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:["主机: ",s==null?void 0:s.system.hostname," | ",s==null?void 0:s.system.platform," ",s==null?void 0:s.system.arch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:E,onChange:A=>L(Number(A.target.value)),className:"px-3 py-1.5 text-sm bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("option",{value:3e3,children:"3秒"}),e.jsx("option",{value:5e3,children:"5秒"}),e.jsx("option",{value:1e4,children:"10秒"}),e.jsx("option",{value:3e4,children:"30秒"})]}),e.jsxs("button",{onClick:()=>y(!h),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors ${h?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:h?"sync":"sync_disabled"}),h?"自动刷新":"已暂停"]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]})]}),D&&e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["最后更新: ",D.toLocaleTimeString("zh-CN")]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"CPU 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.cpu.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[s.cpu.count," 核心"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"内存使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.memory.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[he(s.memory.used)," / ",he(s.memory.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Swap 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.swap.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[he(s.swap.used)," / ",he(s.swap.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"磁盘使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.disk.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[he(s.disk.used)," / ",he(s.disk.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:s.connections.onlineNow||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["WebSocket: ",s.connections.socket," | 会话: ",s.connections.validSessions]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"24h 请求"}),e.jsx("p",{className:"text-2xl font-bold",children:s.traffic.last24h.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"API 调用"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ya,{title:"CPU",icon:"memory",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"型号"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white truncate max-w-[200px]",children:s.cpu.model})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"核心数"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.cpu.count})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"使用率"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[s.cpu.usage,"%"]})]}),e.jsx(Us,{value:s.cpu.usage,showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"系统负载"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["1m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"1分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["5m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"5分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["15m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"15分钟"})]})]})]})]})}),e.jsx(ya,{title:"内存",icon:"memory_alt",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"物理内存"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[he(s.memory.used)," / ",he(s.memory.total)]})]}),e.jsx(Us,{value:s.memory.usage,color:"purple",showLabel:!1})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Swap"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[he(s.swap.used)," / ",he(s.swap.total)]})]}),e.jsx(Us,{value:s.swap.usage,color:"amber",showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用内存"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:he(s.memory.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Swap 可用"}),e.jsx("p",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:he(s.swap.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"系统运行"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:fl(s.system.uptime)})]})]})]})}),e.jsx(ya,{title:"数据库 (PostgreSQL)",icon:"database",children:s.database.error?e.jsx("p",{className:"text-red-500 text-sm",children:s.database.error}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总连接数"}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:((S=s.database.connections)==null?void 0:S.total)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃连接"}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400",children:((C=s.database.connections)==null?void 0:C.active)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"空闲连接"}),e.jsx("p",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400",children:((G=s.database.connections)==null?void 0:G.idle)||0})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"数据库大小"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.database.size||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃查询"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:s.database.activeQueries||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"慢查询"}),e.jsx("p",{className:`text-sm font-semibold ${(s.database.slowQueries||0)>0?"text-red-500":"text-green-500"}`,children:s.database.slowQueries||0})]})]})]})}),e.jsx(ya,{title:"Node.js 进程",icon:"code",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程 PID"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.process.pid})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程运行时间"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:fl(s.process.uptime)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"内存使用"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Used"}),e.jsx("p",{className:"text-sm font-semibold text-purple-600 dark:text-purple-400",children:he(s.process.memory.heapUsed)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Total"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.process.memory.heapTotal)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"RSS"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.process.memory.rss)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"External"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.process.memory.external)})]})]})]})]})})]}),s.pm2.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(ya,{title:"PM2 进程管理",icon:"hub",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"pb-2 font-medium",children:"进程名"}),e.jsx("th",{className:"pb-2 font-medium",children:"PID"}),e.jsx("th",{className:"pb-2 font-medium",children:"状态"}),e.jsx("th",{className:"pb-2 font-medium",children:"CPU"}),e.jsx("th",{className:"pb-2 font-medium",children:"内存"}),e.jsx("th",{className:"pb-2 font-medium",children:"运行时间"}),e.jsx("th",{className:"pb-2 font-medium",children:"重启次数"})]})}),e.jsx("tbody",{children:s.pm2.map((A,H)=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsx("td",{className:"py-2.5 font-medium text-slate-900 dark:text-white",children:A.name}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:A.pid}),e.jsx("td",{className:"py-2.5",children:e.jsx(Gx,{status:A.status})}),e.jsx("td",{className:"py-2.5",children:e.jsxs("span",{className:A.cpu>80?"text-red-500":A.cpu>50?"text-yellow-500":"text-green-500",children:[A.cpu,"%"]})}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:he(A.memory)}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:fl(A.uptime/1e3)}),e.jsx("td",{className:"py-2.5",children:e.jsx("span",{className:A.restarts>5?"text-red-500":"text-gray-600 dark:text-gray-400",children:A.restarts})})]},H))})]})})})}),e.jsx("div",{className:"mt-6",children:e.jsx(ya,{title:"磁盘存储",icon:"hard_drive",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"根分区 (/)"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[he(s.disk.used)," / ",he(s.disk.total)]})]}),e.jsx(Us,{value:s.disk.usage,color:"green"})]}),e.jsxs("div",{className:"pt-2 grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"已使用"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.disk.used)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用空间"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:he(s.disk.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总容量"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:he(s.disk.total)})]})]})]})})})]})]}):e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载中..."})]})})},Ox=[{name:"userInput",desc:"用户输入的场景描述",example:"高清放大这张图片"}],tc=[{value:"hdUpscale",label:"高清放大",icon:"high_quality"},{value:"storyboardMaster",label:"智能溶图",icon:"auto_awesome"},{value:"smartStoryboard",label:"智能分镜",icon:"grid_view"},{value:"aiImage",label:"图片生成",icon:"image"},{value:"aiVideo",label:"视频生成",icon:"movie"},{value:"aiVideo_t2v",label:"文生视频",icon:"movie"},{value:"aiVideo_i2v_first",label:"图生视频（首帧）",icon:"movie"},{value:"aiVideo_i2v_last",label:"图生视频（尾帧）",icon:"movie"},{value:"aiVideo_first_last",label:"首尾帧生成",icon:"movie"},{value:"aiVideo_reference",label:"参考图生成",icon:"movie"},{value:"aiVideo_swap",label:"视频编辑",icon:"movie"},{value:"aiVideo_lipsync",label:"口型同步",icon:"movie"},{value:"aiVideo_style",label:"风格迁移",icon:"movie"},{value:"soraVideo",label:"Sora视频",icon:"movie"},{value:"soraCharacter",label:"Sora角色",icon:"face"},{value:"midjourney",label:"Midjourney",icon:"palette"},{value:"agent",label:"智能体",icon:"smart_toy"},{value:"audioVoice",label:"语音合成",icon:"record_voice_over"},{value:"voiceClone",label:"声音克隆",icon:"mic"},{value:"audioSynthesize",label:"音频合成",icon:"music_note"},{value:"audioDesign",label:"音效设计",icon:"graphic_eq"},{value:"superCanvas",label:"超级画布",icon:"draw"},{value:"videoUpscale",label:"视频超分",icon:"high_quality"},{value:"commercialVideo",label:"广告成片",icon:"campaign"}],Vx=()=>{const[s,N]=a.useState([]),[o,U]=a.useState(null),[b,T]=a.useState(!0),[h,y]=a.useState(!1),[E,L]=a.useState(!1),[D,O]=a.useState({system:!0,user:!0,enhance:!1,variables:!1}),[M,S]=a.useState({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0}),C=async()=>{try{T(!0);const c=await m.nodePrompts.getAll(!0);c.success&&N(c.data||[])}catch(c){n.error("加载失败: "+(c.message||"未知错误"))}finally{T(!1)}};a.useEffect(()=>{C()},[]);const G=c=>{U(c),L(!1),S({nodeType:c.nodeType,name:c.name,description:c.description||"",systemPrompt:c.systemPrompt||"",userPromptTemplate:c.userPromptTemplate,enhancePromptTemplate:c.enhancePromptTemplate||"",variables:c.variables||[],isActive:c.isActive})},A=()=>{U(null),L(!0),S({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0})},H=async()=>{try{const c=await m.nodePrompts.initHDUpscale();c.success&&(n.success(c.message||"初始化成功"),await C(),c.data&&G(c.data))}catch(c){n.error("初始化失败: "+(c.message||"未知错误"))}},_=async()=>{try{const c=await m.nodePrompts.initImageFusion();c.success&&(n.success(c.message||"初始化成功"),await C(),c.data&&G(c.data))}catch(c){n.error("初始化失败: "+(c.message||"未知错误"))}},B=async()=>{try{const c=await m.nodePrompts.initSmartStoryboard();c.success&&(n.success(c.message||"初始化成功"),await C(),c.data&&G(c.data))}catch(c){n.error("初始化失败: "+(c.message||"未知错误"))}},f=async()=>{if(!M.nodeType.trim()){n.error("请输入节点类型");return}if(!M.name.trim()){n.error("请输入名称");return}if(!M.userPromptTemplate.trim()){n.error("请输入用户提示词模板");return}try{if(y(!0),E){const c=await m.nodePrompts.create(M);c.success&&(n.success("创建成功"),await C(),G(c.data))}else if(o){const c=await m.nodePrompts.update(o.id,M);c.success&&(n.success("保存成功"),await C(),G(c.data))}}catch(c){n.error("保存失败: "+(c.message||"未知错误"))}finally{y(!1)}},r=async()=>{if(o&&confirm(`确定要删除 "${o.name}" 吗？`))try{(await m.nodePrompts.delete(o.id)).success&&(n.success("删除成功"),U(null),L(!1),await C())}catch(c){n.error("删除失败: "+(c.message||"未知错误"))}},g=async()=>{if(o)try{const c=await m.nodePrompts.toggle(o.id);c.success&&(n.success(c.data.isActive?"已启用":"已禁用"),await C(),G(c.data))}catch(c){n.error("操作失败: "+(c.message||"未知错误"))}},P=c=>{O({...D,[c]:!D[c]})};return e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"节点提示词管理"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"配置工作流节点的 AI 提示词模板，支持变量替换"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-purple-500/20 text-purple-400 rounded-lg hover:bg-purple-500/30 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4"}),"初始化高清放大"]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-pink-500/20 text-pink-400 rounded-lg hover:bg-pink-500/30 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4"}),"初始化智能溶图"]}),e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors",children:[e.jsx(Os,{className:"w-4 h-4"}),"初始化智能分镜"]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:[e.jsx(ox,{className:"w-4 h-4"}),"新建模板"]})]})]}),e.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsx("h2",{className:"text-sm font-medium text-gray-400",children:"模板列表"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:b?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-purple-500/20 border-t-purple-500 rounded-full animate-spin"})}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"暂无模板"}),e.jsx("p",{className:"text-xs mt-1",children:'点击"初始化高清放大模板"开始'})]}):e.jsx("ul",{className:"space-y-1",children:s.map(c=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>G(c),className:`w-full text-left px-3 py-2.5 rounded-lg transition-all ${(o==null?void 0:o.id)===c.id?"bg-purple-500/20 text-purple-400":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c.isActive?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium truncate",children:c.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:c.nodeType})]})},c.id))})})]}),e.jsx("div",{className:"flex-1 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:!o&&!E?e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Bn,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"选择一个模板进行编辑"}),e.jsx("p",{className:"text-sm mt-1",children:'或点击"新建模板"创建'})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:E?"新建模板":`编辑: ${o==null?void 0:o.name}`}),e.jsxs("div",{className:"flex gap-2",children:[!E&&o&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:g,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-colors ${M.isActive?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,children:[M.isActive?e.jsx(nx,{className:"w-4 h-4"}):e.jsx(cx,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:M.isActive?"禁用":"启用"})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[e.jsx(Yc,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"删除"})]})]}),e.jsxs("button",{onClick:f,disabled:h,className:"flex items-center gap-1.5 px-4 py-1.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:[h?e.jsx(mx,{className:"w-4 h-4 animate-spin"}):e.jsx(ux,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"保存"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["节点类型 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:M.nodeType,onChange:c=>{const W=tc.find(u=>u.value===c.target.value);S({...M,nodeType:c.target.value,name:W?W.label+"提示词":M.name})},disabled:!E,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-purple-500 disabled:opacity-50",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"请选择节点类型"}),tc.map(c=>e.jsxs("option",{value:c.value,className:"bg-gray-800",children:[c.label," (",c.value,")"]},c.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["显示名称 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:M.name,onChange:c=>S({...M,name:c.target.value}),placeholder:"如: 高清放大节点",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"描述"}),e.jsx("input",{type:"text",value:M.description,onChange:c=>S({...M,description:c.target.value}),placeholder:"节点功能描述",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>P("system"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"系统提示词 (System Prompt)"}),D.system?e.jsx(pl,{className:"w-4 h-4 text-gray-400"}):e.jsx(bl,{className:"w-4 h-4 text-gray-400"})]}),D.system&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:M.systemPrompt,onChange:c=>S({...M,systemPrompt:c.target.value}),placeholder:"设定 AI 的角色和行为...",rows:8,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>P("user"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["用户提示词模板 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400",children:[e.jsx(ix,{className:"w-3 h-3"}),"支持 ","{{变量}}"," 语法"]})]}),D.user?e.jsx(pl,{className:"w-4 h-4 text-gray-400"}):e.jsx(bl,{className:"w-4 h-4 text-gray-400"})]}),D.user&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:M.userPromptTemplate,onChange:c=>S({...M,userPromptTemplate:c.target.value}),placeholder:"用户提示词模板，使用 {{变量名}} 插入动态内容...",rows:12,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>P("enhance"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"提示词增强模板 (可选)"}),D.enhance?e.jsx(pl,{className:"w-4 h-4 text-gray-400"}):e.jsx(bl,{className:"w-4 h-4 text-gray-400"})]}),D.enhance&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:M.enhancePromptTemplate,onChange:c=>S({...M,enhancePromptTemplate:c.target.value}),placeholder:"用于增强/优化用户输入的提示词...",rows:6,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 font-mono text-sm"})})]}),M.nodeType==="hdUpscale"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-2 text-purple-300",children:"🔍 高清放大可用变量（点击复制）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ox.map(c=>e.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`{{${c.name}}}`),n.success(`已复制 {{${c.name}}}`)},className:"flex items-center gap-2 p-2 bg-black/20 rounded hover:bg-black/30 transition-colors text-left",children:[e.jsx("code",{className:"text-purple-400 text-xs",children:`{{${c.name}}}`}),e.jsxs("span",{className:"text-gray-400 text-xs truncate",children:[c.desc,"：",c.example]})]},c.name))})]}),e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 默认提示词"}),e.jsx("p",{className:"text-xs opacity-80",children:"将这张图片进行高清放大，保持原有的画面内容、构图和风格不变，提升图片的清晰度和细节"})]})]}):e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 使用说明"}),e.jsxs("p",{children:["在提示词中可使用变量：",e.jsx("code",{className:"bg-black/30 px-1 rounded",children:"{{userInput}}"})," 会被替换为用户输入"]})]})]})]})})]})]})},jl=({data:s,height:N=60,unit:o=""})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:N},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const U=Math.max(...s.map(h=>h.value),1);if(s.reduce((h,y)=>h+y.value,0)===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:N},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const T=N-20;return e.jsxs("div",{className:"flex flex-col",style:{height:N},children:[e.jsx("div",{className:"flex items-end gap-1 flex-1",style:{height:T},children:s.map((h,y)=>{const E=h.value/U*100;return e.jsx("div",{className:"flex-1 h-full flex items-end",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t transition-all duration-300",style:{height:`${E}%`,minHeight:h.value>0?"3px":"0px"},title:`${h.label}: ${h.value}${o}`})},y)})}),e.jsx("div",{className:"flex gap-1 mt-1",children:s.map((h,y)=>e.jsx("div",{className:"flex-1 text-center",children:e.jsx("span",{className:"text-[10px] text-gray-400",children:h.label})},y))})]})},Fx=({rate:s})=>{const N=typeof s=="string"?parseFloat(s):s,o=N>0,U=N===0;return e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${U?"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400":o?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"}`,children:[o?"+":"",N,"%"]})},$x=({role:s})=>{const N={ADMIN:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",SVIP:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",VIP:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",USER:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"};return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${N[s]||N.USER}`,children:s})},Kx=()=>{var L,D,O,M,S,C,G,A,H,_,B,f,r,g,P,c,W,u,Q,I,k,z,J,Z,se,Ae,oe,ke,Pe,kt,yt,De,v,ee,ae,le;const[s,N]=a.useState(null),[o,U]=a.useState(!0),[b,T]=a.useState(null),[h,y]=a.useState(null),E=a.useCallback(async()=>{var Y,ne,pe;try{const dt=await m.admin.getStats(),ja=((Y=dt.data)==null?void 0:Y.data)||dt.data;N(ja),y(new Date),T(null)}catch(dt){T(((pe=(ne=dt.response)==null?void 0:ne.data)==null?void 0:pe.message)||"加载数据失败")}finally{U(!1)}},[]);return a.useEffect(()=>{E();const Y=setInterval(E,3e4);return()=>clearInterval(Y)},[E]),o&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载运营数据中..."})]})}):b&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:b}),e.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"重试"})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"运营仪表板"}),h&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["最后更新: ",h.toLocaleTimeString("zh-CN")]})]}),e.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"总用户数"}),e.jsx("p",{className:"text-2xl font-bold",children:((D=(L=s==null?void 0:s.users)==null?void 0:L.total)==null?void 0:D.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["活跃: ",((O=s==null?void 0:s.users)==null?void 0:O.active)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"付费用户"}),e.jsx("p",{className:"text-2xl font-bold",children:((M=s==null?void 0:s.users)==null?void 0:M.paidTotal)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["VIP: ",((S=s==null?void 0:s.users)==null?void 0:S.vip)||0," | SVIP: ",((C=s==null?void 0:s.users)==null?void 0:C.svip)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日新增"}),e.jsx("p",{className:"text-2xl font-bold",children:((G=s==null?void 0:s.users)==null?void 0:G.todayNew)||0}),e.jsxs("p",{className:"text-xs opacity-60 flex items-center gap-1",children:["较昨日 ",e.jsx(Fx,{rate:((A=s==null?void 0:s.users)==null?void 0:A.growthRate)||0})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日收入"}),e.jsxs("p",{className:"text-2xl font-bold",children:["¥",(((H=s==null?void 0:s.revenue)==null?void 0:H.today)||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs opacity-60",children:["本月: ¥",(((_=s==null?void 0:s.revenue)==null?void 0:_.month)||0).toFixed(0)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:((B=s==null?void 0:s.online)==null?void 0:B.current)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日峰值: ",((f=s==null?void 0:s.online)==null?void 0:f.peakToday)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日AI调用"}),e.jsx("p",{className:"text-2xl font-bold",children:((g=(r=s==null?void 0:s.usage)==null?void 0:r.todayRecords)==null?void 0:g.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["消耗: ",((P=s==null?void 0:s.usage)==null?void 0:P.todayCredits)||0," 积分"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-500 text-lg",children:"folder"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"活跃项目"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((c=s==null?void 0:s.projects)==null?void 0:c.active)||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["总计: ",((W=s==null?void 0:s.projects)==null?void 0:W.total)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"photo_library"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"资产总数"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Q=(u=s==null?void 0:s.assets)==null?void 0:u.total)==null?void 0:Q.toLocaleString())||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["今日新增: ",((I=s==null?void 0:s.assets)==null?void 0:I.todayNew)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"auto_awesome"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AI总调用"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((z=(k=s==null?void 0:s.usage)==null?void 0:k.totalRecords)==null?void 0:z.toLocaleString())||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"历史累计"})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500 text-lg",children:"person_add"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"今日新付费"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((J=s==null?void 0:s.users)==null?void 0:J.todayNewPaid)||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"新增VIP/SVIP用户"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"show_chart"}),"24小时活跃度"]}),e.jsx(jl,{data:((se=(Z=s==null?void 0:s.trends)==null?void 0:Z.hourlyActivity)==null?void 0:se.map(Y=>({label:`${Y.hour}`,value:Y.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500",children:"trending_up"}),"7天用户增长"]}),e.jsx(jl,{data:((oe=(Ae=s==null?void 0:s.trends)==null?void 0:Ae.dailyUserGrowth)==null?void 0:oe.map(Y=>({label:Y.date.slice(5),value:Y.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"payments"}),"7天收入趋势"]}),e.jsx(jl,{data:((Pe=(ke=s==null?void 0:s.trends)==null?void 0:ke.dailyRevenue)==null?void 0:Pe.map(Y=>({label:Y.date.slice(5),value:Y.amount})))||[],height:80,unit:"元"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"}),"最近注册用户"]}),e.jsxs("div",{className:"space-y-2",children:[(yt=(kt=s==null?void 0:s.recent)==null?void 0:kt.users)==null?void 0:yt.map(Y=>{var ne;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium",children:(Y.nickname||Y.phone||"?")[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Y.nickname||((ne=Y.phone)==null?void 0:ne.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(Y.createdAt).toLocaleString("zh-CN")})]})]}),e.jsx($x,{role:Y.role})]},Y.id)}),(!((De=s==null?void 0:s.recent)!=null&&De.users)||s.recent.users.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无数据"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"receipt_long"}),"最近成功订单"]}),e.jsxs("div",{className:"space-y-2",children:[(ee=(v=s==null?void 0:s.recent)==null?void 0:v.orders)==null?void 0:ee.map(Y=>{var ne,pe,dt;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:((ne=Y.user)==null?void 0:ne.nickname)||((dt=(pe=Y.user)==null?void 0:pe.phone)==null?void 0:dt.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知用户"}),e.jsx("p",{className:"text-xs text-gray-400",children:Y.paidAt?new Date(Y.paidAt).toLocaleString("zh-CN"):"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["¥",(Y.amount/100).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["+",Y.credits," 积分"]})]})]},Y.id)}),(!((ae=s==null?void 0:s.recent)!=null&&ae.orders)||s.recent.orders.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无订单"})]})]})]}),((le=s==null?void 0:s.usage)==null?void 0:le.byOperation)&&s.usage.byOperation.length>0&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"analytics"}),"7天AI使用分布"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:s.usage.byOperation.slice(0,12).map((Y,ne)=>{var pe;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",title:Y.operation,children:Y.operation}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Y._count}),e.jsxs("p",{className:"text-xs text-gray-400",children:[((pe=Y._sum)==null?void 0:pe.creditsCharged)||0," 积分"]})]},ne)})})]})]})},Wx=()=>{const s=qc(),N=[{name:"仪表板",path:"/frame25",icon:"dashboard",exact:!0},{name:"服务器监控",path:"/frame25/server-monitor",icon:"monitoring"},{name:"任务管理",path:"/frame25/tasks",icon:"task_alt"},{name:"用户管理",path:"/frame25/users",icon:"group"},{name:"等级权限",path:"/frame25/user-levels",icon:"shield_person"},{name:"模型配置",path:"/frame25/model-config",icon:"smart_toy"},{name:"智能体配置",path:"/frame25/agents",icon:"psychology"},{name:"计费管理",path:"/frame25/billing",icon:"receipt_long"},{name:"支付配置",path:"/frame25/payment-config",icon:"account_balance_wallet"},{name:"套餐管理",path:"/frame25/packages",icon:"redeem"},{name:"兑换码管理",path:"/frame25/redeem-codes",icon:"confirmation_number"},{name:"节点提示词",path:"/frame25/node-prompts",icon:"edit_note"}],o=(U,b=!1)=>b?s.pathname===U:s.pathname.startsWith(U);return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("aside",{className:"w-64 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"管理后台"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"系统管理与配置"})]}),e.jsx("nav",{className:"space-y-1",children:N.map(U=>e.jsxs(Bc,{to:U.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${o(U.path,U.exact)?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:U.icon}),e.jsx("span",{className:"text-sm font-medium",children:U.name})]},U.path))})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs(Wc,{children:[e.jsx(at,{index:!0,element:e.jsx(Kx,{})}),e.jsx(at,{path:"server-monitor",element:e.jsx(Ux,{})}),e.jsx(at,{path:"users",element:e.jsx(fx,{})}),e.jsx(at,{path:"tasks",element:e.jsx(jx,{})}),e.jsx(at,{path:"user-levels",element:e.jsx(_x,{})}),e.jsx(at,{path:"model-config",element:e.jsx(kx,{})}),e.jsx(at,{path:"agents",element:e.jsx(yx,{})}),e.jsx(at,{path:"billing",element:e.jsx(Tx,{})}),e.jsx(at,{path:"payment-config",element:e.jsx(Ex,{})}),e.jsx(at,{path:"packages",element:e.jsx(Px,{})}),e.jsx(at,{path:"redeem-codes",element:e.jsx(Dx,{})}),e.jsx(at,{path:"node-prompts",element:e.jsx(Vx,{})})]})})]})};export{Wx as default};
