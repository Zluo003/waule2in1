import{r as a,j as e,u as Ix,L as Ax,a as Cx,b as Le}from"./react-vendor-BvY2dB7B.js";import{b as m,c as o}from"./index-Bes2bamT.js";import{c as ce}from"./createLucideIcon-CK1cQnin.js";import{C as Pc,V as Mc,I as Dc,S as Ks,L as Fs,T as Sx}from"./video-CPXLMxBS.js";import{S as Tx}from"./shield-Cyh8LQDI.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ce("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ce("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=ce("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=ce("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=ce("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ge=[{value:"21:9",label:"21:9"},{value:"16:9",label:"16:9"},{value:"4:3",label:"4:3"},{value:"3:2",label:"3:2"},{value:"5:4",label:"5:4"},{value:"1:1",label:"1:1"},{value:"4:5",label:"4:5"},{value:"2:3",label:"2:3"},{value:"3:4",label:"3:4"},{value:"9:16",label:"9:16"}],gt="gemini-2.5-pro",ht="gemini-2.5-flash",kt="gemini-2.5-flash-image",yt="gemini-3-pro-preview",ft="gemini-3-pro-image-preview",ya="doubao-seedance-1-0-pro-250528",fa="doubao-seedance-1-0-pro-fast-251015",ja="doubao-seedream-4-0-250828",xs="doubao-seedream-4-5-251128",Et="qwen-image-edit-plus",Rt="wan2.2-animate-move",Pt="wan2.2-animate-mix",Mt="video-style-transform",Dt="videoretalk",Bt="MiniMax-Hailuo-2.3",Wt="MiniMax-Hailuo-2.3-Fast",Yt="MiniMax-Hailuo-02",It="speech-2.6-hd",Zt="sora-image",Jt="sora-video",ea="viduq2-pro",ta="viduq2-pro-fast",aa="viduq2-turbo",sa="viduq2",Ve=s=>`https://generativelanguage.googleapis.com/v1beta/models/${s}:generateContent`,dt="https://ark.cn-beijing.volces.com/api/v3",wa="https://dashscope.aliyuncs.com",lt=`${wa}/api/v1/services/aigc/image2video/video-synthesis`,$s=`${wa}/api/v1/services/aigc/video-generation/video-synthesis`,va="http://localhost:8000",it="https://api.vidu.cn/ent/v2",Bx=()=>{const[s,I]=a.useState(!1),[n,O]=a.useState([]),[p,E]=a.useState("google_pro"),[u,k]=a.useState(!0),[v,L]=a.useState(!1),[M,V]=a.useState(null),[D,S]=a.useState("Gemini 2.5 Pro"),[b,P]=a.useState(!0),[A,R]=a.useState(""),[_,z]=a.useState(""),[y,r]=a.useState(""),[f,U]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[x,W]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[g,X]=a.useState(null),[T,j]=a.useState("Gemini 2.5 Flash (视频分析)"),[q,J]=a.useState(!0),[Z,se]=a.useState(""),[Se,oe]=a.useState(""),[ye,_e]=a.useState(""),[jt,vt]=a.useState(["TEXT","IMAGE","VIDEO"]),[Ge,w]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40}),[ee,ae]=a.useState(null),[le,Y]=a.useState("Gemini 2.5 Flash Image"),[ne,he]=a.useState(!0),[ot,Ia]=a.useState(""),[_l,Qs]=a.useState(""),[Gl,Xs]=a.useState(""),[Hs,zs]=a.useState(["TEXT","IMAGE"]),[nt,Aa]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:2}),[Oc,Ca]=a.useState(null),[Ul,qs]=a.useState("Gemini 3.0 Pro"),[Ol,Bs]=a.useState(!0),[Ws,Ys]=a.useState(""),[Vl,Zs]=a.useState(""),[Fl,Js]=a.useState(""),[er,tr]=a.useState(["TEXT","IMAGE","VIDEO","DOCUMENT"]),[Ke,At]=a.useState({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),[Sa,ms]=a.useState({enableThinkingMode:!0,thinkingLevel:"medium"}),[_t,Ta]=a.useState({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}),[Vc,Ea]=a.useState(null),[$l,ar]=a.useState("Gemini 3 Pro Image"),[Ll,sr]=a.useState(!0),[rr,dr]=a.useState(""),[Kl,lr]=a.useState(""),[Ql,ir]=a.useState(""),[or,nr]=a.useState(["TEXT","IMAGE"]),[De,Gt]=a.useState({supportedRatios:ge.map(t=>t.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}),[cr,us]=a.useState(null),[Xl,xr]=a.useState("Doubao SeeDance 1.0 Pro"),[Hl,mr]=a.useState(!0),[ur,br]=a.useState(""),[zl,pr]=a.useState(""),[ql,gr]=a.useState(""),[hr,kr]=a.useState(["TEXT","IMAGE"]),[fe,ra]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}),[yr,bs]=a.useState(null),[Bl,fr]=a.useState("Doubao SeeDance 1.0 Pro Fast"),[Wl,jr]=a.useState(!0),[vr,Nr]=a.useState(""),[Yl,wr]=a.useState(""),[Zl,Ir]=a.useState(""),[Ar,Cr]=a.useState(["TEXT","IMAGE"]),[je,da]=a.useState({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}),[Sr,ps]=a.useState(null),[Jl,Tr]=a.useState("Doubao SeeDream 4.0"),[ei,Er]=a.useState(!0),[Rr,Pr]=a.useState(""),[ti,Mr]=a.useState(""),[ai,Dr]=a.useState(""),[_r,Gr]=a.useState(["TEXT","IMAGE"]),[ct,Ra]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[Ur,gs]=a.useState(null),[si,Or]=a.useState("Doubao SeeDream 4.5"),[ri,Vr]=a.useState(!0),[Fr,$r]=a.useState(""),[di,Lr]=a.useState(""),[li,Kr]=a.useState(""),[Qr,Xr]=a.useState(["TEXT","IMAGE"]),[Ze,la]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}),[Fc,Pa]=a.useState(null),[ii,hs]=a.useState("Qwen Image Edit Plus"),[oi,ks]=a.useState(!0),[Hr,ys]=a.useState(""),[Ma,Ut]=a.useState(""),[Da,Ot]=a.useState(""),[zr,fs]=a.useState(["TEXT","IMAGE"]),[xt,ia]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:10}),[$c,_a]=a.useState(null),[ni,js]=a.useState("Aliyun Wan Animate Move"),[ci,vs]=a.useState(!0),[qr,Ns]=a.useState(""),[Ga,Vt]=a.useState(""),[Ua,Ft]=a.useState(""),[Lc]=a.useState(["IMAGE","VIDEO"]),[Oa,ws]=a.useState(["wan-std","wan-pro"]),[Kc,Va]=a.useState(null),[xi,Is]=a.useState("Aliyun Wan Animate Mix"),[mi,As]=a.useState(!0),[Br,Cs]=a.useState(""),[Fa,$t]=a.useState(""),[$a,Lt]=a.useState(""),[Qc]=a.useState(["IMAGE","VIDEO"]),[La,Ss]=a.useState(["wan-std","wan-pro"]),[Xc,Ka]=a.useState(null),[ui,Ts]=a.useState("Aliyun Video Style Transform"),[bi,Es]=a.useState(!0),[Wr,Rs]=a.useState(""),[Qa,Kt]=a.useState(""),[Xa,Qt]=a.useState(""),[Hc]=a.useState(["VIDEO"]),[pi,Ps]=a.useState(15),[Ha,Ms]=a.useState([0,1,2,3,4,5,6,7]),[zc,za]=a.useState(null),[gi,Ds]=a.useState("Aliyun VideoRetalk"),[hi,_s]=a.useState(!0),[Yr,Gs]=a.useState(""),[qa,Xt]=a.useState(""),[Ba,Ht]=a.useState(""),[Zr,Us]=a.useState(["VIDEO","AUDIO","IMAGE"]),[Jr,Os]=a.useState({video_extension:!1}),[qc,Wa]=a.useState(null),[ki,ed]=a.useState("MiniMax Hailuo 2.3"),[yi,td]=a.useState(!0),[ad,sd]=a.useState(""),[fi,rd]=a.useState(""),[ji,dd]=a.useState(""),[ld,id]=a.useState(["TEXT","IMAGE"]),[ve,oa]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}),[Bc,Ya]=a.useState(null),[vi,od]=a.useState("MiniMax Hailuo 2.3 Fast"),[Ni,nd]=a.useState(!0),[cd,xd]=a.useState(""),[wi,md]=a.useState(""),[Ii,ud]=a.useState(""),[bd,pd]=a.useState(["TEXT","IMAGE"]),[Ne,na]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}),[Wc,Za]=a.useState(null),[Ai,gd]=a.useState("MiniMax Hailuo 02"),[Ci,hd]=a.useState(!0),[kd,yd]=a.useState(""),[Si,fd]=a.useState(""),[Ti,jd]=a.useState(""),[vd,Nd]=a.useState(["TEXT","IMAGE"]),[we,ca]=a.useState({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}),[Vs,Ja]=a.useState(null),[Ei,wd]=a.useState("MiniMax Speech 2.6 HD"),[Ri,Id]=a.useState(!0),[Ad,Cd]=a.useState(""),[Pi,Sd]=a.useState(""),[Mi,Td]=a.useState(""),[Ed,Rd]=a.useState(["TEXT","AUDIO"]),[mt,es]=a.useState({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),[Je,ts]=a.useState({synth:!0,clone:!0,design:!0}),[Yc,as]=a.useState(null),[Di,Pd]=a.useState("Sora2 Image"),[_i,Md]=a.useState(!0),[Dd,_d]=a.useState(""),[Gi,Gd]=a.useState(""),[Ui,Ud]=a.useState(""),[Od,Vd]=a.useState(["TEXT","IMAGE"]),[ut,ss]=a.useState({supportedRatios:ge.map(t=>t.value),supportsImageToImage:!0,maxReferenceImages:5}),[Zc,rs]=a.useState(null),[Oi,Fd]=a.useState("Sora2 Video"),[Vi,$d]=a.useState(!0),[Ld,Kd]=a.useState(""),[Fi,Qd]=a.useState(""),[$i,Xd]=a.useState(""),[Hd,zd]=a.useState(["TEXT","IMAGE","VIDEO"]),[Te,zt]=a.useState({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}),[Jc,ds]=a.useState(null),[Li,qd]=a.useState("Vidu Q2 Pro"),[Ki,Bd]=a.useState(!0),[Wd,Yd]=a.useState(""),[Qi,Zd]=a.useState(""),[Xi,Jd]=a.useState(""),[el,tl]=a.useState(["TEXT","IMAGE"]),[me,Ct]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[ex,ls]=a.useState(null),[Hi,al]=a.useState("Vidu Q2 Pro Fast"),[zi,sl]=a.useState(!0),[rl,dl]=a.useState(""),[qi,ll]=a.useState(""),[Bi,il]=a.useState(""),[ol,nl]=a.useState(["TEXT","IMAGE"]),[ue,St]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[tx,is]=a.useState(null),[Wi,cl]=a.useState("Vidu Q2 Turbo"),[Yi,xl]=a.useState(!0),[ml,ul]=a.useState(""),[Zi,bl]=a.useState(""),[Ji,pl]=a.useState(""),[gl,hl]=a.useState(["TEXT","IMAGE"]),[be,Tt]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}),[ax,os]=a.useState(null),[eo,kl]=a.useState("Vidu Q2"),[to,yl]=a.useState(!0),[fl,jl]=a.useState(""),[ao,vl]=a.useState(""),[so,Nl]=a.useState(""),[wl,Il]=a.useState(["IMAGE"]),[Ie,xa]=a.useState({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0});a.useEffect(()=>{(async()=>{var c;try{const i=await m.get("/admin/settings/midjourney");k(((c=i.settings)==null?void 0:c.fastEnabled)??!0)}catch{}})()},[]);const sx=async t=>{try{L(!0),await m.put("/admin/settings/midjourney",{fastEnabled:t}),k(t),o.success(t?"Fast 模式已启用":"Fast 模式已禁用")}catch{o.error("更新设置失败")}finally{L(!1)}};a.useEffect(()=>{(async()=>{var c,i,N,C,d,l,h,F,B,re,de,K,G,$,H,te,Qe,et,lo,io,oo,no,co,xo,mo,uo,bo,po,go,ho,ko,yo,fo,jo,vo,No,wo,Io,Ao,Co,So,To,Eo,Ro,Po,Mo,Do,_o,Go,Uo,Oo,Vo,Fo,$o,Lo,Ko,Qo,Xo,Ho,zo,qo,Bo,Wo,Yo,Zo,Jo,en,tn,an,sn,rn,dn,ln,on,nn,cn,xn,mn,un,bn,pn,gn,hn,kn,yn,fn,jn,vn,Nn,wn,In,An,Cn,Sn,Tn,En,Rn,Pn,Mn,Dn,_n,Gn,Un,On,Vn,Fn,$n,Ln,Kn,Qn,Xn,Hn,zn,qn,Bn,Wn,Yn,Zn,Jn,ec,tc,ac,sc,rc,dc,lc,ic,oc,nc,cc,xc,mc,uc,bc,pc,gc,hc,kc,yc,fc,jc,vc;try{I(!0);const ma=await m.admin.getAIModels({provider:"google"}),ua=await m.admin.getAIModels({provider:"bytedance"}),ba=await m.admin.getAIModels({provider:"doubao"}),pa=await m.admin.getAIModels({provider:"aliyun"}),ga=await m.admin.getAIModels({provider:"minimaxi"}),ha=await m.admin.getAIModels({provider:"sora"}),ka=await m.admin.getAIModels({provider:"vidu"}),kx=Array.isArray(ma==null?void 0:ma.data)?ma.data:Array.isArray(ma)?ma:[],yx=Array.isArray(ua==null?void 0:ua.data)?ua.data:Array.isArray(ua)?ua:[],fx=Array.isArray(ba==null?void 0:ba.data)?ba.data:Array.isArray(ba)?ba:[],jx=Array.isArray(pa==null?void 0:pa.data)?pa.data:Array.isArray(pa)?pa:[],vx=Array.isArray(ga==null?void 0:ga.data)?ga.data:Array.isArray(ga)?ga:[],Nx=Array.isArray(ha==null?void 0:ha.data)?ha.data:Array.isArray(ha)?ha:[],wx=Array.isArray(ka==null?void 0:ka.data)?ka.data:Array.isArray(ka)?ka:[],xe=[...kx,...yx,...fx,...jx,...vx,...Nx,...wx];if(O(xe),!ro.current){const Q={"doubao-seedream-4-0":ja,"doubao-seedance-1-0-pro-fast":fa,"doubao-seedance-1-0-pro":ya},ns=xe.filter(qt=>Q[qt.modelId]);if(ns.length){for(const qt of ns)try{await m.admin.updateAIModel(qt.id,{modelId:Q[qt.modelId]})}catch{}await pe()}ro.current=!0}const Ue=xe.find(Q=>Q.modelId===gt);Ue?(V(Ue.id),S(Ue.name),P(Ue.isActive),R(Ue.pricePerUse||""),z(Ue.apiKey||""),r(Ue.apiUrl||Ve(gt)),U(Array.isArray((c=Ue.config)==null?void 0:c.acceptedInputs)?Ue.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:((i=Ue.config)==null?void 0:i.maxTokens)??8192,temperature:((N=Ue.config)==null?void 0:N.temperature)??.7,topP:((C=Ue.config)==null?void 0:C.topP)??.95,topK:((d=Ue.config)==null?void 0:d.topK)??40,frequencyPenalty:((l=Ue.config)==null?void 0:l.frequencyPenalty)??0,presencePenalty:((h=Ue.config)==null?void 0:h.presencePenalty)??0})):(V(null),S("Gemini 2.5 Pro"),P(!0),R(""),z(""),r(Ve(gt)),U(["TEXT","IMAGE","VIDEO","DOCUMENT"]),W({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}));const Xe=xe.find(Q=>Q.modelId===ht);Xe?(X(Xe.id),j(Xe.name),J(Xe.isActive),se(Xe.pricePerUse||""),oe(Xe.apiKey||""),_e(Xe.apiUrl||Ve(ht)),vt(Array.isArray((F=Xe.config)==null?void 0:F.acceptedInputs)?Xe.config.acceptedInputs:["TEXT","IMAGE","VIDEO"]),w({maxTokens:((B=Xe.config)==null?void 0:B.maxTokens)??8192,temperature:((re=Xe.config)==null?void 0:re.temperature)??.7,topP:((de=Xe.config)==null?void 0:de.topP)??.95,topK:((K=Xe.config)==null?void 0:K.topK)??40})):(X(null),j("Gemini 2.5 Flash (视频分析)"),J(!0),se(""),oe(""),_e(Ve(ht)),vt(["TEXT","IMAGE","VIDEO"]),w({maxTokens:8192,temperature:.7,topP:.95,topK:40}));const tt=xe.find(Q=>Q.modelId===kt);tt?(ae(tt.id),Y(tt.name),he(tt.isActive),Ia(tt.pricePerUse||""),Qs(tt.apiKey||""),Xs(tt.apiUrl||Ve(kt)),zs(Array.isArray((G=tt.config)==null?void 0:G.acceptedInputs)?tt.config.acceptedInputs:["TEXT","IMAGE"]),Aa({supportedRatios:(($=tt.config)==null?void 0:$.supportedRatios)||ge.map(Q=>Q.value),supportsImageToImage:((H=tt.config)==null?void 0:H.supportsImageToImage)!==!1,maxReferenceImages:((te=tt.config)==null?void 0:te.maxReferenceImages)??2})):(ae(null),Y("Gemini 2.5 Flash Image"),he(!0),Ia(""),Qs(""),Xs(Ve(kt)),zs(["TEXT","IMAGE"]),Aa({supportedRatios:ge.map(Q=>Q.value),supportsImageToImage:!0,maxReferenceImages:2}));const Ee=xe.find(Q=>Q.modelId===yt);Ee?(Ca(Ee.id),qs(Ee.name),Bs(Ee.isActive),Ys(Ee.pricePerUse||""),Zs(Ee.apiKey||""),Js(Ee.apiUrl||Ve(yt)),tr(Array.isArray((Qe=Ee.config)==null?void 0:Qe.acceptedInputs)?Ee.config.acceptedInputs:["TEXT","IMAGE","VIDEO","DOCUMENT"]),At({maxTokens:((et=Ee.config)==null?void 0:et.maxTokens)??8192,temperature:((lo=Ee.config)==null?void 0:lo.temperature)??.7,topP:((io=Ee.config)==null?void 0:io.topP)??.95,topK:((oo=Ee.config)==null?void 0:oo.topK)??40,frequencyPenalty:((no=Ee.config)==null?void 0:no.frequencyPenalty)??0,presencePenalty:((co=Ee.config)==null?void 0:co.presencePenalty)??0}),ms({enableThinkingMode:((xo=Ee.config)==null?void 0:xo.enableThinkingMode)??!0,thinkingLevel:((mo=Ee.config)==null?void 0:mo.thinkingLevel)||"medium"}),Ta({imageResolution:((uo=Ee.config)==null?void 0:uo.imageResolution)||"media_resolution_high",pdfResolution:((bo=Ee.config)==null?void 0:bo.pdfResolution)||"media_resolution_medium",videoResolution:((po=Ee.config)==null?void 0:po.videoResolution)||"media_resolution_low"})):(Ca(null),qs("Gemini 3.0 Pro"),Bs(!0),Ys(""),Zs(""),Js(Ve(yt)),tr(["TEXT","IMAGE","VIDEO","DOCUMENT"]),At({maxTokens:8192,temperature:.7,topP:.95,topK:40,frequencyPenalty:0,presencePenalty:0}),ms({enableThinkingMode:!0,thinkingLevel:"medium"}),Ta({imageResolution:"media_resolution_high",pdfResolution:"media_resolution_medium",videoResolution:"media_resolution_low"}));const Oe=xe.find(Q=>Q.modelId===ft);Oe?(Ea(Oe.id),ar(Oe.name),sr(Oe.isActive),dr(Oe.pricePerUse||""),lr(Oe.apiKey||""),ir(Oe.apiUrl||Ve(ft)),nr(Array.isArray((go=Oe.config)==null?void 0:go.acceptedInputs)?Oe.config.acceptedInputs:["TEXT","IMAGE"]),Gt({supportedRatios:((ho=Oe.config)==null?void 0:ho.supportedRatios)||ge.map(Q=>Q.value),supportedResolutions:((ko=Oe.config)==null?void 0:ko.supportedResolutions)||["2K","4K"],supportsImageToImage:((yo=Oe.config)==null?void 0:yo.supportsImageToImage)!==!1,supportsImageEditing:((fo=Oe.config)==null?void 0:fo.supportsImageEditing)===!0,maxReferenceImages:((jo=Oe.config)==null?void 0:jo.maxReferenceImages)??1,capabilities:((vo=Oe.config)==null?void 0:vo.capabilities)||["google_search","reasoning","text_rendering"]})):(Ea(null),ar("Gemini 3 Pro Image"),sr(!0),dr(""),lr(""),ir(Ve(ft)),nr(["TEXT","IMAGE"]),Gt({supportedRatios:ge.map(Q=>Q.value),supportedResolutions:["2K","4K"],supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:1,capabilities:["google_search","reasoning","text_rendering"]}));const He=xe.find(Q=>Q.modelId===ya);He?(us(He.id),xr(He.name),mr(He.isActive),br(He.pricePerUse||""),pr(He.apiKey||""),gr(He.apiUrl||dt),kr(Array.isArray((No=He.config)==null?void 0:No.acceptedInputs)?He.config.acceptedInputs:["TEXT","IMAGE"]),ra({supportedRatios:((wo=He.config)==null?void 0:wo.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((Io=He.config)==null?void 0:Io.supportedResolutions)||["720P","1080P","2K","4K"],supportedGenerationTypes:((Ao=He.config)==null?void 0:Ao.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Co=He.config)==null?void 0:Co.supportedDurations)||[5,6,8,10,15,30]})):(us(null),xr("Doubao SeeDance 1.0 Pro"),mr(!0),br(""),pr(""),gr(dt),kr(["TEXT","IMAGE"]),ra({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P","2K","4K"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[5,6,8,10,15,30]}));const ze=xe.find(Q=>Q.modelId===fa);ze?(bs(ze.id),fr(ze.name),jr(ze.isActive),Nr(ze.pricePerUse||""),wr(ze.apiKey||""),Ir(ze.apiUrl||dt),Cr(Array.isArray((So=ze.config)==null?void 0:So.acceptedInputs)?ze.config.acceptedInputs:["TEXT","IMAGE"]),da({supportedRatios:((To=ze.config)==null?void 0:To.supportedRatios)||["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:((Eo=ze.config)==null?void 0:Eo.supportedResolutions)||["720P","1080P"],supportedGenerationTypes:((Ro=ze.config)==null?void 0:Ro.supportedGenerationTypes)||["文生视频","首帧"],supportedDurations:((Po=ze.config)==null?void 0:Po.supportedDurations)||[5,6,8,10]})):(bs(null),fr("Doubao SeeDance 1.0 Pro Fast"),jr(!0),Nr(""),wr(""),Ir(dt),Cr(["TEXT","IMAGE"]),da({supportedRatios:["21:9","16:9","4:3","1:1","3:4","9:16"],supportedResolutions:["720P","1080P"],supportedGenerationTypes:["文生视频","首帧"],supportedDurations:[5,6,8,10]}));const at=xe.find(Q=>Q.modelId===ja);at?(ps(at.id),Tr(at.name),Er(at.isActive),Pr(at.pricePerUse||""),Mr(at.apiKey||""),Dr(at.apiUrl||dt),Gr(Array.isArray((Mo=at.config)==null?void 0:Mo.acceptedInputs)?at.config.acceptedInputs:["TEXT","IMAGE"]),Ra({supportedRatios:((Do=at.config)==null?void 0:Do.supportedRatios)||ge.map(Q=>Q.value),supportsImageToImage:((_o=at.config)==null?void 0:_o.supportsImageToImage)!==!1,maxReferenceImages:((Go=at.config)==null?void 0:Go.maxReferenceImages)??10})):(ps(null),Tr("Doubao SeeDream 4.0"),Er(!0),Pr(""),Mr(""),Dr(dt),Gr(["TEXT","IMAGE"]),Ra({supportedRatios:ge.map(Q=>Q.value),supportsImageToImage:!0,maxReferenceImages:10}));const qe=xe.find(Q=>Q.modelId===xs);qe?(gs(qe.id),Or(qe.name),Vr(qe.isActive),$r(qe.pricePerUse||""),Lr(qe.apiKey||""),Kr(qe.apiUrl||dt),Xr(Array.isArray((Uo=qe.config)==null?void 0:Uo.acceptedInputs)?qe.config.acceptedInputs:["TEXT","IMAGE"]),la({supportedRatios:((Oo=qe.config)==null?void 0:Oo.supportedRatios)||ge.map(Q=>Q.value),supportsImageToImage:((Vo=qe.config)==null?void 0:Vo.supportsImageToImage)!==!1,supportsImageEditing:((Fo=qe.config)==null?void 0:Fo.supportsImageEditing)===!0,maxReferenceImages:(($o=qe.config)==null?void 0:$o.maxReferenceImages)??10})):(gs(null),Or("Doubao SeeDream 4.5"),Vr(!0),$r(""),Lr(""),Kr(dt),Xr(["TEXT","IMAGE"]),la({supportedRatios:ge.map(Q=>Q.value),supportsImageToImage:!0,supportsImageEditing:!0,maxReferenceImages:10}));const st=xe.find(Q=>Q.modelId===Et);st?(Pa(st.id),hs(st.name),ks(st.isActive),ys(st.pricePerUse||""),Ut(st.apiKey||""),Ot(st.apiUrl||`${wa}/api/v1/services/aigc/multimodal-generation/generation`),fs(Array.isArray((Lo=st.config)==null?void 0:Lo.acceptedInputs)?st.config.acceptedInputs:["TEXT","IMAGE"]),ia({supportedRatios:((Ko=st.config)==null?void 0:Ko.supportedRatios)||ge.map(Q=>Q.value),supportsImageToImage:((Qo=st.config)==null?void 0:Qo.supportsImageToImage)!==!1,maxReferenceImages:((Xo=st.config)==null?void 0:Xo.maxReferenceImages)??10})):(Pa(null),hs("Qwen Image Edit Plus"),ks(!0),ys(""),Ut(""),Ot(`${wa}/api/v1/services/aigc/multimodal-generation/generation`),fs(["TEXT","IMAGE"]),ia({supportedRatios:ge.map(Q=>Q.value),supportsImageToImage:!0,maxReferenceImages:10}));const Nt=xe.find(Q=>Q.modelId===Rt);Nt?(_a(Nt.id),js(Nt.name),vs(Nt.isActive),Ns(Nt.pricePerUse||""),Vt(Nt.apiKey||""),Ft(Nt.apiUrl||lt),ws(Array.isArray((Ho=Nt.config)==null?void 0:Ho.serviceModes)?Nt.config.serviceModes:["wan-std","wan-pro"])):(_a(null),js("Aliyun Wan Animate Move"),vs(!0),Ns(""),Vt(""),Ft(lt),ws(["wan-std","wan-pro"]));const wt=xe.find(Q=>Q.modelId===Pt);wt?(Va(wt.id),Is(wt.name),As(wt.isActive),Cs(wt.pricePerUse||""),$t(wt.apiKey||""),Lt(wt.apiUrl||lt),Ss(Array.isArray((zo=wt.config)==null?void 0:zo.serviceModes)?wt.config.serviceModes:["wan-std","wan-pro"])):(Va(null),Is("Aliyun Wan Animate Mix"),As(!0),Cs(""),$t(""),Lt(lt),Ss(["wan-std","wan-pro"]));const bt=xe.find(Q=>Q.modelId===Mt);bt?(Ka(bt.id),Ts(bt.name),Es(bt.isActive),Rs(bt.pricePerUse||""),Kt(bt.apiKey||""),Qt(bt.apiUrl||$s),Ms(Array.isArray((qo=bt.config)==null?void 0:qo.supportedStyles)?bt.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ps(((Bo=bt.config)==null?void 0:Bo.video_fps)??15)):(Ka(null),Ts("Aliyun Video Style Transform"),Es(!0),Rs(""),Kt(""),Qt($s),Ms([0,1,2,3,4,5,6,7]),Ps(15));const pt=xe.find(Q=>Q.modelId===Dt);pt?(za(pt.id),Ds(pt.name),_s(pt.isActive),Gs(pt.pricePerUse||""),Xt(pt.apiKey||""),Ht(pt.apiUrl||`${lt}/`),Us(Array.isArray((Wo=pt.config)==null?void 0:Wo.acceptedInputs)?pt.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),Os({video_extension:!!((Yo=pt.config)!=null&&Yo.video_extension)})):(za(null),Ds("Aliyun VideoRetalk"),_s(!0),Gs(""),Xt(""),Ht(`${lt}/`),Us(["VIDEO","AUDIO","IMAGE"]),Os({video_extension:!1}));const Be=xe.find(Q=>Q.modelId===Bt);Be?(Wa(Be.id),ed(Be.name),td(Be.isActive),sd(Be.pricePerUse||""),rd(Be.apiKey||""),dd(Be.apiUrl||"https://api.minimaxi.com/v1"),id(Array.isArray((Zo=Be.config)==null?void 0:Zo.acceptedInputs)?Be.config.acceptedInputs:["TEXT","IMAGE"]),oa({supportedRatios:((Jo=Be.config)==null?void 0:Jo.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((en=Be.config)==null?void 0:en.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((tn=Be.config)==null?void 0:tn.supportedGenerationTypes)||["文生视频","参考图","首帧"],supportedDurations:((an=Be.config)==null?void 0:an.supportedDurations)||[6,10]})):(Wa(null),ed("MiniMax Hailuo 2.3"),td(!0),sd(""),rd(""),dd("https://api.minimaxi.com/v1"),id(["TEXT","IMAGE"]),oa({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","首帧"],supportedDurations:[6,10]}));const We=xe.find(Q=>Q.modelId===Wt);We?(Ya(We.id),od(We.name),nd(We.isActive),xd(We.pricePerUse||""),md(We.apiKey||""),ud(We.apiUrl||"https://api.minimaxi.com/v1"),pd(Array.isArray((sn=We.config)==null?void 0:sn.acceptedInputs)?We.config.acceptedInputs:["TEXT","IMAGE"]),na({supportedRatios:((rn=We.config)==null?void 0:rn.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((dn=We.config)==null?void 0:dn.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((ln=We.config)==null?void 0:ln.supportedGenerationTypes)||["首帧"],supportedDurations:((on=We.config)==null?void 0:on.supportedDurations)||[6,10]})):(Ya(null),od("MiniMax Hailuo 2.3 Fast"),nd(!0),xd(""),md(""),ud("https://api.minimaxi.com/v1"),pd(["TEXT","IMAGE"]),na({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["首帧"],supportedDurations:[6,10]}));const Ye=xe.find(Q=>Q.modelId===Yt);Ye?(Za(Ye.id),gd(Ye.name),hd(Ye.isActive),yd(Ye.pricePerUse||""),fd(Ye.apiKey||""),jd(Ye.apiUrl||"https://api.minimaxi.com/v1"),Nd(Array.isArray((nn=Ye.config)==null?void 0:nn.acceptedInputs)?Ye.config.acceptedInputs:["TEXT","IMAGE"]),ca({supportedRatios:((cn=Ye.config)==null?void 0:cn.supportedRatios)||["16:9","9:16","1:1"],supportedResolutions:((xn=Ye.config)==null?void 0:xn.supportedResolutions)||["768P","1080P"],supportedGenerationTypes:((mn=Ye.config)==null?void 0:mn.supportedGenerationTypes)||["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((un=Ye.config)==null?void 0:un.supportedDurations)||[6,8,10]})):(Za(null),gd("MiniMax Hailuo 02"),hd(!0),yd(""),fd(""),jd("https://api.minimaxi.com/v1"),Nd(["TEXT","IMAGE"]),ca({supportedRatios:["16:9","9:16","1:1"],supportedResolutions:["768P","1080P"],supportedGenerationTypes:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[6,8,10]}));const Fe=xe.find(Q=>Q.modelId===It);if(Fe){Ja(Fe.id),wd(Fe.name),Id(Fe.isActive),Cd(Fe.pricePerUse||""),Sd(Fe.apiKey||""),Td(Fe.apiUrl||"https://api.minimaxi.com/v1"),Rd(Array.isArray((bn=Fe.config)==null?void 0:bn.acceptedInputs)?Fe.config.acceptedInputs:["TEXT","AUDIO"]),es({supportedFormats:((pn=Fe.config)==null?void 0:pn.supportedFormats)||["mp3","wav"],sampleRateMin:((gn=Fe.config)==null?void 0:gn.sampleRateMin)??16e3,supportsStereo:((hn=Fe.config)==null?void 0:hn.supportsStereo)!==!1});const Q=Array.isArray(Fe.capabilities)?Fe.capabilities:[],ns=Q.find(cs=>cs.capability==="语音合成"),qt=Q.find(cs=>cs.capability==="音色克隆"),Nc=Q.find(cs=>cs.capability==="音色设计");ts({synth:ns?!!ns.supported:!0,clone:qt?!!qt.supported:!0,design:Nc?!!Nc.supported:!0})}else Ja(null),wd("MiniMax Speech 2.6 HD"),Id(!0),Cd(""),Sd(""),Td("https://api.minimaxi.com/v1"),Rd(["TEXT","AUDIO"]),es({supportedFormats:["mp3","wav"],sampleRateMin:16e3,supportsStereo:!0}),ts({synth:!0,clone:!0,design:!0});const rt=xe.find(Q=>Q.modelId===Zt);rt?(as(rt.id),Pd(rt.name),Md(rt.isActive),_d(rt.pricePerUse||""),Gd(rt.apiKey||""),Ud(rt.apiUrl||va),Vd(Array.isArray((kn=rt.config)==null?void 0:kn.acceptedInputs)?rt.config.acceptedInputs:["TEXT","IMAGE"]),ss({supportedRatios:((yn=rt.config)==null?void 0:yn.supportedRatios)||ge.map(Q=>Q.value),supportsImageToImage:((fn=rt.config)==null?void 0:fn.supportsImageToImage)!==!1,maxReferenceImages:((jn=rt.config)==null?void 0:jn.maxReferenceImages)??5})):(as(null),Pd("Sora2 Image"),Md(!0),_d(""),Gd(""),Ud(va),Vd(["TEXT","IMAGE"]),ss({supportedRatios:ge.map(Q=>Q.value),supportsImageToImage:!0,maxReferenceImages:5}));const $e=xe.find(Q=>Q.modelId===Jt);$e?(rs($e.id),Fd($e.name),$d($e.isActive),Kd($e.pricePerUse||""),Qd($e.apiKey||""),Xd($e.apiUrl||va),zd(Array.isArray((vn=$e.config)==null?void 0:vn.acceptedInputs)?$e.config.acceptedInputs:["TEXT","IMAGE"]),zt({supportedRatios:((Nn=$e.config)==null?void 0:Nn.supportedRatios)||["landscape","portrait"],supportsImageToVideo:((wn=$e.config)==null?void 0:wn.supportsImageToVideo)!==!1,maxReferenceImages:((In=$e.config)==null?void 0:In.maxReferenceImages)??1,supportedGenerationTypes:((An=$e.config)==null?void 0:An.supportedGenerationTypes)||["文生视频","图生视频","视频生视频"],supportedDurations:((Cn=$e.config)==null?void 0:Cn.supportedDurations)||[10,15,25]})):(rs(null),Fd("Sora2 Video"),$d(!0),Kd(""),Qd(""),Xd(va),zd(["TEXT","IMAGE","VIDEO"]),zt({supportedRatios:["landscape","portrait"],supportsImageToVideo:!0,maxReferenceImages:1,supportedGenerationTypes:["文生视频","图生视频","视频生视频"],supportedDurations:[10,15,25]}));const Re=xe.find(Q=>Q.modelId===ea);Re?(ds(Re.id),qd(Re.name),Bd(Re.isActive),Yd(Re.pricePerUse||""),Zd(Re.apiKey||""),Jd(Re.apiUrl||it),tl(Array.isArray((Sn=Re.config)==null?void 0:Sn.acceptedInputs)?Re.config.acceptedInputs:["TEXT","IMAGE"]),Ct({supportedRatios:((Tn=Re.config)==null?void 0:Tn.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((En=Re.config)==null?void 0:En.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((Rn=Re.config)==null?void 0:Rn.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Pn=Re.config)==null?void 0:Pn.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Mn=Re.config)==null?void 0:Mn.maxDuration)??10,supportedFps:((Dn=Re.config)==null?void 0:Dn.supportedFps)||[24,30],maxResolution:((_n=Re.config)==null?void 0:_n.maxResolution)||"1920x1080",supportsImageToVideo:((Gn=Re.config)==null?void 0:Gn.supportsImageToVideo)!==!1,maxReferenceImages:((Un=Re.config)==null?void 0:Un.maxReferenceImages)??2,supportsSubjects:((On=Re.config)==null?void 0:On.supportsSubjects)!==!1,supportsAudioOutput:((Vn=Re.config)==null?void 0:Vn.supportsAudioOutput)!==!1})):(ds(null),qd("Vidu Q2 Pro"),Bd(!0),Yd(""),Zd(""),Jd(it),tl(["TEXT","IMAGE"]),Ct({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Pe=xe.find(Q=>Q.modelId===ta);Pe?(ls(Pe.id),al(Pe.name),sl(Pe.isActive),dl(Pe.pricePerUse||""),ll(Pe.apiKey||""),il(Pe.apiUrl||it),nl(Array.isArray((Fn=Pe.config)==null?void 0:Fn.acceptedInputs)?Pe.config.acceptedInputs:["TEXT","IMAGE"]),St({supportedRatios:(($n=Pe.config)==null?void 0:$n.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((Ln=Pe.config)==null?void 0:Ln.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((Kn=Pe.config)==null?void 0:Kn.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((Qn=Pe.config)==null?void 0:Qn.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((Xn=Pe.config)==null?void 0:Xn.maxDuration)??10,supportedFps:((Hn=Pe.config)==null?void 0:Hn.supportedFps)||[24,30],maxResolution:((zn=Pe.config)==null?void 0:zn.maxResolution)||"1920x1080",supportsImageToVideo:((qn=Pe.config)==null?void 0:qn.supportsImageToVideo)!==!1,maxReferenceImages:((Bn=Pe.config)==null?void 0:Bn.maxReferenceImages)??2,supportsSubjects:((Wn=Pe.config)==null?void 0:Wn.supportsSubjects)!==!1,supportsAudioOutput:((Yn=Pe.config)==null?void 0:Yn.supportsAudioOutput)!==!1})):(ls(null),al("Vidu Q2 Pro Fast"),sl(!0),dl(""),ll(""),il(it),nl(["TEXT","IMAGE"]),St({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Me=xe.find(Q=>Q.modelId===aa);Me?(is(Me.id),cl(Me.name),xl(Me.isActive),ul(Me.pricePerUse||""),bl(Me.apiKey||""),pl(Me.apiUrl||it),hl(Array.isArray((Zn=Me.config)==null?void 0:Zn.acceptedInputs)?Me.config.acceptedInputs:["TEXT","IMAGE"]),Tt({supportedRatios:((Jn=Me.config)==null?void 0:Jn.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((ec=Me.config)==null?void 0:ec.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((tc=Me.config)==null?void 0:tc.supportedGenerationTypes)||["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:((ac=Me.config)==null?void 0:ac.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((sc=Me.config)==null?void 0:sc.maxDuration)??10,supportedFps:((rc=Me.config)==null?void 0:rc.supportedFps)||[24,30],maxResolution:((dc=Me.config)==null?void 0:dc.maxResolution)||"1920x1080",supportsImageToVideo:((lc=Me.config)==null?void 0:lc.supportsImageToVideo)!==!1,maxReferenceImages:((ic=Me.config)==null?void 0:ic.maxReferenceImages)??2,supportsSubjects:((oc=Me.config)==null?void 0:oc.supportsSubjects)!==!1,supportsAudioOutput:((nc=Me.config)==null?void 0:nc.supportsAudioOutput)!==!1})):(is(null),cl("Vidu Q2 Turbo"),xl(!0),ul(""),bl(""),pl(it),hl(["TEXT","IMAGE"]),Tt({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["文生视频","主体参考","首帧","尾帧","首尾帧"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:2,supportsSubjects:!0,supportsAudioOutput:!0}));const Ce=xe.find(Q=>Q.modelId===sa);Ce?(os(Ce.id),kl(Ce.name),yl(Ce.isActive),jl(Ce.pricePerUse||""),vl(Ce.apiKey||""),Nl(Ce.apiUrl||it),Il(Array.isArray((cc=Ce.config)==null?void 0:cc.acceptedInputs)?Ce.config.acceptedInputs:["IMAGE"]),xa({supportedRatios:((xc=Ce.config)==null?void 0:xc.supportedRatios)||["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:((mc=Ce.config)==null?void 0:mc.supportedResolutions)||["540p","720p","1080p"],supportedGenerationTypes:((uc=Ce.config)==null?void 0:uc.supportedGenerationTypes)||["参考图生视频"],supportedDurations:((bc=Ce.config)==null?void 0:bc.supportedDurations)||[1,2,3,4,5,6,7,8,9,10],maxDuration:((pc=Ce.config)==null?void 0:pc.maxDuration)??10,supportedFps:((gc=Ce.config)==null?void 0:gc.supportedFps)||[24,30],maxResolution:((hc=Ce.config)==null?void 0:hc.maxResolution)||"1920x1080",supportsImageToVideo:((kc=Ce.config)==null?void 0:kc.supportsImageToVideo)!==!1,maxReferenceImages:((yc=Ce.config)==null?void 0:yc.maxReferenceImages)??7,supportsSubjects:((fc=Ce.config)==null?void 0:fc.supportsSubjects)!==!1,supportsAudioOutput:((jc=Ce.config)==null?void 0:jc.supportsAudioOutput)!==!1,supportsBgm:((vc=Ce.config)==null?void 0:vc.supportsBgm)!==!1})):(os(null),kl("Vidu Q2"),yl(!0),jl(""),vl(""),Nl(it),Il(["IMAGE"]),xa({supportedRatios:["16:9","9:16","1:1","4:3","3:4"],supportedResolutions:["540p","720p","1080p"],supportedGenerationTypes:["参考图生视频"],supportedDurations:[1,2,3,4,5,6,7,8,9,10],maxDuration:10,supportedFps:[24,30],maxResolution:"1920x1080",supportsImageToVideo:!0,maxReferenceImages:7,supportsSubjects:!0,supportsAudioOutput:!0,supportsBgm:!0}))}finally{I(!1)}})()},[]);const ro=a.useRef(!1),Ae=(t,c,i)=>{const N=t.includes(c);i(N?t.filter(C=>C!==c):[...t,c])},pe=async()=>{const t=await m.admin.getAIModels({provider:"google"}),c=await m.admin.getAIModels({provider:"bytedance"}),i=await m.admin.getAIModels({provider:"doubao"}),N=await m.admin.getAIModels({provider:"aliyun"}),C=await m.admin.getAIModels({provider:"minimaxi"}),d=await m.admin.getAIModels({provider:"sora"}),l=await m.admin.getAIModels({provider:"vidu"}),h=Array.isArray(t==null?void 0:t.data)?t.data:Array.isArray(t)?t:[],F=Array.isArray(c==null?void 0:c.data)?c.data:Array.isArray(c)?c:[],B=Array.isArray(i==null?void 0:i.data)?i.data:Array.isArray(i)?i:[],re=Array.isArray(N==null?void 0:N.data)?N.data:Array.isArray(N)?N:[],de=Array.isArray(C==null?void 0:C.data)?C.data:Array.isArray(C)?C:[],K=Array.isArray(d==null?void 0:d.data)?d.data:Array.isArray(d)?d:[],G=Array.isArray(l==null?void 0:l.data)?l.data:Array.isArray(l)?l:[];O([...h,...F,...B,...re,...de,...K,...G])},rx=async()=>{var t,c;try{const i={name:D,provider:"google",modelId:gt,type:"TEXT_GENERATION",apiKey:_,apiUrl:y,isActive:b,pricePerUse:A?parseFloat(A):void 0,config:{...x,acceptedInputs:f}},N=n.find(d=>d.provider==="google"&&d.modelId===gt),C=M||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;V((l==null?void 0:l.id)||C),o.success("已保存 Gemini 2.5 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;V((l==null?void 0:l.id)||null),o.success("已创建 Gemini 2.5 Pro 配置")}catch(d){const l=n.find(h=>h.provider==="google"&&h.modelId===gt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;V((F==null?void 0:F.id)||l.id),o.success("已保存 Gemini 2.5 Pro 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},dx=async()=>{var t,c;try{const i={name:T,provider:"google",modelId:ht,type:"TEXT_GENERATION",apiKey:Se,apiUrl:ye,isActive:q,pricePerUse:Z?parseFloat(Z):void 0,config:{...Ge,acceptedInputs:jt}},N=n.find(d=>d.provider==="google"&&d.modelId===ht),C=g||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;X((l==null?void 0:l.id)||C),o.success("已保存 Gemini 2.5 Flash 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;X((l==null?void 0:l.id)||null),o.success("已创建 Gemini 2.5 Flash 配置")}catch(d){const l=n.find(h=>h.provider==="google"&&h.modelId===ht);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;X((F==null?void 0:F.id)||l.id),o.success("已保存 Gemini 2.5 Flash 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},lx=async()=>{var t,c;try{const i={name:le,provider:"google",modelId:kt,type:"IMAGE_GENERATION",apiKey:_l,apiUrl:Gl,isActive:ne,pricePerUse:ot?parseFloat(ot):void 0,config:{...nt,acceptedInputs:Hs}},N=n.find(d=>d.provider==="google"&&d.modelId===kt),C=ee||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||C),o.success("已保存 Gemini 2.5 Flash Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ae((l==null?void 0:l.id)||null),o.success("已创建 Gemini 2.5 Flash Image 配置")}catch(d){const l=n.find(h=>h.provider==="google"&&h.modelId===kt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;ae((F==null?void 0:F.id)||l.id),o.success("已保存 Gemini 2.5 Flash Image 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},ix=async()=>{var t,c;try{const i={name:Ul,provider:"google",modelId:yt,type:"TEXT_GENERATION",apiKey:Vl,apiUrl:Fl,isActive:Ol,pricePerUse:Ws?parseFloat(Ws):void 0,config:{...Ke,...Sa,..._t,acceptedInputs:er}},N=n.find(d=>d.provider==="google"&&d.modelId===yt),C=Oc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;Ca((l==null?void 0:l.id)||C),o.success("已保存 Gemini 3.0 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Ca((l==null?void 0:l.id)||null),o.success("已创建 Gemini 3.0 Pro 配置")}catch(d){const l=n.find(h=>h.provider==="google"&&h.modelId===yt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;Ca((F==null?void 0:F.id)||l.id),o.success("已保存 Gemini 3.0 Pro 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},ox=async()=>{var t,c;try{const i={name:$l,provider:"google",modelId:ft,type:"IMAGE_GENERATION",apiKey:Kl,apiUrl:Ql,isActive:Ll,pricePerUse:rr?parseFloat(rr):void 0,config:{...De,acceptedInputs:or}},N=n.find(d=>d.provider==="google"&&d.modelId===ft),C=Vc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;Ea((l==null?void 0:l.id)||C),o.success("已保存 Gemini 3 Pro Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Ea((l==null?void 0:l.id)||null),o.success("已创建 Gemini 3 Pro Image 配置")}catch(d){const l=n.find(h=>h.provider==="google"&&h.modelId===ft);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;Ea((F==null?void 0:F.id)||l.id),o.success("已保存 Gemini 3 Pro Image 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},nx=async()=>{var t,c,i,N,C,d,l,h,F;try{const B={name:ii,provider:"aliyun",modelId:Et,type:"IMAGE_GENERATION",apiKey:Ma,apiUrl:Da,isActive:oi,pricePerUse:Hr?parseFloat(Hr):void 0,config:{...xt,acceptedInputs:zr}},re=n.find(H=>H.provider==="aliyun"&&H.modelId===Et),de=Fc||(re==null?void 0:re.id);if(de){const H=await m.admin.updateAIModel(de,B),te=((t=H==null?void 0:H.data)==null?void 0:t.data)||(H==null?void 0:H.data)||H;Pa((te==null?void 0:te.id)||de),Ut((te==null?void 0:te.apiKey)||Ma),Ot((te==null?void 0:te.apiUrl)||Da),o.success("已保存 Qwen Image Edit Plus 配置")}else try{const H=await m.admin.createAIModel(B),te=((c=H==null?void 0:H.data)==null?void 0:c.data)||(H==null?void 0:H.data)||H;Pa((te==null?void 0:te.id)||null),Ut((te==null?void 0:te.apiKey)||Ma),Ot((te==null?void 0:te.apiUrl)||Da),o.success("已创建 Qwen Image Edit Plus 配置")}catch(H){const te=n.find(Qe=>Qe.provider==="aliyun"&&Qe.modelId===Et);if(te){const Qe=await m.admin.updateAIModel(te.id,B),et=((i=Qe==null?void 0:Qe.data)==null?void 0:i.data)||(Qe==null?void 0:Qe.data)||Qe;Pa((et==null?void 0:et.id)||te.id),Ut((et==null?void 0:et.apiKey)||Ma),Ot((et==null?void 0:et.apiUrl)||Da),o.success("已保存 Qwen Image Edit Plus 配置")}else throw H}const K=await m.admin.getAIModels({provider:"aliyun"}),$=(Array.isArray(K==null?void 0:K.data)?K.data:Array.isArray(K)?K:[]).find(H=>H.modelId===Et);$&&(hs($.name),ks($.isActive),ys($.pricePerUse||""),Ut($.apiKey||""),Ot($.apiUrl||`${wa}/api/v1/services/aigc/multimodal-generation/generation`),fs(Array.isArray((N=$.config)==null?void 0:N.acceptedInputs)?$.config.acceptedInputs:["TEXT","IMAGE"]),ia({supportedRatios:((C=$.config)==null?void 0:C.supportedRatios)||ge.map(H=>H.value),supportsImageToImage:((d=$.config)==null?void 0:d.supportsImageToImage)!==!1,maxReferenceImages:((l=$.config)==null?void 0:l.maxReferenceImages)??10})),await pe()}catch(B){o.error(((F=(h=B==null?void 0:B.response)==null?void 0:h.data)==null?void 0:F.message)||"保存失败")}},cx=async()=>{var t,c,i,N,C,d;try{const l={name:ni,provider:"aliyun",modelId:Rt,type:"VIDEO_EDITING",apiKey:Ga,apiUrl:Ua,isActive:ci,pricePerUse:qr?parseFloat(qr):void 0,config:{serviceModes:Oa,acceptedInputs:Lc,supportedEditingCapabilities:["动作克隆"]}},h=n.find(K=>K.provider==="aliyun"&&K.modelId===Rt),F=$c||(h==null?void 0:h.id);if(F){const K=await m.admin.updateAIModel(F,l),G=((t=K==null?void 0:K.data)==null?void 0:t.data)||(K==null?void 0:K.data)||K;_a((G==null?void 0:G.id)||F),Vt((G==null?void 0:G.apiKey)||Ga),Ft((G==null?void 0:G.apiUrl)||Ua),o.success("已保存 Wan Animate Move 配置")}else try{const K=await m.admin.createAIModel(l),G=((c=K==null?void 0:K.data)==null?void 0:c.data)||(K==null?void 0:K.data)||K;_a((G==null?void 0:G.id)||null),Vt((G==null?void 0:G.apiKey)||Ga),Ft((G==null?void 0:G.apiUrl)||Ua),o.success("已创建 Wan Animate Move 配置")}catch(K){const G=n.find($=>$.provider==="aliyun"&&$.modelId===Rt);if(G){const $=await m.admin.updateAIModel(G.id,l),H=((i=$==null?void 0:$.data)==null?void 0:i.data)||($==null?void 0:$.data)||$;_a((H==null?void 0:H.id)||G.id),Vt((H==null?void 0:H.apiKey)||Ga),Ft((H==null?void 0:H.apiUrl)||Ua),o.success("已保存 Wan Animate Move 配置")}else throw K}const B=await m.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(B==null?void 0:B.data)?B.data:Array.isArray(B)?B:[]).find(K=>K.modelId===Rt);de&&(js(de.name),vs(de.isActive),Ns(de.pricePerUse||""),Vt(de.apiKey||""),Ft(de.apiUrl||lt),ws(Array.isArray((N=de.config)==null?void 0:N.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await pe()}catch(l){o.error(((d=(C=l==null?void 0:l.response)==null?void 0:C.data)==null?void 0:d.message)||"保存失败")}},xx=async()=>{var t,c,i,N,C,d;try{const l={name:xi,provider:"aliyun",modelId:Pt,type:"VIDEO_EDITING",apiKey:Fa,apiUrl:$a,isActive:mi,pricePerUse:Br?parseFloat(Br):void 0,config:{serviceModes:La,acceptedInputs:Qc,supportedEditingCapabilities:["视频换人"]}},h=n.find(K=>K.provider==="aliyun"&&K.modelId===Pt),F=Kc||(h==null?void 0:h.id);if(F){const K=await m.admin.updateAIModel(F,l),G=((t=K==null?void 0:K.data)==null?void 0:t.data)||(K==null?void 0:K.data)||K;Va((G==null?void 0:G.id)||F),$t((G==null?void 0:G.apiKey)||Fa),Lt((G==null?void 0:G.apiUrl)||$a),o.success("已保存 Wan Animate Mix 配置")}else try{const K=await m.admin.createAIModel(l),G=((c=K==null?void 0:K.data)==null?void 0:c.data)||(K==null?void 0:K.data)||K;Va((G==null?void 0:G.id)||null),$t((G==null?void 0:G.apiKey)||Fa),Lt((G==null?void 0:G.apiUrl)||$a),o.success("已创建 Wan Animate Mix 配置")}catch(K){const G=n.find($=>$.provider==="aliyun"&&$.modelId===Pt);if(G){const $=await m.admin.updateAIModel(G.id,l),H=((i=$==null?void 0:$.data)==null?void 0:i.data)||($==null?void 0:$.data)||$;Va((H==null?void 0:H.id)||G.id),$t((H==null?void 0:H.apiKey)||Fa),Lt((H==null?void 0:H.apiUrl)||$a),o.success("已保存 Wan Animate Mix 配置")}else throw K}const B=await m.admin.getAIModels({provider:"aliyun"}),de=(Array.isArray(B==null?void 0:B.data)?B.data:Array.isArray(B)?B:[]).find(K=>K.modelId===Pt);de&&(Is(de.name),As(de.isActive),Cs(de.pricePerUse||""),$t(de.apiKey||""),Lt(de.apiUrl||lt),Ss(Array.isArray((N=de.config)==null?void 0:N.serviceModes)?de.config.serviceModes:["wan-std","wan-pro"])),await pe()}catch(l){o.error(((d=(C=l==null?void 0:l.response)==null?void 0:C.data)==null?void 0:d.message)||"保存失败")}},mx=async()=>{var t,c,i,N,C,d,l;try{const h={name:ui,provider:"aliyun",modelId:Mt,type:"VIDEO_EDITING",apiKey:Qa,apiUrl:Xa,isActive:bi,pricePerUse:Wr?parseFloat(Wr):void 0,config:{supportedStyles:Ha,video_fps:pi,acceptedInputs:Hc,supportedEditingCapabilities:["风格转换"]}},F=n.find(G=>G.provider==="aliyun"&&G.modelId===Mt),B=Xc||(F==null?void 0:F.id);if(B){const G=await m.admin.updateAIModel(B,h),$=((t=G==null?void 0:G.data)==null?void 0:t.data)||(G==null?void 0:G.data)||G;Ka(($==null?void 0:$.id)||B),Kt(($==null?void 0:$.apiKey)||Qa),Qt(($==null?void 0:$.apiUrl)||Xa),o.success("已保存 Video Style Transform 配置")}else try{const G=await m.admin.createAIModel(h),$=((c=G==null?void 0:G.data)==null?void 0:c.data)||(G==null?void 0:G.data)||G;Ka(($==null?void 0:$.id)||null),Kt(($==null?void 0:$.apiKey)||Qa),Qt(($==null?void 0:$.apiUrl)||Xa),o.success("已创建 Video Style Transform 配置")}catch(G){const $=n.find(H=>H.provider==="aliyun"&&H.modelId===Mt);if($){const H=await m.admin.updateAIModel($.id,h),te=((i=H==null?void 0:H.data)==null?void 0:i.data)||(H==null?void 0:H.data)||H;Ka((te==null?void 0:te.id)||$.id),Kt((te==null?void 0:te.apiKey)||Qa),Qt((te==null?void 0:te.apiUrl)||Xa),o.success("已保存 Video Style Transform 配置")}else throw G}const re=await m.admin.getAIModels({provider:"aliyun"}),K=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(G=>G.modelId===Mt);K&&(Ts(K.name),Es(K.isActive),Rs(K.pricePerUse||""),Kt(K.apiKey||""),Qt(K.apiUrl||$s),Ms(Array.isArray((N=K.config)==null?void 0:N.supportedStyles)?K.config.supportedStyles:[0,1,2,3,4,5,6,7]),Ps(((C=K.config)==null?void 0:C.video_fps)??15)),await pe()}catch(h){o.error(((l=(d=h==null?void 0:h.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},ux=async()=>{var t,c,i,N,C,d,l;try{const h={name:gi,provider:"aliyun",modelId:Dt,type:"VIDEO_EDITING",apiKey:qa,apiUrl:Ba,isActive:hi,pricePerUse:Yr?parseFloat(Yr):void 0,config:{...Jr,acceptedInputs:Zr,supportedEditingCapabilities:["对口型"]}},F=n.find(G=>G.provider==="aliyun"&&G.modelId===Dt),B=zc||(F==null?void 0:F.id);if(B){const G=await m.admin.updateAIModel(B,h),$=((t=G==null?void 0:G.data)==null?void 0:t.data)||(G==null?void 0:G.data)||G;za(($==null?void 0:$.id)||B),Xt(($==null?void 0:$.apiKey)||qa),Ht(($==null?void 0:$.apiUrl)||Ba),o.success("已保存 VideoRetalk 配置")}else try{const G=await m.admin.createAIModel(h),$=((c=G==null?void 0:G.data)==null?void 0:c.data)||(G==null?void 0:G.data)||G;za(($==null?void 0:$.id)||null),Xt(($==null?void 0:$.apiKey)||qa),Ht(($==null?void 0:$.apiUrl)||Ba),o.success("已创建 VideoRetalk 配置")}catch(G){const $=n.find(H=>H.provider==="aliyun"&&H.modelId===Dt);if($){const H=await m.admin.updateAIModel($.id,h),te=((i=H==null?void 0:H.data)==null?void 0:i.data)||(H==null?void 0:H.data)||H;za((te==null?void 0:te.id)||$.id),Xt((te==null?void 0:te.apiKey)||qa),Ht((te==null?void 0:te.apiUrl)||Ba),o.success("已保存 VideoRetalk 配置")}else throw G}const re=await m.admin.getAIModels({provider:"aliyun"}),K=(Array.isArray(re==null?void 0:re.data)?re.data:Array.isArray(re)?re:[]).find(G=>G.modelId===Dt);K&&(Ds(K.name),_s(K.isActive),Gs(K.pricePerUse||""),Xt(K.apiKey||""),Ht(K.apiUrl||`${lt}/`),Us(Array.isArray((N=K.config)==null?void 0:N.acceptedInputs)?K.config.acceptedInputs:["VIDEO","AUDIO","IMAGE"]),Os({video_extension:!!((C=K.config)!=null&&C.video_extension)})),await pe()}catch(h){o.error(((l=(d=h==null?void 0:h.response)==null?void 0:d.data)==null?void 0:l.message)||"保存失败")}},bx=async()=>{var t,c;try{const i={name:Xl,provider:"bytedance",modelId:ya,type:"VIDEO_GENERATION",apiKey:zl,apiUrl:ql,isActive:Hl,pricePerUse:ur?parseFloat(ur):void 0,config:{...fe,acceptedInputs:hr}};if(cr){const N=await m.admin.updateAIModel(cr,i),C=(N==null?void 0:N.data)||N;us((C==null?void 0:C.id)||cr),o.success("已保存 Doubao SeeDance 1.0 Pro 配置")}else{const N=await m.admin.createAIModel(i),C=(N==null?void 0:N.data)||N;us((C==null?void 0:C.id)||null),o.success("已创建 Doubao SeeDance 1.0 Pro 配置")}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},px=async()=>{var t,c;try{const i={name:Bl,provider:"bytedance",modelId:fa,type:"VIDEO_GENERATION",apiKey:Yl,apiUrl:Zl,isActive:Wl,pricePerUse:vr?parseFloat(vr):void 0,config:{...je,acceptedInputs:Ar}};if(yr){const N=await m.admin.updateAIModel(yr,i),C=(N==null?void 0:N.data)||N;bs((C==null?void 0:C.id)||yr),o.success("已保存 Doubao SeeDance 1.0 Pro Fast 配置")}else{const N=await m.admin.createAIModel(i),C=(N==null?void 0:N.data)||N;bs((C==null?void 0:C.id)||null),o.success("已创建 Doubao SeeDance 1.0 Pro Fast 配置")}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},gx=async()=>{var t,c;try{const i={name:Jl,provider:"bytedance",modelId:ja,type:"IMAGE_GENERATION",apiKey:ti,apiUrl:ai,isActive:ei,pricePerUse:Rr?parseFloat(Rr):void 0,config:{...ct,acceptedInputs:_r}};if(Sr){const N=await m.admin.updateAIModel(Sr,i),C=(N==null?void 0:N.data)||N;ps((C==null?void 0:C.id)||Sr),o.success("已保存 Doubao SeeDream 4.0 配置")}else{const N=await m.admin.createAIModel(i),C=(N==null?void 0:N.data)||N;ps((C==null?void 0:C.id)||null),o.success("已创建 Doubao SeeDream 4.0 配置")}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},hx=async()=>{var t,c;try{const i={name:si,provider:"bytedance",modelId:xs,type:"IMAGE_GENERATION",apiKey:di,apiUrl:li,isActive:ri,pricePerUse:Fr?parseFloat(Fr):void 0,config:{...Ze,acceptedInputs:Qr}};if(Ur){const N=await m.admin.updateAIModel(Ur,i),C=(N==null?void 0:N.data)||N;gs((C==null?void 0:C.id)||Ur),o.success("已保存 Doubao SeeDream 4.5 配置")}else{const N=await m.admin.createAIModel(i),C=(N==null?void 0:N.data)||N;gs((C==null?void 0:C.id)||null),o.success("已创建 Doubao SeeDream 4.5 配置")}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-2",children:"模型配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"左侧模型列表，右侧对应配置"})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Midjourney Fast 模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 mt-1",children:"当 Fast 模式额度用完时，可以在此禁用。禁用后用户只能使用 Relax 模式。"})]}),e.jsx("button",{type:"button",onClick:()=>sx(!u),disabled:v,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u?"bg-green-500":"bg-slate-300 dark:bg-slate-600"} ${v?"opacity-50 cursor-not-allowed":""}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Google / Gemini"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("google_pro"),className:`w-full text-left p-3 rounded-lg border ${p==="google_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:gt})]}),n.find(t=>t.modelId===gt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("google_flash_text"),className:`w-full text-left p-3 rounded-lg border ${p==="google_flash_text"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-xs text-neutral-400",children:"(视频分析)"})]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ht})]}),n.find(t=>t.modelId===ht)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("google_flash"),className:`w-full text-left p-3 rounded-lg border ${p==="google_flash"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:kt})]}),n.find(t=>t.modelId===kt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("google_gemini3"),className:`w-full text-left p-3 rounded-lg border ${p==="google_gemini3"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:yt})]}),n.find(t=>t.modelId===yt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("google_gemini3_image"),className:`w-full text-left p-3 rounded-lg border ${p==="google_gemini3_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ft})]}),n.find(t=>t.modelId===ft)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Bytedance / Doubao"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("doubao_seedance_pro"),className:`w-full text-left p-3 rounded-lg border ${p==="doubao_seedance_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ya})]}),n.find(t=>t.modelId===ya)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("doubao_seedance_fast"),className:`w-full text-left p-3 rounded-lg border ${p==="doubao_seedance_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:fa})]}),n.find(t=>t.modelId===fa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("doubao_seedream"),className:`w-full text-left p-3 rounded-lg border ${p==="doubao_seedream"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ja})]}),n.find(t=>t.modelId===ja)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("doubao_seedream_45"),className:`w-full text-left p-3 rounded-lg border ${p==="doubao_seedream_45"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:xs})]}),n.find(t=>t.modelId===xs)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Aliyun / Qwen & Wanx"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("aliyun_qwen_image_edit"),className:`w-full text-left p-3 rounded-lg border ${p==="aliyun_qwen_image_edit"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Et})]}),n.find(t=>t.modelId===Et)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("aliyun_animate_move"),className:`w-full text-left p-3 rounded-lg border ${p==="aliyun_animate_move"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Rt})]}),n.find(t=>t.modelId===Rt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("aliyun_animate_mix"),className:`w-full text-left p-3 rounded-lg border ${p==="aliyun_animate_mix"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Pt})]}),n.find(t=>t.modelId===Pt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("aliyun_video_style"),className:`w-full text-left p-3 rounded-lg border ${p==="aliyun_video_style"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Mt})]}),n.find(t=>t.modelId===Mt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("aliyun_videoretalk"),className:`w-full text-left p-3 rounded-lg border ${p==="aliyun_videoretalk"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Dt})]}),n.find(t=>t.modelId===Dt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"MiniMax / Hailuo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("minimaxi_hailuo_23"),className:`w-full text-left p-3 rounded-lg border ${p==="minimaxi_hailuo_23"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Bt})]}),n.find(t=>t.modelId===Bt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("minimaxi_hailuo_23_fast"),className:`w-full text-left p-3 rounded-lg border ${p==="minimaxi_hailuo_23_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Wt})]}),n.find(t=>t.modelId===Wt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("minimaxi_hailuo_02"),className:`w-full text-left p-3 rounded-lg border ${p==="minimaxi_hailuo_02"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Yt})]}),n.find(t=>t.modelId===Yt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("minimaxi_speech_26_hd"),className:`w-full text-left p-3 rounded-lg border ${p==="minimaxi_speech_26_hd"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:It})]}),n.find(t=>t.modelId===It)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Sora / OpenAI"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("sora_image"),className:`w-full text-left p-3 rounded-lg border ${p==="sora_image"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Zt})]}),n.find(t=>t.modelId===Zt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("sora_video"),className:`w-full text-left p-3 rounded-lg border ${p==="sora_video"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:Jt})]}),n.find(t=>t.modelId===Jt)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"Vidu"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{type:"button",onClick:()=>E("vidu_q2_pro"),className:`w-full text-left p-3 rounded-lg border ${p==="vidu_q2_pro"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ea})]}),n.find(t=>t.modelId===ea)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("vidu_q2_pro_fast"),className:`w-full text-left p-3 rounded-lg border ${p==="vidu_q2_pro_fast"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Pro Fast"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:ta})]}),n.find(t=>t.modelId===ta)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("vidu_q2_turbo"),className:`w-full text-left p-3 rounded-lg border ${p==="vidu_q2_turbo"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:aa})]}),n.find(t=>t.modelId===aa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]}),e.jsxs("button",{type:"button",onClick:()=>E("vidu_q2"),className:`w-full text-left p-3 rounded-lg border ${p==="vidu_q2"?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700":"border-slate-200 dark:border-border-dark"} flex items-center justify-between`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500 font-mono",children:sa})]}),n.find(t=>t.modelId===sa)&&e.jsx("span",{className:"text-xs text-green-400",children:"已配置"})]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[p==="google_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:D,onChange:t=>S(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:gt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:A,onChange:t=>R(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:_,onChange:t=>z(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:y,onChange:t=>r(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ve(gt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(f,t,U),className:`px-3 py-1.5 rounded border-2 text-sm ${f.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:x.maxTokens,onChange:t=>W({...x,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:x.temperature,onChange:t=>W({...x,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:x.topP,onChange:t=>W({...x,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:x.topK,onChange:t=>W({...x,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:x.frequencyPenalty,onChange:t=>W({...x,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:x.presencePenalty,onChange:t=>W({...x,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:t=>P(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:rx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="google_flash_text"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Gemini 2.5 Flash ",e.jsx("span",{className:"text-neutral-500",children:"(视频分析)"})]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:T,onChange:t=>j(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ht,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Z,onChange:t=>se(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key *"}),e.jsx("input",{value:Se,onChange:t=>oe(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"AIzaSy..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ye,onChange:t=>_e(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ve(ht)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(jt,t,vt),className:`px-3 py-1.5 rounded border-2 text-sm ${jt.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:Ge.maxTokens,onChange:t=>w({...Ge,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:Ge.temperature,onChange:t=>w({...Ge,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:Ge.topP,onChange:t=>w({...Ge,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:Ge.topK,onChange:t=>w({...Ge,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-neutral-50 dark:bg-neutral-900/20 rounded-lg border border-neutral-200 dark:border-neutral-800",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-300 mb-2",children:"💡 专用于视频分析"}),e.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-400",children:'此模型用于"灵感/创意"页面的视频分镜分析功能，支持多模态输入（文本、图片、视频）'})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:t=>J(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:dx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="google_flash"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 2.5 Flash Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:le,onChange:t=>Y(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:kt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ot,onChange:t=>Ia(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:_l,onChange:t=>Qs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Gl,onChange:t=>Xs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ve(kt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Hs,t,zs),className:`px-3 py-1.5 rounded border-2 text-sm ${Hs.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Aa({...nt,supportedRatios:nt.supportedRatios.includes(t.value)?nt.supportedRatios.filter(c=>c!==t.value):[...nt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${nt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:nt.supportsImageToImage,onChange:t=>Aa({...nt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:nt.maxReferenceImages,onChange:t=>Aa({...nt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ne,onChange:t=>he(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:lx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="google_gemini3"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"TEXT_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ul,onChange:t=>qs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:yt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ws,onChange:t=>Ys(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Vl,onChange:t=>Zs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Fl,onChange:t=>Js(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ve(yt)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO","DOCUMENT"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(er,t,tr),className:`px-3 py-1.5 rounded border-2 text-sm ${er.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"思维模式配置"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Sa.enableThinkingMode,onChange:t=>ms({...Sa,enableThinkingMode:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"启用思维模式"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许模型展示推理过程"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"思维水平"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(t=>e.jsx("button",{type:"button",onClick:()=>ms({...Sa,thinkingLevel:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${Sa.thinkingLevel===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="low"?"低":t==="medium"?"中":"高"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"低：快速响应，简化推理；中：平衡速度与质量；高：深度思考，详细推理"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"媒体分辨率配置"}),e.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"分辨率越高，模型读取细小文本或识别细微细节的能力就越强，但会增加令牌用量和延迟时间"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"图片分辨率（推荐：High）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ta({..._t,imageResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${_t.imageResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"建议用于大多数图片分析任务，以确保获得最佳质量"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"PDF分辨率（推荐：Medium）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ta({..._t,pdfResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${_t.pdfResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (280)":t.includes("medium")?"Medium (560)":"High (1120)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"非常适合文档理解；质量通常在 Medium 时达到饱和"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频分辨率（推荐：Low）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["media_resolution_low","media_resolution_medium","media_resolution_high"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ta({..._t,videoResolution:t}),className:`px-4 py-2 rounded-lg border-2 text-sm ${_t.videoResolution===t?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.includes("low")?"Low (70/帧)":t.includes("medium")?"Medium (70/帧)":"High (280/帧)"},t))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Low/Medium 对于大多数动作识别和描述任务已足够；High 仅用于读取密集文本或视频帧中的微小细节"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",min:100,max:128e3,value:Ke.maxTokens,onChange:t=>At({...Ke,maxTokens:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"温度"}),e.jsx("input",{type:"number",step:.1,min:0,max:2,value:Ke.temperature,onChange:t=>At({...Ke,temperature:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top P"}),e.jsx("input",{type:"number",step:.05,min:0,max:1,value:Ke.topP,onChange:t=>At({...Ke,topP:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"Top K"}),e.jsx("input",{type:"number",min:1,max:100,value:Ke.topK,onChange:t=>At({...Ke,topK:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"频率惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Ke.frequencyPenalty,onChange:t=>At({...Ke,frequencyPenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"存在惩罚"}),e.jsx("input",{type:"number",step:.1,min:-2,max:2,value:Ke.presencePenalty,onChange:t=>At({...Ke,presencePenalty:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ol,onChange:t=>Bs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:ix,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="google_gemini3_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gemini 3 Pro Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:$l,onChange:t=>ar(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ft,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:rr,onChange:t=>dr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Kl,onChange:t=>lr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ql,onChange:t=>ir(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:Ve(ft)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(or,t,nr),className:`px-3 py-1.5 rounded border-2 text-sm ${or.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Gt({...De,supportedRatios:De.supportedRatios.includes(t.value)?De.supportedRatios.filter(c=>c!==t.value):[...De.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${De.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>Gt({...De,supportedResolutions:De.supportedResolutions.includes(t)?De.supportedResolutions.filter(c=>c!==t):[...De.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${De.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:De.supportsImageToImage,onChange:t=>Gt({...De,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图（对话式编辑）"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行对话式编辑"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:De.supportsImageEditing,onChange:t=>Gt({...De,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:De.maxReferenceImages,onChange:t=>Gt({...De,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"特殊能力"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-900 dark:text-blue-300 font-medium",children:"✓ Google 搜索集成"}),e.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-400",children:"支持实时检索和事实依据核查"})]}),e.jsxs("div",{className:"px-4 py-2 bg-neutral-50 dark:bg-neutral-900/20 border border-neutral-200 dark:border-neutral-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-neutral-900 dark:text-neutral-300 font-medium",children:"✓ 推理能力"}),e.jsx("div",{className:"text-xs text-neutral-700 dark:text-neutral-400",children:"支持思维过程推理生成"})]}),e.jsxs("div",{className:"px-4 py-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-900 dark:text-green-300 font-medium",children:"✓ 文本渲染"}),e.jsx("div",{className:"text-xs text-green-700 dark:text-green-400",children:"支持清晰易读的文本和图表渲染"})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ll,onChange:t=>sr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:ox,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="doubao_seedance_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Xl,onChange:t=>xr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ya,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ur,onChange:t=>br(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:zl,onChange:t=>pr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ql,onChange:t=>gr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:dt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(hr,t,kr),className:`px-3 py-1.5 rounded border-2 text-sm ${hr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>ra({...fe,supportedRatios:fe.supportedRatios.includes(t)?fe.supportedRatios.filter(c=>c!==t):[...fe.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P","2K","4K"].map(t=>e.jsx("button",{type:"button",onClick:()=>ra({...fe,supportedResolutions:fe.supportedResolutions.includes(t)?fe.supportedResolutions.filter(c=>c!==t):[...fe.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>ra({...fe,supportedGenerationTypes:fe.supportedGenerationTypes.includes(t)?fe.supportedGenerationTypes.filter(c=>c!==t):[...fe.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${fe.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10,15,30].map(t=>e.jsxs("button",{type:"button",onClick:()=>ra({...fe,supportedDurations:fe.supportedDurations.includes(t)?fe.supportedDurations.filter(c=>c!==t):[...fe.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${fe.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Hl,onChange:t=>mr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:bx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="doubao_seedance_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDance 1.0 Pro Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Bl,onChange:t=>fr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:fa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text.sm font-medium text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:vr,onChange:t=>Nr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Yl,onChange:t=>wr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Zl,onChange:t=>Ir(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:dt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Ar,t,Cr),className:`px-3 py-1.5 rounded border-2 text-sm ${Ar.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["21:9","16:9","4:3","1:1","3:4","9:16"].map(t=>e.jsx("button",{type:"button",onClick:()=>da({...je,supportedRatios:je.supportedRatios.includes(t)?je.supportedRatios.filter(c=>c!==t):[...je.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["720P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>da({...je,supportedResolutions:je.supportedResolutions.includes(t)?je.supportedResolutions.filter(c=>c!==t):[...je.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>da({...je,supportedGenerationTypes:je.supportedGenerationTypes.includes(t)?je.supportedGenerationTypes.filter(c=>c!==t):[...je.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${je.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:[5,6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>da({...je,supportedDurations:je.supportedDurations.includes(t)?je.supportedDurations.filter(c=>c!==t):[...je.supportedDurations,t]}),className:`px-3 py-1.5 rounded-lg border-2 text-sm ${je.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Wl,onChange:t=>jr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:px,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="doubao_seedream"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.0"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Jl,onChange:t=>Tr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ja,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Rr,onChange:t=>Pr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:ti,onChange:t=>Mr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ai,onChange:t=>Dr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:dt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(_r,t,Gr),className:`px-3 py-1.5 rounded border-2 text-sm ${_r.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>Ra({...ct,supportedRatios:ct.supportedRatios.includes(t.value)?ct.supportedRatios.filter(c=>c!==t.value):[...ct.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ct.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ct.supportsImageToImage,onChange:t=>Ra({...ct,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ct.maxReferenceImages,onChange:t=>Ra({...ct,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ei,onChange:t=>Er(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:gx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="doubao_seedream_45"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Doubao SeeDream 4.5"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:si,onChange:t=>Or(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:xs,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Fr,onChange:t=>$r(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:di,onChange:t=>Lr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"ak-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:li,onChange:t=>Kr(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:dt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Qr,t,Xr),className:`px-3 py-1.5 rounded border-2 text-sm ${Qr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>la({...Ze,supportedRatios:Ze.supportedRatios.includes(t.value)?Ze.supportedRatios.filter(c=>c!==t.value):[...Ze.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ze.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Ze.supportsImageToImage,onChange:t=>la({...Ze,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Ze.supportsImageEditing,onChange:t=>la({...Ze,supportsImageEditing:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-orange-900 dark:text-orange-300 font-medium",children:"图片编辑（工作流节点）"}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-400",children:"启用后此模型可用于图片编辑节点，支持点标记精准编辑"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Ze.maxReferenceImages,onChange:t=>la({...Ze,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ri,onChange:t=>Vr(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:hx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="aliyun_qwen_image_edit"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Qwen Image Edit Plus"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ii,onChange:t=>hs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Et,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Hr,onChange:t=>ys(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ma,onChange:t=>Ut(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Da,onChange:t=>Ot(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${wa}/api/v1/services/aigc/multimodal-generation/generation`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(zr,t,fs),className:`px-3 py-1.5 rounded border-2 text-sm ${zr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>ia({...xt,supportedRatios:xt.supportedRatios.includes(t.value)?xt.supportedRatios.filter(c=>c!==t.value):[...xt.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${xt.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:xt.supportsImageToImage,onChange:t=>ia({...xt,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"图片分辨率 200-4096px，比例 1:3 至 3:1，大小 ≤5MB"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:xt.maxReferenceImages,onChange:t=>ia({...xt,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:oi,onChange:t=>ks(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:nx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="aliyun_animate_move"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Move"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ni,onChange:t=>js(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Rt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:qr,onChange:t=>Ns(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Ga,onChange:t=>Vt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Ua,onChange:t=>Ft(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:lt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Oa.includes(t);ws(c?Oa.filter(i=>i!==t):[...Oa,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Oa.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB，建议仅一人正面"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:ci,onChange:t=>vs(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:cx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="aliyun_animate_mix"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Wan Animate Mix"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:xi,onChange:t=>Is(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Pt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Br,onChange:t=>Cs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Fa,onChange:t=>$t(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:$a,onChange:t=>Lt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:lt})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"服务模式（可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["wan-std","wan-pro"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=La.includes(t);Ss(c?La.filter(i=>i!==t):[...La,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${La.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"图片：尺寸 200-4096px，比例 1:3~3:1，≤5MB"}),e.jsx("div",{children:"视频：格式 MP4/AVI/MOV，时长 2~30s，尺寸 200~2048px，比例 1:3~3:1，≤200MB"}),e.jsx("div",{children:"必须使用异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:mi,onChange:t=>As(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:xx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="aliyun_video_style"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Video Style Transform"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ui,onChange:t=>Ts(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Mt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Wr,onChange:t=>Rs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Qa,onChange:t=>Kt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Xa,onChange:t=>Qt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:$s})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可用风格（0-7，可多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,1,2,3,4,5,6,7].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ha.includes(t);Ms(c?Ha.filter(i=>i!==t):[...Ha,t])},className:`px-3 py-1.5 rounded border-2 text-sm ${Ha.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频帧率"}),e.jsx("input",{type:"number",min:1,max:60,value:pi,onChange:t=>Ps(Number(t.target.value)),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})}),e.jsxs("div",{className:"mt-6 space-y-3 text-xs text-gray-400",children:[e.jsx("div",{children:"视频：时长 ≤30s，格式 MP4/AVI/MOV 等"}),e.jsx("div",{children:"异步调用，提交后轮询 task_id 获取结果"})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:bi,onChange:t=>Es(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:mx,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="aliyun_videoretalk"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"VideoRetalk"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_EDITING"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:gi,onChange:t=>Ds(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Dt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Yr,onChange:t=>Gs(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:qa,onChange:t=>Xt(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址（中国）"}),e.jsx("input",{value:Ba,onChange:t=>Ht(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:`${lt}/`})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["VIDEO","AUDIO","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Zr,t,Us),className:`px-3 py-1.5 rounded border-2 text-sm ${Zr.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Jr.video_extension,onChange:t=>Os({...Jr,video_extension:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"音频时长超出时扩展视频长度"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"视频 2~120s、15~60fps、640~2048 边长；音频 2~120s、≤30MB"})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"异步调用：提交任务后以 task_id 轮询结果"}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:hi,onChange:t=>_s(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:ux,className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="minimaxi_hailuo_23"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:ki,onChange:t=>ed(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Bt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ad,onChange:t=>sd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:fi,onChange:t=>rd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:ji,onChange:t=>dd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(ld,t,id),className:`px-3 py-1.5 rounded border-2 text-sm ${ld.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedRatios.includes(t);oa({...ve,supportedRatios:c?ve.supportedRatios.filter(i=>i!==t):[...ve.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedResolutions.includes(t);oa({...ve,supportedResolutions:c?ve.supportedResolutions.filter(i=>i!==t):[...ve.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=ve.supportedGenerationTypes.includes(t);oa({...ve,supportedGenerationTypes:c?ve.supportedGenerationTypes.filter(i=>i!==t):[...ve.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=ve.supportedDurations.includes(t);oa({...ve,supportedDurations:c?ve.supportedDurations.filter(i=>i!==t):[...ve.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${ve.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:yi,onChange:t=>td(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c,i;try{const N={name:ki,provider:"minimaxi",modelId:Bt,type:"VIDEO_GENERATION",apiKey:fi,apiUrl:ji,isActive:yi,pricePerUse:ad?parseFloat(ad):void 0,config:{...ve,acceptedInputs:ld}},C=n.find(l=>l.provider==="minimaxi"&&l.modelId===Bt),d=qc||(C==null?void 0:C.id);if(d){const l=await m.admin.updateAIModel(d,N),h=(l==null?void 0:l.data)||l;Wa((h==null?void 0:h.id)||d),o.success("已保存 MiniMax Hailuo 2.3 配置")}else try{const l=await m.admin.createAIModel(N),h=(l==null?void 0:l.data)||l;Wa((h==null?void 0:h.id)||null),o.success("已创建 MiniMax Hailuo 2.3 配置")}catch(l){const h=n.find(F=>F.provider==="minimaxi"&&F.modelId===Bt);if(h){const F=await m.admin.updateAIModel(h.id,N),B=(F==null?void 0:F.data)||F;Wa((B==null?void 0:B.id)||h.id),o.success("已保存 MiniMax Hailuo 2.3 配置")}else throw l}try{const l=Vs||(C==null?void 0:C.id)||((t=n.find(h=>h.provider==="minimaxi"&&h.modelId===It))==null?void 0:t.id);l&&await m.admin.upsertAIModelCapabilities({aiModelId:l,capabilities:[{capability:"语音合成",supported:!!Je.synth},{capability:"音色克隆",supported:!!Je.clone},{capability:"音色设计",supported:!!Je.design}]})}catch{}await pe()}catch(N){o.error(((i=(c=N==null?void 0:N.response)==null?void 0:c.data)==null?void 0:i.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="minimaxi_hailuo_23_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 2.3 Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:vi,onChange:t=>od(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Wt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:cd,onChange:t=>xd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:wi,onChange:t=>md(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ii,onChange:t=>ud(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(bd,t,pd),className:`px-3 py-1.5 rounded border-2 text-sm ${bd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedRatios.includes(t);na({...Ne,supportedRatios:c?Ne.supportedRatios.filter(i=>i!==t):[...Ne.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedResolutions.includes(t);na({...Ne,supportedResolutions:c?Ne.supportedResolutions.filter(i=>i!==t):[...Ne.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["首帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=Ne.supportedGenerationTypes.includes(t);na({...Ne,supportedGenerationTypes:c?Ne.supportedGenerationTypes.filter(i=>i!==t):[...Ne.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=Ne.supportedDurations.includes(t);na({...Ne,supportedDurations:c?Ne.supportedDurations.filter(i=>i!==t):[...Ne.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${Ne.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ni,onChange:t=>nd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:vi,provider:"minimaxi",modelId:Wt,type:"VIDEO_GENERATION",apiKey:wi,apiUrl:Ii,isActive:Ni,pricePerUse:cd?parseFloat(cd):void 0,config:{...Ne,acceptedInputs:bd}},N=n.find(d=>d.provider==="minimaxi"&&d.modelId===Wt),C=Bc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;Ya((l==null?void 0:l.id)||C),o.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Ya((l==null?void 0:l.id)||null),o.success("已创建 MiniMax Hailuo 2.3 Fast 配置")}catch(d){const l=n.find(h=>h.provider==="minimaxi"&&h.modelId===Wt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;Ya((F==null?void 0:F.id)||l.id),o.success("已保存 MiniMax Hailuo 2.3 Fast 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="minimaxi_hailuo_02"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Hailuo 02"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ai,onChange:t=>gd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Yt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:kd,onChange:t=>yd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Si,onChange:t=>fd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ti,onChange:t=>jd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(vd,t,Nd),className:`px-3 py-1.5 rounded border-2 text-sm ${vd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedRatios.includes(t);ca({...we,supportedRatios:c?we.supportedRatios.filter(i=>i!==t):[...we.supportedRatios,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["768P","1080P"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedResolutions.includes(t);ca({...we,supportedResolutions:c?we.supportedResolutions.filter(i=>i!==t):[...we.supportedResolutions,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["文生视频","参考图","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>{const c=we.supportedGenerationTypes.includes(t);ca({...we,supportedGenerationTypes:c?we.supportedGenerationTypes.filter(i=>i!==t):[...we.supportedGenerationTypes,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[6,8,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>{const c=we.supportedDurations.includes(t);ca({...we,supportedDurations:c?we.supportedDurations.filter(i=>i!==t):[...we.supportedDurations,t]})},className:`px-3 py-1.5 rounded border-2 text-sm ${we.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ci,onChange:t=>hd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Ai,provider:"minimaxi",modelId:Yt,type:"VIDEO_GENERATION",apiKey:Si,apiUrl:Ti,isActive:Ci,pricePerUse:kd?parseFloat(kd):void 0,config:{...we,acceptedInputs:vd}},N=n.find(d=>d.provider==="minimaxi"&&d.modelId===Yt),C=Wc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;Za((l==null?void 0:l.id)||C),o.success("已保存 MiniMax Hailuo 02 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;Za((l==null?void 0:l.id)||null),o.success("已创建 MiniMax Hailuo 02 配置")}catch(d){const l=n.find(h=>h.provider==="minimaxi"&&h.modelId===Yt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;Za((F==null?void 0:F.id)||l.id),o.success("已保存 MiniMax Hailuo 02 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="minimaxi_speech_26_hd"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"MiniMax Speech 2.6 HD"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"AUDIO_SYNTHESIS"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Ei,onChange:t=>wd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:It,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ad,onChange:t=>Cd(t.target.value),className:"w-full px-4 py-2 bg-background-dark border border-border-dark rounded-lg text白"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Pi,onChange:t=>Sd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Mi,onChange:t=>Td(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"https://api.minimaxi.com/v1"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","AUDIO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Ed,t,Rd),className:`px-3 py-1.5 rounded border-2 text-sm ${Ed.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的输出格式（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["mp3","wav"].map(t=>e.jsx("button",{type:"button",onClick:()=>es({...mt,supportedFormats:mt.supportedFormats.includes(t)?mt.supportedFormats.filter(c=>c!==t):[...mt.supportedFormats,t]}),className:`px-3 py-1.5 rounded border-2 text-sm ${mt.supportedFormats.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.toUpperCase()},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最小采样率"}),e.jsx("input",{type:"number",min:8e3,value:mt.sampleRateMin,onChange:t=>es({...mt,sampleRateMin:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:mt.supportsStereo,onChange:t=>es({...mt,supportsStereo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持立体声"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"输出双声道（channel=2），默认兼容"})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"模型能力（音频）"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:Je.synth,onChange:t=>ts({...Je,synth:t.target.checked})})," 语音合成"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:Je.clone,onChange:t=>ts({...Je,clone:t.target.checked})})," 音色克隆"]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-900 dark:text-white text-sm",children:[e.jsx("input",{type:"checkbox",checked:Je.design,onChange:t=>ts({...Je,design:t.target.checked})})," 音色设计"]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ri,onChange:t=>Id(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c,i;try{const N={name:Ei,provider:"minimaxi",modelId:It,type:"AUDIO_SYNTHESIS",apiKey:Pi,apiUrl:Mi,isActive:Ri,pricePerUse:Ad?parseFloat(Ad):void 0,config:{...mt,acceptedInputs:Ed}},C=n.find(B=>B.provider==="minimaxi"&&B.modelId===It),d=Vs||(C==null?void 0:C.id);if(d){const B=await m.admin.updateAIModel(d,N),re=(B==null?void 0:B.data)||B;Ja((re==null?void 0:re.id)||d),o.success("已保存 MiniMax Speech 2.6 HD 配置")}else try{const B=await m.admin.createAIModel(N),re=(B==null?void 0:B.data)||B;Ja((re==null?void 0:re.id)||null),o.success("已创建 MiniMax Speech 2.6 HD 配置")}catch(B){const re=n.find(de=>de.provider==="minimaxi"&&de.modelId===It);if(re){const de=await m.admin.updateAIModel(re.id,N),K=(de==null?void 0:de.data)||de;Ja((K==null?void 0:K.id)||re.id),o.success("已保存 MiniMax Speech 2.6 HD 配置")}else throw B}const l=Vs||(C==null?void 0:C.id),h=[{capability:"语音合成",supported:!!Je.synth},{capability:"音色克隆",supported:!!Je.clone},{capability:"音色设计",supported:!!Je.design}],F=l||((t=n.find(B=>B.provider==="minimaxi"&&B.modelId===It))==null?void 0:t.id)||Vs;F&&await m.admin.upsertAIModelCapabilities({aiModelId:F,capabilities:h}),await pe()}catch(N){o.error(((i=(c=N==null?void 0:N.response)==null?void 0:c.data)==null?void 0:i.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="sora_image"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Image"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"IMAGE_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Di,onChange:t=>Pd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Zt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Dd,onChange:t=>_d(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Gi,onChange:t=>Gd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ui,onChange:t=>Ud(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:va})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Od,t,Vd),className:`px-3 py-1.5 rounded border-2 text-sm ${Od.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:ge.map(t=>e.jsx("button",{type:"button",onClick:()=>ss({...ut,supportedRatios:ut.supportedRatios.includes(t.value)?ut.supportedRatios.filter(c=>c!==t.value):[...ut.supportedRatios,t.value]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ut.supportedRatios.includes(t.value)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ut.supportsImageToImage,onChange:t=>ss({...ut,supportsImageToImage:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生图"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ut.maxReferenceImages,onChange:t=>ss({...ut,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:_i,onChange:t=>Md(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Di,provider:"sora",modelId:Zt,type:"IMAGE_GENERATION",apiKey:Gi,apiUrl:Ui,isActive:_i,pricePerUse:Dd?parseFloat(Dd):void 0,config:{...ut,acceptedInputs:Od}},N=n.find(d=>d.provider==="sora"&&d.modelId===Zt),C=Yc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;as((l==null?void 0:l.id)||C),o.success("已保存 Sora2 Image 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;as((l==null?void 0:l.id)||null),o.success("已创建 Sora2 Image 配置")}catch(d){const l=n.find(h=>h.provider==="sora"&&h.modelId===Zt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;as((F==null?void 0:F.id)||l.id),o.success("已保存 Sora2 Image 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="sora_video"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Sora2 Video"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Oi,onChange:t=>Fd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:Jt,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Ld,onChange:t=>Kd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Fi,onChange:t=>Qd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"sk-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:$i,onChange:t=>Xd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:va})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE","VIDEO"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(Hd,t,zd),className:`px-3 py-1.5 rounded border-2 text-sm ${Hd.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["landscape","portrait"].map(t=>e.jsx("button",{type:"button",onClick:()=>zt({...Te,supportedRatios:Te.supportedRatios.includes(t)?Te.supportedRatios.filter(c=>c!==t):[...Te.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Te.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t==="landscape"?"横屏 (landscape)":"竖屏 (portrait)"},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:Te.supportsImageToVideo,onChange:t=>zt({...Te,supportsImageToVideo:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持图生视频"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"允许提供参考图进行生成"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:Te.maxReferenceImages,onChange:t=>zt({...Te,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","图生视频","视频生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>zt({...Te,supportedGenerationTypes:Te.supportedGenerationTypes.includes(t)?Te.supportedGenerationTypes.filter(c=>c!==t):[...Te.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Te.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[10,15,25].map(t=>e.jsxs("button",{type:"button",onClick:()=>zt({...Te,supportedDurations:(Te.supportedDurations||[]).includes(t)?(Te.supportedDurations||[]).filter(c=>c!==t):[...Te.supportedDurations||[],t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${(Te.supportedDurations||[]).includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"秒"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Vi,onChange:t=>$d(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Oi,provider:"sora",modelId:Jt,type:"VIDEO_GENERATION",apiKey:Fi,apiUrl:$i,isActive:Vi,pricePerUse:Ld?parseFloat(Ld):void 0,config:{...Te,acceptedInputs:Hd}},N=n.find(d=>d.provider==="sora"&&d.modelId===Jt),C=Zc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;rs((l==null?void 0:l.id)||C),o.success("已保存 Sora2 Video 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;rs((l==null?void 0:l.id)||null),o.success("已创建 Sora2 Video 配置")}catch(d){const l=n.find(h=>h.provider==="sora"&&h.modelId===Jt);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;rs((F==null?void 0:F.id)||l.id),o.success("已保存 Sora2 Video 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="vidu_q2_pro"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Pro"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Li,onChange:t=>qd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ea,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:Wd,onChange:t=>Yd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Qi,onChange:t=>Zd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Xi,onChange:t=>Jd(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(el,t,tl),className:`px-3 py-1.5 rounded border-2 text-sm ${el.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ct({...me,supportedRatios:me.supportedRatios.includes(t)?me.supportedRatios.filter(c=>c!==t):[...me.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ct({...me,supportedResolutions:me.supportedResolutions.includes(t)?me.supportedResolutions.filter(c=>c!==t):[...me.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:me.supportsSubjects,onChange:t=>Ct({...me,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:me.maxReferenceImages,onChange:t=>Ct({...me,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ct({...me,supportedGenerationTypes:me.supportedGenerationTypes.includes(t)?me.supportedGenerationTypes.filter(c=>c!==t):[...me.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>Ct({...me,supportedDurations:me.supportedDurations.includes(t)?me.supportedDurations.filter(c=>c!==t):[...me.supportedDurations,t].sort((c,i)=>c-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${me.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Ki,onChange:t=>Bd(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Li,provider:"vidu",modelId:ea,type:"VIDEO_GENERATION",apiKey:Qi,apiUrl:Xi,isActive:Ki,pricePerUse:Wd?parseFloat(Wd):void 0,config:{...me,acceptedInputs:el}},N=n.find(d=>d.provider==="vidu"&&d.modelId===ea),C=Jc||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;ds((l==null?void 0:l.id)||C),o.success("已保存 Vidu Q2 Pro 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ds((l==null?void 0:l.id)||null),o.success("已创建 Vidu Q2 Pro 配置")}catch(d){const l=n.find(h=>h.provider==="vidu"&&h.modelId===ea);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;ds((F==null?void 0:F.id)||l.id),o.success("已保存 Vidu Q2 Pro 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="vidu_q2_pro_fast"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Pro Fast"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Hi,onChange:t=>al(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:ta,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:rl,onChange:t=>dl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:["API Key ",e.jsx("span",{className:"text-xs text-slate-500",children:"（留空使用 waule-api）"})]}),e.jsx("input",{value:qi,onChange:t=>ll(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Bi,onChange:t=>il(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(ol,t,nl),className:`px-3 py-1.5 rounded border-2 text-sm ${ol.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>St({...ue,supportedRatios:ue.supportedRatios.includes(t)?ue.supportedRatios.filter(c=>c!==t):[...ue.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>St({...ue,supportedResolutions:ue.supportedResolutions.includes(t)?ue.supportedResolutions.filter(c=>c!==t):[...ue.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:ue.supportsSubjects,onChange:t=>St({...ue,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:ue.maxReferenceImages,onChange:t=>St({...ue,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>St({...ue,supportedGenerationTypes:ue.supportedGenerationTypes.includes(t)?ue.supportedGenerationTypes.filter(c=>c!==t):[...ue.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>St({...ue,supportedDurations:ue.supportedDurations.includes(t)?ue.supportedDurations.filter(c=>c!==t):[...ue.supportedDurations,t].sort((c,i)=>c-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${ue.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:zi,onChange:t=>sl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Hi,provider:"vidu",modelId:ta,type:"VIDEO_GENERATION",apiKey:qi,apiUrl:Bi,isActive:zi,pricePerUse:rl?parseFloat(rl):void 0,config:{...ue,acceptedInputs:ol}},N=n.find(d=>d.provider==="vidu"&&d.modelId===ta),C=ex||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;ls((l==null?void 0:l.id)||C),o.success("已保存 Vidu Q2 Pro Fast 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;ls((l==null?void 0:l.id)||null),o.success("已创建 Vidu Q2 Pro Fast 配置")}catch(d){const l=n.find(h=>h.provider==="vidu"&&h.modelId===ta);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;ls((F==null?void 0:F.id)||l.id),o.success("已保存 Vidu Q2 Pro Fast 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="vidu_q2_turbo"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2 Turbo"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:Wi,onChange:t=>cl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:aa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:ml,onChange:t=>ul(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:Zi,onChange:t=>bl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:Ji,onChange:t=>pl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["TEXT","IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(gl,t,hl),className:`px-3 py-1.5 rounded border-2 text-sm ${gl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的比例（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>Tt({...be,supportedRatios:be.supportedRatios.includes(t)?be.supportedRatios.filter(c=>c!==t):[...be.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>Tt({...be,supportedResolutions:be.supportedResolutions.includes(t)?be.supportedResolutions.filter(c=>c!==t):[...be.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-background-dark rounded-lg",children:[e.jsx("input",{type:"checkbox",checked:be.supportsSubjects,onChange:t=>Tt({...be,supportsSubjects:t.target.checked}),className:"w-5 h-5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-slate-900 dark:text-white",children:"支持主体参考 (Subjects)"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-gray-500",children:"支持从角色库选择角色组"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最大参考图数量"}),e.jsx("input",{type:"number",min:0,max:10,value:be.maxReferenceImages,onChange:t=>Tt({...be,maxReferenceImages:Number(t.target.value)}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["文生视频","主体参考","首帧","尾帧","首尾帧"].map(t=>e.jsx("button",{type:"button",onClick:()=>Tt({...be,supportedGenerationTypes:be.supportedGenerationTypes.includes(t)?be.supportedGenerationTypes.filter(c=>c!==t):[...be.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>Tt({...be,supportedDurations:be.supportedDurations.includes(t)?be.supportedDurations.filter(c=>c!==t):[...be.supportedDurations,t].sort((c,i)=>c-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${be.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:Yi,onChange:t=>xl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:Wi,provider:"vidu",modelId:aa,type:"VIDEO_GENERATION",apiKey:Zi,apiUrl:Ji,isActive:Yi,pricePerUse:ml?parseFloat(ml):void 0,config:{...be,acceptedInputs:gl}},N=n.find(d=>d.provider==="vidu"&&d.modelId===aa),C=tx||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;is((l==null?void 0:l.id)||C),o.success("已保存 Vidu Q2 Turbo 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;is((l==null?void 0:l.id)||null),o.success("已创建 Vidu Q2 Turbo 配置")}catch(d){const l=n.find(h=>h.provider==="vidu"&&h.modelId===aa);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;is((F==null?void 0:F.id)||l.id),o.success("已保存 Vidu Q2 Turbo 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),p==="vidu_q2"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Vidu Q2（参考图生视频）"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-slate-200 dark:bg-white/10 text-slate-700 dark:text-gray-300",children:"VIDEO_GENERATION"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型名称 *"}),e.jsx("input",{value:eo,onChange:t=>kl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"模型ID（只读）"}),e.jsx("input",{value:sa,disabled:!0,readOnly:!0,className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"价格（美元/次）"}),e.jsx("input",{type:"number",step:"0.0001",value:fl,onChange:t=>jl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"API Key"}),e.jsx("input",{value:ao,onChange:t=>vl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:"vidu-..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"接口地址"}),e.jsx("input",{value:so,onChange:t=>Nl(t.target.value),className:"w-full px-4 py-2 bg-slate-50 dark:bg-background-dark border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white font-mono",placeholder:it})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3",children:"可接受的输入"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["IMAGE"].map(t=>e.jsx("button",{type:"button",onClick:()=>Ae(wl,t,Il),className:`px-3 py-1.5 rounded border-2 text-sm ${wl.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的视频宽高比（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["16:9","9:16","1:1","4:3","3:4"].map(t=>e.jsx("button",{type:"button",onClick:()=>xa({...Ie,supportedRatios:Ie.supportedRatios.includes(t)?Ie.supportedRatios.filter(c=>c!==t):[...Ie.supportedRatios,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedRatios.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"支持的分辨率（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["540p","720p","1080p"].map(t=>e.jsx("button",{type:"button",onClick:()=>xa({...Ie,supportedResolutions:Ie.supportedResolutions.includes(t)?Ie.supportedResolutions.filter(c=>c!==t):[...Ie.supportedResolutions,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedResolutions.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"生成类型（多选）"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["参考图生视频"].map(t=>e.jsx("button",{type:"button",onClick:()=>xa({...Ie,supportedGenerationTypes:Ie.supportedGenerationTypes.includes(t)?Ie.supportedGenerationTypes.filter(c=>c!==t):[...Ie.supportedGenerationTypes,t]}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedGenerationTypes.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"视频时长（多选，秒）"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs("button",{type:"button",onClick:()=>xa({...Ie,supportedDurations:Ie.supportedDurations.includes(t)?Ie.supportedDurations.filter(c=>c!==t):[...Ie.supportedDurations,t].sort((c,i)=>c-i)}),className:`px-3 py-2 rounded-lg border-2 text-sm ${Ie.supportedDurations.includes(t)?"border-slate-400 dark:border-slate-500 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white font-bold":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400 hover:border-slate-400 dark:hover:border-gray-600"}`,children:[t,"s"]},t))})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:to,onChange:t=>yl(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:"启用此模型"})]}),e.jsx("button",{onClick:async()=>{var t,c;try{const i={name:eo,provider:"vidu",modelId:sa,type:"VIDEO_GENERATION",apiKey:ao,apiUrl:so,isActive:to,pricePerUse:fl?parseFloat(fl):void 0,config:{...Ie,acceptedInputs:wl}},N=n.find(d=>d.provider==="vidu"&&d.modelId===sa),C=ax||(N==null?void 0:N.id);if(C){const d=await m.admin.updateAIModel(C,i),l=(d==null?void 0:d.data)||d;os((l==null?void 0:l.id)||C),o.success("已保存 Vidu Q2 配置")}else try{const d=await m.admin.createAIModel(i),l=(d==null?void 0:d.data)||d;os((l==null?void 0:l.id)||null),o.success("已创建 Vidu Q2 配置")}catch(d){const l=n.find(h=>h.provider==="vidu"&&h.modelId===sa);if(l){const h=await m.admin.updateAIModel(l.id,i),F=(h==null?void 0:h.data)||h;os((F==null?void 0:F.id)||l.id),o.success("已保存 Vidu Q2 配置")}else throw d}await pe()}catch(i){o.error(((c=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:c.message)||"保存失败")}},className:"px-6 py-2 bg-primary text-white rounded-lg",children:"保存配置"})]})]}),s&&e.jsx("div",{className:"text-gray-400",children:"加载中..."})]})]})]})};function Wx(){const[s,I]=a.useState([]),[n,O]=a.useState([]),[p,E]=a.useState(!0),[u,k]=a.useState(!1),[v,L]=a.useState(null),[M,V]=a.useState(!1),[D,S]=a.useState(null),[b,P]=a.useState({name:"",description:"",usageScene:"workflow",isActive:!0}),[A,R]=a.useState({agentId:"",name:"",description:"",systemPrompt:"",aiModelId:"",temperature:.7,maxTokens:2e3,isActive:!0});a.useEffect(()=>{_(),z()},[]);const _=async()=>{try{const j=await m.agents.getAll(),q=await Promise.all(j.map(async J=>{try{const Z=await m.agents.roles.listByAgent(J.id);return{...J,roles:Z}}catch{return{...J,roles:[]}}}));I(q)}catch{o.error("加载智能体失败")}finally{E(!1)}},z=async()=>{try{const j=await m.agents.getAvailableModels();O(j)}catch{o.error("加载可用模型失败")}},y=()=>{L(null),P({name:"",description:"",usageScene:"workflow",isActive:!0}),k(!0)},r=j=>{L(j),P({name:j.name,description:j.description||"",usageScene:j.usageScene||"workflow",isActive:j.isActive}),k(!0)},f=j=>{L(j),S(null),R({agentId:j.id,name:"",description:"",systemPrompt:"",aiModelId:n.length>0?n[0].id:"",temperature:.7,maxTokens:2e3,isActive:!0}),V(!0)},U=j=>{S(j),R({agentId:j.agentId,name:j.name,description:j.description||"",systemPrompt:j.systemPrompt,aiModelId:j.aiModelId,temperature:j.temperature,maxTokens:j.maxTokens,isActive:j.isActive}),V(!0)},x=async(j,q)=>{if(window.confirm(`确定要删除智能体 "${q}" 吗？`))try{await m.agents.delete(j),o.success("删除成功"),_()}catch{o.error("删除失败")}},W=async j=>{if(j.preventDefault(),!b.name){o.error("请填写必填字段");return}try{v?(await m.agents.update(v.id,b),o.success("更新成功")):(await m.agents.create(b),o.success("创建成功")),k(!1),_()}catch{o.error(v?"更新失败":"创建失败")}},g=async j=>{if(j.preventDefault(),!A.agentId||!A.name||!A.systemPrompt||!A.aiModelId){o.error("请填写角色必填字段");return}try{D?(await m.agents.roles.update(D.id,A),o.success("角色更新成功")):(await m.agents.roles.create(A),o.success("角色创建成功")),V(!1),_()}catch{o.error(D?"角色更新失败":"角色创建失败")}},X=async j=>{if(window.confirm(`确定要删除角色 "${j.name}" 吗？`))try{await m.agents.roles.delete(j.id),o.success("角色删除成功"),_()}catch{o.error("角色删除失败")}},T=async(j,q,J)=>{const Z=s.find(oe=>oe.id===j),se=[...(Z==null?void 0:Z.roles)||[]];if(q===J||se.length===0)return;const[Se]=se.splice(q,1);se.splice(J,0,Se),I(oe=>oe.map(ye=>ye.id===j?{...ye,roles:se}:ye));try{for(let ye=0;ye<se.length;ye++)await m.agents.roles.update(se[ye].id,{order:ye});const oe=await m.agents.roles.listByAgent(j);I(ye=>ye.map(_e=>_e.id===j?{..._e,roles:oe}:_e)),o.success("角色顺序已更新")}catch{o.error("更新排序失败"),_()}};return p?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-tiffany-500 border-t-transparent"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"智能体配置"}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary mt-1",children:"管理AI智能体，配置提示词赋予不同角色和专业能力"})]}),e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"新建智能体"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.map(j=>e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl border border-border-light dark:border-border-dark p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-light-primary dark:text-text-dark-primary mb-1",children:j.name}),j.description&&e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary line-clamp-2",children:j.description})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs ${j.isActive?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}`,children:j.isActive?"启用":"禁用"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${j.usageScene==="workflow"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":j.usageScene==="episode"?"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-700 dark:text-neutral-400":"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"}`,children:j.usageScene==="workflow"?"工作流":j.usageScene==="episode"?"剧集创作":"广告创作"})}),e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"此智能体为空壳，具体能力由下方角色决定"})]}),e.jsxs("div",{className:"border-t border-border-light dark:border-border-dark pt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>r(j),className:"flex-1 px-3 py-1.5 bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary rounded hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>f(j),className:"flex-1 px-3 py-1.5 bg-tiffany-50 dark:bg-tiffany-900/20 text-tiffany-600 dark:text-tiffany-400 rounded hover:bg-tiffany-100 dark:hover:bg-tiffany-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_circle"}),"添加角色"]}),e.jsxs("button",{onClick:()=>x(j.id,j.name),className:"flex-1 px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors text-sm flex items-center justify-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"删除"]})]}),(j.roles||[]).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色"}),e.jsx("div",{className:"space-y-2",children:(j.roles||[]).map((q,J)=>{var Z;return e.jsxs("div",{className:"group flex items-center justify-between p-2 bg-background-light dark:bg-background-dark rounded border border-border-light dark:border-border-dark",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:[q.name," ",q.isActive?"":"(已禁用)"]}),e.jsxs("div",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["模型：",(Z=q.aiModel)==null?void 0:Z.name," | 温度：",q.temperature," | Token：",q.maxTokens]}),q.description&&e.jsx("div",{className:"text-xs text-text-light-tertiary dark:text-text-dark-tertiary line-clamp-1",children:q.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>U(q),className:"px-2 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",children:"编辑"}),e.jsx("button",{onClick:()=>X(q),className:"px-2 py-1 text-xs bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30",children:"删除"}),e.jsx("button",{type:"button",onClick:()=>T(j.id,J,Math.max(0,J-1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"上移",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>T(j.id,J,Math.min((j.roles||[]).length-1,J+1)),className:"px-1 py-1 text-xs bg-background-light-secondary dark:bg-background-dark-secondary rounded hover:bg-background-light dark:hover:bg-background-dark",title:"下移",children:"↓"})]})]},q.id)})})]})]},j.id)),s.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-text-light-tertiary dark:text-text-dark-tertiary mb-4 block",children:"smart_toy"}),e.jsx("p",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"还没有智能体，点击右上角创建第一个"})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:v?"编辑智能体":"新建智能体"}),e.jsx("button",{onClick:()=>k(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:W,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b.name,onChange:j=>P({...b,name:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：小红书文案大师",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"描述"}),e.jsx("input",{type:"text",value:b.description,onChange:j=>P({...b,description:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述智能体的功能"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["使用场景 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:b.usageScene,onChange:j=>P({...b,usageScene:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",children:[e.jsx("option",{value:"workflow",children:"工作流"}),e.jsx("option",{value:"episode",children:"剧集创作"}),e.jsx("option",{value:"advertisement",children:"广告创作"})]}),e.jsx("p",{className:"mt-1 text-xs text-text-light-tertiary dark:text-text-dark-tertiary",children:"选择智能体的使用场景，不同场景下的智能体会在对应功能中显示"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:b.isActive,onChange:j=>P({...b,isActive:j.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用智能体"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>k(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:v?"更新":"创建"})]})]})]})}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card-light dark:bg-card-dark rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-border-light dark:border-border-dark flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:D?"编辑角色":"添加角色"}),e.jsx("button",{onClick:()=>V(!1),className:"p-1 hover:bg-background-light-secondary dark:hover:bg-background-dark-secondary rounded transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:g,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:A.name,onChange:j=>R({...A,name:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"例如：导演、编剧、推广运营",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"角色描述"}),e.jsx("input",{type:"text",value:A.description,onChange:j=>R({...A,description:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",placeholder:"简要描述角色的职责"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["角色提示词 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:A.systemPrompt,onChange:j=>R({...A,systemPrompt:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500 min-h-32",placeholder:"为该角色定义专属提示词",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:["调用模型 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:A.aiModelId,onChange:j=>R({...A,aiModelId:j.target.value}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500",required:!0,children:n.map(j=>e.jsxs("option",{value:j.id,children:[j.name," (",j.provider,")"]},j.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"温度 (Temperature)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:A.temperature,onChange:j=>R({...A,temperature:parseFloat(j.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary mb-2",children:"最大Token数"}),e.jsx("input",{type:"number",step:"100",min:"100",max:"32000",value:A.maxTokens,onChange:j=>R({...A,maxTokens:parseInt(j.target.value)}),className:"w-full px-3 py-2 bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-tiffany-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"roleActive",checked:A.isActive,onChange:j=>R({...A,isActive:j.target.checked}),className:"w-4 h-4 text-tiffany-600 bg-background-light dark:bg-background-dark border-border-light dark:border-border-dark rounded focus:ring-tiffany-500"}),e.jsx("label",{htmlFor:"roleActive",className:"text-sm text-text-light-primary dark:text-text-dark-primary",children:"启用角色"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>V(!1),className:"flex-1 px-4 py-2 bg-background-light-secondary dark:bg-background-dark-secondary text-text-light-primary dark:text-text-dark-primary rounded-lg hover:bg-background-light dark:hover:bg-background-dark transition-colors",children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-tiffany-600 dark:bg-tiffany-500 text-white rounded-lg hover:bg-tiffany-700 dark:hover:bg-tiffany-600 transition-colors",children:D?"更新角色":"创建角色"})]})]})]})})]})}const Yx=()=>{var oe,ye,_e,jt,vt,Ge;const[s,I]=a.useState([]),[n,O]=a.useState({page:1,limit:20,total:0,totalPages:0}),[p,E]=a.useState(!0),[u,k]=a.useState(""),[v,L]=a.useState(""),[M,V]=a.useState(null),[D,S]=a.useState(null),[b,P]=a.useState(null),[A,R]=a.useState(!1),[_,z]=a.useState(null),[y,r]=a.useState(null),f=a.useCallback(async()=>{var w,ee;E(!0);try{const ae={page:n.page,limit:n.limit};u&&(ae.search=u),v&&(ae.role=v);const le=await m.admin.getUsers(ae);le.success&&(I(le.data),O(le.pagination))}catch(ae){o.error(((ee=(w=ae.response)==null?void 0:w.data)==null?void 0:ee.message)||"获取用户列表失败")}finally{E(!1)}},[n.page,n.limit,u,v]);a.useEffect(()=>{f()},[f]);const U=w=>{w.preventDefault(),O(ee=>({...ee,page:1}))},x=async w=>{var le,Y;if(w.role==="ADMIN"){o.error("管理员账户不能被禁用");return}const ee=!w.isActive,ae=ee?"启用":"禁用";if(confirm(`确定要${ae}用户「${w.nickname||w.phone||w.id}」吗？`))try{await m.admin.updateUser(w.id,{isActive:ee}),o.success(`用户已${ae}`),I(ne=>ne.map(he=>he.id===w.id?{...he,isActive:ee}:he))}catch(ne){o.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||`${ae}失败`)}},W=async(w,ee)=>{var le,Y;if(w.role===ee)return;if(w.role==="ADMIN"){o.error("不能修改管理员的角色");return}const ae={USER:"普通用户",VIP:"VIP",SVIP:"SVIP",INTERNAL:"内部用户"};if(confirm(`确定要将用户「${w.nickname||w.phone||w.id}」的类型改为「${ae[ee]||ee}」吗？`))try{await m.admin.updateUser(w.id,{role:ee}),o.success(`用户类型已更新为 ${ae[ee]||ee}`),I(ne=>ne.map(he=>he.id===w.id?{...he,role:ee}:he))}catch(ne){o.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||"更新失败")}},g=w=>{switch(w){case"ADMIN":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(Tx,{className:"w-3 h-3"}),"管理员"]});case"SVIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-amber-500/20 to-orange-500/20 text-amber-400",children:[e.jsx(Ks,{className:"w-3 h-3"}),"SVIP"]});case"VIP":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-500/20 text-neutral-400",children:[e.jsx(Dx,{className:"w-3 h-3"}),"VIP"]});case"INTERNAL":return e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:"内部用户"});default:return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(zx,{className:"w-3 h-3"}),"普通用户"]})}},X=w=>w?new Date(w).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",T=(w,ee)=>{if(ee==="USER"||ee==="ADMIN"||ee==="INTERNAL")return"-";if(!w)return"永久";const ae=new Date(w),Y=ae<new Date,ne=ae.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});return Y?e.jsxs("span",{className:"text-red-400",children:[ne," (已过期)"]}):e.jsx("span",{className:"text-green-400",children:ne})},j=w=>w?w.length===11?w.slice(0,3)+"****"+w.slice(7):w:"-",q=async w=>{var le,Y;if(w.role!=="VIP"&&w.role!=="SVIP"){o.error("只能修改VIP或SVIP用户的会员到期时间");return}const ee=w.membershipExpireAt?new Date(w.membershipExpireAt).toISOString().split("T")[0]:"",ae=prompt(`请输入新的会员到期日期 (格式: YYYY-MM-DD)
留空表示永久会员
当前: ${ee||"永久"}`,ee);if(ae!==null)try{await m.admin.updateUser(w.id,{membershipExpireAt:ae===""?null:ae}),o.success("会员到期日期已更新"),I(ne=>ne.map(he=>he.id===w.id?{...he,membershipExpireAt:ae===""?null:new Date(ae).toISOString()}:he))}catch(ne){o.error(((Y=(le=ne.response)==null?void 0:le.data)==null?void 0:Y.message)||"更新失败")}},J=async w=>{var ee,ae;V(w),S("workflows"),R(!0),P(null);try{const le=await m.admin.inspection.getUserWorkflows(w.id);le.success&&P(le.data)}catch(le){o.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取工作流失败"),V(null),S(null)}finally{R(!1)}},Z=async w=>{var ee,ae;V(w),S("assets"),R(!0),P(null),z(null),r(null);try{const le=await m.admin.inspection.getUserAssetLibraries(w.id);le.success&&P(le.data)}catch(le){o.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产库失败"),V(null),S(null)}finally{R(!1)}},se=async w=>{var ee,ae;z(w),R(!0);try{const le=await m.admin.inspection.getAssetLibraryAssets(w.id);le.success&&r(le.data)}catch(le){o.error(((ae=(ee=le.response)==null?void 0:ee.data)==null?void 0:ae.message)||"获取资产列表失败")}finally{R(!1)}},Se=()=>{V(null),S(null),P(null),z(null),r(null)};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"用户管理"}),e.jsxs("div",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["共 ",n.total," 位用户"]})]}),e.jsx("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:e.jsxs("form",{onSubmit:U,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(Gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索手机号、昵称...",value:u,onChange:w=>k(w.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("select",{value:v,onChange:w=>{L(w.target.value),O(ee=>({...ee,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"ADMIN",children:"管理员"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]})}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[p?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无用户数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"手机号"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"积分"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"会员到期"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"项目数"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"注册时间"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"最后登录"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"巡查"})]})}),e.jsx("tbody",{children:s.map(w=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neutral-800 to-neutral-700 flex items-center justify-center text-white font-medium overflow-hidden",children:w.avatar?e.jsx("img",{src:w.avatar,alt:"",className:"w-full h-full object-cover"}):(w.nickname||w.phone||"?")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:w.nickname||"未设置昵称"}),e.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",w.id.slice(0,8),"..."]})]})]})}),e.jsx("td",{className:"px-4 py-3 text-text-light-primary dark:text-text-dark-primary",children:j(w.phone)}),e.jsx("td",{className:"px-4 py-3",children:w.role==="ADMIN"?g(w.role):e.jsxs("select",{value:w.role,onChange:ee=>W(w,ee.target.value),className:"px-2 py-1 text-xs rounded-lg bg-slate-100 dark:bg-white/10 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500 cursor-pointer",children:[e.jsx("option",{value:"USER",children:"普通用户"}),e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"SVIP",children:"SVIP"}),e.jsx("option",{value:"INTERNAL",children:"内部用户"})]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("span",{className:"font-medium text-amber-500",children:w.credits.toLocaleString()})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:w.role==="VIP"||w.role==="SVIP"?e.jsx("button",{onClick:()=>q(w),className:"hover:underline cursor-pointer",title:"点击修改到期日期",children:T(w.membershipExpireAt,w.role)}):T(w.membershipExpireAt,w.role)}),e.jsx("td",{className:"px-4 py-3 text-right text-text-light-primary dark:text-text-dark-primary",children:w._count.projects}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:X(w.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:X(w.lastLoginAt)}),e.jsx("td",{className:"px-4 py-3 text-center",children:w.role==="ADMIN"?e.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-green-500/20 text-green-400",children:"启用"}):e.jsx("button",{onClick:ee=>{ee.stopPropagation(),x(w)},className:`px-2 py-1 text-xs rounded transition-colors ${w.isActive?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"}`,children:w.isActive?"启用":"禁用"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>J(w),className:"p-1.5 rounded-lg bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 transition-colors",title:"查看工作流",children:e.jsx(Gx,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Z(w),className:"p-1.5 rounded-lg bg-neutral-500/10 text-neutral-400 hover:bg-neutral-500/20 transition-colors",title:"查看资产库",children:e.jsx(Ic,{className:"w-4 h-4"})})]})})]},w.id))})]})}),n.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",n.page," / ",n.totalPages," 页"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(w=>({...w,page:w.page-1})),disabled:n.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(_c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>O(w=>({...w,page:w.page+1})),disabled:n.page>=n.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(Pc,{className:"w-4 h-4"})})]})]})]}),M&&D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-[90vw] max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary",children:D==="workflows"?"工作流巡查":"资产库巡查"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["用户：",M.nickname||M.phone||M.id]})]}),e.jsx("button",{onClick:Se,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 transition-colors",children:e.jsx(qx,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):D==="workflows"?e.jsx("div",{className:"space-y-4",children:((oe=b==null?void 0:b.workflows)==null?void 0:oe.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无工作流"}):(ye=b==null?void 0:b.workflows)==null?void 0:ye.map(w=>e.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:w.name}),w.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:w.description})]}),e.jsxs("div",{className:"text-right text-xs text-gray-400",children:[e.jsxs("div",{children:["节点: ",w.nodeCount]}),e.jsxs("div",{children:["连线: ",w.edgeCount]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(w.nodeTypes||{}).map(([ee,ae])=>e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-neutral-500/10 text-neutral-400",children:[ee,": ",ae]},ee))}),e.jsxs("div",{className:"mt-3 text-xs text-gray-400",children:["更新于 ",new Date(w.updatedAt).toLocaleString("zh-CN")]})]},w.id))}):e.jsx("div",{className:"space-y-4",children:_?e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{z(null),r(null)},className:"mb-4 text-sm text-neutral-400 hover:text-neutral-300 flex items-center gap-1",children:"← 返回资产库列表"}),e.jsx("h3",{className:"text-lg font-medium text-text-light-primary dark:text-text-dark-primary mb-4",children:_.name}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-3",children:(_e=y==null?void 0:y.assets)==null?void 0:_e.map(w=>e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-slate-200 dark:bg-white/10 relative group",children:[w.type==="IMAGE"?e.jsx("img",{src:w.thumbnail||w.url,alt:w.name,className:"w-full h-full object-cover"}):w.type==="VIDEO"?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Mc,{className:"w-8 h-8 text-gray-400"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Dc,{className:"w-8 h-8 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-1",children:e.jsx("span",{className:"text-[10px] text-white truncate w-full",children:w.name})})]},w.id))}),((jt=y==null?void 0:y.assets)==null?void 0:jt.length)===0&&e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该资产库暂无资产"})]}):e.jsx(e.Fragment,{children:((vt=b==null?void 0:b.libraries)==null?void 0:vt.length)===0?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"该用户暂无资产库"}):(Ge=b==null?void 0:b.libraries)==null?void 0:Ge.map(w=>e.jsx("div",{onClick:()=>se(w),className:"p-4 bg-slate-50 dark:bg-white/5 rounded-xl border border-slate-200 dark:border-white/10 cursor-pointer hover:border-neutral-400 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 dark:bg-white/10 overflow-hidden flex-shrink-0",children:w.thumbnail?e.jsx("img",{src:w.thumbnail,alt:w.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ic,{className:"w-6 h-6 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:w.name}),w.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:w.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[w.assetCount," 个资产 · 更新于 ",new Date(w.updatedAt).toLocaleString("zh-CN")]})]})]})},w.id))})})})]})})]})},Zx=()=>{const[s,I]=a.useState([]),[n,O]=a.useState(null),[p,E]=a.useState({page:1,limit:20,total:0,totalPages:0}),[u,k]=a.useState(!0),[v,L]=a.useState(!0),[M,V]=a.useState({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),[D,S]=a.useState(!1),[b,P]=a.useState(null),A=a.useCallback(async()=>{L(!0);try{const g=await m.admin.tasks.getStats();g.success&&O(g.data)}catch{}finally{L(!1)}},[]),R=a.useCallback(async()=>{var g,X;k(!0);try{const T={page:p.page,limit:p.limit};M.nickname&&(T.nickname=M.nickname),M.status&&(T.status=M.status),M.type&&(T.type=M.type),M.isZombie&&(T.isZombie="true"),M.dateFrom&&(T.dateFrom=M.dateFrom),M.dateTo&&(T.dateTo=M.dateTo);const j=await m.admin.tasks.getList(T);j.success&&(I(j.data),E(j.pagination))}catch(T){o.error(((X=(g=T.response)==null?void 0:g.data)==null?void 0:X.message)||"获取任务列表失败")}finally{k(!1)}},[p.page,p.limit,M]);a.useEffect(()=>{A()},[A]),a.useEffect(()=>{R()},[R]);const _=g=>{g.preventDefault(),E(X=>({...X,page:1}))},z=async g=>{var X,T,j,q;if(!g.creditsCharged||g.creditsCharged<=0){o.error("该任务没有扣费记录");return}if((X=g.metadata)!=null&&X.refunded){o.error("该任务已退款");return}if(confirm(`确定要退还 ${g.creditsCharged} 积分给用户「${((T=g.user)==null?void 0:T.nickname)||g.userId}」吗？`)){P(g.id);try{const J=await m.admin.tasks.refund(g.id);J.success&&(o.success(J.message),R(),A())}catch(J){o.error(((q=(j=J.response)==null?void 0:j.data)==null?void 0:q.message)||"退款失败")}finally{P(null)}}},y=async g=>{var j,q,J;if(g.status==="SUCCESS"||g.status==="FAILURE"){o.error("任务已完成，无法取消");return}const X=g.creditsCharged>0&&!((j=g.metadata)!=null&&j.refunded),T=X?`确定要取消任务并退还 ${g.creditsCharged} 积分吗？`:"确定要取消该任务吗？";if(confirm(T)){P(g.id);try{const Z=await m.admin.tasks.cancel(g.id,X);Z.success&&(o.success(Z.message),R(),A())}catch(Z){o.error(((J=(q=Z.response)==null?void 0:q.data)==null?void 0:J.message)||"取消失败")}finally{P(null)}}},r=(g,X)=>{switch(g){case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400",children:[e.jsx(Mx,{className:"w-3 h-3"}),"等待中"]});case"PROCESSING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:[e.jsx(Fs,{className:"w-3 h-3 animate-spin"}),"处理中 ",X,"%"]});case"SUCCESS":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-400",children:[e.jsx(Px,{className:"w-3 h-3"}),"成功"]});case"FAILURE":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[e.jsx(Ac,{className:"w-3 h-3"}),"失败"]});default:return e.jsx("span",{className:"text-gray-400",children:g})}},f=g=>g==="IMAGE"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-500/20 text-neutral-400",children:[e.jsx(Dc,{className:"w-3 h-3"}),"图片"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-cyan-500/20 text-cyan-400",children:[e.jsx(Mc,{className:"w-3 h-3"}),"视频"]}),U=g=>g?new Date(g).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",x=g=>{if(g.status!=="PENDING"&&g.status!=="PROCESSING")return!1;const X=new Date(g.updatedAt).getTime();return Date.now()-X>30*60*1e3},W=(g,X=50)=>g?g.length>X?g.slice(0,X)+"...":g:"-";return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-text-light-primary dark:text-text-dark-primary",children:"任务管理"}),e.jsxs("button",{onClick:()=>{A(),R()},className:"flex items-center gap-2 px-4 py-2 bg-neutral-500 text-white rounded-lg hover:bg-neutral-600 transition-colors",children:[e.jsx(Lx,{className:"w-4 h-4"}),"刷新"]})]}),v?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[...Array(6)].map((g,X)=>e.jsx("div",{className:"h-24 bg-white/50 dark:bg-white/5 rounded-xl animate-pulse"},X))}):n?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ex,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"总任务数"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.total.toLocaleString()}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.total]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Xx,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"成功率"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.overview.successRate,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.successRate,"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Al,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"僵尸任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.zombie}),e.jsx("p",{className:"text-xs opacity-60",children:"超过30分钟未完成"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Fs,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"处理中"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.processing}),e.jsxs("p",{className:"text-xs opacity-60",children:["等待中: ",n.overview.pending]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ac,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"失败任务"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.overview.failure}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日: ",n.today.failure]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_x,{className:"w-4 h-4 opacity-80"}),e.jsx("span",{className:"text-xs opacity-80",children:"7日消耗积分"})]}),e.jsx("p",{className:"text-2xl font-bold",children:n.credits.totalCharged7d.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"任务扣费总计"})]})]}):null,n&&n.byModel.length>0&&e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-light-secondary dark:text-text-dark-secondary mb-3",children:"模型成功率（7天）"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:n.byModel.slice(0,12).map(g=>e.jsxs("div",{className:"bg-slate-50 dark:bg-white/5 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mb-1",title:g.modelName,children:g.modelName}),e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[g.successRate,"%"]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[g.total,"次"]})]}),e.jsx("div",{className:"mt-1 h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${parseFloat(g.successRate)>=90?"bg-green-500":parseFloat(g.successRate)>=70?"bg-amber-500":"bg-red-500"}`,style:{width:`${g.successRate}%`}})})]},g.modelId))})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-6",children:[e.jsxs("form",{onSubmit:_,className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px] relative",children:[e.jsx(Gc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索用户昵称...",value:M.nickname,onChange:g=>V(X=>({...X,nickname:g.target.value})),className:"w-full pl-10 pr-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary placeholder-gray-400 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("select",{value:M.status,onChange:g=>{V(X=>({...X,status:g.target.value})),E(X=>({...X,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"PENDING",children:"等待中"}),e.jsx("option",{value:"PROCESSING",children:"处理中"}),e.jsx("option",{value:"SUCCESS",children:"成功"}),e.jsx("option",{value:"FAILURE",children:"失败"})]}),e.jsxs("select",{value:M.type,onChange:g=>{V(X=>({...X,type:g.target.value})),E(X=>({...X,page:1}))},className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500",children:[e.jsx("option",{value:"",children:"全部类型"}),e.jsx("option",{value:"IMAGE",children:"图片"}),e.jsx("option",{value:"VIDEO",children:"视频"})]}),e.jsxs("button",{type:"button",onClick:()=>{V(g=>({...g,isZombie:!g.isZombie})),E(g=>({...g,page:1}))},className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${M.isZombie?"bg-amber-500 text-white":"bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 text-text-light-primary dark:text-text-dark-primary"}`,children:[e.jsx(Al,{className:"w-4 h-4"}),"僵尸任务"]}),e.jsxs("button",{type:"button",onClick:()=>S(!D),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary flex items-center gap-2",children:[e.jsx(Ux,{className:"w-4 h-4"}),"更多筛选"]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-neutral-800 to-neutral-700 text-white rounded-lg hover:shadow-lg transition-all",children:"搜索"})]}),D&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-white/10 flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"开始日期"}),e.jsx("input",{type:"date",value:M.dateFrom,onChange:g=>V(X=>({...X,dateFrom:g.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"结束日期"}),e.jsx("input",{type:"date",value:M.dateTo,onChange:g=>V(X=>({...X,dateTo:g.target.value})),className:"px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:border-neutral-500"})]}),e.jsx("button",{type:"button",onClick:()=>{V({nickname:"",status:"",type:"",isZombie:!1,dateFrom:"",dateTo:""}),E(g=>({...g,page:1}))},className:"self-end px-4 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"清除筛选"})]})]}),e.jsxs("div",{className:"bg-white/80 dark:bg-black/60 backdrop-blur-xl border-2 border-slate-200 dark:border-white/10 rounded-2xl overflow-hidden",children:[u?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-neutral-500 border-t-transparent"})}):s.length===0?e.jsx("div",{className:"text-center py-20 text-gray-400",children:"暂无任务数据"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-white/10 bg-slate-50 dark:bg-white/5",children:[e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"用户"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"类型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"模型"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"状态"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"提示词"}),e.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"扣费"}),e.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"创建时间"}),e.jsx("th",{className:"text-center px-4 py-3 text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"操作"})]})}),e.jsx("tbody",{children:s.map(g=>{var T,j,q,J,Z,se,Se,oe;const X=x(g);return e.jsxs("tr",{className:`border-b border-slate-100 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors ${X?"bg-amber-50 dark:bg-amber-900/10":""}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[X&&e.jsx(Al,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-light-primary dark:text-text-dark-primary",children:((T=g.user)==null?void 0:T.nickname)||"未知用户"}),e.jsx("div",{className:"text-xs text-gray-400",children:((q=(j=g.user)==null?void 0:j.phone)==null?void 0:q.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||g.userId.slice(0,8)})]})]})}),e.jsx("td",{className:"px-4 py-3",children:f(g.type)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-sm text-text-light-primary dark:text-text-dark-primary truncate max-w-[120px]",title:((J=g.model)==null?void 0:J.name)||g.modelId,children:((Z=g.model)==null?void 0:Z.name)||"未知模型"}),e.jsx("div",{className:"text-xs text-gray-400",children:((se=g.model)==null?void 0:se.provider)||""})]}),e.jsxs("td",{className:"px-4 py-3",children:[r(g.status,g.progress),g.errorMessage&&e.jsx("div",{className:"text-xs text-red-400 mt-1 truncate max-w-[150px]",title:g.errorMessage,children:g.errorMessage})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-[200px]",title:g.prompt,children:W(g.prompt)})}),e.jsx("td",{className:"px-4 py-3 text-right",children:g.isFreeUsage?e.jsx("span",{className:"text-xs text-green-500",children:"免费"}):g.creditsCharged>0?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-500",children:g.creditsCharged}),((Se=g.metadata)==null?void 0:Se.refunded)&&e.jsx("span",{className:"ml-1 text-xs text-green-500",children:"(已退)"})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400",children:U(g.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.status==="FAILURE"&&g.creditsCharged>0&&!((oe=g.metadata)!=null&&oe.refunded)&&e.jsx("button",{onClick:()=>z(g),disabled:b===g.id,className:"p-1.5 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors disabled:opacity-50",title:"退款",children:b===g.id?e.jsx(Fs,{className:"w-4 h-4 animate-spin"}):e.jsx(Hx,{className:"w-4 h-4"})}),(g.status==="PENDING"||g.status==="PROCESSING")&&e.jsx("button",{onClick:()=>y(g),disabled:b===g.id,className:"p-1.5 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",title:"取消任务",children:b===g.id?e.jsx(Fs,{className:"w-4 h-4 animate-spin"}):e.jsx(Rx,{className:"w-4 h-4"})})]})})]},g.id)})})]})}),p.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["第 ",p.page," / ",p.totalPages," 页，共"," ",p.total," 条"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>E(g=>({...g,page:g.page-1})),disabled:p.page<=1,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(_c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(g=>({...g,page:g.page+1})),disabled:p.page>=p.totalPages,className:"p-2 rounded-lg bg-slate-100 dark:bg-white/5 text-text-light-primary dark:text-text-dark-primary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:e.jsx(Pc,{className:"w-4 h-4"})})]})]})]})]})};var ie=(s=>(s.PER_REQUEST="PER_REQUEST",s.PER_IMAGE="PER_IMAGE",s.PER_DURATION="PER_DURATION",s.DURATION_RESOLUTION="DURATION_RESOLUTION",s.PER_CHARACTER="PER_CHARACTER",s.DURATION_MODE="DURATION_MODE",s.OPERATION_MODE="OPERATION_MODE",s))(ie||{});const Uc={PER_REQUEST:"按次计费",PER_IMAGE:"按图片数量",PER_DURATION:"按时长计费",DURATION_RESOLUTION:"按时长+分辨率",PER_CHARACTER:"按字符数计费",DURATION_MODE:"按模式计费 (支持时长/次数)",OPERATION_MODE:"按操作+模式"},Tl=({value:s,onChange:I,label:n="费用"})=>e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-gray-300 w-20",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:s,onChange:O=>I(parseInt(O.target.value)||0),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]})]})}),Jx=({prices:s,onChange:I,modelConfig:n})=>{const[O,p]=a.useState(["720p","1080p","4K"]),[E,u]=a.useState(()=>{const S=new Set;s.forEach(P=>{if(P.dimension==="resolution"&&P.value.includes("_")){const A=parseInt(P.value.split("_")[1]);isNaN(A)||S.add(A)}});const b=[3,5,6,8,10];return S.size>0?Array.from(S).sort((P,A)=>P-A):b});a.useEffect(()=>{var S,b;n&&(((S=n.supportedResolutions)==null?void 0:S.length)>0&&p(n.supportedResolutions),((b=n.supportedDurations)==null?void 0:b.length)>0&&u(n.supportedDurations.sort((P,A)=>P-A)))},[n]);const[k,v]=a.useState(""),L=(S,b)=>{const P=s.find(A=>A.dimension==="resolution"&&A.value===`${S}_${b}`);return(P==null?void 0:P.creditsPerUnit)||0},M=(S,b,P)=>{const A=s.filter(R=>!(R.dimension==="resolution"&&R.value===`${S}_${b}`));P>0&&A.push({dimension:"resolution",value:`${S}_${b}`,creditsPerUnit:P,unitSize:1}),I(A)},V=()=>{const S=parseInt(k);if(S>0&&!E.includes(S)){const b=[...E,S].sort((P,A)=>P-A);u(b),v("")}},D=S=>{u(E.filter(P=>P!==S));const b=s.filter(P=>P.dimension==="resolution"&&P.value.includes("_")?parseInt(P.value.split("_")[1])!==S:!0);I(b)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"阶梯计费模式"}),"：配置特定时长的固定价格（总价）。",e.jsx("br",{}),"• 系统会自动匹配最接近的时长档位（向上取整）。",e.jsx("br",{}),"• 例如：配置了5秒和10秒，请求6秒时会自动匹配到10秒的价格。"]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"number",min:"1",value:k,onChange:S=>v(S.target.value),placeholder:"新增时长(秒)",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-32"}),e.jsx("button",{onClick:V,className:"px-3 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"添加时长列"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border-b border-r border-slate-200 dark:border-border-dark bg-slate-100 dark:bg-slate-800/50",children:"分辨率 \\ 时长"}),E.map(S=>e.jsxs("th",{className:"px-4 py-3 text-center border-b border-slate-200 dark:border-border-dark min-w-[100px] relative group",children:[S,"秒",e.jsx("button",{onClick:()=>D(S),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"删除此时长列",children:"×"})]},S))]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:O.map(S=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white border-r border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/30",children:S}),E.map(b=>e.jsx("td",{className:"px-2 py-2 text-center border-r border-slate-200 dark:border-border-dark last:border-r-0",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:e.jsx("input",{type:"number",min:"0",value:L(S,b),onChange:P=>M(S,b,parseInt(P.target.value)||0),className:"w-16 px-2 py-1 text-center border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})},`${S}_${b}`))]},S))})]})}),e.jsxs("div",{className:"text-xs text-slate-400 dark:text-gray-500",children:["* 支持阶梯定价：请在对应的时长/分辨率单元格中填入该档位的",e.jsx("strong",{children:"总积分"}),"。"]})]})},e0=({prices:s,config:I,onChange:n})=>{const O=[{value:"std",label:"标准版 (Std)"},{value:"pro",label:"专业版 (Pro)"}],p=s.some(V=>V.dimension==="mode"&&V.value==="standard"),E=s.some(V=>V.dimension==="mode"&&V.value==="professional"),u=[...O];p&&u.push({value:"standard",label:"标准模式 (旧)"}),E&&u.push({value:"professional",label:"专业模式 (旧)"});const k=(I==null?void 0:I.pricingUnit)||"per_second",v=V=>{const D=s.find(S=>S.dimension==="mode"&&S.value===V);return(D==null?void 0:D.creditsPerUnit)||0},L=(V,D)=>{const S=s.filter(b=>!(b.dimension==="mode"&&b.value===V));D>0&&S.push({dimension:"mode",value:V,creditsPerUnit:D,unitSize:1}),n(S,I)},M=(V,D)=>{n(s,{...I,[V]:D})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:k==="per_second",onChange:()=>M("pricingUnit","per_second"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按时长计费 (积分/秒)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:k==="per_request",onChange:()=>M("pricingUnit","per_request"),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按次计费 (积分/次)"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:k==="per_second"?"模式定价（每秒）":"模式定价（每次）"}),u.map(V=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:V.label}),e.jsx("input",{type:"number",min:"0",value:v(V.value),onChange:D=>L(V.value,parseInt(D.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:k==="per_second"?"积分/秒":"积分/次"})]},V.value))]}),k==="per_second"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"时长计费规则"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:(I==null?void 0:I.roundUp)!==!1,onChange:V=>M("roundUp",V.target.checked),className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"向上取整到整秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"最小计费时长:"}),e.jsx("input",{type:"number",min:"1",value:(I==null?void 0:I.minDuration)||1,onChange:V=>M("minDuration",parseInt(V.target.value)||1),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]})]})]})]})},t0=({prices:s,onChange:I})=>{const n=[{value:"imagine",label:"生成图片 (Imagine)"},{value:"upscale",label:"升分辨率 (Upscale)"},{value:"variation",label:"变换 (Variation)"},{value:"reroll",label:"重新生成 (Reroll)"}],O=[{value:"relax",label:"慢速模式 (Relax)"},{value:"fast",label:"快速模式 (Fast)"}],p=v=>{const L=s.find(M=>M.dimension==="operationType"&&M.value===v);return(L==null?void 0:L.creditsPerUnit)||0},E=v=>{const L=s.find(M=>M.dimension==="mode"&&M.value===v);return(L==null?void 0:L.creditsPerUnit)||1},u=(v,L)=>{const M=s.filter(V=>!(V.dimension==="operationType"&&V.value===v));L>0&&M.push({dimension:"operationType",value:v,creditsPerUnit:L,unitSize:1}),I(M)},k=(v,L)=>{const M=s.filter(V=>!(V.dimension==="mode"&&V.value===v));L>0&&M.push({dimension:"mode",value:v,creditsPerUnit:L,unitSize:1}),I(M)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"操作类型定价（基础价格）"}),n.map(v=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:v.label}),e.jsx("input",{type:"number",min:"0",value:p(v.value),onChange:L=>u(v.value,parseInt(L.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]},v.value))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"模式倍率"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:"最终费用 = 操作类型基础价格 × 模式倍率"}),O.map(v=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("label",{className:"flex-1 text-sm text-slate-700 dark:text-gray-300",children:v.label}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"×"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:E(v.value),onChange:L=>k(v.value,parseFloat(L.target.value)||1),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})]},v.value))]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-300 mb-2",children:"💡 计费示例"}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{children:["• 生成图片（快速模式）= ",p("imagine")," × ",E("fast")," = ",p("imagine")*E("fast")," 积分"]}),e.jsxs("li",{children:["• 升分辨率（慢速模式）= ",p("upscale")," × ",E("relax")," = ",p("upscale")*E("relax")," 积分"]})]})]})]})},a0=({prices:s,onChange:I})=>{const n=()=>s[0]||{creditsPerUnit:5,unitSize:100},O=(E,u)=>{const k=n();I([{dimension:"character",value:"default",creditsPerUnit:E==="creditsPerUnit"?u:k.creditsPerUnit,unitSize:E==="unitSize"?u:k.unitSize||100}])},p=n();return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-slate-200 dark:border-border-dark rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"每"}),e.jsx("input",{type:"number",min:"1",value:p.unitSize||100,onChange:E=>O("unitSize",parseInt(E.target.value)||100),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符收费"}),e.jsx("input",{type:"number",min:"0",value:p.creditsPerUnit,onChange:E=>O("creditsPerUnit",parseInt(E.target.value)||0),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"积分"})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:["💡 计费规则：不足",p.unitSize||100,"字符按",p.unitSize||100,"字符计算"]}),e.jsx("p",{className:"mt-2",children:"示例："}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:["50个字符 → ",p.unitSize||100,"字符 → ",p.creditsPerUnit,"积分"]}),e.jsxs("li",{children:["150个字符 → ",(p.unitSize||100)*2,"字符 → ",p.creditsPerUnit*2,"积分"]}),e.jsxs("li",{children:["1000个字符 → 1000字符 → ",p.creditsPerUnit*Math.ceil(1e3/(p.unitSize||100)),"积分"]})]})]})]})})},s0=({prices:s,onChange:I,modelConfig:n})=>{var D;const[O,p]=a.useState("2K"),[E,u]=a.useState(10),k=s.filter(S=>S.dimension==="resolution"),v=()=>{if(!O||E<0)return;if(k.some(b=>b.value===O)){alert("该分辨率已存在");return}const S=[...s,{dimension:"resolution",value:O,creditsPerUnit:E,unitSize:1}];I(S),p("4K")},L=()=>{var P;if(!((P=n==null?void 0:n.supportedResolutions)!=null&&P.length))return;const S=[...s];let b=0;n.supportedResolutions.forEach(A=>{S.some(R=>R.dimension==="resolution"&&R.value===A)||(S.push({dimension:"resolution",value:A,creditsPerUnit:10,unitSize:1}),b++)}),b>0?(I(S),alert(`已导入 ${b} 个分辨率配置`)):alert("所有支持的分辨率已存在")},M=S=>{I(s.filter(b=>!(b.dimension==="resolution"&&b.value===S)))},V=(S,b)=>{const P=s.map(A=>A.dimension==="resolution"&&A.value===S?{...A,creditsPerUnit:b}:A);I(P)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2",children:"💡 分辨率阶梯计费："}),e.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:"• 支持格式：像素格式 (如 1024x1024) 或标签 (如 2K, 4K)。"}),e.jsx("li",{children:"• 智能匹配：系统会优先精确匹配标签，否则按像素总数匹配最近的档位。"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"分辨率标识"}),e.jsx("input",{type:"text",value:O,onChange:S=>p(S.target.value),placeholder:"2K / 1024x1024",className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 dark:text-gray-400 mb-1",children:"单价 (积分)"}),e.jsx("input",{type:"number",min:"0",value:E,onChange:S=>u(parseInt(S.target.value)||0),className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-border-dark rounded-md bg-white dark:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 w-24"})]}),e.jsx("button",{onClick:v,className:"px-4 py-1.5 text-sm bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors h-[34px]",children:"添加"}),((D=n==null?void 0:n.supportedResolutions)==null?void 0:D.length)>0&&e.jsx("button",{onClick:L,className:"px-4 py-1.5 text-sm bg-neutral-500 text-white rounded-md hover:bg-neutral-600 transition-colors h-[34px] ml-auto",title:"自动加载模型支持的所有分辨率",children:"从模型导入"})]}),e.jsx("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-gray-400 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"分辨率"}),e.jsx("th",{className:"px-4 py-3",children:"像素总数 (预估)"}),e.jsx("th",{className:"px-4 py-3",children:"单价 (积分/张)"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"操作"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark bg-white dark:bg-slate-900",children:k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-slate-400",children:"暂无配置，请添加分辨率"})}):k.map(S=>{const[b,P]=S.value.split(/[x*]/).map(Number),A=b&&P?(b*P/1e4).toFixed(1)+"万":"-";return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:S.value}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-400",children:A}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"number",min:"0",value:S.creditsPerUnit,onChange:R=>V(S.value,parseInt(R.target.value)||0),className:"w-20 px-2 py-1 border border-slate-300 dark:border-border-dark rounded bg-white dark:bg-slate-800 text-center focus:outline-none focus:ring-2 focus:ring-blue-500"})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{onClick:()=>M(S.value),className:"text-red-500 hover:text-red-600 transition-colors",children:"删除"})})]},S.value)})})]})})]})},r0=({rule:s})=>{const[I,n]=a.useState({quantity:1,duration:10,resolution:"1080p",mode:"standard",operationType:"imagine",characterCount:100}),[O,p]=a.useState(0);a.useEffect(()=>{E()},[s,I]);const E=()=>{var v;let k=0;switch(s.billingType){case ie.PER_REQUEST:k=s.baseCredits;break;case ie.PER_IMAGE:k=s.baseCredits*(I.quantity||1);break;case ie.PER_DURATION:k=s.baseCredits*(I.duration||1);break;case ie.DURATION_RESOLUTION:const L=s.prices.find(P=>P.dimension==="resolution"&&P.value.startsWith(I.resolution));k=(I.duration||1)*((L==null?void 0:L.creditsPerUnit)||0);break;case ie.DURATION_MODE:const M=s.prices.find(P=>P.dimension==="mode"&&P.value===I.mode);k=((v=s.config)!=null&&v.roundUp?Math.ceil(I.duration||1):I.duration||1)*((M==null?void 0:M.creditsPerUnit)||0);break;case ie.PER_CHARACTER:const D=s.prices[0];D&&(k=Math.ceil((I.characterCount||0)/(D.unitSize||100))*D.creditsPerUnit);break;case ie.OPERATION_MODE:const S=s.prices.find(P=>P.dimension==="operationType"&&P.value===I.operationType),b=s.prices.find(P=>P.dimension==="mode"&&P.value===I.mode);k=((S==null?void 0:S.creditsPerUnit)||0)*((b==null?void 0:b.creditsPerUnit)||1);break}p(Math.round(k))},u=()=>{var k;switch(s.billingType){case ie.PER_REQUEST:return e.jsx("div",{className:"text-sm text-slate-600 dark:text-gray-400",children:"每次调用固定费用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"生成数量:"}),e.jsx("input",{type:"number",min:"1",value:I.quantity,onChange:v=>n({...I,quantity:parseInt(v.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"张"})]});case ie.PER_DURATION:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:I.duration,onChange:v=>n({...I,duration:parseInt(v.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]});case ie.DURATION_RESOLUTION:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"1",value:I.duration,onChange:v=>n({...I,duration:parseInt(v.target.value)||1}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"分辨率:"}),e.jsxs("select",{value:I.resolution,onChange:v=>n({...I,resolution:v.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"}),e.jsx("option",{value:"4K",children:"4K"})]})]})]});case ie.DURATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"视频时长:"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:I.duration,onChange:v=>n({...I,duration:parseFloat(v.target.value)||0}),className:"w-24 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"秒"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"编辑模式:"}),e.jsxs("select",{value:I.mode,onChange:v=>n({...I,mode:v.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"standard",children:"标准模式"}),e.jsx("option",{value:"professional",children:"专业模式"})]})]}),((k=s.config)==null?void 0:k.roundUp)&&e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:["实际计费: ",Math.ceil(I.duration)," 秒（向上取整）"]})]});case ie.PER_CHARACTER:return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300",children:"字符数:"}),e.jsx("input",{type:"number",min:"0",value:I.characterCount,onChange:v=>n({...I,characterCount:parseInt(v.target.value)||0}),className:"w-32 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"字符"})]});case ie.OPERATION_MODE:return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"操作类型:"}),e.jsxs("select",{value:I.operationType,onChange:v=>n({...I,operationType:v.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"imagine",children:"生成图片"}),e.jsx("option",{value:"upscale",children:"升分辨率"}),e.jsx("option",{value:"variation",children:"变换"}),e.jsx("option",{value:"reroll",children:"重新生成"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm text-slate-700 dark:text-gray-300 w-20",children:"运行模式:"}),e.jsxs("select",{value:I.mode,onChange:v=>n({...I,mode:v.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"relax",children:"慢速模式"}),e.jsx("option",{value:"fast",children:"快速模式"})]})]})]});default:return null}};return e.jsxs("div",{className:"space-y-4",children:[u(),e.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"预估费用:"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[O," 积分"]})]})})]})},d0=({rule:s,isCreating:I,existingRules:n=[],onSave:O,onCancel:p,onDelete:E,onToggle:u})=>{const[k,v]=a.useState(s),[L,M]=a.useState("model"),[V,D]=a.useState([]),[S,b]=a.useState(!1);a.useEffect(()=>{v(s),s.nodeType?M("node"):s.moduleType?M("module"):M("model")},[s]),a.useEffect(()=>{P()},[]);const P=async()=>{try{const f=await m.admin.getAIModels({provider:"google"}),U=await m.admin.getAIModels({provider:"bytedance"}),x=await m.admin.getAIModels({provider:"doubao"}),W=await m.admin.getAIModels({provider:"aliyun"}),g=await m.admin.getAIModels({provider:"minimaxi"}),X=await m.admin.getAIModels({provider:"sora"}),T=await m.admin.getAIModels({provider:"vidu"}),j=Array.isArray(f==null?void 0:f.data)?f.data:Array.isArray(f)?f:[],q=Array.isArray(U==null?void 0:U.data)?U.data:Array.isArray(U)?U:[],J=Array.isArray(x==null?void 0:x.data)?x.data:Array.isArray(x)?x:[],Z=Array.isArray(W==null?void 0:W.data)?W.data:Array.isArray(W)?W:[],se=Array.isArray(g==null?void 0:g.data)?g.data:Array.isArray(g)?g:[],Se=Array.isArray(X==null?void 0:X.data)?X.data:Array.isArray(X)?X:[],oe=Array.isArray(T==null?void 0:T.data)?T.data:Array.isArray(T)?T:[],ye=[...j,...q,...J,...Z,...se,...Se,...oe].filter(_e=>_e.isActive);D(ye)}catch{}};a.useEffect(()=>{if(!I)return;let f="";if(L==="model"&&k.aiModelId){const U=V.find(x=>x.id===k.aiModelId);U&&(f=`${U.name} 计费规则`)}else if(L==="node"&&k.nodeType){const U={super_resolution:"智能超清",ad_composition:"广告成片",sora_character:"Sora角色生成",image_editing:"图片编辑",hd_upscale:"高清放大",image_fusion:"智能溶图",smart_storyboard:"智能分镜"};U[k.nodeType]&&(f=`${U[k.nodeType]} 计费规则`)}else L==="module"&&k.moduleType&&k.moduleType==="midjourney"&&(f="Midjourney 计费规则");f&&(!k.name||k.name.includes("计费规则"))&&y("name",f)},[k.aiModelId,k.nodeType,k.moduleType,L,I,V]);const A=V.filter(f=>f.id===k.aiModelId?!0:!n.some(U=>U.aiModelId===f.id)),R=V.find(f=>f.id===k.aiModelId),_=(R==null?void 0:R.config)||{},z=async()=>{var f,U;if(!k.name){alert("请输入规则名称");return}if(!k.aiModelId&&!k.nodeType&&!k.moduleType){alert("请选择关联的模型、节点或模块");return}try{b(!0),await O(k),alert("保存成功！")}catch(x){alert("保存失败: "+(((U=(f=x.response)==null?void 0:f.data)==null?void 0:U.message)||x.message||"未知错误"))}finally{b(!1)}},y=(f,U)=>{v(x=>({...x,[f]:U}))},r=()=>{switch(k.billingType){case ie.PER_REQUEST:return e.jsx(Tl,{value:k.baseCredits,onChange:f=>y("baseCredits",f),label:"每次调用"});case ie.PER_IMAGE:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-border-dark",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!k.prices||k.prices.length===0,onChange:()=>y("prices",[]),className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"统一一口价"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!!k.prices&&k.prices.length>0,onChange:()=>{(!k.prices||k.prices.length===0)&&y("prices",[{dimension:"resolution",value:"1024x1024",creditsPerUnit:10,unitSize:1}])},className:"text-blue-500 w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-gray-300",children:"按分辨率阶梯"})]})]}),!k.prices||k.prices.length===0?e.jsx(Tl,{value:k.baseCredits,onChange:f=>y("baseCredits",f),label:"每张图片"}):e.jsx(s0,{prices:k.prices,onChange:f=>y("prices",f),modelConfig:_})]});case ie.DURATION_RESOLUTION:return e.jsx(Jx,{prices:k.prices,onChange:f=>y("prices",f),modelConfig:_});case ie.DURATION_MODE:return e.jsx(e0,{prices:k.prices,config:k.config||{},onChange:(f,U)=>{y("prices",f),y("config",U)}});case ie.PER_DURATION:return e.jsx(Tl,{value:k.baseCredits,onChange:f=>y("baseCredits",f),label:"每秒费用"});case ie.PER_CHARACTER:return e.jsx(a0,{prices:k.prices,onChange:f=>y("prices",f)});case ie.OPERATION_MODE:return e.jsx(t0,{prices:k.prices,onChange:f=>y("prices",f)});default:return e.jsx("div",{className:"text-slate-400",children:"请选择计费类型"})}};return e.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-background-dark",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:I?"新建计费规则":"编辑计费规则"}),e.jsx("div",{className:"flex items-center gap-2",children:!I&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(k.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${k.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200"}`,children:k.isActive?"已启用":"已禁用"}),e.jsx("button",{onClick:()=>E(k.id),className:"px-4 py-2 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-lg hover:bg-red-200 text-sm font-medium transition-colors",children:"删除"})]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"基础信息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"规则名称 *"}),e.jsx("input",{type:"text",value:k.name,onChange:f=>y("name",f.target.value),placeholder:"例如：Gemini 2.0 Flash 文本调用",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"描述"}),e.jsx("textarea",{value:k.description||"",onChange:f=>y("description",f.target.value),placeholder:"规则说明（可选）",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"关联对象 *"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="model",onChange:()=>{M("model"),y("nodeType",null),y("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"AI模型"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="node",onChange:()=>{M("node"),y("aiModelId",null),y("moduleType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"固定节点"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:L==="module",onChange:()=>{M("module"),y("aiModelId",null),y("nodeType",null)},className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"特殊模块"})]})]}),L==="model"&&e.jsxs("select",{value:k.aiModelId||"",onChange:f=>y("aiModelId",f.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择AI模型"}),A.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.provider,")"]},f.id))]}),L==="node"&&e.jsxs("select",{value:k.nodeType||"",onChange:f=>y("nodeType",f.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择节点类型"}),e.jsx("option",{value:"super_resolution",children:"智能超清"}),e.jsx("option",{value:"ad_composition",children:"广告成片"}),e.jsx("option",{value:"sora_character",children:"Sora角色生成"}),e.jsx("option",{value:"image_editing",children:"图片编辑"}),e.jsx("option",{value:"hd_upscale",children:"高清放大"}),e.jsx("option",{value:"image_fusion",children:"智能溶图"}),e.jsx("option",{value:"smart_storyboard",children:"智能分镜"})]}),L==="module"&&e.jsxs("select",{value:k.moduleType||"",onChange:f=>y("moduleType",f.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"选择模块"}),e.jsx("option",{value:"midjourney",children:"Midjourney"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"计费类型 *"}),e.jsx("select",{value:k.billingType,onChange:f=>y("billingType",f.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.entries(Uc).map(([f,U])=>e.jsx("option",{value:f,children:U},f))})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"价格配置"}),r()]}),e.jsxs("section",{className:"bg-white dark:bg-card-dark rounded-xl border border-slate-200 dark:border-border-dark p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"预览测试"}),e.jsx(r0,{rule:k})]})]})}),e.jsxs("div",{className:"px-8 py-4 border-t border-slate-200 dark:border-border-dark bg-white dark:bg-card-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:p,className:"px-6 py-2 border border-slate-300 dark:border-border-dark text-slate-700 dark:text-gray-300 rounded-lg hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:"取消"}),e.jsx("button",{onClick:z,disabled:S,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors",children:S?"保存中...":"保存规则"})]})]})},l0=()=>{const[s,I]=a.useState([]),[n,O]=a.useState(null),[p,E]=a.useState(!0),[u,k]=a.useState("all"),[v,L]=a.useState(""),[M,V]=a.useState(!1);a.useEffect(()=>{D()},[]);const D=async()=>{var r,f;try{E(!0);const x=(await m.get("/admin/billing/rules")).data||[];I(x)}catch(U){alert(((f=(r=U.response)==null?void 0:r.data)==null?void 0:f.message)||"加载计费规则失败")}finally{E(!1)}},S=()=>{V(!0),O({name:"",billingType:ie.PER_REQUEST,baseCredits:0,isActive:!0,prices:[]})},b=r=>{V(!1),O(r)},P=async r=>{var f,U;try{M?await m.post("/admin/billing/rules",r):r.id&&await m.put(`/admin/billing/rules/${r.id}`,r),await D(),V(!1),O(null)}catch(x){throw alert(((U=(f=x.response)==null?void 0:f.data)==null?void 0:U.message)||"保存失败"),x}},A=async r=>{var f,U;if(confirm("确定要删除这条计费规则吗？"))try{await m.delete(`/admin/billing/rules/${r}`),await D(),(n==null?void 0:n.id)===r&&O(null)}catch(x){alert(((U=(f=x.response)==null?void 0:f.data)==null?void 0:U.message)||"删除失败")}},R=async r=>{var f,U;try{await m.post(`/admin/billing/rules/${r}/toggle`),await D()}catch(x){alert(((U=(f=x.response)==null?void 0:f.data)==null?void 0:U.message)||"切换状态失败")}},_=()=>{V(!1),O(null)},z=s.filter(r=>{var f,U;if(u!=="all"&&(u==="TEXT_GENERATION"&&r.billingType!==ie.PER_REQUEST||u==="IMAGE_GENERATION"&&r.billingType!==ie.PER_IMAGE||u==="VIDEO_GENERATION"&&r.billingType!==ie.DURATION_RESOLUTION||u==="VIDEO_EDITING"&&r.billingType!==ie.DURATION_MODE||u==="AUDIO_SYNTHESIS"&&r.billingType!==ie.PER_CHARACTER||u==="FIXED_NODE"&&!r.nodeType||u==="MIDJOURNEY"&&r.moduleType!=="midjourney"))return!1;if(v){const x=v.toLowerCase();return r.name.toLowerCase().includes(x)||((f=r.description)==null?void 0:f.toLowerCase().includes(x))||((U=r.aiModel)==null?void 0:U.name.toLowerCase().includes(x))}return!0}),y=r=>r==="all"?s.length:s.filter(f=>r==="TEXT_GENERATION"?f.billingType===ie.PER_REQUEST:r==="IMAGE_GENERATION"?f.billingType===ie.PER_IMAGE:r==="VIDEO_GENERATION"?f.billingType===ie.DURATION_RESOLUTION:r==="VIDEO_EDITING"?f.billingType===ie.DURATION_MODE:r==="AUDIO_SYNTHESIS"?f.billingType===ie.PER_CHARACTER:r==="FIXED_NODE"?!!f.nodeType:r==="MIDJOURNEY"?f.moduleType==="midjourney":!1).length;return e.jsxs("div",{className:"flex h-full bg-slate-50 dark:bg-background-dark",children:[e.jsxs("aside",{className:"w-80 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"计费规则"}),e.jsx("button",{onClick:S,className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors",children:"+ 新建"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"搜索规则...",value:v,onChange:r=>L(r.target.value),className:"w-full px-3 py-2 pl-9 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-xl",children:"search"})]})]}),e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark space-y-1",children:[{key:"all",label:"全部",icon:"list"},{key:"TEXT_GENERATION",label:"文本模型",icon:"article"},{key:"IMAGE_GENERATION",label:"图片模型",icon:"image"},{key:"VIDEO_GENERATION",label:"视频生成",icon:"videocam"},{key:"VIDEO_EDITING",label:"视频编辑",icon:"movie_edit"},{key:"AUDIO_SYNTHESIS",label:"音频合成",icon:"graphic_eq"},{key:"FIXED_NODE",label:"固定节点",icon:"developer_board"},{key:"MIDJOURNEY",label:"Midjourney",icon:"palette"}].map(r=>e.jsxs("button",{onClick:()=>k(r.key),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors ${u===r.key?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.icon}),e.jsx("span",{children:r.label})]}),e.jsx("span",{className:"text-xs opacity-60",children:y(r.key)})]},r.key))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:p?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"加载中..."}):z.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"暂无规则"}):z.map(r=>e.jsxs("div",{onClick:()=>b(r),className:`p-3 rounded-lg border cursor-pointer transition-all ${(n==null?void 0:n.id)===r.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-border-dark hover:border-slate-300 dark:hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white text-sm",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"启用":"禁用"})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:Uc[r.billingType]}),r.aiModel&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模型: ",r.aiModel.name]}),r.moduleType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["模块: ",r.moduleType]}),r.nodeType&&e.jsxs("p",{className:"text-xs text-slate-600 dark:text-gray-400",children:["节点: ",r.nodeType]})]},r.id))})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-50 dark:bg-background-dark",children:n?e.jsx(d0,{rule:n,isCreating:M,existingRules:s,onSave:P,onCancel:_,onDelete:A,onToggle:R}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 dark:text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 opacity-20",children:"receipt_long"}),e.jsx("p",{children:"选择一条规则或创建新规则"})]})})})]})},El={ALIPAY:"支付宝",WECHAT:"微信支付",MANUAL:"人工充值"},Cc={ALIPAY:"account_balance_wallet",WECHAT:"chat",MANUAL:"person"},i0=()=>{const[s,I]=a.useState([]),[n,O]=a.useState(!0),[p,E]=a.useState(null),[u,k]=a.useState(!1),[v,L]=a.useState(null);a.useEffect(()=>{M()},[]);const M=async()=>{var _,z;try{O(!0);const y=await m.payment.admin.getConfigs();I(y.data||[])}catch(y){o.error(((z=(_=y.response)==null?void 0:_.data)==null?void 0:z.message)||"加载配置失败")}finally{O(!1)}},V=async _=>{try{const z=await m.payment.admin.getConfig(_.id);E(z.data)}catch{o.error("获取配置详情失败")}},D=async _=>{var z,y;if(_.provider==="MANUAL"){o.info("人工充值无需测试连通性");return}try{L(_.id);const r=await m.payment.admin.testConfig(_.id);r.success?o.success(r.message||"连接测试成功"):o.error(r.message||"连接测试失败")}catch(r){o.error(((y=(z=r.response)==null?void 0:z.data)==null?void 0:y.message)||"测试失败")}finally{L(null)}},S=_=>{E({provider:_,name:El[_]||_,appId:"",privateKey:"",publicKey:"",config:{},isActive:!0,isSandbox:!1})},b=async()=>{var _,z;if(p){if(!p.appId){o.error("请填写 AppID");return}try{k(!0),await m.payment.admin.saveConfig({provider:p.provider,name:p.name,appId:p.appId,privateKey:p.privateKey,publicKey:p.publicKey,config:p.config,isActive:p.isActive,isSandbox:p.isSandbox}),o.success("保存成功"),E(null),M()}catch(y){o.error(((z=(_=y.response)==null?void 0:_.data)==null?void 0:z.message)||"保存失败")}finally{k(!1)}}},P=async _=>{var z,y;if(confirm("确定要删除此配置吗？"))try{await m.payment.admin.deleteConfig(_),o.success("删除成功"),M()}catch(r){o.error(((y=(z=r.response)==null?void 0:z.data)==null?void 0:y.message)||"删除失败")}},A=s.map(_=>_.provider),R=["ALIPAY","WECHAT"].filter(_=>!A.includes(_));return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"支付配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"配置支付宝、微信支付等支付渠道"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[s.map(_=>e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${_.provider==="ALIPAY"?"bg-blue-100 dark:bg-blue-900/30":"bg-green-100 dark:bg-green-900/30"}`,children:e.jsx("span",{className:`material-symbols-outlined text-2xl ${_.provider==="ALIPAY"?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400"}`,children:Cc[_.provider]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:_.name}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400",children:["AppID: ",_.appId]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[_.isSandbox&&e.jsx("span",{className:"px-2 py-1 text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded",children:"沙箱"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${_.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:_.isActive?"已启用":"已禁用"}),_.provider!=="MANUAL"&&e.jsx("button",{onClick:()=>D(_),disabled:v===_.id,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg transition-colors disabled:opacity-50",children:v===_.id?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base animate-spin",children:"progress_activity"}),"测试中..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"network_check"}),"测试连通"]})}),e.jsx("button",{onClick:()=>V(_),className:"p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"edit"})}),e.jsx("button",{onClick:()=>P(_.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-red-500",children:"delete"})})]})]})},_.id)),s.length===0&&e.jsx("div",{className:"text-center py-12 text-slate-400",children:"暂无支付配置，请添加"})]}),R.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"添加支付渠道"}),e.jsx("div",{className:"flex gap-4",children:R.map(_=>e.jsxs("button",{onClick:()=>S(_),className:"flex items-center gap-3 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-border-dark rounded-xl hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:Cc[_]}),e.jsx("span",{className:"text-slate-600 dark:text-gray-400",children:El[_]})]},_))})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[p.id?"编辑":"添加",El[p.provider],"配置"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"配置名称"}),e.jsx("input",{type:"text",value:p.name||"",onChange:_=>E({...p,name:_.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["AppID ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.appId||"",onChange:_=>E({...p,appId:_.target.value}),placeholder:"应用ID",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"应用私钥"}),e.jsx("textarea",{value:p.privateKey||"",onChange:_=>E({...p,privateKey:_.target.value}),placeholder:"RSA私钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"可以是 PKCS#1 或 PKCS#8 格式，不需要包含 BEGIN/END 行"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:p.provider==="ALIPAY"?"支付宝公钥":"平台公钥"}),e.jsx("textarea",{value:p.publicKey||"",onChange:_=>E({...p,publicKey:_.target.value}),placeholder:"平台公钥内容",rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.isActive??!0,onChange:_=>E({...p,isActive:_.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"启用"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.isSandbox??!1,onChange:_=>E({...p,isSandbox:_.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"沙箱环境"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:b,disabled:u,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:u?"保存中...":"保存"})]})]})})]})},Sc={RECHARGE:{label:"会员充值",icon:"workspace_premium"},CREDITS:{label:"积分购买",icon:"diamond"}},o0={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},n0=[{value:"#ef4444",label:"红色"},{value:"#f97316",label:"橙色"},{value:"#eab308",label:"黄色"},{value:"#22c55e",label:"绿色"},{value:"#3b82f6",label:"蓝色"},{value:"#8b5cf6",label:"紫色"},{value:"#404040",label:"粉色"}],c0=()=>{const[s,I]=a.useState([]),[n,O]=a.useState(!0),[p,E]=a.useState(""),[u,k]=a.useState(null),[v,L]=a.useState(!1),[M,V]=a.useState(!1),D=a.useRef(null);a.useEffect(()=>{S()},[]);const S=async()=>{var r,f;try{O(!0);const U=await m.payment.admin.getPackages();I(U.data||[])}catch(U){o.error(((f=(r=U.response)==null?void 0:r.data)==null?void 0:f.message)||"加载套餐失败")}finally{O(!1)}},b=p?s.filter(r=>r.type===p):s,P=(r="RECHARGE")=>{k({type:r,name:"",description:"",price:0,credits:0,bonusCredits:0,memberLevel:null,memberDays:null,coverImage:null,badge:null,badgeColor:null,sortOrder:s.length,isActive:!0,isRecommend:!1})},A=r=>{k({...r})},R=async()=>{var r,f;if(u){if(!u.name||!u.price||!u.credits){o.error("请填写套餐名称、价格和积分");return}try{L(!0),u.id?await m.payment.admin.updatePackage(u.id,u):await m.payment.admin.createPackage({type:u.type||"RECHARGE",name:u.name,description:u.description||void 0,price:u.price,credits:u.credits,bonusCredits:u.bonusCredits,memberLevel:u.type==="CREDITS"?void 0:u.memberLevel||void 0,memberDays:u.type==="CREDITS"?void 0:u.memberDays||void 0,coverImage:u.coverImage||void 0,badge:u.badge||void 0,badgeColor:u.badgeColor||void 0,sortOrder:u.sortOrder,isActive:u.isActive,isRecommend:u.isRecommend}),o.success("保存成功"),k(null),S()}catch(U){o.error(((f=(r=U.response)==null?void 0:r.data)==null?void 0:f.message)||"保存失败")}finally{L(!1)}}},_=async r=>{var f,U;if(confirm("确定要删除此套餐吗？"))try{await m.payment.admin.deletePackage(r),o.success("删除成功"),S()}catch(x){o.error(((U=(f=x.response)==null?void 0:f.data)==null?void 0:U.message)||"删除失败")}},z=async r=>{try{await m.payment.admin.updatePackage(r.id,{isActive:!r.isActive}),S()}catch{o.error("切换状态失败")}},y=r=>`¥${(r/100).toFixed(2)}`;return n?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"套餐管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"管理会员充值和积分购买套餐"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>P("RECHARGE"),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"workspace_premium"}),"新建会员套餐"]}),e.jsxs("button",{onClick:()=>P("CREDITS"),className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"diamond"}),"新建积分套餐"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-gray-400",children:"筛选:"}),[{value:"",label:"全部"},{value:"RECHARGE",label:"会员充值"},{value:"CREDITS",label:"积分购买"}].map(r=>e.jsx("button",{onClick:()=>E(r.value),className:`px-3 py-1 text-sm rounded-full transition-colors ${p===r.value?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-gray-400 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:r.label},r.value))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(r=>{var f,U;return e.jsxs("div",{className:`relative bg-white dark:bg-card-dark border rounded-2xl overflow-hidden transition-all ${r.isActive?"border-slate-200 dark:border-border-dark":"border-slate-200 dark:border-border-dark opacity-60"} ${r.isRecommend?"ring-2 ring-blue-500":""}`,children:[e.jsxs("div",{className:`absolute top-3 left-3 px-2 py-1 text-xs font-medium text-white rounded flex items-center gap-1 ${r.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:((f=Sc[r.type])==null?void 0:f.icon)||"redeem"}),((U=Sc[r.type])==null?void 0:U.label)||"套餐"]}),r.badge&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 text-xs font-medium text-white rounded",style:{backgroundColor:r.badgeColor||"#3b82f6"},children:r.badge}),e.jsx("div",{className:"h-32 bg-gradient-to-br from-blue-500 to-neutral-600 flex items-center justify-center",children:r.coverImage?e.jsx("img",{src:r.coverImage,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("span",{className:"material-symbols-outlined text-6xl text-white/30",children:"diamond"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r.name}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${r.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:r.isActive?"上架中":"已下架"})]}),r.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-3 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:y(r.price)}),e.jsxs("span",{className:"text-slate-500 dark:text-gray-400",children:["/ ",r.credits+r.bonusCredits," 积分"]})]}),r.bonusCredits>0&&e.jsxs("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-2",children:["赠送 ",r.bonusCredits," 积分"]}),r.memberLevel&&e.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:["升级为 ",o0[r.memberLevel],r.memberDays&&` (${r.memberDays}天)`]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100 dark:border-border-dark",children:[e.jsxs("button",{onClick:()=>A(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"}),"编辑"]}),e.jsxs("button",{onClick:()=>z(r),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:r.isActive?"visibility_off":"visibility"}),r.isActive?"下架":"上架"]}),e.jsx("button",{onClick:()=>_(r.id),className:"flex items-center justify-center p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]})]},r.id)}),s.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无套餐，点击上方按钮创建"})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium text-white flex items-center gap-1 ${u.type==="CREDITS"?"bg-amber-500":"bg-blue-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:u.type==="CREDITS"?"diamond":"workspace_premium"}),u.type==="CREDITS"?"积分购买":"会员充值"]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:u.id?"编辑套餐":"新建套餐"})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["套餐名称 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u.name||"",onChange:r=>k({...u,name:r.target.value}),placeholder:"如：入门包、超值包",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"排序"}),e.jsx("input",{type:"number",value:u.sortOrder||0,onChange:r=>k({...u,sortOrder:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"套餐简介"}),e.jsx("textarea",{value:u.description||"",onChange:r=>k({...u,description:r.target.value}),placeholder:"套餐描述...",rows:2,className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["价格（分） ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:u.price||0,onChange:r=>k({...u,price:Number(r.target.value)}),placeholder:"1000 = ¥10",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["= ¥",((u.price||0)/100).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:u.credits||0,onChange:r=>k({...u,credits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"赠送积分"}),e.jsx("input",{type:"number",value:u.bonusCredits||0,onChange:r=>k({...u,bonusCredits:Number(r.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),u.type!=="CREDITS"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"升级会员等级"}),e.jsxs("select",{value:u.memberLevel||"",onChange:r=>k({...u,memberLevel:r.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"",children:"不升级"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数"}),e.jsx("input",{type:"number",value:u.memberDays||"",onChange:r=>k({...u,memberDays:r.target.value?Number(r.target.value):null}),placeholder:"留空为永久",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"封面图片"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{onClick:()=>{var r;return(r=D.current)==null?void 0:r.click()},className:`relative w-40 h-24 rounded-xl border-2 border-dashed cursor-pointer transition-all overflow-hidden ${u.coverImage?"border-blue-400":"border-slate-300 dark:border-border-dark hover:border-blue-400"}`,children:[u.coverImage?e.jsx("img",{src:u.coverImage,alt:"封面预览",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add_photo_alternate"}),e.jsx("span",{className:"text-xs mt-1",children:"上传封面"})]}),M&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-white animate-spin",children:"progress_activity"})})]}),e.jsx("input",{ref:D,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:async r=>{var U,x,W,g;const f=(U=r.target.files)==null?void 0:U[0];if(f){if(!["image/jpeg","image/png","image/webp"].includes(f.type)){o.error("仅支持 JPG、PNG、WebP 格式");return}if(f.size>2*1024*1024){o.error("图片大小不能超过 2MB");return}try{V(!0);const X=await m.assets.upload(f,{type:"package-cover"});k({...u,coverImage:((x=X.data)==null?void 0:x.url)||X.url}),o.success("封面上传成功")}catch(X){o.error(((g=(W=X.response)==null?void 0:W.data)==null?void 0:g.message)||"上传失败")}finally{V(!1),r.target.value=""}}},className:"hidden"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"最佳尺寸："}),"800 × 480 像素（5:3 比例）"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"格式："}),"JPG、PNG、WebP"]}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"大小："}),"不超过 2MB"]}),u.coverImage&&e.jsxs("button",{onClick:()=>k({...u,coverImage:null}),className:"mt-2 text-xs text-red-500 hover:text-red-600 flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"移除封面"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标文字"}),e.jsx("input",{type:"text",value:u.badge||"",onChange:r=>k({...u,badge:r.target.value||null}),placeholder:"如：热销、超值、限时",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"角标颜色"}),e.jsx("div",{className:"flex items-center gap-2",children:n0.map(r=>e.jsx("button",{onClick:()=>k({...u,badgeColor:r.value}),className:`w-6 h-6 rounded-full transition-transform ${u.badgeColor===r.value?"ring-2 ring-offset-2 ring-blue-500 scale-110":""}`,style:{backgroundColor:r.value},title:r.label},r.value))})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.isActive??!0,onChange:r=>k({...u,isActive:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"上架"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.isRecommend??!1,onChange:r=>k({...u,isRecommend:r.target.checked}),className:"w-4 h-4 rounded border-slate-300"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-gray-300",children:"推荐（高亮显示）"})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"取消"}),e.jsx("button",{onClick:R,disabled:v,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:v?"保存中...":"保存"})]})]})})]})},Tc={VIP:"VIP会员",SVIP:"SVIP会员"},x0=()=>{const[s,I]=a.useState([]),[n,O]=a.useState([]),[p,E]=a.useState(!0),[u,k]=a.useState("codes"),[v,L]=a.useState(!1),[M,V]=a.useState(!1),[D,S]=a.useState({page:1,pageSize:20,total:0}),[b,P]=a.useState({status:"",batchId:""}),[A,R]=a.useState({count:10,credits:100,memberLevel:"",memberDays:0,expireAt:"",remark:""}),[_,z]=a.useState([]);a.useEffect(()=>{u==="codes"?y():r()},[u,D.page,b]);const y=async()=>{var T,j;try{E(!0);const q=await m.redeem.admin.getCodes({page:D.page,pageSize:D.pageSize,status:b.status||void 0,batchId:b.batchId||void 0});I(q.data||[]),S(J=>{var Z;return{...J,total:((Z=q.pagination)==null?void 0:Z.total)||0}})}catch(q){o.error(((j=(T=q.response)==null?void 0:T.data)==null?void 0:j.message)||"加载失败")}finally{E(!1)}},r=async()=>{var T,j;try{E(!0);const q=await m.redeem.admin.getBatches();O(q.data||[])}catch(q){o.error(((j=(T=q.response)==null?void 0:T.data)==null?void 0:j.message)||"加载失败")}finally{E(!1)}},f=async()=>{var T,j,q,J,Z;if(A.credits<=0){o.error("积分数量必须大于0");return}if(A.count<1||A.count>100){o.error("生成数量必须在1-100之间");return}try{V(!0);const se=await m.redeem.admin.generate({count:A.count,credits:A.credits,memberLevel:A.memberLevel||void 0,memberDays:A.memberDays||void 0,expireAt:A.expireAt||void 0,remark:A.remark||void 0}),Se=((j=(T=se.data)==null?void 0:T.data)==null?void 0:j.codes)||[];if(Se.length>0)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Se.join(`
`));else{const oe=document.createElement("textarea");oe.value=Se.join(`
`),oe.style.position="fixed",oe.style.opacity="0",document.body.appendChild(oe),oe.select(),document.execCommand("copy"),document.body.removeChild(oe)}o.success(`生成成功！${Se.length} 个兑换码已复制到剪贴板`)}catch{o.success(`生成成功！${Se.length} 个兑换码`)}else o.success(((q=se.data)==null?void 0:q.message)||"生成成功");L(!1),z([]),y(),r()}catch(se){o.error(((Z=(J=se.response)==null?void 0:J.data)==null?void 0:Z.message)||"生成失败")}finally{V(!1)}},U=async T=>{var j,q;if(confirm("确定删除此兑换码？"))try{await m.redeem.admin.deleteCode(T),o.success("删除成功"),y()}catch(J){o.error(((q=(j=J.response)==null?void 0:j.data)==null?void 0:q.message)||"删除失败")}},x=async T=>{var j,q,J;if(confirm("确定删除此批次所有未使用的兑换码？"))try{const Z=await m.redeem.admin.deleteBatch(T);o.success((j=Z.data)!=null&&j.deletedCount?`成功删除 ${Z.data.deletedCount} 个兑换码`:"删除成功"),r(),y()}catch(Z){o.error(((J=(q=Z.response)==null?void 0:q.data)==null?void 0:J.message)||"删除失败")}},W=async T=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(T);else{const j=document.createElement("textarea");j.value=T,j.style.position="fixed",j.style.opacity="0",document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j)}o.success("已复制到剪贴板")}catch{o.error("复制失败")}},g=async()=>{await W(_.join(`
`))},X=T=>T?new Date(T).toLocaleString("zh-CN"):"-";return p&&s.length===0&&n.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"兑换码管理"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400",children:"生成和管理积分兑换码"})]}),e.jsxs("button",{onClick:()=>{z([]),L(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"}),"生成兑换码"]})]}),e.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>k("codes"),className:`pb-3 px-1 border-b-2 transition-colors ${u==="codes"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"兑换码列表"}),e.jsx("button",{onClick:()=>k("batches"),className:`pb-3 px-1 border-b-2 transition-colors ${u==="batches"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,children:"批次管理"})]}),u==="codes"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs("select",{value:b.status,onChange:T=>P({...b,status:T.target.value}),className:"px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"unused",children:"未使用"}),e.jsx("option",{value:"used",children:"已使用"})]})}),e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"兑换码"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"状态"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"使用者"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"备注"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"创建时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-border-dark",children:[s.map(T=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"font-mono text-sm bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:T.code}),e.jsx("button",{onClick:()=>W(T.code),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]})}),e.jsxs("td",{className:"px-4 py-3 text-amber-600 dark:text-amber-400 font-medium",children:["+",T.credits]}),e.jsxs("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400",children:[T.memberLevel?Tc[T.memberLevel]||T.memberLevel:"-",T.memberDays?` (${T.memberDays}天)`:""]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${T.isUsed?"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:T.isUsed?"已使用":"未使用"})}),e.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-gray-400 text-sm",children:T.usedBy?e.jsx("span",{children:T.usedBy.nickname||T.usedBy.phone}):"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:T.remark||"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-gray-500 text-sm",children:X(T.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:!T.isUsed&&e.jsx("button",{onClick:()=>U(T.id),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})})]},T.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-400",children:"暂无兑换码"})})]})]})}),D.total>D.pageSize&&e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>S(T=>({...T,page:T.page-1})),disabled:D.page<=1,className:"px-3 py-1 border rounded disabled:opacity-50",children:"上一页"}),e.jsxs("span",{className:"px-3 py-1",children:[D.page," / ",Math.ceil(D.total/D.pageSize)]}),e.jsx("button",{onClick:()=>S(T=>({...T,page:T.page+1})),disabled:D.page>=Math.ceil(D.total/D.pageSize),className:"px-3 py-1 border rounded disabled:opacity-50",children:"下一页"})]})]}),u==="batches"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(T=>{var j;return e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-mono",children:[(j=T.batchId)==null?void 0:j.substring(0,20),"..."]}),T.unused>0&&e.jsx("button",{onClick:()=>x(T.batchId),className:"text-red-500 hover:text-red-600",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"text-2xl font-bold text-amber-500",children:["+",T.credits]}),T.memberLevel&&e.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-100 text-neutral-600 dark:bg-neutral-900/30 dark:text-neutral-400 rounded",children:Tc[T.memberLevel]||T.memberLevel})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 text-center",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:T.total}),e.jsx("div",{className:"text-xs text-slate-500",children:"总数"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:T.unused}),e.jsx("div",{className:"text-xs text-slate-500",children:"可用"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-500",children:T.used}),e.jsx("div",{className:"text-xs text-slate-500",children:"已用"})]})]}),T.remark&&e.jsxs("div",{className:"text-sm text-slate-500 mb-2",children:["备注：",T.remark]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["创建于 ",X(T.createdAt)]})]},T.batchId)}),n.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 text-slate-400",children:"暂无批次记录"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto m-4",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-border-dark",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"生成兑换码"})}),e.jsx("div",{className:"p-6 space-y-4",children:_.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["生成数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,max:100,value:A.count,onChange:T=>R({...A,count:Number(T.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"最多100个"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:["积分数量 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:1,value:A.credits,onChange:T=>R({...A,credits:Number(T.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员等级（可选）"}),e.jsxs("select",{value:A.memberLevel,onChange:T=>R({...A,memberLevel:T.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"",children:"不设置"}),e.jsx("option",{value:"VIP",children:"VIP会员"}),e.jsx("option",{value:"SVIP",children:"SVIP会员"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"向上原则：不会降低用户等级"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"会员天数（可选）"}),e.jsx("input",{type:"number",min:0,value:A.memberDays,onChange:T=>R({...A,memberDays:Number(T.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"过期时间（可选）"}),e.jsx("input",{type:"datetime-local",value:A.expireAt,onChange:T=>R({...A,expireAt:T.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"备注（可选）"}),e.jsx("input",{type:"text",value:A.remark,onChange:T=>R({...A,remark:T.target.value}),placeholder:"如：活动名称",className:"w-full px-3 py-2 border border-slate-300 dark:border-border-dark rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-medium text-slate-900 dark:text-white",children:["已生成 ",_.length," 个兑换码"]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"}),"复制全部"]})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3 max-h-60 overflow-y-auto",children:_.map((T,j)=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-slate-200 dark:border-border-dark last:border-0",children:[e.jsx("code",{className:"font-mono text-sm",children:T}),e.jsx("button",{onClick:()=>W(T),className:"text-slate-400 hover:text-slate-600",children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"})})]},j))})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-border-dark flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:"关闭"}),_.length===0&&e.jsx("button",{onClick:f,disabled:M,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors disabled:opacity-50",children:M?"生成中...":"生成"})]})]})})]})},Rl={USER:"普通用户",VIP:"VIP会员",SVIP:"SVIP会员"},Pl={USER:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",VIP:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200",SVIP:"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-800 dark:text-neutral-200"},m0=()=>{const[s,I]=a.useState(!0),[n,O]=a.useState(!1),[p,E]=a.useState("levels"),[u,k]=a.useState([]),[v,L]=a.useState(null),[M,V]=a.useState(null),[D,S]=a.useState({}),b=a.useCallback(async()=>{I(!0);try{const[y,r]=await Promise.all([m.admin.userLevels.getConfigs(),m.admin.userLevels.getPermissionsSummary()]);y.success&&k(y.data),r.success&&L(r.data)}catch{o.error("加载配置失败")}finally{I(!1)}},[]);a.useEffect(()=>{b()},[b]);const P=async()=>{O(!0);try{(await m.admin.userLevels.batchUpdateConfigs(u.map(r=>({...r,giftDescription:r.giftDescription??void 0})))).success&&(o.success("等级配置保存成功"),b())}catch{o.error("保存失败")}finally{O(!1)}},A=(y,r,f)=>{k(U=>U.map(x=>x.userRole===y?{...x,[r]:f}:x))},R=async y=>{O(!0);try{const r=["USER","VIP","SVIP"].map(U=>{const x=y.permissions.find(g=>g.userRole===U),W=D[`${y.id}-${U}`]||{};return{aiModelId:y.id,userRole:U,isAllowed:W.isAllowed??(x==null?void 0:x.isAllowed)??!0,dailyLimit:W.dailyLimit??(x==null?void 0:x.dailyLimit)??-1,isFreeForMember:W.isFreeForMember??(x==null?void 0:x.isFreeForMember)??!1,freeDailyLimit:W.freeDailyLimit??(x==null?void 0:x.freeDailyLimit)??0,isActive:!0}});(await m.admin.userLevels.batchUpdatePermissions(r)).success&&(o.success("权限配置保存成功"),S({}),b())}catch{o.error("保存失败")}finally{O(!1)}},_=(y,r,f,U)=>{S(x=>({...x,[`${y}-${r}`]:{...x[`${y}-${r}`],[f]:U}}))},z=(y,r,f)=>{const U=D[`${y.id}-${r}`];if(U&&f in U)return U[f];const x=y.permissions.find(W=>W.userRole===r);return x?x[f]:f==="isAllowed"?!0:f==="dailyLimit"?-1:f==="isFreeForMember"?!1:f==="freeDailyLimit"?0:null};return s?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx("div",{className:"text-gray-400",children:"加载中..."})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"用户等级权限配置"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-400 mt-1",children:"配置不同等级用户的积分赠送规则和模型使用权限"})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("button",{onClick:()=>E("levels"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${p==="levels"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"等级配置"}),e.jsx("button",{onClick:()=>E("permissions"),className:`px-4 py-2 font-medium transition-colors border-b-2 -mb-px ${p==="permissions"?"text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-gray-400 border-transparent hover:text-slate-900 dark:hover:text-white"}`,children:"模型权限"})]}),p==="levels"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"积分赠送与并发配置"}),e.jsx("button",{onClick:P,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"保存中...":"保存配置"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"用户等级"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日赠送积分"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"赠送天数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"最大并发数"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"存储保留"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"规则描述"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"启用"})]})}),e.jsx("tbody",{children:u.map(y=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Pl[y.userRole]}`,children:Rl[y.userRole]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"0",value:y.dailyGiftCredits,onChange:r=>A(y.userRole,"dailyGiftCredits",parseInt(r.target.value)||0),className:"w-24 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",value:y.giftDays,onChange:r=>A(y.userRole,"giftDays",parseInt(r.target.value)||0),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:y.giftDays===0?"(无限期)":"天"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"number",min:"1",value:y.maxConcurrency,onChange:r=>A(y.userRole,"maxConcurrency",parseInt(r.target.value)||1),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:y.storageRetentionDays,onChange:r=>A(y.userRole,"storageRetentionDays",parseInt(r.target.value)||-1),className:"w-20 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-gray-400",children:y.storageRetentionDays===-1?"(永久)":"天"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"text",value:y.giftDescription||"",onChange:r=>A(y.userRole,"giftDescription",r.target.value),placeholder:"规则说明...",className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-slate-900 dark:text-white"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.isActive,onChange:r=>A(y.userRole,"isActive",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})})]},y.userRole))})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"说明"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日赠送积分"}),"：用户每天登录时自动赠送的积分数量，赠送积分不累计（次日清零）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"赠送天数"}),"：新用户注册后赠送积分的天数，0表示无限期（VIP/SVIP会员有效期内持续赠送）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"最大并发数"}),"：用户同时进行的生成任务数量上限"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"存储保留"}),"：用户生成内容的OSS存储保留天数，-1表示永久保留。保留期限按内容生成时的用户等级计算"]})]})]})]})}),p==="permissions"&&v&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"模型使用权限配置"}),e.jsx("div",{className:"space-y-4",children:v.models.map(y=>e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50 flex items-center justify-between cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>V((M==null?void 0:M.id)===y.id?null:y),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-slate-400",children:(M==null?void 0:M.id)===y.id?"expand_less":"expand_more"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:y.name}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:[y.provider," / ",y.modelId]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded ${y.type==="TEXT_GENERATION"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":y.type==="IMAGE_GENERATION"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":y.type==="VIDEO_GENERATION"?"bg-neutral-100 dark:bg-neutral-900/30 text-neutral-700 dark:text-neutral-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:y.type})})]}),(M==null?void 0:M.id)===y.id&&e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(r=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${Pl[r]}`,children:Rl[r]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z(y,r,"isAllowed"),onChange:f=>_(y.id,r,"isAllowed",f.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:z(y,r,"dailyLimit"),onChange:f=>_(y.id,r,"dailyLimit",parseInt(f.target.value)),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:z(y,r,"dailyLimit")===-1?"不限":"次/日"})]})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z(y,r,"isFreeForMember"),onChange:f=>_(y.id,r,"isFreeForMember",f.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-600"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:r!=="USER"&&z(y,r,"isFreeForMember")?e.jsx("input",{type:"number",min:"0",value:z(y,r,"freeDailyLimit"),onChange:f=>_(y.id,r,"freeDailyLimit",parseInt(f.target.value)||0),className:"w-20 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})})]},r))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>R(y),disabled:n,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:n?"保存中...":"保存权限"})})]})]},y.id))}),v.models.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-gray-400",children:"暂无活跃的AI模型"})]}),v.nodeTypes.length>0&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"节点类型权限配置"}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:["已配置 ",v.nodeTypes.length," 个节点类型"]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"独立模块权限配置"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-400 mb-4",children:"配置 Midjourney、广告成片等独立节点的使用权限"}),e.jsx("div",{className:"space-y-4",children:[{moduleType:"midjourney",name:"Midjourney",description:"文生图/图生图"},{moduleType:"commercial-video",name:"广告成片",description:"Vidu 广告视频"}].map(y=>{var f;const r=((f=v==null?void 0:v.moduleTypes.find(U=>U.moduleType===y.moduleType))==null?void 0:f.permissions)||[];return e.jsxs("div",{className:"border border-slate-200 dark:border-border-dark rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:y.name}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:y.description})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"等级"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"允许使用"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"会员免费"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"免费次数/日"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"每日限制"})]})}),e.jsx("tbody",{children:["USER","VIP","SVIP"].map(U=>{const x=r.find(Z=>Z.userRole===U),W=`module-${y.moduleType}-${U}`,g=D[W]||{},X=g.isAllowed??(x==null?void 0:x.isAllowed)??!0,T=g.dailyLimit??(x==null?void 0:x.dailyLimit)??-1,j=g.isFreeForMember??(x==null?void 0:x.isFreeForMember)??!1,q=g.freeDailyLimit??(x==null?void 0:x.freeDailyLimit)??0,J=U==="VIP"||U==="SVIP";return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${Pl[U]}`,children:Rl[U]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:X,onChange:Z=>S(se=>({...se,[W]:{...se[W],isAllowed:Z.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}),e.jsx("td",{className:"px-3 py-3",children:J?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:Z=>S(se=>({...se,[W]:{...se[W],isFreeForMember:Z.target.checked}})),className:"sr-only peer"}),e.jsx("div",{className:"w-9 h-5 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-amber-500"})]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:J?e.jsx("input",{type:"number",min:"0",value:q,onChange:Z=>S(se=>({...se,[W]:{...se[W],freeDailyLimit:parseInt(Z.target.value)||0}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"-1",value:T,onChange:Z=>S(se=>({...se,[W]:{...se[W],dailyLimit:parseInt(Z.target.value)}})),className:"w-16 px-2 py-1 text-sm bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded text-slate-900 dark:text-white"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:T===-1?"不限":""})]})})]},U)})})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx("button",{onClick:async()=>{O(!0);try{const U=["USER","VIP","SVIP"].map(x=>{const W=`module-${y.moduleType}-${x}`,g=r.find(T=>T.userRole===x),X=D[W]||{};return{moduleType:y.moduleType,userRole:x,isAllowed:X.isAllowed??(g==null?void 0:g.isAllowed)??!0,dailyLimit:X.dailyLimit??(g==null?void 0:g.dailyLimit)??-1,isFreeForMember:X.isFreeForMember??(g==null?void 0:g.isFreeForMember)??!1,freeDailyLimit:X.freeDailyLimit??(g==null?void 0:g.freeDailyLimit)??0,isActive:!0}});await m.admin.userLevels.batchUpdatePermissions(U),o.success(`${y.name} 权限保存成功`),b()}catch{o.error("保存失败")}finally{O(!1)}},disabled:n,className:"px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:"保存"})})]})]},y.moduleType)})})]}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"权限配置说明"}),e.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"允许使用"}),"：该等级用户是否可以使用此模型/节点"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"每日限制"}),"：每日可调用次数，-1表示不限制"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"会员免费"}),"：VIP/SVIP会员使用时是否免费（0积分）"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"免费次数/日"}),"：每日免费使用的次数上限"]})]})]})]})]})},ke=(s,I=2)=>{if(s===0)return"0 B";const n=1024,O=I<0?0:I,p=["B","KB","MB","GB","TB"],E=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,E)).toFixed(O))+" "+p[E]},Ml=s=>{const I=Math.floor(s/86400),n=Math.floor(s%86400/3600),O=Math.floor(s%3600/60),p=[];return I>0&&p.push(`${I}天`),n>0&&p.push(`${n}小时`),O>0&&p.push(`${O}分钟`),p.join(" ")||"< 1分钟"},Ls=({value:s,color:I="blue",showLabel:n=!0})=>{const O=()=>s>=90?"bg-red-500":s>=70?"bg-yellow-500":I==="blue"?"bg-blue-500":`bg-${I}-500`;return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${O()}`,style:{width:`${Math.min(s,100)}%`}})}),n&&e.jsxs("p",{className:`text-xs mt-1 ${s>=90?"text-red-500":s>=70?"text-yellow-500":"text-gray-500 dark:text-gray-400"}`,children:[s.toFixed(1),"%"]})]})},Na=({title:s,icon:I,children:n,className:O=""})=>e.jsxs("div",{className:`bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5 ${O}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:I}),e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300",children:s})]}),n]}),u0=({status:s})=>{const I=()=>{switch(s){case"online":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"stopping":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"stopped":case"errored":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${I()}`,children:s})},b0=()=>{var S,b,P;const[s,I]=a.useState(null),[n,O]=a.useState(!0),[p,E]=a.useState(null),[u,k]=a.useState(!0),[v,L]=a.useState(5e3),[M,V]=a.useState(null),D=a.useCallback(async()=>{var A,R,_;try{const z=await m.admin.getServerMetrics(),y=((A=z.data)==null?void 0:A.data)||z.data;y&&y.system?(I(y),V(new Date),E(null)):E("返回数据格式错误")}catch(z){E(((_=(R=z.response)==null?void 0:R.data)==null?void 0:_.message)||z.message||"获取监控数据失败")}finally{O(!1)}},[]);return a.useEffect(()=>{D()},[D]),a.useEffect(()=>{if(!u)return;const A=setInterval(D,v);return()=>clearInterval(A)},[u,v,D]),n&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载监控数据中..."})]})}):p||!n&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:p||"无法加载监控数据"}),e.jsx("button",{onClick:()=>{O(!0),D()},className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"重试"})]})}):s?e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"服务器监控"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-gray-400 mt-1",children:["主机: ",s==null?void 0:s.system.hostname," | ",s==null?void 0:s.system.platform," ",s==null?void 0:s.system.arch]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:v,onChange:A=>L(Number(A.target.value)),className:"px-3 py-1.5 text-sm bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("option",{value:3e3,children:"3秒"}),e.jsx("option",{value:5e3,children:"5秒"}),e.jsx("option",{value:1e4,children:"10秒"}),e.jsx("option",{value:3e4,children:"30秒"})]}),e.jsxs("button",{onClick:()=>k(!u),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors ${u?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:u?"sync":"sync_disabled"}),u?"自动刷新":"已暂停"]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]})]}),M&&e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["最后更新: ",M.toLocaleTimeString("zh-CN")]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"CPU 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.cpu.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[s.cpu.count," 核心"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"内存使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.memory.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.memory.used)," / ",ke(s.memory.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"Swap 使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.swap.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.swap.used)," / ",ke(s.swap.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"磁盘使用率"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.disk.usage,"%"]}),e.jsxs("p",{className:"text-xs opacity-60",children:[ke(s.disk.used)," / ",ke(s.disk.total)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:s.connections.onlineNow||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["WebSocket: ",s.connections.socket," | 会话: ",s.connections.validSessions]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"24h 请求"}),e.jsx("p",{className:"text-2xl font-bold",children:s.traffic.last24h.toLocaleString()}),e.jsx("p",{className:"text-xs opacity-60",children:"API 调用"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Na,{title:"CPU",icon:"memory",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"型号"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white truncate max-w-[200px]",children:s.cpu.model})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"核心数"}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.cpu.count})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"使用率"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[s.cpu.usage,"%"]})]}),e.jsx(Ls,{value:s.cpu.usage,showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"系统负载"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["1m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"1分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["5m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"5分钟"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.system.loadAvg["15m"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"15分钟"})]})]})]})]})}),e.jsx(Na,{title:"内存",icon:"memory_alt",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"物理内存"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.memory.used)," / ",ke(s.memory.total)]})]}),e.jsx(Ls,{value:s.memory.usage,color:"gray",showLabel:!1})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Swap"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.swap.used)," / ",ke(s.swap.total)]})]}),e.jsx(Ls,{value:s.swap.usage,color:"amber",showLabel:!1})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用内存"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:ke(s.memory.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Swap 可用"}),e.jsx("p",{className:"text-sm font-semibold text-amber-600 dark:text-amber-400",children:ke(s.swap.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"系统运行"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Ml(s.system.uptime)})]})]})]})}),e.jsx(Na,{title:"数据库 (PostgreSQL)",icon:"database",children:s.database.error?e.jsx("p",{className:"text-red-500 text-sm",children:s.database.error}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总连接数"}),e.jsx("p",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:((S=s.database.connections)==null?void 0:S.total)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃连接"}),e.jsx("p",{className:"text-xl font-semibold text-green-600 dark:text-green-400",children:((b=s.database.connections)==null?void 0:b.active)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"空闲连接"}),e.jsx("p",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400",children:((P=s.database.connections)==null?void 0:P.idle)||0})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"数据库大小"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.database.size||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"活跃查询"}),e.jsx("p",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:s.database.activeQueries||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"慢查询"}),e.jsx("p",{className:`text-sm font-semibold ${(s.database.slowQueries||0)>0?"text-red-500":"text-green-500"}`,children:s.database.slowQueries||0})]})]})]})}),e.jsx(Na,{title:"Node.js 进程",icon:"code",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程 PID"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s.process.pid})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"进程运行时间"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:Ml(s.process.uptime)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-border-dark",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"内存使用"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Used"}),e.jsx("p",{className:"text-sm font-semibold text-neutral-600 dark:text-neutral-400",children:ke(s.process.memory.heapUsed)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heap Total"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.heapTotal)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"RSS"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.rss)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"External"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.process.memory.external)})]})]})]})]})})]}),s.pm2.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(Na,{title:"PM2 进程管理",icon:"hub",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-slate-200 dark:border-border-dark",children:[e.jsx("th",{className:"pb-2 font-medium",children:"进程名"}),e.jsx("th",{className:"pb-2 font-medium",children:"PID"}),e.jsx("th",{className:"pb-2 font-medium",children:"状态"}),e.jsx("th",{className:"pb-2 font-medium",children:"CPU"}),e.jsx("th",{className:"pb-2 font-medium",children:"内存"}),e.jsx("th",{className:"pb-2 font-medium",children:"运行时间"}),e.jsx("th",{className:"pb-2 font-medium",children:"重启次数"})]})}),e.jsx("tbody",{children:s.pm2.map((A,R)=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsx("td",{className:"py-2.5 font-medium text-slate-900 dark:text-white",children:A.name}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:A.pid}),e.jsx("td",{className:"py-2.5",children:e.jsx(u0,{status:A.status})}),e.jsx("td",{className:"py-2.5",children:e.jsxs("span",{className:A.cpu>80?"text-red-500":A.cpu>50?"text-yellow-500":"text-green-500",children:[A.cpu,"%"]})}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:ke(A.memory)}),e.jsx("td",{className:"py-2.5 text-gray-600 dark:text-gray-400",children:Ml(A.uptime/1e3)}),e.jsx("td",{className:"py-2.5",children:e.jsx("span",{className:A.restarts>5?"text-red-500":"text-gray-600 dark:text-gray-400",children:A.restarts})})]},R))})]})})})}),e.jsx("div",{className:"mt-6",children:e.jsx(Na,{title:"磁盘存储",icon:"hard_drive",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"根分区 (/)"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[ke(s.disk.used)," / ",ke(s.disk.total)]})]}),e.jsx(Ls,{value:s.disk.usage,color:"green"})]}),e.jsxs("div",{className:"pt-2 grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"已使用"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.disk.used)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"可用空间"}),e.jsx("p",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:ke(s.disk.free)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"总容量"}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:ke(s.disk.total)})]})]})]})})})]})]}):e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载中..."})]})})},p0=[{name:"userInput",desc:"用户输入的场景描述",example:"高清放大这张图片"}],Ec=[{value:"hdUpscale",label:"高清放大",icon:"high_quality"},{value:"storyboardMaster",label:"智能溶图",icon:"auto_awesome"},{value:"smartStoryboard",label:"智能分镜",icon:"grid_view"},{value:"aiImage",label:"图片生成",icon:"image"},{value:"aiVideo",label:"视频生成",icon:"movie"},{value:"aiVideo_t2v",label:"文生视频",icon:"movie"},{value:"aiVideo_i2v_first",label:"图生视频（首帧）",icon:"movie"},{value:"aiVideo_i2v_last",label:"图生视频（尾帧）",icon:"movie"},{value:"aiVideo_first_last",label:"首尾帧生成",icon:"movie"},{value:"aiVideo_reference",label:"参考图生成",icon:"movie"},{value:"aiVideo_swap",label:"视频编辑",icon:"movie"},{value:"aiVideo_lipsync",label:"口型同步",icon:"movie"},{value:"aiVideo_style",label:"风格迁移",icon:"movie"},{value:"soraVideo",label:"Sora视频",icon:"movie"},{value:"soraCharacter",label:"Sora角色",icon:"face"},{value:"midjourney",label:"Midjourney",icon:"palette"},{value:"agent",label:"智能体",icon:"smart_toy"},{value:"audioVoice",label:"语音合成",icon:"record_voice_over"},{value:"voiceClone",label:"声音克隆",icon:"mic"},{value:"audioSynthesize",label:"音频合成",icon:"music_note"},{value:"audioDesign",label:"音效设计",icon:"graphic_eq"},{value:"superCanvas",label:"超级画布",icon:"draw"},{value:"videoUpscale",label:"视频超分",icon:"high_quality"},{value:"commercialVideo",label:"广告成片",icon:"campaign"}],g0=()=>{const[s,I]=a.useState([]),[n,O]=a.useState(null),[p,E]=a.useState(!0),[u,k]=a.useState(!1),[v,L]=a.useState(!1),[M,V]=a.useState({system:!0,user:!0,enhance:!1,variables:!1}),[D,S]=a.useState({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0}),b=async()=>{try{E(!0);const x=await m.nodePrompts.getAll(!0);x.success&&I(x.data||[])}catch(x){o.error("加载失败: "+(x.message||"未知错误"))}finally{E(!1)}};a.useEffect(()=>{b()},[]);const P=x=>{O(x),L(!1),S({nodeType:x.nodeType,name:x.name,description:x.description||"",systemPrompt:x.systemPrompt||"",userPromptTemplate:x.userPromptTemplate,enhancePromptTemplate:x.enhancePromptTemplate||"",variables:x.variables||[],isActive:x.isActive})},A=()=>{O(null),L(!0),S({nodeType:"",name:"",description:"",systemPrompt:"",userPromptTemplate:"",enhancePromptTemplate:"",variables:[],isActive:!0})},R=async()=>{try{const x=await m.nodePrompts.initHDUpscale();x.success&&(o.success(x.message||"初始化成功"),await b(),x.data&&P(x.data))}catch(x){o.error("初始化失败: "+(x.message||"未知错误"))}},_=async()=>{try{const x=await m.nodePrompts.initImageFusion();x.success&&(o.success(x.message||"初始化成功"),await b(),x.data&&P(x.data))}catch(x){o.error("初始化失败: "+(x.message||"未知错误"))}},z=async()=>{try{const x=await m.nodePrompts.initSmartStoryboard();x.success&&(o.success(x.message||"初始化成功"),await b(),x.data&&P(x.data))}catch(x){o.error("初始化失败: "+(x.message||"未知错误"))}},y=async()=>{if(!D.nodeType.trim()){o.error("请输入节点类型");return}if(!D.name.trim()){o.error("请输入名称");return}if(!D.userPromptTemplate.trim()){o.error("请输入用户提示词模板");return}try{if(k(!0),v){const x=await m.nodePrompts.create(D);x.success&&(o.success("创建成功"),await b(),P(x.data))}else if(n){const x=await m.nodePrompts.update(n.id,D);x.success&&(o.success("保存成功"),await b(),P(x.data))}}catch(x){o.error("保存失败: "+(x.message||"未知错误"))}finally{k(!1)}},r=async()=>{if(n&&confirm(`确定要删除 "${n.name}" 吗？`))try{(await m.nodePrompts.delete(n.id)).success&&(o.success("删除成功"),O(null),L(!1),await b())}catch(x){o.error("删除失败: "+(x.message||"未知错误"))}},f=async()=>{if(n)try{const x=await m.nodePrompts.toggle(n.id);x.success&&(o.success(x.data.isActive?"已启用":"已禁用"),await b(),P(x.data))}catch(x){o.error("操作失败: "+(x.message||"未知错误"))}},U=x=>{V({...M,[x]:!M[x]})};return e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"节点提示词管理"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"配置工作流节点的 AI 提示词模板，支持变量替换"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-neutral-500/20 text-neutral-400 rounded-lg hover:bg-neutral-500/30 transition-colors",children:[e.jsx(Ks,{className:"w-4 h-4"}),"初始化高清放大"]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-neutral-500/20 text-neutral-400 rounded-lg hover:bg-neutral-500/30 transition-colors",children:[e.jsx(Ks,{className:"w-4 h-4"}),"初始化智能溶图"]}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors",children:[e.jsx(Ks,{className:"w-4 h-4"}),"初始化智能分镜"]}),e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:[e.jsx(Vx,{className:"w-4 h-4"}),"新建模板"]})]})]}),e.jsxs("div",{className:"flex-1 flex gap-6 min-h-0",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsx("h2",{className:"text-sm font-medium text-gray-400",children:"模板列表"})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-6 h-6 border-2 border-neutral-500/20 border-t-neutral-500 rounded-full animate-spin"})}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(wc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"暂无模板"}),e.jsx("p",{className:"text-xs mt-1",children:'点击"初始化高清放大模板"开始'})]}):e.jsx("ul",{className:"space-y-1",children:s.map(x=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>P(x),className:`w-full text-left px-3 py-2.5 rounded-lg transition-all ${(n==null?void 0:n.id)===x.id?"bg-neutral-500/20 text-neutral-400":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x.isActive?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium truncate",children:x.name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:x.nodeType})]})},x.id))})})]}),e.jsx("div",{className:"flex-1 bg-card-dark rounded-xl border border-white/10 overflow-hidden flex flex-col",children:!n&&!v?e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wc,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"选择一个模板进行编辑"}),e.jsx("p",{className:"text-sm mt-1",children:'或点击"新建模板"创建'})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:v?"新建模板":`编辑: ${n==null?void 0:n.name}`}),e.jsxs("div",{className:"flex gap-2",children:[!v&&n&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:f,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-colors ${D.isActive?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"}`,children:[D.isActive?e.jsx(Fx,{className:"w-4 h-4"}):e.jsx($x,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:D.isActive?"禁用":"启用"})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[e.jsx(Sx,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"删除"})]})]}),e.jsxs("button",{onClick:y,disabled:u,className:"flex items-center gap-1.5 px-4 py-1.5 bg-neutral-500 text-white rounded-lg hover:bg-neutral-600 transition-colors disabled:opacity-50",children:[u?e.jsx(Kx,{className:"w-4 h-4 animate-spin"}):e.jsx(Qx,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"保存"})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["节点类型 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:D.nodeType,onChange:x=>{const W=Ec.find(g=>g.value===x.target.value);S({...D,nodeType:x.target.value,name:W?W.label+"提示词":D.name})},disabled:!v,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-neutral-500 disabled:opacity-50",children:[e.jsx("option",{value:"",className:"bg-gray-800",children:"请选择节点类型"}),Ec.map(x=>e.jsxs("option",{value:x.value,className:"bg-gray-800",children:[x.label," (",x.value,")"]},x.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:["显示名称 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:D.name,onChange:x=>S({...D,name:x.target.value}),placeholder:"如: 高清放大节点",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"描述"}),e.jsx("input",{type:"text",value:D.description,onChange:x=>S({...D,description:x.target.value}),placeholder:"节点功能描述",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500"})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>U("system"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"系统提示词 (System Prompt)"}),M.system?e.jsx(Sl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Cl,{className:"w-4 h-4 text-gray-400"})]}),M.system&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:D.systemPrompt,onChange:x=>S({...D,systemPrompt:x.target.value}),placeholder:"设定 AI 的角色和行为...",rows:8,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>U("user"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["用户提示词模板 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-400",children:[e.jsx(Ox,{className:"w-3 h-3"}),"支持 ","{{变量}}"," 语法"]})]}),M.user?e.jsx(Sl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Cl,{className:"w-4 h-4 text-gray-400"})]}),M.user&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:D.userPromptTemplate,onChange:x=>S({...D,userPromptTemplate:x.target.value}),placeholder:"用户提示词模板，使用 {{变量名}} 插入动态内容...",rows:12,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),e.jsxs("div",{className:"border border-white/10 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>U("enhance"),className:"w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"提示词增强模板 (可选)"}),M.enhance?e.jsx(Sl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Cl,{className:"w-4 h-4 text-gray-400"})]}),M.enhance&&e.jsx("div",{className:"p-3",children:e.jsx("textarea",{value:D.enhancePromptTemplate,onChange:x=>S({...D,enhancePromptTemplate:x.target.value}),placeholder:"用于增强/优化用户输入的提示词...",rows:6,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-neutral-500 font-mono text-sm"})})]}),D.nodeType==="hdUpscale"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-neutral-500/10 border border-neutral-500/20 rounded-lg text-sm",children:[e.jsx("p",{className:"font-medium mb-2 text-neutral-300",children:"🔍 高清放大可用变量（点击复制）"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:p0.map(x=>e.jsxs("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`{{${x.name}}}`),o.success(`已复制 {{${x.name}}}`)},className:"flex items-center gap-2 p-2 bg-black/20 rounded hover:bg-black/30 transition-colors text-left",children:[e.jsx("code",{className:"text-neutral-400 text-xs",children:`{{${x.name}}}`}),e.jsxs("span",{className:"text-gray-400 text-xs truncate",children:[x.desc,"：",x.example]})]},x.name))})]}),e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 默认提示词"}),e.jsx("p",{className:"text-xs opacity-80",children:"将这张图片进行高清放大，保持原有的画面内容、构图和风格不变，提升图片的清晰度和细节"})]})]}):e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"💡 使用说明"}),e.jsxs("p",{children:["在提示词中可使用变量：",e.jsx("code",{className:"bg-black/30 px-1 rounded",children:"{{userInput}}"})," 会被替换为用户输入"]})]})]})]})})]})]})},h0={PENDING:"待处理",APPROVED:"已通过",COMPLETED:"已完成",REJECTED:"已拒绝"},k0={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200",APPROVED:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200",COMPLETED:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200",REJECTED:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"},y0=()=>{const[s,I]=a.useState(!0),[n,O]=a.useState(!1),[p,E]=a.useState("config"),[u,k]=a.useState(null),[v,L]=a.useState(null),[M,V]=a.useState([]),[D,S]=a.useState(""),b=a.useCallback(async()=>{I(!0);try{const[R,_]=await Promise.all([m.get("/referral/admin/config"),m.get("/referral/admin/stats")]);R.success&&k(R.data),_.success&&L(_.data);const z=await m.get("/referral/admin/withdrawals",{params:{status:D||void 0}});z.success&&V(z.data.list||[])}catch{o.error("加载数据失败")}finally{I(!1)}},[D]);a.useEffect(()=>{b()},[b]);const P=async()=>{if(u){O(!0);try{(await m.put("/referral/admin/config",{isActive:u.isActive,referrerBonus:u.referrerBonus,refereeBonus:u.refereeBonus,commissionRate:u.commissionRate,minWithdrawAmount:u.minWithdrawAmount,withdrawToCreditsRate:u.withdrawToCreditsRate})).success&&(o.success("配置保存成功"),b())}catch{o.error("保存失败")}finally{O(!1)}}},A=async(R,_,z)=>{try{const y=await m.put(`/referral/admin/withdrawals/${R}`,{action:_,rejectReason:z});y.success?(o.success(y.message),b()):o.error(y.message)}catch(y){o.error(y.message||"操作失败")}};return s?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"推荐返利管理"}),e.jsx("p",{className:"text-slate-500 dark:text-gray-400 mt-1",children:"管理推荐系统配置和提现申请"})]}),v&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"推荐用户"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:v.usersWithReferrer}),e.jsxs("div",{className:"text-xs text-slate-400",children:["占比 ",v.referralRate,"%"]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"累计返利"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-500",children:["¥",(v.totalCommissions/100).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"待处理提现"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:v.pendingWithdrawals.count}),e.jsxs("div",{className:"text-xs text-slate-400",children:["¥",(v.pendingWithdrawals.amount/100).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 dark:text-gray-400",children:"已完成提现"}),e.jsx("div",{className:"text-2xl font-bold text-green-500",children:v.completedWithdrawals.count}),e.jsxs("div",{className:"text-xs text-slate-400",children:["¥",(v.completedWithdrawals.amount/100).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex border-b border-slate-200 dark:border-border-dark mb-6",children:[e.jsx("button",{className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px ${p==="config"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,onClick:()=>E("config"),children:"系统配置"}),e.jsxs("button",{className:`px-4 py-2 text-sm font-medium border-b-2 -mb-px ${p==="withdrawals"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-gray-400"}`,onClick:()=>E("withdrawals"),children:["提现管理",v&&v.pendingWithdrawals.count>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-red-500 text-white rounded-full",children:v.pendingWithdrawals.count})]})]}),p==="config"&&u&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:u.isActive,onChange:R=>k({...u,isActive:R.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:"启用推荐系统"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"推荐人奖励积分"}),e.jsx("input",{type:"number",min:"0",value:u.referrerBonus,onChange:R=>k({...u,referrerBonus:parseInt(R.target.value)||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"成功推荐新用户后，推荐人获得的积分"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"被推荐人奖励积分"}),e.jsx("input",{type:"number",min:"0",value:u.refereeBonus,onChange:R=>k({...u,refereeBonus:parseInt(R.target.value)||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"新用户使用推荐码注册后获得的积分"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"充值返利比例 (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:(u.commissionRate*100).toFixed(1),onChange:R=>k({...u,commissionRate:parseFloat(R.target.value)/100||0}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"被推荐人充值后，推荐人获得的返利比例"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"最低提现金额 (元)"}),e.jsx("input",{type:"number",min:"1",value:u.minWithdrawAmount/100,onChange:R=>k({...u,minWithdrawAmount:(parseFloat(R.target.value)||0)*100}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"用户申请提现的最低金额门槛"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-2",children:"积分兑换比例 (1元=?积分)"}),e.jsx("input",{type:"number",min:"1",value:u.withdrawToCreditsRate,onChange:R=>k({...u,withdrawToCreditsRate:parseInt(R.target.value)||100}),className:"w-full px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"用户将返利余额兑换积分的比例"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:P,disabled:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"保存中...":"保存配置"})})]}),p==="withdrawals"&&e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-border-dark",children:e.jsxs("select",{value:D,onChange:R=>S(R.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg",children:[e.jsx("option",{value:"",children:"全部状态"}),e.jsx("option",{value:"PENDING",children:"待处理"}),e.jsx("option",{value:"APPROVED",children:"已通过"}),e.jsx("option",{value:"COMPLETED",children:"已完成"}),e.jsx("option",{value:"REJECTED",children:"已拒绝"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"用户"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"金额"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"类型"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"支付宝"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"状态"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"申请时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-500 dark:text-gray-400",children:"暂无提现申请"})}):M.map(R=>e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:R.user.nickname||R.user.username||"未知"}),e.jsx("div",{className:"text-xs text-slate-500",children:R.user.phone})]}),e.jsxs("td",{className:"px-4 py-4 text-orange-500 font-medium",children:["¥",(R.amount/100).toFixed(2)]}),e.jsx("td",{className:"px-4 py-4",children:R.type==="ALIPAY"?"提现到支付宝":"兑换积分"}),e.jsx("td",{className:"px-4 py-4",children:R.type==="ALIPAY"?e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:R.alipayName}),e.jsx("div",{className:"text-slate-500",children:R.alipayAccount})]}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k0[R.status]}`,children:h0[R.status]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:new Date(R.createdAt).toLocaleString()}),e.jsxs("td",{className:"px-4 py-4",children:[R.status==="PENDING"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(R.id,"approve"),className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"通过"}),e.jsx("button",{onClick:()=>{const _=prompt("请输入拒绝原因:");_&&A(R.id,"reject",_)},className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:"拒绝"})]}),R.status==="APPROVED"&&e.jsx("button",{onClick:()=>A(R.id,"complete"),className:"px-3 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600",children:"标记完成"}),R.status==="REJECTED"&&R.rejectReason&&e.jsx("span",{className:"text-xs text-red-500",children:R.rejectReason}),R.status==="COMPLETED"&&R.creditsGranted&&e.jsxs("span",{className:"text-xs text-green-500",children:["+",R.creditsGranted,"积分"]})]})]},R.id))})]})})]})]})},Rc=[{value:"NOTIFICATION",label:"通知"},{value:"ANNOUNCEMENT",label:"公告"},{value:"PROMOTION",label:"促销"},{value:"SYSTEM",label:"系统"}],f0=[{value:"ALL",label:"所有用户"},{value:"ROLE",label:"指定角色"}],j0=[{value:"USER",label:"普通用户"},{value:"VIP",label:"VIP用户"},{value:"SVIP",label:"SVIP用户"}],v0=()=>{const[s,I]=a.useState(!0),[n,O]=a.useState([]),[p,E]=a.useState(!1),[u,k]=a.useState(!1),[v,L]=a.useState({title:"",content:"",type:"NOTIFICATION",targetType:"ALL",targetRoles:[]}),M=a.useCallback(async()=>{I(!0);try{const b=await m.get("/messages/admin/list");b.success&&O(b.data.list||[])}catch{}finally{I(!1)}},[]);a.useEffect(()=>{M()},[M]);const V=async()=>{if(!v.title.trim()||!v.content.trim()){o.error("请填写标题和内容");return}if(v.targetType==="ROLE"&&v.targetRoles.length===0){o.error("请选择目标角色");return}k(!0);try{const b=await m.post("/messages/admin/send",{title:v.title,content:v.content,type:v.type,targetType:v.targetType,targetRoles:v.targetRoles});b.success?(o.success(b.message),E(!1),L({title:"",content:"",type:"NOTIFICATION",targetType:"ALL",targetRoles:[]}),M()):o.error(b.message)}catch(b){o.error(b.message||"发送失败")}finally{k(!1)}},D=async b=>{if(confirm("确定删除此消息？"))try{(await m.delete(`/messages/admin/${b}`)).success&&(o.success("删除成功"),M())}catch(P){o.error(P.message||"删除失败")}},S=b=>{L(P=>({...P,targetRoles:P.targetRoles.includes(b)?P.targetRoles.filter(A=>A!==b):[...P.targetRoles,b]}))};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"站内消息管理"}),e.jsx("p",{className:"text-slate-500 dark:text-gray-400 mt-1",children:"撰写和管理系统消息"})]}),e.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-neutral-800 dark:bg-white text-white dark:text-black rounded-lg text-sm font-medium hover:opacity-90 transition-all flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"}),"撰写消息"]})]}),e.jsx("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl overflow-hidden",children:s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-neutral-400 animate-spin",children:"progress_activity"})}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-gray-400",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"mail"}),e.jsx("p",{children:"暂无消息"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200 dark:border-border-dark bg-slate-50 dark:bg-slate-800/50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"标题"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"类型"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"目标"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"送达/已读"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"发送时间"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-600 dark:text-gray-400",children:"操作"})]})}),e.jsx("tbody",{children:n.map(b=>{var P;return e.jsxs("tr",{className:"border-b border-slate-100 dark:border-border-dark/50 hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:b.title}),e.jsx("div",{className:"text-xs text-slate-500 truncate max-w-xs",children:b.content})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded",children:((P=Rc.find(A=>A.value===b.type))==null?void 0:P.label)||b.type})}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-gray-400",children:b.targetType==="ALL"?"所有用户":b.targetRoles.join(", ")}),e.jsxs("td",{className:"px-4 py-4 text-sm",children:[e.jsx("span",{className:"text-slate-900 dark:text-white",children:b.recipientCount}),e.jsx("span",{className:"text-slate-400 mx-1",children:"/"}),e.jsx("span",{className:"text-green-500",children:b.readCount})]}),e.jsx("td",{className:"px-4 py-4 text-sm text-slate-500",children:new Date(b.createdAt).toLocaleString()}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:()=>D(b.id),className:"text-red-500 hover:text-red-600 text-sm",children:"删除"})})]},b.id)})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl p-6 w-full max-w-lg mx-4 border border-slate-200 dark:border-border-dark",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"撰写消息"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"标题"}),e.jsx("input",{type:"text",value:v.title,onChange:b=>L({...v,title:b.target.value}),placeholder:"消息标题",className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"内容"}),e.jsx("textarea",{value:v.content,onChange:b=>L({...v,content:b.target.value}),placeholder:"消息内容",rows:4,className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-border-dark rounded-lg text-sm resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"消息类型"}),e.jsx("div",{className:"flex gap-2",children:Rc.map(b=>e.jsx("button",{onClick:()=>L({...v,type:b.value}),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${v.type===b.value?"border-neutral-800 dark:border-white bg-neutral-800 dark:bg-white text-white dark:text-black":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:b.label},b.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-gray-300 mb-1",children:"发送目标"}),e.jsx("div",{className:"flex gap-2 mb-2",children:f0.map(b=>e.jsx("button",{onClick:()=>L({...v,targetType:b.value,targetRoles:[]}),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${v.targetType===b.value?"border-neutral-800 dark:border-white bg-neutral-800 dark:bg-white text-white dark:text-black":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:b.label},b.value))}),v.targetType==="ROLE"&&e.jsx("div",{className:"flex gap-2 mt-2",children:j0.map(b=>e.jsx("button",{onClick:()=>S(b.value),className:`px-3 py-1.5 text-xs rounded-lg border transition-colors ${v.targetRoles.includes(b.value)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-600":"border-slate-200 dark:border-border-dark text-slate-600 dark:text-gray-400"}`,children:b.label},b.value))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-2 border border-slate-200 dark:border-border-dark rounded-lg text-sm",children:"取消"}),e.jsx("button",{onClick:V,disabled:u,className:"flex-1 py-2 bg-neutral-800 dark:bg-white text-white dark:text-black rounded-lg text-sm font-medium hover:opacity-90 disabled:opacity-50",children:u?"发送中...":"发送消息"})]})]})})]})},Dl=({data:s,height:I=60,unit:n=""})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:I},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const O=Math.max(...s.map(u=>u.value),1);if(s.reduce((u,k)=>u+k.value,0)===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",style:{height:I},children:[e.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"bar_chart"}),e.jsx("span",{className:"text-xs",children:"暂无数据"})]});const E=I-20;return e.jsxs("div",{className:"flex flex-col",style:{height:I},children:[e.jsx("div",{className:"flex items-end gap-1 flex-1",style:{height:E},children:s.map((u,k)=>{const v=u.value/O*100;return e.jsx("div",{className:"flex-1 h-full flex items-end",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t transition-all duration-300",style:{height:`${v}%`,minHeight:u.value>0?"3px":"0px"},title:`${u.label}: ${u.value}${n}`})},k)})}),e.jsx("div",{className:"flex gap-1 mt-1",children:s.map((u,k)=>e.jsx("div",{className:"flex-1 text-center",children:e.jsx("span",{className:"text-[10px] text-gray-400",children:u.label})},k))})]})},N0=({rate:s})=>{const I=typeof s=="string"?parseFloat(s):s,n=I>0,O=I===0;return e.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${O?"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400":n?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"}`,children:[n?"+":"",I,"%"]})},w0=({role:s})=>{const I={ADMIN:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",SVIP:"bg-neutral-100 text-neutral-700 dark:bg-neutral-900/30 dark:text-neutral-400",VIP:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",USER:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"};return e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${I[s]||I.USER}`,children:s})},I0=()=>{var L,M,V,D,S,b,P,A,R,_,z,y,r,f,U,x,W,g,X,T,j,q,J,Z,se,Se,oe,ye,_e,jt,vt,Ge,w,ee,ae,le;const[s,I]=a.useState(null),[n,O]=a.useState(!0),[p,E]=a.useState(null),[u,k]=a.useState(null),v=a.useCallback(async()=>{var Y,ne,he;try{const ot=await m.admin.getStats(),Ia=((Y=ot.data)==null?void 0:Y.data)||ot.data;I(Ia),k(new Date),E(null)}catch(ot){E(((he=(ne=ot.response)==null?void 0:ne.data)==null?void 0:he.message)||"加载数据失败")}finally{O(!1)}},[]);return a.useEffect(()=>{v();const Y=setInterval(v,3e4);return()=>clearInterval(Y)},[v]),n&&!s?e.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"加载运营数据中..."})]})}):p&&!s?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500 mb-2",children:"error"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:p}),e.jsx("button",{onClick:v,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"重试"})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"运营仪表板"}),u&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["最后更新: ",u.toLocaleTimeString("zh-CN")]})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"refresh"}),"刷新"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"总用户数"}),e.jsx("p",{className:"text-2xl font-bold",children:((M=(L=s==null?void 0:s.users)==null?void 0:L.total)==null?void 0:M.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["活跃: ",((V=s==null?void 0:s.users)==null?void 0:V.active)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-neutral-700 to-neutral-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"付费用户"}),e.jsx("p",{className:"text-2xl font-bold",children:((D=s==null?void 0:s.users)==null?void 0:D.paidTotal)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["VIP: ",((S=s==null?void 0:s.users)==null?void 0:S.vip)||0," | SVIP: ",((b=s==null?void 0:s.users)==null?void 0:b.svip)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日新增"}),e.jsx("p",{className:"text-2xl font-bold",children:((P=s==null?void 0:s.users)==null?void 0:P.todayNew)||0}),e.jsxs("p",{className:"text-xs opacity-60 flex items-center gap-1",children:["较昨日 ",e.jsx(N0,{rate:((A=s==null?void 0:s.users)==null?void 0:A.growthRate)||0})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日收入"}),e.jsxs("p",{className:"text-2xl font-bold",children:["¥",(((R=s==null?void 0:s.revenue)==null?void 0:R.today)||0).toFixed(2)]}),e.jsxs("p",{className:"text-xs opacity-60",children:["本月: ¥",(((_=s==null?void 0:s.revenue)==null?void 0:_.month)||0).toFixed(0)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"实时在线"}),e.jsx("p",{className:"text-2xl font-bold",children:((z=s==null?void 0:s.online)==null?void 0:z.current)||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["今日峰值: ",((y=s==null?void 0:s.online)==null?void 0:y.peakToday)||0]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-500 to-rose-600 rounded-xl p-4 text-white",children:[e.jsx("p",{className:"text-xs opacity-80",children:"今日AI调用"}),e.jsx("p",{className:"text-2xl font-bold",children:((f=(r=s==null?void 0:s.usage)==null?void 0:r.todayRecords)==null?void 0:f.toLocaleString())||0}),e.jsxs("p",{className:"text-xs opacity-60",children:["消耗: ",((U=s==null?void 0:s.usage)==null?void 0:U.todayCredits)||0," 积分"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-neutral-500 text-lg",children:"folder"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"活跃项目"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((x=s==null?void 0:s.projects)==null?void 0:x.active)||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["总计: ",((W=s==null?void 0:s.projects)==null?void 0:W.total)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500 text-lg",children:"photo_library"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"资产总数"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((X=(g=s==null?void 0:s.assets)==null?void 0:g.total)==null?void 0:X.toLocaleString())||0}),e.jsxs("p",{className:"text-xs text-gray-400",children:["今日新增: ",((T=s==null?void 0:s.assets)==null?void 0:T.todayNew)||0]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"auto_awesome"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"AI总调用"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((q=(j=s==null?void 0:s.usage)==null?void 0:j.totalRecords)==null?void 0:q.toLocaleString())||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"历史累计"})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500 text-lg",children:"person_add"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"今日新付费"})]}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((J=s==null?void 0:s.users)==null?void 0:J.todayNewPaid)||0}),e.jsx("p",{className:"text-xs text-gray-400",children:"新增VIP/SVIP用户"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"show_chart"}),"24小时活跃度"]}),e.jsx(Dl,{data:((se=(Z=s==null?void 0:s.trends)==null?void 0:Z.hourlyActivity)==null?void 0:se.map(Y=>({label:`${Y.hour}`,value:Y.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-green-500",children:"trending_up"}),"7天用户增长"]}),e.jsx(Dl,{data:((oe=(Se=s==null?void 0:s.trends)==null?void 0:Se.dailyUserGrowth)==null?void 0:oe.map(Y=>({label:Y.date.slice(5),value:Y.count})))||[],height:80})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"payments"}),"7天收入趋势"]}),e.jsx(Dl,{data:((_e=(ye=s==null?void 0:s.trends)==null?void 0:ye.dailyRevenue)==null?void 0:_e.map(Y=>({label:Y.date.slice(5),value:Y.amount})))||[],height:80,unit:"元"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"group"}),"最近注册用户"]}),e.jsxs("div",{className:"space-y-2",children:[(vt=(jt=s==null?void 0:s.recent)==null?void 0:jt.users)==null?void 0:vt.map(Y=>{var ne;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-neutral-400 to-neutral-500 flex items-center justify-center text-white text-sm font-medium",children:(Y.nickname||Y.phone||"?")[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Y.nickname||((ne=Y.phone)==null?void 0:ne.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(Y.createdAt).toLocaleString("zh-CN")})]})]}),e.jsx(w0,{role:Y.role})]},Y.id)}),(!((Ge=s==null?void 0:s.recent)!=null&&Ge.users)||s.recent.users.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无数据"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"receipt_long"}),"最近成功订单"]}),e.jsxs("div",{className:"space-y-2",children:[(ee=(w=s==null?void 0:s.recent)==null?void 0:w.orders)==null?void 0:ee.map(Y=>{var ne,he,ot;return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-border-dark last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:((ne=Y.user)==null?void 0:ne.nickname)||((ot=(he=Y.user)==null?void 0:he.phone)==null?void 0:ot.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"))||"未知用户"}),e.jsx("p",{className:"text-xs text-gray-400",children:Y.paidAt?new Date(Y.paidAt).toLocaleString("zh-CN"):"-"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["¥",(Y.amount/100).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["+",Y.credits," 积分"]})]})]},Y.id)}),(!((ae=s==null?void 0:s.recent)!=null&&ae.orders)||s.recent.orders.length===0)&&e.jsx("p",{className:"text-center text-gray-400 py-4",children:"暂无订单"})]})]})]}),((le=s==null?void 0:s.usage)==null?void 0:le.byOperation)&&s.usage.byOperation.length>0&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-card-dark border border-slate-200 dark:border-border-dark rounded-xl p-5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-gray-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-neutral-500",children:"analytics"}),"7天AI使用分布"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:s.usage.byOperation.slice(0,12).map((Y,ne)=>{var he;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",title:Y.operation,children:Y.operation}),e.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Y._count}),e.jsxs("p",{className:"text-xs text-gray-400",children:[((he=Y._sum)==null?void 0:he.creditsCharged)||0," 积分"]})]},ne)})})]})]})},M0=()=>{const s=Ix(),I=[{name:"仪表板",path:"/frame25",icon:"dashboard",exact:!0},{name:"服务器监控",path:"/frame25/server-monitor",icon:"monitoring"},{name:"任务管理",path:"/frame25/tasks",icon:"task_alt"},{name:"用户管理",path:"/frame25/users",icon:"group"},{name:"等级权限",path:"/frame25/user-levels",icon:"shield_person"},{name:"模型配置",path:"/frame25/model-config",icon:"smart_toy"},{name:"智能体配置",path:"/frame25/agents",icon:"psychology"},{name:"计费管理",path:"/frame25/billing",icon:"receipt_long"},{name:"支付配置",path:"/frame25/payment-config",icon:"account_balance_wallet"},{name:"套餐管理",path:"/frame25/packages",icon:"redeem"},{name:"兑换码管理",path:"/frame25/redeem-codes",icon:"confirmation_number"},{name:"节点提示词",path:"/frame25/node-prompts",icon:"edit_note"},{name:"推荐返利",path:"/frame25/referral",icon:"share"},{name:"站内消息",path:"/frame25/messages",icon:"mail"}],n=(O,p=!1)=>p?s.pathname===O:s.pathname.startsWith(O);return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("aside",{className:"w-64 bg-white dark:bg-card-dark border-r border-slate-200 dark:border-border-dark p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"管理后台"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-gray-400",children:"系统管理与配置"})]}),e.jsx("nav",{className:"space-y-1",children:I.map(O=>e.jsxs(Ax,{to:O.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${n(O.path,O.exact)?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-white":"text-slate-600 dark:text-gray-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:O.icon}),e.jsx("span",{className:"text-sm font-medium",children:O.name})]},O.path))})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs(Cx,{children:[e.jsx(Le,{index:!0,element:e.jsx(I0,{})}),e.jsx(Le,{path:"server-monitor",element:e.jsx(b0,{})}),e.jsx(Le,{path:"users",element:e.jsx(Yx,{})}),e.jsx(Le,{path:"tasks",element:e.jsx(Zx,{})}),e.jsx(Le,{path:"user-levels",element:e.jsx(m0,{})}),e.jsx(Le,{path:"model-config",element:e.jsx(Bx,{})}),e.jsx(Le,{path:"agents",element:e.jsx(Wx,{})}),e.jsx(Le,{path:"billing",element:e.jsx(l0,{})}),e.jsx(Le,{path:"payment-config",element:e.jsx(i0,{})}),e.jsx(Le,{path:"packages",element:e.jsx(c0,{})}),e.jsx(Le,{path:"redeem-codes",element:e.jsx(x0,{})}),e.jsx(Le,{path:"node-prompts",element:e.jsx(g0,{})}),e.jsx(Le,{path:"referral",element:e.jsx(y0,{})}),e.jsx(Le,{path:"messages",element:e.jsx(v0,{})})]})})]})};export{M0 as default};
