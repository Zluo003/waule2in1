import{u as m,r as c,j as t,L as l,O as g}from"./react-vendor-BvY2dB7B.js";import{u as p,a as d,b as f}from"./index-Dj4qZfuJ.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";const y=()=>{const n=m(),{user:e}=p(),{theme:r}=d(),[h,u]=c.useState(0);c.useEffect(()=>{const a=async()=>{try{const o=await f.get("/messages/unread-count");o.success&&u(o.data.count||0)}catch{}};a();const s=setInterval(a,6e4);return()=>clearInterval(s)},[]);const x=n.pathname.includes("/workflow"),i=[{name:"快速创作",path:"/quick",icon:"bolt"},{name:"剧集创作",path:"/drama",icon:"movie"},{name:"资产库",path:"/assets",icon:"photo_library"},{name:"回收站",path:"/recycle-bin",icon:"delete"}];return(e==null?void 0:e.role)==="ADMIN"&&i.push({name:"管理后台",path:"/frame25",icon:"admin_panel_settings"}),t.jsxs("div",{className:"h-full bg-background-light dark:bg-background-dark",children:[t.jsx("div",{className:"fixed top-4 left-4 z-50 pointer-events-none",children:t.jsx("img",{src:r==="dark"?"/logo-dark.png":"/logo-light.png",alt:"Waule Logo",className:"w-[72px] h-[72px] object-contain pointer-events-auto"})}),t.jsxs("nav",{className:"fixed left-[24px] top-1/2 -translate-y-1/2 z-50 flex flex-col gap-1 p-2 rounded-2xl bg-[#deeaef] dark:bg-[#18181b] shadow-[0_8px_30px_rgba(0,0,0,0.12)] dark:shadow-[0_8px_30px_rgba(0,0,0,0.5)]",children:[i.map(a=>{const s=n.pathname.startsWith(a.path);return t.jsx(l,{to:a.path,className:`flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-200 ${s?"bg-black dark:bg-white text-white dark:text-black":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-white"}`,title:a.name,children:t.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px",fontVariationSettings:'"FILL" 0, "wght" 300'},children:a.icon})},a.path)}),t.jsx("div",{className:"h-px bg-neutral-200 dark:bg-neutral-700 my-1"}),t.jsxs(l,{to:"/recharge",className:"flex flex-col items-center justify-center w-10 h-12 rounded-xl transition-all duration-200 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-white",title:"点击充值",children:[t.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"18px",fontVariationSettings:'"FILL" 0, "wght" 300'},children:"toll"}),t.jsx("span",{className:"text-[9px]",children:Math.floor((e==null?void 0:e.credits)||0)})]}),t.jsx(b,{}),t.jsxs(l,{to:"/settings",className:"relative flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-200 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800",title:(e==null?void 0:e.nickname)||(e==null?void 0:e.username)||"设置",children:[e!=null&&e.avatar?t.jsx("img",{src:e.avatar,alt:e.nickname||e.username,className:"w-6 h-6 rounded-full object-cover"}):t.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px",fontVariationSettings:'"FILL" 0, "wght" 300'},children:"account_circle"}),h>0&&t.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-[#deeaef] dark:border-[#18181b]"})]})]}),t.jsx("main",{className:`h-full overflow-auto scrollbar-hide ${x?"":"pl-[136px]"}`,children:t.jsx(g,{})})]})},b=()=>{const{theme:n,toggleTheme:e}=d(),r=n==="dark";return t.jsx("button",{onClick:e,className:"flex items-center justify-center w-10 h-10 rounded-xl transition-all duration-200 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800 hover:text-neutral-900 dark:hover:text-white",title:r?"切换到明亮模式":"切换到暗色模式",children:t.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"20px",fontVariationSettings:'"FILL" 0, "wght" 300'},children:r?"light_mode":"dark_mode"})})};export{y as default};
