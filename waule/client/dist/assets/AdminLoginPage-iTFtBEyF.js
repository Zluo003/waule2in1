import{d as b,r as n,j as e}from"./react-vendor-BvY2dB7B.js";import{u as f,b as g,c as i}from"./index-Cwo4xSFf.js";import{S as w}from"./shield-Cyh8LQDI.js";import{c as y}from"./createLucideIcon-CK1cQnin.js";import"./reactflow-D8v6_Qvs.js";import"./utils-BcyDR7Vi.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=y("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),A=()=>{const c=b(),{setAuth:h}=f(),[d,l]=n.useState(!1),[r,u]=n.useState(!1),[t,o]=n.useState({username:"",password:"",totpCode:""}),p=async s=>{var m,x;s.preventDefault(),l(!0);try{const a=await g.auth.adminLogin(t);if(a.requireTotp){u(!0),i.info("è¯·è¾“å…¥ Google Authenticator éªŒè¯ç "),l(!1);return}a.success&&a.token&&(h(a.user,a.token),i.success("ç™»å½•æˆåŠŸï¼"),c("/quick"))}catch(a){i.error(((x=(m=a.response)==null?void 0:m.data)==null?void 0:x.message)||"ç™»å½•å¤±è´¥")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl border border-white/20 p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-neutral-600 rounded-2xl mb-4 shadow-lg",children:e.jsx(w,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"ç®¡ç†å‘˜ç™»å½•"}),e.jsx("p",{className:"text-gray-300",children:"Waule ç³»ç»Ÿç®¡ç†åå°"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"ç”¨æˆ·å"}),e.jsx("input",{type:"text",required:!0,value:t.username,onChange:s=>o({...t,username:s.target.value}),disabled:r,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:opacity-50",placeholder:"è¯·è¾“å…¥ç®¡ç†å‘˜ç”¨æˆ·å"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"å¯†ç "}),e.jsx("input",{type:"password",required:!0,value:t.password,onChange:s=>o({...t,password:s.target.value}),disabled:r,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all disabled:opacity-50",placeholder:"è¯·è¾“å…¥å¯†ç "})]}),r&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:[e.jsx(j,{className:"w-4 h-4 inline mr-1"}),"åŒå› ç´ éªŒè¯ç "]}),e.jsx("input",{type:"text",required:!0,maxLength:6,value:t.totpCode,onChange:s=>o({...t,totpCode:s.target.value.replace(/\D/g,"")}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all text-center text-2xl tracking-[0.5em] font-mono",placeholder:"000000",autoFocus:!0}),e.jsx("p",{className:"mt-2 text-xs text-gray-400 text-center",children:"è¯·æ‰“å¼€ Google Authenticator è¾“å…¥ 6 ä½éªŒè¯ç "})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-neutral-600 text-white font-medium rounded-xl hover:from-neutral-700 hover:to-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-neutral-500/50",children:d?"éªŒè¯ä¸­...":r?"éªŒè¯å¹¶ç™»å½•":"ç™»å½•"})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[r&&e.jsx("button",{onClick:()=>{u(!1),o({...t,totpCode:""})},className:"text-sm text-amber-400 hover:text-amber-300 transition-colors block w-full",children:"â† é‡æ–°è¾“å…¥è´¦å·å¯†ç "}),e.jsx("button",{onClick:()=>c("/login"),className:"text-sm text-gray-300 hover:text-gray-200 transition-colors",children:"â† è¿”å›æ™®é€šç™»å½•"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"ğŸ” æ­¤å…¥å£å·²å¯ç”¨åŒå› ç´ è®¤è¯ä¿æŠ¤"})})]})})};export{A as default};
