const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-Dy_fw4o8.js","assets/react-vendor-BvY2dB7B.js","assets/react-vendor-Fd0xVSp_.css","assets/reactflow-D8v6_Qvs.js","assets/utils-BcyDR7Vi.js","assets/LandingPage-mEjIhT9P.js","assets/PhoneLoginPage-PrH7IonW.js","assets/AdminLoginPage-xC-VQXsj.js","assets/shield-Cyh8LQDI.js","assets/createLucideIcon-CK1cQnin.js","assets/TermsOfServicePage-PfMl7j0I.js","assets/PrivacyPolicyPage-Ce1w8scB.js","assets/ProjectsPage-DR5UwTrU.js","assets/EpisodesPage-BtQ51RCq.js","assets/WorkflowEditorPage-B2OHuWPO.js","assets/video-CPXLMxBS.js","assets/fabric-BRmUkGAC.js","assets/EpisodeDetailPage-D9g3Q8vw.js","assets/AssetsPage-D3881FLB.js","assets/AssetLibraryDetailPage-BP60QT6g.js","assets/SoraCharactersPage-CQOXojm0.js","assets/SettingsPage-n5JbFrLD.js","assets/AdminPage-3Rc_WxZp.js","assets/RecycleBinPage-BfD1H0hR.js","assets/RechargePage-B5ORfMD-.js"])))=>i.map(i=>d[i]);
var _s=t=>{throw TypeError(t)};var Mt=(t,e,s)=>e.has(t)||_s("Cannot "+s);var u=(t,e,s)=>(Mt(t,e,"read from private field"),s?s.call(t):e.get(t)),T=(t,e,s)=>e.has(t)?_s("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),_=(t,e,s,r)=>(Mt(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),Q=(t,e,s)=>(Mt(t,e,"access private method"),s);var wt=(t,e,s,r)=>({set _(n){_(t,e,n,s)},get _(){return u(t,e,r)}});import{r as P,j as y,R as p,v as Br,a as jr,b as U,N as Ut,c as Lr,B as Dr}from"./react-vendor-BvY2dB7B.js";import{c as $r,u as Fr}from"./reactflow-D8v6_Qvs.js";import kt from"./utils-BcyDR7Vi.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Ot=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qr={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Ce,is,Us,Mr=(Us=class{constructor(){T(this,Ce,qr);T(this,is,!1)}setTimeoutProvider(t){_(this,Ce,t)}setTimeout(t,e){return u(this,Ce).setTimeout(t,e)}clearTimeout(t){u(this,Ce).clearTimeout(t)}setInterval(t,e){return u(this,Ce).setInterval(t,e)}clearInterval(t){u(this,Ce).clearInterval(t)}},Ce=new WeakMap,is=new WeakMap,Us),Kt=new Mr;function Ur(t){setTimeout(t,0)}var Nt=typeof window>"u"||"Deno"in globalThis;function oe(){}function zr(t,e){return typeof t=="function"?t(e):t}function Hr(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vr(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Yt(t,e){return typeof t=="function"?t(e):t}function Qr(t,e){return typeof t=="function"?t(e):t}function xs(t,e){const{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==as(l,e.options))return!1}else if(!ut(e.queryKey,l))return!1}if(s!=="all"){const d=e.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||n&&n!==e.state.fetchStatus||i&&!i(e))}function Es(t,e){const{exact:s,status:r,predicate:n,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(lt(e.options.mutationKey)!==lt(i))return!1}else if(!ut(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function as(t,e){return((e==null?void 0:e.queryKeyHashFn)||lt)(t)}function lt(t){return JSON.stringify(t,(e,s)=>Wt(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function ut(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>ut(t[s],e[s])):!1}var Kr=Object.prototype.hasOwnProperty;function Gs(t,e){if(t===e)return t;const s=Ss(t)&&Ss(e);if(!s&&!(Wt(t)&&Wt(e)))return e;const n=(s?t:Object.keys(t)).length,i=s?e:Object.keys(e),l=i.length,c=s?new Array(l):{};let d=0;for(let h=0;h<l;h++){const m=s?h:i[h],w=t[m],k=e[m];if(w===k){c[m]=w,(s?h<n:Kr.call(t,m))&&d++;continue}if(w===null||k===null||typeof w!="object"||typeof k!="object"){c[m]=k;continue}const o=Gs(w,k);c[m]=o,o===w&&d++}return n===l&&d===n?t:c}function Ss(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wt(t){if(!ks(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!ks(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function ks(t){return Object.prototype.toString.call(t)==="[object Object]"}function Yr(t){return new Promise(e=>{Kt.setTimeout(e,t)})}function Wr(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Gs(t,e):e}function Jr(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Gr(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var os=Symbol();function Xs(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===os?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var De,Ae,We,zs,Xr=(zs=class extends Ot{constructor(){super();T(this,De);T(this,Ae);T(this,We);_(this,We,e=>{if(!Nt&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){u(this,Ae)||this.setEventListener(u(this,We))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Ae))==null||e.call(this),_(this,Ae,void 0))}setEventListener(e){var s;_(this,We,e),(s=u(this,Ae))==null||s.call(this),_(this,Ae,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){u(this,De)!==e&&(_(this,De,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof u(this,De)=="boolean"?u(this,De):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},De=new WeakMap,Ae=new WeakMap,We=new WeakMap,zs),Zs=new Xr;function Zr(){let t,e;const s=new Promise((n,i)=>{t=n,e=i});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},s.reject=n=>{r({status:"rejected",reason:n}),e(n)},s}var en=Ur;function tn(){let t=[],e=0,s=c=>{c()},r=c=>{c()},n=en;const i=c=>{e?t.push(c):n(()=>{s(c)})},l=()=>{const c=t;t=[],c.length&&n(()=>{r(()=>{c.forEach(d=>{s(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||l()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var Y=tn(),Je,Pe,Ge,Hs,sn=(Hs=class extends Ot{constructor(){super();T(this,Je,!0);T(this,Pe);T(this,Ge);_(this,Ge,e=>{if(!Nt&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){u(this,Pe)||this.setEventListener(u(this,Ge))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Pe))==null||e.call(this),_(this,Pe,void 0))}setEventListener(e){var s;_(this,Ge,e),(s=u(this,Pe))==null||s.call(this),_(this,Pe,e(this.setOnline.bind(this)))}setOnline(e){u(this,Je)!==e&&(_(this,Je,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return u(this,Je)}},Je=new WeakMap,Pe=new WeakMap,Ge=new WeakMap,Hs),Rt=new sn;function rn(t){return Math.min(1e3*2**t,3e4)}function er(t){return(t??"online")==="online"?Rt.isOnline():!0}var Jt=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tr(t){let e=!1,s=0,r;const n=Zr(),i=()=>n.status!=="pending",l=f=>{var g;if(!i()){const x=new Jt(f);k(x),(g=t.onCancel)==null||g.call(t,x)}},c=()=>{e=!0},d=()=>{e=!1},h=()=>Zs.isFocused()&&(t.networkMode==="always"||Rt.isOnline())&&t.canRun(),m=()=>er(t.networkMode)&&t.canRun(),w=f=>{i()||(r==null||r(),n.resolve(f))},k=f=>{i()||(r==null||r(),n.reject(f))},o=()=>new Promise(f=>{var g;r=x=>{(i()||h())&&f(x)},(g=t.onPause)==null||g.call(t)}).then(()=>{var f;r=void 0,i()||(f=t.onContinue)==null||f.call(t)}),N=()=>{if(i())return;let f;const g=s===0?t.initialPromise:void 0;try{f=g??t.fn()}catch(x){f=Promise.reject(x)}Promise.resolve(f).then(w).catch(x=>{var L;if(i())return;const v=t.retry??(Nt?0:3),E=t.retryDelay??rn,b=typeof E=="function"?E(s,x):E,j=v===!0||typeof v=="number"&&s<v||typeof v=="function"&&v(s,x);if(e||!j){k(x);return}s++,(L=t.onFail)==null||L.call(t,s,x),Yr(b).then(()=>h()?void 0:o()).then(()=>{e?k(x):N()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(r==null||r(),n),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?N():o().then(N),n)}}var $e,Vs,sr=(Vs=class{constructor(){T(this,$e)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Hr(this.gcTime)&&_(this,$e,Kt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Nt?1/0:5*60*1e3))}clearGcTimeout(){u(this,$e)&&(Kt.clearTimeout(u(this,$e)),_(this,$e,void 0))}},$e=new WeakMap,Vs),Fe,Xe,te,qe,H,ht,Me,ce,_e,Qs,nn=(Qs=class extends sr{constructor(e){super();T(this,ce);T(this,Fe);T(this,Xe);T(this,te);T(this,qe);T(this,H);T(this,ht);T(this,Me);_(this,Me,!1),_(this,ht,e.defaultOptions),this.setOptions(e.options),this.observers=[],_(this,qe,e.client),_(this,te,u(this,qe).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,_(this,Fe,Cs(this.options)),this.state=e.state??u(this,Fe),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,H))==null?void 0:e.promise}setOptions(e){if(this.options={...u(this,ht),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Cs(this.options);s.data!==void 0&&(this.setState(Ts(s.data,s.dataUpdatedAt)),_(this,Fe,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,te).remove(this)}setData(e,s){const r=Wr(this.state.data,e,this.options);return Q(this,ce,_e).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){Q(this,ce,_e).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,n;const s=(r=u(this,H))==null?void 0:r.promise;return(n=u(this,H))==null||n.cancel(e),s?s.then(oe).catch(oe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,Fe))}isActive(){return this.observers.some(e=>Qr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===os||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Yt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Vr(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=u(this,H))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=u(this,H))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,te).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(u(this,H)&&(u(this,Me)?u(this,H).cancel({revert:!0}):u(this,H).cancelRetry()),this.scheduleGc()),u(this,te).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Q(this,ce,_e).call(this,{type:"invalidate"})}async fetch(e,s){var d,h,m,w,k,o,N,f,g,x,v,E;if(this.state.fetchStatus!=="idle"&&((d=u(this,H))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(u(this,H))return u(this,H).continueRetry(),u(this,H).promise}if(e&&this.setOptions(e),!this.options.queryFn){const b=this.observers.find(j=>j.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,n=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(_(this,Me,!0),r.signal)})},i=()=>{const b=Xs(this.options,s),L=(()=>{const J={client:u(this,qe),queryKey:this.queryKey,meta:this.meta};return n(J),J})();return _(this,Me,!1),this.options.persister?this.options.persister(b,L,this):b(L)},c=(()=>{const b={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:u(this,qe),state:this.state,fetchFn:i};return n(b),b})();(h=this.options.behavior)==null||h.onFetch(c,this),_(this,Xe,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&Q(this,ce,_e).call(this,{type:"fetch",meta:(w=c.fetchOptions)==null?void 0:w.meta}),_(this,H,tr({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,onCancel:b=>{b instanceof Jt&&b.revert&&this.setState({...u(this,Xe),fetchStatus:"idle"}),r.abort()},onFail:(b,j)=>{Q(this,ce,_e).call(this,{type:"failed",failureCount:b,error:j})},onPause:()=>{Q(this,ce,_e).call(this,{type:"pause"})},onContinue:()=>{Q(this,ce,_e).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const b=await u(this,H).start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),(o=(k=u(this,te).config).onSuccess)==null||o.call(k,b,this),(f=(N=u(this,te).config).onSettled)==null||f.call(N,b,this.state.error,this),b}catch(b){if(b instanceof Jt){if(b.silent)return u(this,H).promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw Q(this,ce,_e).call(this,{type:"error",error:b}),(x=(g=u(this,te).config).onError)==null||x.call(g,b,this),(E=(v=u(this,te).config).onSettled)==null||E.call(v,this.state.data,b,this),b}finally{this.scheduleGc()}}},Fe=new WeakMap,Xe=new WeakMap,te=new WeakMap,qe=new WeakMap,H=new WeakMap,ht=new WeakMap,Me=new WeakMap,ce=new WeakSet,_e=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...an(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...Ts(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _(this,Xe,e.manual?n:void 0),n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),Y.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),u(this,te).notify({query:this,type:"updated",action:e})})},Qs);function an(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:er(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ts(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Cs(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}function As(t){return{onFetch:(e,s)=>{var m,w,k,o,N;const r=e.options,n=(k=(w=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:w.fetchMore)==null?void 0:k.direction,i=((o=e.state.data)==null?void 0:o.pages)||[],l=((N=e.state.data)==null?void 0:N.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let f=!1;const g=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},x=Xs(e.options,e.fetchOptions),v=async(E,b,j)=>{if(f)return Promise.reject();if(b==null&&E.pages.length)return Promise.resolve(E);const J=(()=>{const Z={client:e.client,queryKey:e.queryKey,pageParam:b,direction:j?"backward":"forward",meta:e.options.meta};return g(Z),Z})(),ve=await x(J),{maxPages:he}=e.options,$=j?Gr:Jr;return{pages:$(E.pages,ve,he),pageParams:$(E.pageParams,b,he)}};if(n&&i.length){const E=n==="backward",b=E?on:Ps,j={pages:i,pageParams:l},L=b(r,j);c=await v(j,L,E)}else{const E=t??i.length;do{const b=d===0?l[0]??r.initialPageParam:Ps(r,c);if(d>0&&b==null)break;c=await v(c,b),d++}while(d<E)}return c};e.options.persister?e.fetchFn=()=>{var f,g;return(g=(f=e.options).persister)==null?void 0:g.call(f,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=h}}}function Ps(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function on(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var ft,fe,K,Ue,pe,Te,Ks,cn=(Ks=class extends sr{constructor(e){super();T(this,pe);T(this,ft);T(this,fe);T(this,K);T(this,Ue);_(this,ft,e.client),this.mutationId=e.mutationId,_(this,K,e.mutationCache),_(this,fe,[]),this.state=e.state||ln(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,fe).includes(e)||(u(this,fe).push(e),this.clearGcTimeout(),u(this,K).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){_(this,fe,u(this,fe).filter(s=>s!==e)),this.scheduleGc(),u(this,K).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,fe).length||(this.state.status==="pending"?this.scheduleGc():u(this,K).remove(this))}continue(){var e;return((e=u(this,Ue))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var l,c,d,h,m,w,k,o,N,f,g,x,v,E,b,j,L,J,ve,he;const s=()=>{Q(this,pe,Te).call(this,{type:"continue"})},r={client:u(this,ft),meta:this.options.meta,mutationKey:this.options.mutationKey};_(this,Ue,tr({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:($,Z)=>{Q(this,pe,Te).call(this,{type:"failed",failureCount:$,error:Z})},onPause:()=>{Q(this,pe,Te).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,K).canRun(this)}));const n=this.state.status==="pending",i=!u(this,Ue).canStart();try{if(n)s();else{Q(this,pe,Te).call(this,{type:"pending",variables:e,isPaused:i}),await((c=(l=u(this,K).config).onMutate)==null?void 0:c.call(l,e,this,r));const Z=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,e,r));Z!==this.state.context&&Q(this,pe,Te).call(this,{type:"pending",context:Z,variables:e,isPaused:i})}const $=await u(this,Ue).start();return await((w=(m=u(this,K).config).onSuccess)==null?void 0:w.call(m,$,e,this.state.context,this,r)),await((o=(k=this.options).onSuccess)==null?void 0:o.call(k,$,e,this.state.context,r)),await((f=(N=u(this,K).config).onSettled)==null?void 0:f.call(N,$,null,this.state.variables,this.state.context,this,r)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,$,null,e,this.state.context,r)),Q(this,pe,Te).call(this,{type:"success",data:$}),$}catch($){try{throw await((E=(v=u(this,K).config).onError)==null?void 0:E.call(v,$,e,this.state.context,this,r)),await((j=(b=this.options).onError)==null?void 0:j.call(b,$,e,this.state.context,r)),await((J=(L=u(this,K).config).onSettled)==null?void 0:J.call(L,void 0,$,this.state.variables,this.state.context,this,r)),await((he=(ve=this.options).onSettled)==null?void 0:he.call(ve,void 0,$,e,this.state.context,r)),$}finally{Q(this,pe,Te).call(this,{type:"error",error:$})}}finally{u(this,K).runNext(this)}}},ft=new WeakMap,fe=new WeakMap,K=new WeakMap,Ue=new WeakMap,pe=new WeakSet,Te=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Y.batch(()=>{u(this,fe).forEach(r=>{r.onMutationUpdate(e)}),u(this,K).notify({mutation:this,type:"updated",action:e})})},Ks);function ln(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xe,le,pt,Ys,un=(Ys=class extends Ot{constructor(e={}){super();T(this,xe);T(this,le);T(this,pt);this.config=e,_(this,xe,new Set),_(this,le,new Map),_(this,pt,0)}build(e,s,r){const n=new cn({client:e,mutationCache:this,mutationId:++wt(this,pt)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){u(this,xe).add(e);const s=_t(e);if(typeof s=="string"){const r=u(this,le).get(s);r?r.push(e):u(this,le).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,xe).delete(e)){const s=_t(e);if(typeof s=="string"){const r=u(this,le).get(s);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&u(this,le).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=_t(e);if(typeof s=="string"){const r=u(this,le).get(s),n=r==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var r;const s=_t(e);if(typeof s=="string"){const n=(r=u(this,le).get(s))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Y.batch(()=>{u(this,xe).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,xe).clear(),u(this,le).clear()})}getAll(){return Array.from(u(this,xe))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Es(s,r))}findAll(e={}){return this.getAll().filter(s=>Es(e,s))}notify(e){Y.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Y.batch(()=>Promise.all(e.map(s=>s.continue().catch(oe))))}},xe=new WeakMap,le=new WeakMap,pt=new WeakMap,Ys);function _t(t){var e;return(e=t.options.scope)==null?void 0:e.id}var me,Ws,dn=(Ws=class extends Ot{constructor(e={}){super();T(this,me);this.config=e,_(this,me,new Map)}build(e,s,r){const n=s.queryKey,i=s.queryHash??as(n,s);let l=this.get(i);return l||(l=new nn({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(l)),l}add(e){u(this,me).has(e.queryHash)||(u(this,me).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=u(this,me).get(e.queryHash);s&&(e.destroy(),s===e&&u(this,me).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Y.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,me).get(e)}getAll(){return[...u(this,me).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>xs(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>xs(e,r)):s}notify(e){Y.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Y.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Y.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},me=new WeakMap,Ws),q,Re,Oe,Ze,et,Ne,tt,st,Js,hn=(Js=class{constructor(t={}){T(this,q);T(this,Re);T(this,Oe);T(this,Ze);T(this,et);T(this,Ne);T(this,tt);T(this,st);_(this,q,t.queryCache||new dn),_(this,Re,t.mutationCache||new un),_(this,Oe,t.defaultOptions||{}),_(this,Ze,new Map),_(this,et,new Map),_(this,Ne,0)}mount(){wt(this,Ne)._++,u(this,Ne)===1&&(_(this,tt,Zs.subscribe(async t=>{t&&(await this.resumePausedMutations(),u(this,q).onFocus())})),_(this,st,Rt.subscribe(async t=>{t&&(await this.resumePausedMutations(),u(this,q).onOnline())})))}unmount(){var t,e;wt(this,Ne)._--,u(this,Ne)===0&&((t=u(this,tt))==null||t.call(this),_(this,tt,void 0),(e=u(this,st))==null||e.call(this),_(this,st,void 0))}isFetching(t){return u(this,q).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return u(this,Re).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=u(this,q).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=u(this,q).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Yt(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return u(this,q).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),n=u(this,q).get(r.queryHash),i=n==null?void 0:n.state.data,l=zr(e,i);if(l!==void 0)return u(this,q).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return Y.batch(()=>u(this,q).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=u(this,q).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=u(this,q);Y.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=u(this,q);return Y.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=Y.batch(()=>u(this,q).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(oe).catch(oe)}invalidateQueries(t,e={}){return Y.batch(()=>(u(this,q).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=Y.batch(()=>u(this,q).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(oe)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(oe)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=u(this,q).build(this,e);return s.isStaleByTime(Yt(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(oe).catch(oe)}fetchInfiniteQuery(t){return t.behavior=As(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(oe).catch(oe)}ensureInfiniteQueryData(t){return t.behavior=As(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rt.isOnline()?u(this,Re).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,q)}getMutationCache(){return u(this,Re)}getDefaultOptions(){return u(this,Oe)}setDefaultOptions(t){_(this,Oe,t)}setQueryDefaults(t,e){u(this,Ze).set(lt(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...u(this,Ze).values()],s={};return e.forEach(r=>{ut(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){u(this,et).set(lt(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...u(this,et).values()],s={};return e.forEach(r=>{ut(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...u(this,Oe).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=as(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===os&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...u(this,Oe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){u(this,q).clear(),u(this,Re).clear()}},q=new WeakMap,Re=new WeakMap,Oe=new WeakMap,Ze=new WeakMap,et=new WeakMap,Ne=new WeakMap,tt=new WeakMap,st=new WeakMap,Js),fn=P.createContext(void 0),pn=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(fn.Provider,{value:t,children:e})),mn=t=>{switch(t){case"success":return vn;case"info":return wn;case"warning":return bn;case"error":return _n;default:return null}},gn=Array(12).fill(0),yn=({visible:t,className:e})=>p.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},p.createElement("div",{className:"sonner-spinner"},gn.map((s,r)=>p.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),vn=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bn=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wn=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_n=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xn=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},p.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),En=()=>{let[t,e]=p.useState(document.hidden);return p.useEffect(()=>{let s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t},Gt=1,Sn=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:s,...r}=t,n=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Gt++,i=this.toasts.find(c=>c.id===n),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),i?this.toasts=this.toasts.map(c=>c.id===n?(this.publish({...c,...t,id:n,title:s}),{...c,...t,id:n,dismissible:l,title:s}):c):this.addToast({title:s,...r,dismissible:l,id:n}),n},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),n=s!==void 0,i,l=r.then(async d=>{if(i=["resolve",d],p.isValidElement(d))n=!1,this.create({id:s,type:"default",message:d});else if(Tn(d)&&!d.ok){n=!1;let h=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,m=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description;this.create({id:s,type:"error",message:h,description:m})}else if(e.success!==void 0){n=!1;let h=typeof e.success=="function"?await e.success(d):e.success,m=typeof e.description=="function"?await e.description(d):e.description;this.create({id:s,type:"success",message:h,description:m})}}).catch(async d=>{if(i=["reject",d],e.error!==void 0){n=!1;let h=typeof e.error=="function"?await e.error(d):e.error,m=typeof e.description=="function"?await e.description(d):e.description;this.create({id:s,type:"error",message:h,description:m})}}).finally(()=>{var d;n&&(this.dismiss(s),s=void 0),(d=e.finally)==null||d.call(e)}),c=()=>new Promise((d,h)=>l.then(()=>i[0]==="reject"?h(i[1]):d(i[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(t,e)=>{let s=(e==null?void 0:e.id)||Gt++;return this.create({jsx:t(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},W=new Sn,kn=(t,e)=>{let s=(e==null?void 0:e.id)||Gt++;return W.addToast({title:t,...e,id:s}),s},Tn=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cn=kn,An=()=>W.toasts,Pn=()=>W.getActiveToasts(),Xt=Object.assign(Cn,{success:W.success,info:W.info,warning:W.warning,error:W.error,custom:W.custom,message:W.message,promise:W.promise,dismiss:W.dismiss,loading:W.loading},{getHistory:An,getToasts:Pn});function Rn(t,{insertAt:e}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Rn(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xt(t){return t.label!==void 0}var On=3,Nn="32px",In="16px",Rs=4e3,Bn=356,jn=14,Ln=20,Dn=200;function ae(...t){return t.filter(Boolean).join(" ")}function $n(t){let[e,s]=t.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}var Fn=t=>{var e,s,r,n,i,l,c,d,h,m,w;let{invert:k,toast:o,unstyled:N,interacting:f,setHeights:g,visibleToasts:x,heights:v,index:E,toasts:b,expanded:j,removeToast:L,defaultRichColors:J,closeButton:ve,style:he,cancelButtonStyle:$,actionButtonStyle:Z,className:be="",descriptionClassName:mt="",duration:He,position:gt,gap:Be,loadingIcon:we,expandByDefault:yt,classNames:A,icons:G,closeButtonAriaLabel:jt="Close toast",pauseWhenPageIsHidden:O}=t,[I,D]=p.useState(null),[X,Ve]=p.useState(null),[F,Lt]=p.useState(!1),[nt,vt]=p.useState(!1),[it,Dt]=p.useState(!1),[fs,_r]=p.useState(!1),[xr,ps]=p.useState(!1),[Er,$t]=p.useState(0),[Sr,ms]=p.useState(0),at=p.useRef(o.duration||He||Rs),gs=p.useRef(null),je=p.useRef(null),kr=E===0,Tr=E+1<=x,ee=o.type,Qe=o.dismissible!==!1,Cr=o.className||"",Ar=o.descriptionClassName||"",bt=p.useMemo(()=>v.findIndex(S=>S.toastId===o.id)||0,[v,o.id]),Pr=p.useMemo(()=>{var S;return(S=o.closeButton)!=null?S:ve},[o.closeButton,ve]),ys=p.useMemo(()=>o.duration||He||Rs,[o.duration,He]),Ft=p.useRef(0),Ke=p.useRef(0),vs=p.useRef(0),Ye=p.useRef(null),[Rr,Or]=gt.split("-"),bs=p.useMemo(()=>v.reduce((S,R,B)=>B>=bt?S:S+R.height,0),[v,bt]),ws=En(),Nr=o.invert||k,qt=ee==="loading";Ke.current=p.useMemo(()=>bt*Be+bs,[bt,bs]),p.useEffect(()=>{at.current=ys},[ys]),p.useEffect(()=>{Lt(!0)},[]),p.useEffect(()=>{let S=je.current;if(S){let R=S.getBoundingClientRect().height;return ms(R),g(B=>[{toastId:o.id,height:R,position:o.position},...B]),()=>g(B=>B.filter(re=>re.toastId!==o.id))}},[g,o.id]),p.useLayoutEffect(()=>{if(!F)return;let S=je.current,R=S.style.height;S.style.height="auto";let B=S.getBoundingClientRect().height;S.style.height=R,ms(B),g(re=>re.find(ne=>ne.toastId===o.id)?re.map(ne=>ne.toastId===o.id?{...ne,height:B}:ne):[{toastId:o.id,height:B,position:o.position},...re])},[F,o.title,o.description,g,o.id]);let Ee=p.useCallback(()=>{vt(!0),$t(Ke.current),g(S=>S.filter(R=>R.toastId!==o.id)),setTimeout(()=>{L(o)},Dn)},[o,L,g,Ke]);p.useEffect(()=>{if(o.promise&&ee==="loading"||o.duration===1/0||o.type==="loading")return;let S;return j||f||O&&ws?(()=>{if(vs.current<Ft.current){let R=new Date().getTime()-Ft.current;at.current=at.current-R}vs.current=new Date().getTime()})():at.current!==1/0&&(Ft.current=new Date().getTime(),S=setTimeout(()=>{var R;(R=o.onAutoClose)==null||R.call(o,o),Ee()},at.current)),()=>clearTimeout(S)},[j,f,o,ee,O,ws,Ee]),p.useEffect(()=>{o.delete&&Ee()},[Ee,o.delete]);function Ir(){var S,R,B;return G!=null&&G.loading?p.createElement("div",{className:ae(A==null?void 0:A.loader,(S=o==null?void 0:o.classNames)==null?void 0:S.loader,"sonner-loader"),"data-visible":ee==="loading"},G.loading):we?p.createElement("div",{className:ae(A==null?void 0:A.loader,(R=o==null?void 0:o.classNames)==null?void 0:R.loader,"sonner-loader"),"data-visible":ee==="loading"},we):p.createElement(yn,{className:ae(A==null?void 0:A.loader,(B=o==null?void 0:o.classNames)==null?void 0:B.loader),visible:ee==="loading"})}return p.createElement("li",{tabIndex:0,ref:je,className:ae(be,Cr,A==null?void 0:A.toast,(e=o==null?void 0:o.classNames)==null?void 0:e.toast,A==null?void 0:A.default,A==null?void 0:A[ee],(s=o==null?void 0:o.classNames)==null?void 0:s[ee]),"data-sonner-toast":"","data-rich-colors":(r=o.richColors)!=null?r:J,"data-styled":!(o.jsx||o.unstyled||N),"data-mounted":F,"data-promise":!!o.promise,"data-swiped":xr,"data-removed":nt,"data-visible":Tr,"data-y-position":Rr,"data-x-position":Or,"data-index":E,"data-front":kr,"data-swiping":it,"data-dismissible":Qe,"data-type":ee,"data-invert":Nr,"data-swipe-out":fs,"data-swipe-direction":X,"data-expanded":!!(j||yt&&F),style:{"--index":E,"--toasts-before":E,"--z-index":b.length-E,"--offset":`${nt?Er:Ke.current}px`,"--initial-height":yt?"auto":`${Sr}px`,...he,...o.style},onDragEnd:()=>{Dt(!1),D(null),Ye.current=null},onPointerDown:S=>{qt||!Qe||(gs.current=new Date,$t(Ke.current),S.target.setPointerCapture(S.pointerId),S.target.tagName!=="BUTTON"&&(Dt(!0),Ye.current={x:S.clientX,y:S.clientY}))},onPointerUp:()=>{var S,R,B,re;if(fs||!Qe)return;Ye.current=null;let ne=Number(((S=je.current)==null?void 0:S.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Se=Number(((R=je.current)==null?void 0:R.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Le=new Date().getTime()-((B=gs.current)==null?void 0:B.getTime()),ie=I==="x"?ne:Se,ke=Math.abs(ie)/Le;if(Math.abs(ie)>=Ln||ke>.11){$t(Ke.current),(re=o.onDismiss)==null||re.call(o,o),Ve(I==="x"?ne>0?"right":"left":Se>0?"down":"up"),Ee(),_r(!0),ps(!1);return}Dt(!1),D(null)},onPointerMove:S=>{var R,B,re,ne;if(!Ye.current||!Qe||((R=window.getSelection())==null?void 0:R.toString().length)>0)return;let Se=S.clientY-Ye.current.y,Le=S.clientX-Ye.current.x,ie=(B=t.swipeDirections)!=null?B:$n(gt);!I&&(Math.abs(Le)>1||Math.abs(Se)>1)&&D(Math.abs(Le)>Math.abs(Se)?"x":"y");let ke={x:0,y:0};I==="y"?(ie.includes("top")||ie.includes("bottom"))&&(ie.includes("top")&&Se<0||ie.includes("bottom")&&Se>0)&&(ke.y=Se):I==="x"&&(ie.includes("left")||ie.includes("right"))&&(ie.includes("left")&&Le<0||ie.includes("right")&&Le>0)&&(ke.x=Le),(Math.abs(ke.x)>0||Math.abs(ke.y)>0)&&ps(!0),(re=je.current)==null||re.style.setProperty("--swipe-amount-x",`${ke.x}px`),(ne=je.current)==null||ne.style.setProperty("--swipe-amount-y",`${ke.y}px`)}},Pr&&!o.jsx?p.createElement("button",{"aria-label":jt,"data-disabled":qt,"data-close-button":!0,onClick:qt||!Qe?()=>{}:()=>{var S;Ee(),(S=o.onDismiss)==null||S.call(o,o)},className:ae(A==null?void 0:A.closeButton,(n=o==null?void 0:o.classNames)==null?void 0:n.closeButton)},(i=G==null?void 0:G.close)!=null?i:xn):null,o.jsx||P.isValidElement(o.title)?o.jsx?o.jsx:typeof o.title=="function"?o.title():o.title:p.createElement(p.Fragment,null,ee||o.icon||o.promise?p.createElement("div",{"data-icon":"",className:ae(A==null?void 0:A.icon,(l=o==null?void 0:o.classNames)==null?void 0:l.icon)},o.promise||o.type==="loading"&&!o.icon?o.icon||Ir():null,o.type!=="loading"?o.icon||(G==null?void 0:G[ee])||mn(ee):null):null,p.createElement("div",{"data-content":"",className:ae(A==null?void 0:A.content,(c=o==null?void 0:o.classNames)==null?void 0:c.content)},p.createElement("div",{"data-title":"",className:ae(A==null?void 0:A.title,(d=o==null?void 0:o.classNames)==null?void 0:d.title)},typeof o.title=="function"?o.title():o.title),o.description?p.createElement("div",{"data-description":"",className:ae(mt,Ar,A==null?void 0:A.description,(h=o==null?void 0:o.classNames)==null?void 0:h.description)},typeof o.description=="function"?o.description():o.description):null),P.isValidElement(o.cancel)?o.cancel:o.cancel&&xt(o.cancel)?p.createElement("button",{"data-button":!0,"data-cancel":!0,style:o.cancelButtonStyle||$,onClick:S=>{var R,B;xt(o.cancel)&&Qe&&((B=(R=o.cancel).onClick)==null||B.call(R,S),Ee())},className:ae(A==null?void 0:A.cancelButton,(m=o==null?void 0:o.classNames)==null?void 0:m.cancelButton)},o.cancel.label):null,P.isValidElement(o.action)?o.action:o.action&&xt(o.action)?p.createElement("button",{"data-button":!0,"data-action":!0,style:o.actionButtonStyle||Z,onClick:S=>{var R,B;xt(o.action)&&((B=(R=o.action).onClick)==null||B.call(R,S),!S.defaultPrevented&&Ee())},className:ae(A==null?void 0:A.actionButton,(w=o==null?void 0:o.classNames)==null?void 0:w.actionButton)},o.action.label):null))};function Os(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function qn(t,e){let s={};return[t,e].forEach((r,n)=>{let i=n===1,l=i?"--mobile-offset":"--offset",c=i?In:Nn;function d(h){["top","right","bottom","left"].forEach(m=>{s[`${l}-${m}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?s[`${l}-${h}`]=c:s[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(c)}),s}var Mn=P.forwardRef(function(t,e){let{invert:s,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:i,closeButton:l,className:c,offset:d,mobileOffset:h,theme:m="light",richColors:w,duration:k,style:o,visibleToasts:N=On,toastOptions:f,dir:g=Os(),gap:x=jn,loadingIcon:v,icons:E,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:j}=t,[L,J]=p.useState([]),ve=p.useMemo(()=>Array.from(new Set([r].concat(L.filter(O=>O.position).map(O=>O.position)))),[L,r]),[he,$]=p.useState([]),[Z,be]=p.useState(!1),[mt,He]=p.useState(!1),[gt,Be]=p.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),we=p.useRef(null),yt=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=p.useRef(null),G=p.useRef(!1),jt=p.useCallback(O=>{J(I=>{var D;return(D=I.find(X=>X.id===O.id))!=null&&D.delete||W.dismiss(O.id),I.filter(({id:X})=>X!==O.id)})},[]);return p.useEffect(()=>W.subscribe(O=>{if(O.dismiss){J(I=>I.map(D=>D.id===O.id?{...D,delete:!0}:D));return}setTimeout(()=>{Br.flushSync(()=>{J(I=>{let D=I.findIndex(X=>X.id===O.id);return D!==-1?[...I.slice(0,D),{...I[D],...O},...I.slice(D+1)]:[O,...I]})})})}),[]),p.useEffect(()=>{if(m!=="system"){Be(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Be("dark"):Be("light")),typeof window>"u")return;let O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:I})=>{Be(I?"dark":"light")})}catch{O.addListener(({matches:D})=>{try{Be(D?"dark":"light")}catch{}})}},[m]),p.useEffect(()=>{L.length<=1&&be(!1)},[L]),p.useEffect(()=>{let O=I=>{var D,X;n.every(Ve=>I[Ve]||I.code===Ve)&&(be(!0),(D=we.current)==null||D.focus()),I.code==="Escape"&&(document.activeElement===we.current||(X=we.current)!=null&&X.contains(document.activeElement))&&be(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[n]),p.useEffect(()=>{if(we.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,G.current=!1)}},[we.current]),p.createElement("section",{ref:e,"aria-label":`${b} ${yt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ve.map((O,I)=>{var D;let[X,Ve]=O.split("-");return L.length?p.createElement("ol",{key:O,dir:g==="auto"?Os():g,tabIndex:-1,ref:we,className:c,"data-sonner-toaster":!0,"data-theme":gt,"data-y-position":X,"data-lifted":Z&&L.length>1&&!i,"data-x-position":Ve,style:{"--front-toast-height":`${((D=he[0])==null?void 0:D.height)||0}px`,"--width":`${Bn}px`,"--gap":`${x}px`,...o,...qn(d,h)},onBlur:F=>{G.current&&!F.currentTarget.contains(F.relatedTarget)&&(G.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||G.current||(G.current=!0,A.current=F.relatedTarget)},onMouseEnter:()=>be(!0),onMouseMove:()=>be(!0),onMouseLeave:()=>{mt||be(!1)},onDragEnd:()=>be(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||He(!0)},onPointerUp:()=>He(!1)},L.filter(F=>!F.position&&I===0||F.position===O).map((F,Lt)=>{var nt,vt;return p.createElement(Fn,{key:F.id,icons:E,index:Lt,toast:F,defaultRichColors:w,duration:(nt=f==null?void 0:f.duration)!=null?nt:k,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:s,visibleToasts:N,closeButton:(vt=f==null?void 0:f.closeButton)!=null?vt:l,interacting:mt,position:O,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:jt,toasts:L.filter(it=>it.position==F.position),heights:he.filter(it=>it.position==F.position),setHeights:$,expandByDefault:i,gap:x,loadingIcon:v,expanded:Z,pauseWhenPageIsHidden:j,swipeDirections:t.swipeDirections})})):null}))});const rr=P.createContext(void 0),Ns={getItem:t=>{try{return localStorage.getItem(t)}catch{return null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch{}}},Un=({children:t})=>{const[e,s]=P.useState(()=>Ns.getItem("theme")||"dark");P.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),Ns.setItem("theme",e)},[e]);const r=()=>{s(i=>i==="light"?"dark":"light")},n=i=>{s(i)};return y.jsx(rr.Provider,{value:{theme:e,toggleTheme:r,setTheme:n},children:t})},Ea=()=>{const t=P.useContext(rr);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},nr=P.createContext(void 0),zn=({children:t})=>{const[e,s]=P.useState("");return y.jsx(nr.Provider,{value:{title:e,setTitle:s},children:t})},Sa=()=>{const t=P.useContext(nr);if(t===void 0)throw new Error("useHeader must be used within a HeaderProvider");return t},Hn="modulepreload",Vn=function(t){return"/"+t},Is={},V=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(s.map(d=>{if(d=Vn(d),d in Is)return;Is[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const w=document.createElement("link");if(w.rel=h?"stylesheet":Hn,h||(w.as="script"),w.crossOrigin="",w.href=d,c&&w.setAttribute("nonce",c),document.head.appendChild(w),h)return new Promise((k,o)=>{w.addEventListener("load",k),w.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},ir={},{useDebugValue:Qn}=p,{useSyncExternalStoreWithSelector:Kn}=Fr;let Bs=!1;const Yn=t=>t;function Wn(t,e=Yn,s){(ir?"production":void 0)!=="production"&&s&&!Bs&&(Bs=!0);const r=Kn(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,s);return Qn(r),r}const Jn=t=>{const e=typeof t=="function"?$r(t):t,s=(r,n)=>Wn(e,r,n);return Object.assign(s,e),s},Gn=t=>Jn,Xn={};function ar(t,e){let s;try{s=t()}catch{return}return{getItem:n=>{var i;const l=d=>d===null?null:JSON.parse(d,void 0),c=(i=s.getItem(n))!=null?i:null;return c instanceof Promise?c.then(l):l(c)},setItem:(n,i)=>s.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>s.removeItem(n)}}const dt=t=>e=>{try{const s=t(e);return s instanceof Promise?s:{then(r){return dt(r)(s)},catch(r){return this}}}catch(s){return{then(r){return this},catch(r){return dt(r)(s)}}}},Zn=(t,e)=>(s,r,n)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...e},l=!1;const c=new Set,d=new Set;let h;try{h=i.getStorage()}catch{}if(!h)return t((...g)=>{s(...g)},r,n);const m=dt(i.serialize),w=()=>{const g=i.partialize({...r()});let x;const v=m({state:g,version:i.version}).then(E=>h.setItem(i.name,E)).catch(E=>{x=E});if(x)throw x;return v},k=n.setState;n.setState=(g,x)=>{k(g,x),w()};const o=t((...g)=>{s(...g),w()},r,n);let N;const f=()=>{var g;if(!h)return;l=!1,c.forEach(v=>v(r()));const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,r()))||void 0;return dt(h.getItem.bind(h))(i.name).then(v=>{if(v)return i.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return i.migrate(v.state,v.version)}else return v.state}).then(v=>{var E;return N=i.merge(v,(E=r())!=null?E:o),s(N,!0),w()}).then(()=>{x==null||x(N,void 0),l=!0,d.forEach(v=>v(N))}).catch(v=>{x==null||x(void 0,v)})};return n.persist={setOptions:g=>{i={...i,...g},g.getStorage&&(h=g.getStorage())},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:g=>(c.add(g),()=>{c.delete(g)}),onFinishHydration:g=>(d.add(g),()=>{d.delete(g)})},f(),N||o},ei=(t,e)=>(s,r,n)=>{let i={storage:ar(()=>localStorage),partialize:f=>f,version:0,merge:(f,g)=>({...g,...f}),...e},l=!1;const c=new Set,d=new Set;let h=i.storage;if(!h)return t((...f)=>{s(...f)},r,n);const m=()=>{const f=i.partialize({...r()});return h.setItem(i.name,{state:f,version:i.version})},w=n.setState;n.setState=(f,g)=>{w(f,g),m()};const k=t((...f)=>{s(...f),m()},r,n);n.getInitialState=()=>k;let o;const N=()=>{var f,g;if(!h)return;l=!1,c.forEach(v=>{var E;return v((E=r())!=null?E:k)});const x=((g=i.onRehydrateStorage)==null?void 0:g.call(i,(f=r())!=null?f:k))||void 0;return dt(h.getItem.bind(h))(i.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==i.version){if(i.migrate)return[!0,i.migrate(v.state,v.version)]}else return[!1,v.state];return[!1,void 0]}).then(v=>{var E;const[b,j]=v;if(o=i.merge(j,(E=r())!=null?E:k),s(o,!0),b)return m()}).then(()=>{x==null||x(o,void 0),o=r(),l=!0,d.forEach(v=>v(o))}).catch(v=>{x==null||x(void 0,v)})};return n.persist={setOptions:f=>{i={...i,...f},f.storage&&(h=f.storage)},clearStorage:()=>{h==null||h.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>N(),hasHydrated:()=>l,onHydrate:f=>(c.add(f),()=>{c.delete(f)}),onFinishHydration:f=>(d.add(f),()=>{d.delete(f)})},i.skipHydration||N(),o||k},ti=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?Zn(t,e):ei(t,e),si=ti,ri={getItem:t=>{try{return localStorage.getItem(t)}catch{return null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch{}},removeItem:t=>{try{localStorage.removeItem(t)}catch{}}},ze=Gn()(si(t=>({user:null,token:null,isAuthenticated:!1,setAuth:(e,s)=>t({user:e,token:s,isAuthenticated:!0}),clearAuth:()=>t({user:null,token:null,isAuthenticated:!1}),updateUser:e=>t(s=>({user:s.user?{...s.user,...e}:null})),refreshUser:async()=>{try{const{apiClient:e}=await V(async()=>{const{apiClient:n}=await Promise.resolve().then(()=>ni);return{apiClient:n}},void 0),s=await e.get("/auth/me"),r=s.user||s;t(n=>({user:n.user?{...n.user,...r}:r}))}catch{}}}),{name:"auth-storage",storage:ar(()=>ri)})),ka=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:ze},Symbol.toStringTag,{value:"Module"})),or="https://api.waule.ai",M=kt.create({baseURL:`${or}/api`,timeout:3e5});M.interceptors.request.use(t=>{const e=ze.getState().token;return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));M.interceptors.response.use(t=>t,t=>{var e,s,r;if(t.code==="ERR_NETWORK"&&or&&t.config&&!t.config.__retriedWithFallback){const n={...t.config,baseURL:"/api",__retriedWithFallback:!0};return M.request(n)}return((e=t.response)==null?void 0:e.status)===401?(ze.getState().clearAuth(),window.location.href="/login",Xt.error("")):((s=t.response)==null?void 0:s.status)===403&&!((r=t.config)!=null&&r.skipGlobalErrorHandler)&&Xt.error(""),Promise.reject(t)});const a={get:(t,e)=>M.get(t,e).then(s=>s.data),post:(t,e,s)=>M.post(t,e,s).then(r=>r.data),put:(t,e,s)=>M.put(t,e,s).then(r=>r.data),delete:(t,e)=>M.delete(t,e).then(s=>s.data),patch:(t,e,s)=>M.patch(t,e,s).then(r=>r.data),auth:{sendCode:t=>a.post("/auth/send-code",t,{timeout:15e3}),loginWithPhone:t=>a.post("/auth/login-phone",t,{timeout:15e3}),adminLogin:t=>a.post("/auth/admin-login",t,{timeout:15e3}),setupTotp:()=>a.post("/auth/totp/setup"),confirmTotp:t=>a.post("/auth/totp/confirm",{code:t}),disableTotp:t=>a.post("/auth/totp/disable",{code:t}),getTotpStatus:()=>a.get("/auth/totp/status"),logout:()=>a.post("/auth/logout"),me:()=>a.get("/auth/me"),refresh:()=>a.post("/auth/refresh")},user:{getProfile:()=>a.get("/users/profile"),updateProfile:t=>a.put("/users/profile",t),changePassword:t=>a.put("/users/password",t),uploadAvatarLegacy:t=>{const e=new FormData;return e.append("avatar",t),M.put("/users/avatar",e).then(s=>s.data)},getAvatarUploadUrl:(t,e)=>a.post("/users/avatar/presign",{fileName:t,contentType:e}),confirmAvatarUpload:t=>a.post("/users/avatar/confirm",{publicUrl:t}),uploadAvatar:async t=>{const e=await a.post("/users/avatar/presign",{fileName:t.name,contentType:t.type});if(!e.success)throw new Error(e.message||"");const{uploadUrl:s,publicUrl:r}=e.data;return await kt.put(s,t,{headers:{"Content-Type":t.type}}),await a.post("/users/avatar/confirm",{publicUrl:r})},checkNickname:t=>a.get("/users/check-nickname",{params:{nickname:t}})},projects:{getAll:t=>a.get("/projects",{params:t}),getById:t=>a.get(`/projects/${t}`),create:t=>a.post("/projects",t),update:(t,e)=>a.put(`/projects/${t}`,e),delete:t=>a.delete(`/projects/${t}`),getShared:t=>a.get("/projects/shared",{params:t}),searchUsers:t=>a.get("/projects/users/search",{params:{q:t}}),getCollaborators:t=>a.get(`/projects/${t}/collaborators`),addCollaborator:(t,e)=>a.post(`/projects/${t}/share`,{targetUserId:e}),removeCollaborator:(t,e)=>a.post(`/projects/${t}/unshare`,{targetUserId:e})},episodes:{list:t=>a.get(`/projects/${t}/episodes`),getById:(t,e)=>a.get(`/projects/${t}/episodes/${e}`),create:(t,e)=>a.post(`/projects/${t}/episodes`,e),update:(t,e,s)=>a.put(`/projects/${t}/episodes/${e}`,s),delete:(t,e)=>a.delete(`/projects/${t}/episodes/${e}`),getCollaborators:(t,e)=>a.get(`/projects/${t}/episodes/${e}/collaborators`),updatePermission:(t,e,s,r)=>a.put(`/projects/${t}/episodes/${e}/permission`,{targetUserId:s,permission:r})},workflows:{getAll:t=>a.get("/workflows",{params:t}),getById:t=>a.get(`/workflows/${t}`),getOrCreateByProject:t=>a.get(`/workflows/project/${t}`),getOrCreateByEpisode:(t,e)=>a.get(`/workflows/project/${t}/episode/${e}`),getOrCreateByShot:(t,e,s,r)=>a.get(`/workflows/project/${t}/episode/${e}/shot`,{params:{scene:s,shot:r}}),save:(t,e)=>a.post(`/workflows/project/${t}`,e),saveEpisode:(t,e,s)=>a.post(`/workflows/project/${t}/episode/${e}`,s),saveShot:(t,e,s,r,n)=>a.post(`/workflows/project/${t}/episode/${e}/shot`,n,{params:{scene:s,shot:r}}),create:t=>a.post("/workflows",t),update:(t,e)=>a.put(`/workflows/${t}`,e),delete:t=>a.delete(`/workflows/${t}`),execute:t=>a.post(`/workflows/${t}/execute`),searchUsers:t=>a.get("/workflows/users/search",{params:{q:t}}),getCollaborators:t=>a.get(`/workflows/${t}/collaborators`),addCollaborator:(t,e,s="READ")=>a.post(`/workflows/${t}/share`,{targetUserId:e,permission:s}),updatePermission:(t,e,s)=>a.put(`/workflows/${t}/share/permission`,{targetUserId:e,permission:s}),removeCollaborator:(t,e)=>a.post(`/workflows/${t}/unshare`,{targetUserId:e})},assets:{getAll:t=>a.get("/assets",{params:t}),getById:t=>a.get(`/assets/${t}`),getPresignedUrl:(t,e)=>a.post("/assets/presigned-url",{fileName:t,contentType:e}),confirmDirectUpload:t=>a.post("/assets/confirm-upload",t),upload:async(t,e,s)=>{try{const r=await a.post("/assets/presigned-url",{fileName:t.name,contentType:t.type||"application/octet-stream"});if(!r.success||!r.data)throw new Error("");const{uploadUrl:n,publicUrl:i,objectKey:l}=r.data,c=Date.now();return await kt.put(n,t,{headers:{"Content-Type":t.type||"application/octet-stream"},onUploadProgress:s==null?void 0:s.onUploadProgress,timeout:3e5}),await a.post("/assets/confirm-upload",{objectKey:l,publicUrl:i,fileName:t.name,contentType:t.type||"application/octet-stream",size:t.size,assetLibraryId:e==null?void 0:e.assetLibraryId,customName:e==null?void 0:e.customName})}catch{const n=new FormData;return n.append("file",t),e&&n.append("metadata",JSON.stringify(e)),M.post("/assets/upload",n,s).then(i=>i.data)}},uploadViaServer:(t,e,s)=>{const r=new FormData;return r.append("file",t),e&&r.append("metadata",JSON.stringify(e)),M.post("/assets/upload",r,s).then(n=>n.data)},proxyDownload:t=>M.get("/assets/proxy-download",{params:{url:t},responseType:"arraybuffer"}).then(e=>e.data),transferToOss:async(t,e)=>{var s;if(t.includes("aliyuncs.com"))return t;try{let r,n="application/octet-stream";try{const m=await fetch(t,{mode:"cors",credentials:"omit"});if(!m.ok)throw new Error(`HTTP ${m.status}`);r=await m.blob(),n=m.headers.get("content-type")||n}catch{const w=await a.assets.proxyDownload(t);r=new Blob([w]),t.includes(".mp4")?n="video/mp4":t.includes(".png")?n="image/png":t.includes(".jpg")||t.includes(".jpeg")?n="image/jpeg":t.includes(".webp")?n="image/webp":t.includes(".mp3")?n="audio/mpeg":t.includes(".wav")&&(n="audio/wav")}let i=".bin";n.includes("video/mp4")?i=".mp4":n.includes("video/webm")?i=".webm":n.includes("image/png")?i=".png":n.includes("image/jpeg")?i=".jpg":n.includes("image/webp")?i=".webp":n.includes("image/gif")?i=".gif":n.includes("audio/mpeg")?i=".mp3":n.includes("audio/wav")?i=".wav":n.includes("audio/mp4")&&(i=".m4a");const l=e||`transfer-${Date.now()}${i}`,c=await a.post("/assets/presigned-url",{fileName:l,contentType:n});if(!c.success||!c.data)throw new Error("");const{uploadUrl:d,publicUrl:h}=c.data;return await kt.put(d,r,{headers:{"Content-Type":n},timeout:3e5}),h}catch{return((s=(await a.post("/assets/transfer-url",{url:t})).data)==null?void 0:s.url)||t}},update:(t,e)=>a.put(`/assets/${t}`,e),delete:t=>a.delete(`/assets/${t}`)},assetLibraries:{getAll:(t,e)=>a.get("/asset-libraries",{...e||{},params:t}),getById:t=>a.get(`/asset-libraries/${t}`),create:t=>a.post("/asset-libraries",t),update:(t,e)=>a.put(`/asset-libraries/${t}`,e),delete:t=>a.delete(`/asset-libraries/${t}`),getAssets:t=>a.get(`/asset-libraries/${t}/assets`),uploadAsset:async(t,e,s,r)=>a.assets.upload(e,{assetLibraryId:t,customName:s},r),addFromUrl:(t,e,s)=>a.post(`/asset-libraries/${t}/add-from-url`,{url:e,name:s}),searchUsers:t=>a.get("/asset-libraries/users/search",{params:{q:t}}),getCollaborators:t=>a.get(`/asset-libraries/${t}/collaborators`),addCollaborator:(t,e,s=!0)=>a.post(`/asset-libraries/${t}/share`,{targetUserId:e,canDownload:s}),removeCollaborator:(t,e)=>a.post(`/asset-libraries/${t}/unshare`,{targetUserId:e}),getShared:()=>a.get("/asset-libraries/shared"),roles:{create:(t,e)=>a.post(`/asset-libraries/${t}/roles`,e),list:t=>a.get(`/asset-libraries/${t}/roles`),update:(t,e,s)=>a.put(`/asset-libraries/${t}/roles/${e}`,s),delete:(t,e)=>a.delete(`/asset-libraries/${t}/roles/${e}`)}},tasks:{createImageTask:t=>a.post("/tasks/image",t),createImageEditTask:t=>a.post("/tasks/image-edit",t),createVideoTask:t=>a.post("/tasks/video",t),getTaskStatus:t=>a.get(`/tasks/${t}`),getUserTasks:t=>a.get("/tasks",{params:{limit:t}}),getActiveTask:t=>a.get("/tasks/active",{params:{sourceNodeId:t}}),getPendingPreviewNodes:t=>a.get("/tasks/pending-preview-nodes",{params:{sourceNodeId:t}}),markPreviewNodeCreated:t=>a.post(`/tasks/${t}/mark-preview-created`)},ai:{text:{generate:async t=>{var e;try{return await M.post("/ai/text/generate",t,{timeout:45e4}).then(s=>s.data)}catch(s){const r=(e=s==null?void 0:s.response)==null?void 0:e.status,n=s==null?void 0:s.code,i=(s==null?void 0:s.config)||{};if((n==="ECONNABORTED"||r&&r>=500)&&!i.__retriedOnce){const l={...i,timeout:45e3,__retriedOnce:!0};return await M.request(l).then(c=>c.data)}throw s}}},audio:{createVoice:t=>a.post("/ai/audio/voice/create",t),queryVoice:t=>a.get("/ai/audio/voice/status",{params:t}),design:t=>a.post("/ai/audio/voice/design",t),synthesize:t=>a.post("/ai/audio/synthesize",t),presets:()=>a.get("/ai/audio/voice/presets"),voices:{list:()=>a.get("/ai/audio/voices"),add:t=>a.post("/ai/audio/voices",t),update:(t,e)=>a.put(`/ai/audio/voices/${t}`,e),delete:t=>a.delete(`/ai/audio/voices/${t}`)}},image:{generate:t=>a.post("/ai/image/generate",t)},imageEditing:{getModels:()=>a.get("/ai/image-editing/models"),edit:t=>M.post("/ai/image-editing/edit",t,{timeout:18e4}).then(e=>e.data),identifyPoints:t=>a.post("/ai/image-editing/identify-points",t)},video:{generate:t=>M.post("/ai/video/generate",t,{timeout:18e6}).then(e=>e.data)},adaptScript:t=>a.post("/ai/script/adapt",t),generateImage:t=>a.post("/ai/image/generate",t),generateVideo:t=>a.post("/ai/video/generate",t)},admin:{getUsers:t=>a.get("/admin/users",{params:t}),updateUser:(t,e)=>a.put(`/admin/users/${t}`,e),deleteUser:t=>a.delete(`/admin/users/${t}`),getStats:()=>a.get("/admin/stats"),getServerMetrics:()=>a.get("/admin/server-metrics"),getSettings:()=>a.get("/admin/settings"),updateSettings:t=>a.put("/admin/settings",t),getAIModels:t=>a.get("/admin/ai-models",{params:t}),upsertAIModelCapabilities:t=>a.post("/admin/ai-models/capabilities",t),createAIModel:async t=>{const e=await M.post("/admin/ai-models",t).then(s=>s.data);return(e==null?void 0:e.data)??e},updateAIModel:async(t,e)=>{const s=await M.put(`/admin/ai-models/${t}`,e).then(r=>r.data);return(s==null?void 0:s.data)??s},deleteAIModel:t=>a.delete(`/admin/ai-models/${t}`),tasks:{getList:t=>a.get("/admin/tasks",{params:t}),getStats:()=>a.get("/admin/tasks/stats"),refund:t=>a.post(`/admin/tasks/${t}/refund`),cancel:(t,e)=>a.post(`/admin/tasks/${t}/cancel`,{refund:e})},inspection:{getUserWorkflows:(t,e)=>a.get(`/admin/users/${t}/workflows`,{params:e}),getUserAssetLibraries:(t,e)=>a.get(`/admin/users/${t}/asset-libraries`,{params:e}),getAssetLibraryAssets:(t,e)=>a.get(`/admin/asset-libraries/${t}/assets`,{params:e})},userLevels:{getConfigs:()=>a.get("/admin/user-levels/configs"),updateConfig:t=>a.put("/admin/user-levels/configs",t),batchUpdateConfigs:t=>a.put("/admin/user-levels/configs/batch",{configs:t}),getPermissions:t=>a.get("/admin/user-levels/permissions",{params:t}),getPermissionsSummary:()=>a.get("/admin/user-levels/permissions/summary"),updatePermission:t=>a.put("/admin/user-levels/permissions",t),batchUpdatePermissions:t=>a.put("/admin/user-levels/permissions/batch",{permissions:t}),setModelPermissionsForAllLevels:t=>a.put("/admin/user-levels/permissions/model",t),deletePermission:t=>a.delete(`/admin/user-levels/permissions/${t}`),getUserUsageStats:(t,e)=>a.get("/admin/user-levels/usage-stats",{params:{userId:t,date:e}}),grantGiftCredits:t=>a.post("/admin/user-levels/gift-credits",{userId:t}),getGiftCreditsStatus:t=>a.get("/admin/user-levels/gift-credits/status",{params:{userId:t}}),updateUserMembership:(t,e)=>a.put(`/admin/user-levels/users/${t}/membership`,e)}},agents:{getAll:()=>a.get("/agents"),getById:t=>a.get(`/agents/${t}`),create:t=>a.post("/agents",t),update:(t,e)=>a.put(`/agents/${t}`,e),delete:t=>a.delete(`/agents/${t}`),getAvailableModels:()=>a.get("/agents/models"),roles:{list:()=>a.get("/agent-roles"),listByAgent:t=>a.get(`/agent-roles/by-agent/${t}`),getById:t=>a.get(`/agent-roles/${t}`),create:t=>a.post("/agent-roles",t),update:(t,e)=>a.put(`/agent-roles/${t}`,e),delete:t=>a.delete(`/agent-roles/${t}`),execute:(t,e)=>M.post(`/agent-roles/${t}/execute`,e,{timeout:3e5}).then(s=>s.data)}},documents:{extractText:t=>a.post("/documents/extract-text",{filePath:t}),getBase64:t=>a.post("/documents/base64",{filePath:t})},midjourney:{imagine:t=>a.post("/midjourney/imagine",t),fetchTask:t=>M.get(`/midjourney/task/${t}`,{timeout:1e4}).then(e=>e.data),pollTask:t=>M.get(`/midjourney/task/${t}/poll`,{timeout:3e5}).then(e=>e.data),action:t=>a.post("/midjourney/action",t),blend:t=>a.post("/midjourney/blend",{base64Array:t}),describe:t=>a.post("/midjourney/describe",{base64:t}),uploadReferenceImage:t=>a.post("/midjourney/upload-reference",t),getSettings:()=>a.get("/midjourney/settings")},translation:{translate:t=>a.post("/translation/translate",t),smartTranslate:t=>a.post("/translation/smart-translate",t),detectLanguage:t=>a.post("/translation/detect",t)},payment:{getPackages:t=>a.get("/payment/packages",{params:t?{type:t}:void 0}),createOrder:t=>a.post("/payment/orders",t),getOrderStatus:t=>a.get(`/payment/orders/${t}/status`),getOrders:t=>a.get("/payment/orders",{params:t}),getTransactions:t=>a.get("/payment/transactions",{params:t}),admin:{getConfigs:()=>a.get("/payment/admin/configs"),getConfig:t=>a.get(`/payment/admin/configs/${t}`),saveConfig:t=>a.post("/payment/admin/configs",t),testConfig:t=>a.post(`/payment/admin/configs/${t}/test`),deleteConfig:t=>a.delete(`/payment/admin/configs/${t}`),getPackages:t=>a.get("/payment/admin/packages",{params:t?{type:t}:void 0}),createPackage:t=>a.post("/payment/admin/packages",t),updatePackage:(t,e)=>a.put(`/payment/admin/packages/${t}`,e),deletePackage:t=>a.delete(`/payment/admin/packages/${t}`),recharge:t=>a.post("/payment/admin/recharge",t)}},redeem:{redeem:t=>a.post("/redeem/redeem",{code:t}),admin:{getCodes:t=>a.get("/redeem/codes",{params:t}),getBatches:()=>a.get("/redeem/batches"),generate:t=>a.post("/redeem/generate",t),deleteCode:t=>a.delete(`/redeem/codes/${t}`),deleteBatch:t=>a.delete(`/redeem/batches/${t}`)}},nodePrompts:{getAll:t=>a.get("/admin/node-prompts",{params:{includeInactive:t}}),getById:t=>a.get(`/admin/node-prompts/${t}`),create:t=>a.post("/admin/node-prompts",t),update:(t,e)=>a.put(`/admin/node-prompts/${t}`,e),delete:t=>a.delete(`/admin/node-prompts/${t}`),toggle:t=>a.patch(`/admin/node-prompts/${t}/toggle`),initHDUpscale:()=>a.post("/admin/node-prompts/init/hd-upscale"),initImageFusion:()=>a.post("/admin/node-prompts/init/image-fusion"),initSmartStoryboard:()=>a.post("/admin/node-prompts/init/smart-storyboard")},soraCharacters:{list:t=>a.get("/sora-characters",{params:t}),search:(t,e=5)=>a.get("/sora-characters/search",{params:{q:t,limit:e}}),getById:t=>a.get(`/sora-characters/${t}`),getByCustomName:t=>a.get(`/sora-characters/by-name/${encodeURIComponent(t)}`),create:t=>a.post("/sora-characters",t),update:(t,e)=>a.put(`/sora-characters/${t}`,e),delete:t=>a.delete(`/sora-characters/${t}`),searchUsers:t=>a.get("/sora-characters/users/search",{params:{q:t}}),getCollaborators:()=>a.get("/sora-characters/collaborators"),addCollaborator:t=>a.post("/sora-characters/share",{targetUserId:t}),removeCollaborator:t=>a.post("/sora-characters/unshare",{targetUserId:t}),getShareInfo:()=>a.get("/sora-characters/share-info")}},ni=Object.freeze(Object.defineProperty({__proto__:null,api:M,apiClient:a},Symbol.toStringTag,{value:"Module"})),ye=Object.create(null);ye.open="0";ye.close="1";ye.ping="2";ye.pong="3";ye.message="4";ye.upgrade="5";ye.noop="6";const Tt=Object.create(null);Object.keys(ye).forEach(t=>{Tt[ye[t]]=t});const Zt={type:"error",data:"parser error"},cr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lr=typeof ArrayBuffer=="function",ur=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,cs=({type:t,data:e},s,r)=>cr&&e instanceof Blob?s?r(e):js(e,r):lr&&(e instanceof ArrayBuffer||ur(e))?s?r(e):js(new Blob([e]),r):r(ye[t]+(e||"")),js=(t,e)=>{const s=new FileReader;return s.onload=function(){const r=s.result.split(",")[1];e("b"+(r||""))},s.readAsDataURL(t)};function Ls(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let zt;function ii(t,e){if(cr&&t.data instanceof Blob)return t.data.arrayBuffer().then(Ls).then(e);if(lr&&(t.data instanceof ArrayBuffer||ur(t.data)))return e(Ls(t.data));cs(t,!1,s=>{zt||(zt=new TextEncoder),e(zt.encode(s))})}const Ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ct=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ds.length;t++)ct[Ds.charCodeAt(t)]=t;const ai=t=>{let e=t.length*.75,s=t.length,r,n=0,i,l,c,d;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),m=new Uint8Array(h);for(r=0;r<s;r+=4)i=ct[t.charCodeAt(r)],l=ct[t.charCodeAt(r+1)],c=ct[t.charCodeAt(r+2)],d=ct[t.charCodeAt(r+3)],m[n++]=i<<2|l>>4,m[n++]=(l&15)<<4|c>>2,m[n++]=(c&3)<<6|d&63;return h},oi=typeof ArrayBuffer=="function",ls=(t,e)=>{if(typeof t!="string")return{type:"message",data:dr(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:ci(t.substring(1),e)}:Tt[s]?t.length>1?{type:Tt[s],data:t.substring(1)}:{type:Tt[s]}:Zt},ci=(t,e)=>{if(oi){const s=ai(t);return dr(s,e)}else return{base64:!0,data:t}},dr=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},hr="",li=(t,e)=>{const s=t.length,r=new Array(s);let n=0;t.forEach((i,l)=>{cs(i,!1,c=>{r[l]=c,++n===s&&e(r.join(hr))})})},ui=(t,e)=>{const s=t.split(hr),r=[];for(let n=0;n<s.length;n++){const i=ls(s[n],e);if(r.push(i),i.type==="error")break}return r};function di(){return new TransformStream({transform(t,e){ii(t,s=>{const r=s.length;let n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(s)})}})}let Ht;function Et(t){return t.reduce((e,s)=>e+s.length,0)}function St(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let r=0;for(let n=0;n<e;n++)s[n]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),s}function hi(t,e){Ht||(Ht=new TextDecoder);const s=[];let r=0,n=-1,i=!1;return new TransformStream({transform(l,c){for(s.push(l);;){if(r===0){if(Et(s)<1)break;const d=St(s,1);i=(d[0]&128)===128,n=d[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(Et(s)<2)break;const d=St(s,2);n=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),r=3}else if(r===2){if(Et(s)<8)break;const d=St(s,8),h=new DataView(d.buffer,d.byteOffset,d.length),m=h.getUint32(0);if(m>Math.pow(2,21)-1){c.enqueue(Zt);break}n=m*Math.pow(2,32)+h.getUint32(4),r=3}else{if(Et(s)<n)break;const d=St(s,n);c.enqueue(ls(i?d:Ht.decode(d),e)),r=0}if(n===0||n>t){c.enqueue(Zt);break}}}})}const fr=4;function z(t){if(t)return fi(t)}function fi(t){for(var e in z.prototype)t[e]=z.prototype[e];return t}z.prototype.on=z.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};z.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};z.prototype.off=z.prototype.removeListener=z.prototype.removeAllListeners=z.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,n=0;n<s.length;n++)if(r=s[n],r===e||r.fn===e){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+t],this};z.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(s){s=s.slice(0);for(var r=0,n=s.length;r<n;++r)s[r].apply(this,e)}return this};z.prototype.emitReserved=z.prototype.emit;z.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};z.prototype.hasListeners=function(t){return!!this.listeners(t).length};const It=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),se=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),pi="arraybuffer";function pr(t,...e){return e.reduce((s,r)=>(t.hasOwnProperty(r)&&(s[r]=t[r]),s),{})}const mi=se.setTimeout,gi=se.clearTimeout;function Bt(t,e){e.useNativeTimers?(t.setTimeoutFn=mi.bind(se),t.clearTimeoutFn=gi.bind(se)):(t.setTimeoutFn=se.setTimeout.bind(se),t.clearTimeoutFn=se.clearTimeout.bind(se))}const yi=1.33;function vi(t){return typeof t=="string"?bi(t):Math.ceil((t.byteLength||t.size)*yi)}function bi(t){let e=0,s=0;for(let r=0,n=t.length;r<n;r++)e=t.charCodeAt(r),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(r++,s+=4);return s}function mr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function wi(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function _i(t){let e={},s=t.split("&");for(let r=0,n=s.length;r<n;r++){let i=s[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class xi extends Error{constructor(e,s,r){super(e),this.description=s,this.context=r,this.type="TransportError"}}class us extends z{constructor(e){super(),this.writable=!1,Bt(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,r){return super.emitReserved("error",new xi(e,s,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=ls(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=wi(e);return s.length?"?"+s:""}}class Ei extends us{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||s()})),this.writable||(r++,this.once("drain",function(){--r||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ui(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,li(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=mr()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let gr=!1;try{gr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Si=gr;function ki(){}class Ti extends Ei{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let r=location.port;r||(r=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,s){const r=this.request({method:"POST",data:e});r.on("success",s),r.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,r)=>{this.onError("xhr poll error",s,r)}),this.pollXhr=e}}class ge extends z{constructor(e,s,r){super(),this.createRequest=e,Bt(this,r),this._opts=r,this._method=r.method||"GET",this._uri=s,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const s=pr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(s);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var n;r.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=ge.requestsCount++,ge.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ki,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ge.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ge.requestsCount=0;ge.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$s);else if(typeof addEventListener=="function"){const t="onpagehide"in se?"pagehide":"unload";addEventListener(t,$s,!1)}}function $s(){for(let t in ge.requests)ge.requests.hasOwnProperty(t)&&ge.requests[t].abort()}const Ci=function(){const t=yr({xdomain:!1});return t&&t.responseType!==null}();class Ai extends Ti{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=Ci&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ge(yr,this.uri(),e)}}function yr(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Si))return new XMLHttpRequest}catch{}if(!e)try{return new se[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Pi extends us{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,r=vr?{}:pr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const r=e[s],n=s===e.length-1;cs(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}n&&It(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=mr()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const Vt=se.WebSocket||se.MozWebSocket;class Ri extends Pi{createSocket(e,s,r){return vr?new Vt(e,s,r):s?new Vt(e,s):new Vt(e)}doWrite(e,s){this.ws.send(s)}}class Oi extends us{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=hi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(s).getReader(),n=di();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const i=()=>{r.read().then(({done:c,value:d})=>{c||(this.onPacket(d),i())}).catch(c=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const r=e[s],n=s===e.length-1;this._writer.write(r).then(()=>{n&&It(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ni={websocket:Ri,webtransport:Oi,polling:Ai},Ii=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Bi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function es(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),r=t.indexOf("]");s!=-1&&r!=-1&&(t=t.substring(0,s)+t.substring(s,r).replace(/:/g,";")+t.substring(r,t.length));let n=Ii.exec(t||""),i={},l=14;for(;l--;)i[Bi[l]]=n[l]||"";return s!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ji(i,i.path),i.queryKey=Li(i,i.query),i}function ji(t,e){const s=/\/{2,9}/g,r=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Li(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,i){n&&(s[n]=i)}),s}const ts=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ct=[];ts&&addEventListener("offline",()=>{Ct.forEach(t=>t())},!1);class Ie extends z{constructor(e,s){if(super(),this.binaryType=pi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const r=es(e);s.hostname=r.host,s.secure=r.protocol==="https"||r.protocol==="wss",s.port=r.port,r.query&&(s.query=r.query)}else s.host&&(s.hostname=es(s.host).host);Bt(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(r=>{const n=r.prototype.name;this.transports.push(n),this._transportsByName[n]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_i(this.opts.query)),ts&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ct.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=fr,s.transport=e,this.id&&(s.sid=this.id);const r=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ie.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Ie.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(s+=vi(n)),r>0&&s>this._maxPayload)return this.writeBuffer.slice(0,r);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,It(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,r){return this._sendPacket("message",e,s,r),this}send(e,s,r){return this._sendPacket("message",e,s,r),this}_sendPacket(e,s,r,n){if(typeof s=="function"&&(n=s,s=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:s,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},r=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Ie.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ts&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Ct.indexOf(this._offlineEventListener);r!==-1&&Ct.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}Ie.protocol=fr;class Di extends Ie{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),r=!1;Ie.priorWebsocketSuccess=!1;const n=()=>{r||(s.send([{type:"ping",data:"probe"}]),s.once("packet",w=>{if(!r)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Ie.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(m(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=s.name,this.emitReserved("upgradeError",k)}}))};function i(){r||(r=!0,m(),s.close(),s=null)}const l=w=>{const k=new Error("probe error: "+w);k.transport=s.name,i(),this.emitReserved("upgradeError",k)};function c(){l("transport closed")}function d(){l("socket closed")}function h(w){s&&w.name!==s.name&&i()}const m=()=>{s.removeListener("open",n),s.removeListener("error",l),s.removeListener("close",c),this.off("close",d),this.off("upgrading",h)};s.once("open",n),s.once("error",l),s.once("close",c),this.once("close",d),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&s.push(e[r]);return s}}let $i=class extends Di{constructor(e,s={}){const r=typeof e=="object"?e:s;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(n=>Ni[n]).filter(n=>!!n)),super(e,r)}};function Fi(t,e="",s){let r=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),r=es(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(s&&s.port===r.port?"":":"+r.port),r}const qi=typeof ArrayBuffer=="function",Mi=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,br=Object.prototype.toString,Ui=typeof Blob=="function"||typeof Blob<"u"&&br.call(Blob)==="[object BlobConstructor]",zi=typeof File=="function"||typeof File<"u"&&br.call(File)==="[object FileConstructor]";function ds(t){return qi&&(t instanceof ArrayBuffer||Mi(t))||Ui&&t instanceof Blob||zi&&t instanceof File}function At(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,r=t.length;s<r;s++)if(At(t[s]))return!0;return!1}if(ds(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return At(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&At(t[s]))return!0;return!1}function Hi(t){const e=[],s=t.data,r=t;return r.data=ss(s,e),r.attachments=e.length,{packet:r,buffers:e}}function ss(t,e){if(!t)return t;if(ds(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let r=0;r<t.length;r++)s[r]=ss(t[r],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=ss(t[r],e));return s}return t}function Vi(t,e){return t.data=rs(t.data,e),delete t.attachments,t}function rs(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=rs(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=rs(t[s],e));return t}const Qi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ki=5;var C;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(C||(C={}));class Yi{constructor(e){this.replacer=e}encode(e){return(e.type===C.EVENT||e.type===C.ACK)&&At(e)?this.encodeAsBinary({type:e.type===C.EVENT?C.BINARY_EVENT:C.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===C.BINARY_EVENT||e.type===C.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=Hi(e),r=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(r),n}}function Fs(t){return Object.prototype.toString.call(t)==="[object Object]"}class hs extends z{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const r=s.type===C.BINARY_EVENT;r||s.type===C.BINARY_ACK?(s.type=r?C.EVENT:C.ACK,this.reconstructor=new Wi(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(ds(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const r={type:Number(e.charAt(0))};if(C[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===C.BINARY_EVENT||r.type===C.BINARY_ACK){const i=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const l=e.substring(i,s);if(l!=Number(l)||e.charAt(s)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(e.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););r.nsp=e.substring(i,s)}else r.nsp="/";const n=e.charAt(s+1);if(n!==""&&Number(n)==n){const i=s+1;for(;++s;){const l=e.charAt(s);if(l==null||Number(l)!=l){--s;break}if(s===e.length)break}r.id=Number(e.substring(i,s+1))}if(e.charAt(++s)){const i=this.tryParse(e.substr(s));if(hs.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case C.CONNECT:return Fs(s);case C.DISCONNECT:return s===void 0;case C.CONNECT_ERROR:return typeof s=="string"||Fs(s);case C.EVENT:case C.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Qi.indexOf(s[0])===-1);case C.ACK:case C.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Wi{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=Vi(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ji=Object.freeze(Object.defineProperty({__proto__:null,Decoder:hs,Encoder:Yi,get PacketType(){return C},protocol:Ki},Symbol.toStringTag,{value:"Module"}));function ue(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Gi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wr extends z{constructor(e,s,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ue(e,"open",this.onopen.bind(this)),ue(e,"packet",this.onpacket.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var r,n,i;if(Gi.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const l={type:C.EVENT,data:s};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const m=this.ids++,w=s.pop();this._registerAckCallback(m,w),l.id=m}const c=(n=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||n===void 0?void 0:n.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(e,s){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[e]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);s.call(this,new Error("operation has timed out"))},n),l=(...c)=>{this.io.clearTimeoutFn(i),s.apply(this,c)};l.withError=!0,this.acks[e]=l}emitWithAck(e,...s){return new Promise((r,n)=>{const i=(l,c)=>l?n(l):r(c);i.withError=!0,s.push(i),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...i)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:C.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case C.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case C.EVENT:case C.BINARY_EVENT:this.onevent(e);break;case C.ACK:case C.BINARY_ACK:this.onack(e);break;case C.DISCONNECT:this.ondisconnect();break;case C.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const r of s)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let r=!1;return function(...n){r||(r=!0,s.packet({type:C.ACK,id:e,data:n}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:C.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let r=0;r<s.length;r++)if(e===s[r])return s.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let r=0;r<s.length;r++)if(e===s[r])return s.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const r of s)r.apply(this,e.data)}}}function rt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}rt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+s:t-s}return Math.min(t,this.max)|0};rt.prototype.reset=function(){this.attempts=0};rt.prototype.setMin=function(t){this.ms=t};rt.prototype.setMax=function(t){this.max=t};rt.prototype.setJitter=function(t){this.jitter=t};class ns extends z{constructor(e,s){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Bt(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((r=s.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new rt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const n=s.parser||Ji;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new $i(this.uri,this.opts);const s=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=ue(s,"open",function(){r.onopen(),e&&e()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},l=ue(s,"error",i);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),s.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(n),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ue(e,"ping",this.onping.bind(this)),ue(e,"data",this.ondata.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this)),ue(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){It(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new wr(this,e,s),this.nsps[e]=r),r}_destroy(e){const s=Object.keys(this.nsps);for(const r of s)if(this.nsps[r].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let r=0;r<s.length;r++)this.engine.write(s[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},s);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ot={};function Pt(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=Fi(t,e.path||"/socket.io"),r=s.source,n=s.id,i=s.path,l=ot[n]&&i in ot[n].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||l;let d;return c?d=new ns(r,e):(ot[n]||(ot[n]=new ns(r,e)),d=ot[n]),s.query&&!e.query&&(e.query=s.queryKey),d.socket(s.path,e)}Object.assign(Pt,{Manager:ns,Socket:wr,io:Pt,connect:Pt});let de=null;const Xi=()=>{if(!de){const t=window.location.origin;de=Pt(t,{autoConnect:!1,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,path:"/socket.io",auth:e=>{const s=ze.getState().token;e({token:s})}}),de.on("connect",()=>{}),de.on("disconnect",()=>{}),de.on("connect_error",e=>{}),de.on("force-logout",e=>{ze.getState().clearAuth(),Xt.error(e.reason||""),window.location.href="/login"})}return de},Zi=()=>{if(!ze.getState().token)return;const e=Xi();e.connected||e.connect()},ea=()=>{de!=null&&de.connected&&de.disconnect()},ta=P.lazy(()=>V(()=>import("./MainLayout-Dy_fw4o8.js"),__vite__mapDeps([0,1,2,3,4]))),sa=P.lazy(()=>V(()=>import("./LandingPage-mEjIhT9P.js"),__vite__mapDeps([5,1,2,3,4]))),ra=P.lazy(()=>V(()=>import("./PhoneLoginPage-PrH7IonW.js"),__vite__mapDeps([6,1,2,3,4]))),na=P.lazy(()=>V(()=>import("./AdminLoginPage-xC-VQXsj.js"),__vite__mapDeps([7,1,2,8,9,3,4]))),ia=P.lazy(()=>V(()=>import("./TermsOfServicePage-PfMl7j0I.js"),__vite__mapDeps([10,1,2]))),aa=P.lazy(()=>V(()=>import("./PrivacyPolicyPage-Ce1w8scB.js"),__vite__mapDeps([11,1,2]))),qs=P.lazy(()=>V(()=>import("./ProjectsPage-DR5UwTrU.js"),__vite__mapDeps([12,1,2,3,4]))),oa=P.lazy(()=>V(()=>import("./EpisodesPage-BtQ51RCq.js"),__vite__mapDeps([13,1,2,3,4]))),Qt=P.lazy(()=>V(()=>import("./WorkflowEditorPage-B2OHuWPO.js"),__vite__mapDeps([14,1,2,3,15,9,16,4]))),ca=P.lazy(()=>V(()=>import("./EpisodeDetailPage-D9g3Q8vw.js"),__vite__mapDeps([17,1,2,3,4]))),la=P.lazy(()=>V(()=>import("./AssetsPage-D3881FLB.js"),__vite__mapDeps([18,1,2,3,4]))),ua=P.lazy(()=>V(()=>import("./AssetLibraryDetailPage-BP60QT6g.js"),__vite__mapDeps([19,1,2,3,4]))),da=P.lazy(()=>V(()=>import("./SoraCharactersPage-CQOXojm0.js"),__vite__mapDeps([20,1,2,3,4]))),ha=P.lazy(()=>V(()=>import("./SettingsPage-n5JbFrLD.js"),__vite__mapDeps([21,1,2,3,4]))),fa=P.lazy(()=>V(()=>import("./AdminPage-3Rc_WxZp.js"),__vite__mapDeps([22,1,2,9,15,8,3,4]))),pa=P.lazy(()=>V(()=>import("./RecycleBinPage-BfD1H0hR.js"),__vite__mapDeps([23,1,2,3,4]))),ma=P.lazy(()=>V(()=>import("./RechargePage-B5ORfMD-.js"),__vite__mapDeps([24,1,2,3,4])));function ga(){const{isAuthenticated:t,user:e,token:s,clearAuth:r,updateUser:n}=ze(),[i,l]=P.useState(!0);return P.useEffect(()=>{(async()=>{if(!s){l(!1);return}try{const d=await a.get("/auth/me");d.user&&(n(d.user),Zi())}catch{r(),ea()}finally{l(!1)}})()},[]),i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:y.jsxs("div",{className:"flex flex-col items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 border-3 border-neutral-500/20 border-t-neutral-500 rounded-full animate-spin"}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"..."})]})}):y.jsx(P.Suspense,{fallback:y.jsx("div",{className:"p-6 text-center text-gray-400",children:"..."}),children:y.jsxs(jr,{children:[y.jsx(U,{path:"/",element:t?y.jsx(Ut,{to:"/quick",replace:!0}):y.jsx(sa,{})}),y.jsx(U,{path:"/login",element:y.jsx(ra,{})}),y.jsx(U,{path:"/frame25-login",element:y.jsx(na,{})}),y.jsx(U,{path:"/terms",element:y.jsx(ia,{})}),y.jsx(U,{path:"/privacy",element:y.jsx(aa,{})}),y.jsxs(U,{element:t?y.jsx(ta,{}):y.jsx(Ut,{to:"/",replace:!0}),children:[y.jsx(U,{path:"/quick",element:y.jsx(qs,{})}),y.jsx(U,{path:"/drama",element:y.jsx(qs,{})}),y.jsx(U,{path:"/projects/:projectId/episodes",element:y.jsx(oa,{})}),y.jsx(U,{path:"/projects/:projectId/episodes/:episodeId",element:y.jsx(ca,{})}),y.jsx(U,{path:"/projects/:projectId/episodes/:episodeId/workflow",element:y.jsx(Qt,{})}),y.jsx(U,{path:"/projects/:id/workflow",element:y.jsx(Qt,{})}),y.jsx(U,{path:"/workflow/:workflowId",element:y.jsx(Qt,{})}),y.jsx(U,{path:"/assets",element:y.jsx(la,{})}),y.jsx(U,{path:"/assets/sora-characters",element:y.jsx(da,{})}),y.jsx(U,{path:"/assets/:id",element:y.jsx(ua,{})}),y.jsx(U,{path:"/recycle-bin",element:y.jsx(pa,{})}),y.jsx(U,{path:"/settings",element:y.jsx(ha,{})}),y.jsx(U,{path:"/recharge",element:y.jsx(ma,{})}),((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="INTERNAL")&&y.jsx(U,{path:"/frame25/*",element:y.jsx(fa,{})})]}),y.jsx(U,{path:"*",element:y.jsx(Ut,{to:"/",replace:!0})})]})})}const ya=new hn({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});let Ms=!1;const va=()=>{Ms||(Ms=!0,Lr.createRoot(document.getElementById("root")).render(y.jsx(Un,{children:y.jsx(zn,{children:y.jsx(pn,{client:ya,children:y.jsxs(Dr,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[y.jsx(ga,{}),y.jsx(Mn,{position:"top-center",richColors:!0})]})})})})),setTimeout(()=>{const t=document.getElementById("loading-splash");t&&(t.classList.add("hidden"),setTimeout(()=>t.remove(),300))},100))};va();export{V as _,Ea as a,a as b,Xt as c,M as d,Sa as e,ka as f,Pt as l,ze as u};
